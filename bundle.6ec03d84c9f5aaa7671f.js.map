{"version":3,"file":"bundle.6ec03d84c9f5aaa7671f.js","mappings":"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IxBC,aKzIwB,mCL0IxBC,mBM1IwB,qGN2IxBC,MO3IwB,otMP4IxBC,sBQ5IwB,suBR6IxBC,yBS7IwB,2fT8IxBC,8BU9IwB,kHV+IxBC,4BW/IwB,iEXgJxBC,uBYhJwB,oEZiJxBC,eajJwB,sDbkJxBC,oBclJwB,iDdmJxBC,kBenJwB,sFfoJxBC,agBpJwB,0MhBqJxBC,OiBrJwB,42EjBsJxBC,4BkBtJwB,2wFlBuJxBC,qBmBvJwB,6enBwJxBC,4BoBxJwB,wIpByJxBC,uBqBzJwB,kJrB0JxBC,qBsB1JwB,wLtB2JxBC,0BuB3JwB,iEvB4JxBC,mBwB5JwB,kDxB6JxBC,wByB7JwB,6sEzB8JxBC,gB0B9JwB,uoC1B+JxBC,4B2B/JwB,6M3BgKxBC,qB4BhKwB,iR5BiKxBC,mB6BjKwB,oP7BkKxBC,8B8BlKwB,y9D9BmKxBC,c+BnKwB,ygB/BoKxBC,WgCpKwB,kDhCqKxBC,gBiCrKwB,kDjCsKxBC,akCtKwB,+OlCuKxBC,kBmCvKwB,gLnCwKxBC,0BoCxKwB,uUpCyKxBC,kBqCzKwB,0KrC0KxBC,uBsC1KwB,2FtC2KxBC,sBuC3KwB,u2EvC4KxBC,kBwC5KwB,6jHxC6KxBC,qByC7KwB,gEzC8KxBC,0B0C9KwB,q4B1C+KxBC,sB2C/KwB,sL3CgLxBC,2B4ChLwB,gqC5CiLxBC,yB6CjLwB,yrC7CkLxBC,8B8ClLwB,ozJ9CmLxBC,sB+CnLwB,00G/CoLxBC,qBgDpLwB,wxBhDqLxBC,oBiDrLwB,uPjDsLxBC,qBkDtLwB,6JlDuLxBC,0BmDvLwB,yJnDwLxBC,wBoDxLwB,kKpDyLxBC,mBqDzLwB,sTrD0LxBC,asD1LwB,+HtD2LxBC,kBuD3LwB,iDvD4LxBC,sBwD5LwB,wSxD6LxBC,2ByD7LwB,2LzD8LxBC,sB0D9LwB,wJ1D+LxBC,2B2D/LwB,mE3DgMxBC,mB4DhMwB,2R5DiMxBC,wB6DjMwB,sM7DkMxBC,mB8DlMwB,sgB9DmMxBC,sB+DnMwB,ktB/DoMxBC,qBgEpMwB,8jBhEqMxBC,wBiErMwB,wxBjEsMxBC,gCkEtMwB,iElEuMxBC,+BmEvMwB,sUnEwMxBC,wBoExMwB,yQpEyMxBC,QqEzMwB,yxCrE0MxBC,6BsE1MwB,wEtE2MxBC,euE3MwB,+LvE4MxBC,mBwE5MwB,0ExE6MxBC,wByE7MwB,8QzE8MxBC,sB0E9MwB,wJ1E+MxBC,2B2E/MwB,mE3EgNxBC,wB4EhNwB,oxN5EiNxBC,sB6EjNwB,wiC7EkNxBC,iB8ElNwB,umC9EmNxBC,yB+EnNwB,0sC/EoNxBC,gBgFpNwB,oMhFqNxBC,qBiFrNwB,4vBjFsNxBC,gBkFtNwB,4TlFuNxBC,kBmFvNwB,uYnFwNxBC,qBoFxNwB,yKpFyNxBC,0BqFzNwB,iErF0NxBC,qBsF1NwB,qFtF2NxBC,0BuF3NwB,4gCvF4NxBC,yBwF5NwB,2FxF6NxBC,8ByF7NwB,yEzF8NxBC,iB0F9NwB,8E1F+NxBC,e2F/NwB,wH3FgOxBC,U4FhOwB,0D5FiOxBC,kB6FjOwB,4E7FkOxBC,gB8FlOwB,yH9FmOxBC,W+FnOwB,6F/FoOxBC,gBgGpOwB,8OhGsOxBC,gBiGtOwB,kMjGuOxBC,gBkGvOwB,gIlGwOxBC,UmGxOwB,iUnGyOxBC,UoGzOwB,6MpG0OxBC,WqG1OwB,8wBrG2OxBC,WsG3OwB,6rBtG4OxBC,kBuG5OwB,6nBvG6OxBC,kBwG7OwB,yqBxG8OxBC,cyG9OwB,kUzG+OxBC,c0G/OwB,iL1GgPxBC,gB2GhPwB,ytB3GiPxBC,gB4GjPwB,ogB5GkPxBC,e6GlPwB,gjD7GmPxBC,e8GnPwB,8zB9GoPxBC,iB+GpPwB,irE/GqPxBC,iBgHrPwB,8kChHsPxBC,gBiHtPwB,o4CjHuPxBC,gBkHvPwB,y6BlHwPxBC,cmHxPwB,6pDnHyPxBC,coHzPwB,ujCpH0PxBC,eqH1PwB,47DrH2PxBC,esH3PwB,inCtH4PxBC,kBuH5PwB,o7FvH6PxBC,kBwH7PwB,owCxH8PxBC,YyH9PwB,mrBzH+PxBC,Y0H/PwB,4rC1HgQxBC,Y2HhQwB,msB3HiQxBC,Y4HjQwB,ioB5HkQxBC,Y6HlQwB,2Y7HmQxBC,Y8HnQwB,gY9HoQxBC,Y+HpQwB,2qB/HqQxBC,YgIrQwB,89BCQnBC,GAAc,CAEnBhH,OAAQ,CAEPiH,QAAS,CAAE57C,MAAO,IAA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","sources":["webpack:///./node_modules/three/src/math/MathUtils.js","webpack:///./node_modules/three/src/math/Quaternion.js","webpack:///./node_modules/three/src/math/Vector3.js","webpack:///./node_modules/three/src/math/Matrix4.js","webpack:///./node_modules/three/src/core/EventDispatcher.js","webpack:///./node_modules/three/src/math/Euler.js","webpack:///./node_modules/three/src/core/Layers.js","webpack:///./node_modules/three/src/math/Matrix3.js","webpack:///./node_modules/three/src/core/Object3D.js","webpack:///./node_modules/three/src/scenes/Scene.js","webpack:///./node_modules/three/src/math/Color.js","webpack:///./node_modules/three/src/lights/Light.js","webpack:///./node_modules/three/src/math/Vector2.js","webpack:///./node_modules/three/src/math/Vector4.js","webpack:///./node_modules/three/src/math/Box3.js","webpack:///./node_modules/three/src/math/Sphere.js","webpack:///./node_modules/three/src/math/Plane.js","webpack:///./node_modules/three/src/math/Frustum.js","webpack:///./node_modules/three/src/lights/LightShadow.js","webpack:///./node_modules/three/src/cameras/Camera.js","webpack:///./node_modules/three/src/cameras/PerspectiveCamera.js","webpack:///./node_modules/three/src/lights/PointLightShadow.js","webpack:///./node_modules/three/src/lights/PointLight.js","webpack:///./node_modules/three/src/constants.js","webpack:///./node_modules/three/src/extras/ImageUtils.js","webpack:///./node_modules/three/src/textures/Texture.js","webpack:///./node_modules/three/src/textures/DataTexture.js","webpack:///./node_modules/three/src/renderers/webgl/WebGLAnimation.js","webpack:///./node_modules/three/src/renderers/webgl/WebGLAttributes.js","webpack:///./node_modules/three/src/core/BufferAttribute.js","webpack:///./node_modules/three/src/utils.js","webpack:///./node_modules/three/src/core/BufferGeometry.js","webpack:///./node_modules/three/src/geometries/BoxGeometry.js","webpack:///./node_modules/three/src/geometries/PlaneGeometry.js","webpack:///./node_modules/three/src/materials/Material.js","webpack:///./node_modules/three/src/renderers/shaders/UniformsUtils.js","webpack:///./node_modules/three/src/materials/ShaderMaterial.js","webpack:///./node_modules/three/src/renderers/shaders/ShaderChunk/default_vertex.glsl.js","webpack:///./node_modules/three/src/renderers/shaders/ShaderChunk/default_fragment.glsl.js","webpack:///./node_modules/three/src/math/Ray.js","webpack:///./node_modules/three/src/math/Triangle.js","webpack:///./node_modules/three/src/materials/MeshBasicMaterial.js","webpack:///./node_modules/three/src/objects/Mesh.js","webpack:///./node_modules/three/src/renderers/shaders/ShaderChunk/alphamap_fragment.glsl.js","webpack:///./node_modules/three/src/renderers/shaders/ShaderChunk.js","webpack:///./node_modules/three/src/renderers/shaders/ShaderChunk/alphamap_pars_fragment.glsl.js","webpack:///./node_modules/three/src/renderers/shaders/ShaderChunk/alphatest_fragment.glsl.js","webpack:///./node_modules/three/src/renderers/shaders/ShaderChunk/aomap_fragment.glsl.js","webpack:///./node_modules/three/src/renderers/shaders/ShaderChunk/aomap_pars_fragment.glsl.js","webpack:///./node_modules/three/src/renderers/shaders/ShaderChunk/begin_vertex.glsl.js","webpack:///./node_modules/three/src/renderers/shaders/ShaderChunk/beginnormal_vertex.glsl.js","webpack:///./node_modules/three/src/renderers/shaders/ShaderChunk/bsdfs.glsl.js","webpack:///./node_modules/three/src/renderers/shaders/ShaderChunk/bumpmap_pars_fragment.glsl.js","webpack:///./node_modules/three/src/renderers/shaders/ShaderChunk/clipping_planes_fragment.glsl.js","webpack:///./node_modules/three/src/renderers/shaders/ShaderChunk/clipping_planes_pars_fragment.glsl.js","webpack:///./node_modules/three/src/renderers/shaders/ShaderChunk/clipping_planes_pars_vertex.glsl.js","webpack:///./node_modules/three/src/renderers/shaders/ShaderChunk/clipping_planes_vertex.glsl.js","webpack:///./node_modules/three/src/renderers/shaders/ShaderChunk/color_fragment.glsl.js","webpack:///./node_modules/three/src/renderers/shaders/ShaderChunk/color_pars_fragment.glsl.js","webpack:///./node_modules/three/src/renderers/shaders/ShaderChunk/color_pars_vertex.glsl.js","webpack:///./node_modules/three/src/renderers/shaders/ShaderChunk/color_vertex.glsl.js","webpack:///./node_modules/three/src/renderers/shaders/ShaderChunk/common.glsl.js","webpack:///./node_modules/three/src/renderers/shaders/ShaderChunk/cube_uv_reflection_fragment.glsl.js","webpack:///./node_modules/three/src/renderers/shaders/ShaderChunk/defaultnormal_vertex.glsl.js","webpack:///./node_modules/three/src/renderers/shaders/ShaderChunk/displacementmap_pars_vertex.glsl.js","webpack:///./node_modules/three/src/renderers/shaders/ShaderChunk/displacementmap_vertex.glsl.js","webpack:///./node_modules/three/src/renderers/shaders/ShaderChunk/emissivemap_fragment.glsl.js","webpack:///./node_modules/three/src/renderers/shaders/ShaderChunk/emissivemap_pars_fragment.glsl.js","webpack:///./node_modules/three/src/renderers/shaders/ShaderChunk/encodings_fragment.glsl.js","webpack:///./node_modules/three/src/renderers/shaders/ShaderChunk/encodings_pars_fragment.glsl.js","webpack:///./node_modules/three/src/renderers/shaders/ShaderChunk/envmap_fragment.glsl.js","webpack:///./node_modules/three/src/renderers/shaders/ShaderChunk/envmap_common_pars_fragment.glsl.js","webpack:///./node_modules/three/src/renderers/shaders/ShaderChunk/envmap_pars_fragment.glsl.js","webpack:///./node_modules/three/src/renderers/shaders/ShaderChunk/envmap_pars_vertex.glsl.js","webpack:///./node_modules/three/src/renderers/shaders/ShaderChunk/envmap_physical_pars_fragment.glsl.js","webpack:///./node_modules/three/src/renderers/shaders/ShaderChunk/envmap_vertex.glsl.js","webpack:///./node_modules/three/src/renderers/shaders/ShaderChunk/fog_vertex.glsl.js","webpack:///./node_modules/three/src/renderers/shaders/ShaderChunk/fog_pars_vertex.glsl.js","webpack:///./node_modules/three/src/renderers/shaders/ShaderChunk/fog_fragment.glsl.js","webpack:///./node_modules/three/src/renderers/shaders/ShaderChunk/fog_pars_fragment.glsl.js","webpack:///./node_modules/three/src/renderers/shaders/ShaderChunk/gradientmap_pars_fragment.glsl.js","webpack:///./node_modules/three/src/renderers/shaders/ShaderChunk/lightmap_fragment.glsl.js","webpack:///./node_modules/three/src/renderers/shaders/ShaderChunk/lightmap_pars_fragment.glsl.js","webpack:///./node_modules/three/src/renderers/shaders/ShaderChunk/lights_lambert_vertex.glsl.js","webpack:///./node_modules/three/src/renderers/shaders/ShaderChunk/lights_pars_begin.glsl.js","webpack:///./node_modules/three/src/renderers/shaders/ShaderChunk/lights_toon_fragment.glsl.js","webpack:///./node_modules/three/src/renderers/shaders/ShaderChunk/lights_toon_pars_fragment.glsl.js","webpack:///./node_modules/three/src/renderers/shaders/ShaderChunk/lights_phong_fragment.glsl.js","webpack:///./node_modules/three/src/renderers/shaders/ShaderChunk/lights_phong_pars_fragment.glsl.js","webpack:///./node_modules/three/src/renderers/shaders/ShaderChunk/lights_physical_fragment.glsl.js","webpack:///./node_modules/three/src/renderers/shaders/ShaderChunk/lights_physical_pars_fragment.glsl.js","webpack:///./node_modules/three/src/renderers/shaders/ShaderChunk/lights_fragment_begin.glsl.js","webpack:///./node_modules/three/src/renderers/shaders/ShaderChunk/lights_fragment_maps.glsl.js","webpack:///./node_modules/three/src/renderers/shaders/ShaderChunk/lights_fragment_end.glsl.js","webpack:///./node_modules/three/src/renderers/shaders/ShaderChunk/logdepthbuf_fragment.glsl.js","webpack:///./node_modules/three/src/renderers/shaders/ShaderChunk/logdepthbuf_pars_fragment.glsl.js","webpack:///./node_modules/three/src/renderers/shaders/ShaderChunk/logdepthbuf_pars_vertex.glsl.js","webpack:///./node_modules/three/src/renderers/shaders/ShaderChunk/logdepthbuf_vertex.glsl.js","webpack:///./node_modules/three/src/renderers/shaders/ShaderChunk/map_fragment.glsl.js","webpack:///./node_modules/three/src/renderers/shaders/ShaderChunk/map_pars_fragment.glsl.js","webpack:///./node_modules/three/src/renderers/shaders/ShaderChunk/map_particle_fragment.glsl.js","webpack:///./node_modules/three/src/renderers/shaders/ShaderChunk/map_particle_pars_fragment.glsl.js","webpack:///./node_modules/three/src/renderers/shaders/ShaderChunk/metalnessmap_fragment.glsl.js","webpack:///./node_modules/three/src/renderers/shaders/ShaderChunk/metalnessmap_pars_fragment.glsl.js","webpack:///./node_modules/three/src/renderers/shaders/ShaderChunk/morphnormal_vertex.glsl.js","webpack:///./node_modules/three/src/renderers/shaders/ShaderChunk/morphtarget_pars_vertex.glsl.js","webpack:///./node_modules/three/src/renderers/shaders/ShaderChunk/morphtarget_vertex.glsl.js","webpack:///./node_modules/three/src/renderers/shaders/ShaderChunk/normal_fragment_begin.glsl.js","webpack:///./node_modules/three/src/renderers/shaders/ShaderChunk/normal_fragment_maps.glsl.js","webpack:///./node_modules/three/src/renderers/shaders/ShaderChunk/normalmap_pars_fragment.glsl.js","webpack:///./node_modules/three/src/renderers/shaders/ShaderChunk/clearcoat_normal_fragment_begin.glsl.js","webpack:///./node_modules/three/src/renderers/shaders/ShaderChunk/clearcoat_normal_fragment_maps.glsl.js","webpack:///./node_modules/three/src/renderers/shaders/ShaderChunk/clearcoat_pars_fragment.glsl.js","webpack:///./node_modules/three/src/renderers/shaders/ShaderChunk/packing.glsl.js","webpack:///./node_modules/three/src/renderers/shaders/ShaderChunk/premultiplied_alpha_fragment.glsl.js","webpack:///./node_modules/three/src/renderers/shaders/ShaderChunk/project_vertex.glsl.js","webpack:///./node_modules/three/src/renderers/shaders/ShaderChunk/dithering_fragment.glsl.js","webpack:///./node_modules/three/src/renderers/shaders/ShaderChunk/dithering_pars_fragment.glsl.js","webpack:///./node_modules/three/src/renderers/shaders/ShaderChunk/roughnessmap_fragment.glsl.js","webpack:///./node_modules/three/src/renderers/shaders/ShaderChunk/roughnessmap_pars_fragment.glsl.js","webpack:///./node_modules/three/src/renderers/shaders/ShaderChunk/shadowmap_pars_fragment.glsl.js","webpack:///./node_modules/three/src/renderers/shaders/ShaderChunk/shadowmap_pars_vertex.glsl.js","webpack:///./node_modules/three/src/renderers/shaders/ShaderChunk/shadowmap_vertex.glsl.js","webpack:///./node_modules/three/src/renderers/shaders/ShaderChunk/shadowmask_pars_fragment.glsl.js","webpack:///./node_modules/three/src/renderers/shaders/ShaderChunk/skinbase_vertex.glsl.js","webpack:///./node_modules/three/src/renderers/shaders/ShaderChunk/skinning_pars_vertex.glsl.js","webpack:///./node_modules/three/src/renderers/shaders/ShaderChunk/skinning_vertex.glsl.js","webpack:///./node_modules/three/src/renderers/shaders/ShaderChunk/skinnormal_vertex.glsl.js","webpack:///./node_modules/three/src/renderers/shaders/ShaderChunk/specularmap_fragment.glsl.js","webpack:///./node_modules/three/src/renderers/shaders/ShaderChunk/specularmap_pars_fragment.glsl.js","webpack:///./node_modules/three/src/renderers/shaders/ShaderChunk/tonemapping_fragment.glsl.js","webpack:///./node_modules/three/src/renderers/shaders/ShaderChunk/tonemapping_pars_fragment.glsl.js","webpack:///./node_modules/three/src/renderers/shaders/ShaderChunk/transmissionmap_fragment.glsl.js","webpack:///./node_modules/three/src/renderers/shaders/ShaderChunk/transmissionmap_pars_fragment.glsl.js","webpack:///./node_modules/three/src/renderers/shaders/ShaderChunk/uv_pars_fragment.glsl.js","webpack:///./node_modules/three/src/renderers/shaders/ShaderChunk/uv_pars_vertex.glsl.js","webpack:///./node_modules/three/src/renderers/shaders/ShaderChunk/uv_vertex.glsl.js","webpack:///./node_modules/three/src/renderers/shaders/ShaderChunk/uv2_pars_fragment.glsl.js","webpack:///./node_modules/three/src/renderers/shaders/ShaderChunk/uv2_pars_vertex.glsl.js","webpack:///./node_modules/three/src/renderers/shaders/ShaderChunk/uv2_vertex.glsl.js","webpack:///./node_modules/three/src/renderers/shaders/ShaderChunk/worldpos_vertex.glsl.js","webpack:///./node_modules/three/src/renderers/shaders/ShaderLib/background_frag.glsl.js","webpack:///./node_modules/three/src/renderers/shaders/ShaderLib/background_vert.glsl.js","webpack:///./node_modules/three/src/renderers/shaders/ShaderLib/cube_frag.glsl.js","webpack:///./node_modules/three/src/renderers/shaders/ShaderLib/cube_vert.glsl.js","webpack:///./node_modules/three/src/renderers/shaders/ShaderLib/depth_frag.glsl.js","webpack:///./node_modules/three/src/renderers/shaders/ShaderLib/depth_vert.glsl.js","webpack:///./node_modules/three/src/renderers/shaders/ShaderLib/distanceRGBA_frag.glsl.js","webpack:///./node_modules/three/src/renderers/shaders/ShaderLib/distanceRGBA_vert.glsl.js","webpack:///./node_modules/three/src/renderers/shaders/ShaderLib/equirect_frag.glsl.js","webpack:///./node_modules/three/src/renderers/shaders/ShaderLib/equirect_vert.glsl.js","webpack:///./node_modules/three/src/renderers/shaders/ShaderLib/linedashed_frag.glsl.js","webpack:///./node_modules/three/src/renderers/shaders/ShaderLib/linedashed_vert.glsl.js","webpack:///./node_modules/three/src/renderers/shaders/ShaderLib/meshbasic_frag.glsl.js","webpack:///./node_modules/three/src/renderers/shaders/ShaderLib/meshbasic_vert.glsl.js","webpack:///./node_modules/three/src/renderers/shaders/ShaderLib/meshlambert_frag.glsl.js","webpack:///./node_modules/three/src/renderers/shaders/ShaderLib/meshlambert_vert.glsl.js","webpack:///./node_modules/three/src/renderers/shaders/ShaderLib/meshmatcap_frag.glsl.js","webpack:///./node_modules/three/src/renderers/shaders/ShaderLib/meshmatcap_vert.glsl.js","webpack:///./node_modules/three/src/renderers/shaders/ShaderLib/meshtoon_frag.glsl.js","webpack:///./node_modules/three/src/renderers/shaders/ShaderLib/meshtoon_vert.glsl.js","webpack:///./node_modules/three/src/renderers/shaders/ShaderLib/meshphong_frag.glsl.js","webpack:///./node_modules/three/src/renderers/shaders/ShaderLib/meshphong_vert.glsl.js","webpack:///./node_modules/three/src/renderers/shaders/ShaderLib/meshphysical_frag.glsl.js","webpack:///./node_modules/three/src/renderers/shaders/ShaderLib/meshphysical_vert.glsl.js","webpack:///./node_modules/three/src/renderers/shaders/ShaderLib/normal_frag.glsl.js","webpack:///./node_modules/three/src/renderers/shaders/ShaderLib/normal_vert.glsl.js","webpack:///./node_modules/three/src/renderers/shaders/ShaderLib/points_frag.glsl.js","webpack:///./node_modules/three/src/renderers/shaders/ShaderLib/points_vert.glsl.js","webpack:///./node_modules/three/src/renderers/shaders/ShaderLib/shadow_frag.glsl.js","webpack:///./node_modules/three/src/renderers/shaders/ShaderLib/shadow_vert.glsl.js","webpack:///./node_modules/three/src/renderers/shaders/ShaderLib/sprite_frag.glsl.js","webpack:///./node_modules/three/src/renderers/shaders/ShaderLib/sprite_vert.glsl.js","webpack:///./node_modules/three/src/renderers/shaders/UniformsLib.js","webpack:///./node_modules/three/src/renderers/shaders/ShaderLib.js","webpack:///./node_modules/three/src/renderers/webgl/WebGLBackground.js","webpack:///./node_modules/three/src/renderers/webgl/WebGLBindingStates.js","webpack:///./node_modules/three/src/renderers/webgl/WebGLBufferRenderer.js","webpack:///./node_modules/three/src/renderers/webgl/WebGLCapabilities.js","webpack:///./node_modules/three/src/renderers/webgl/WebGLClipping.js","webpack:///./node_modules/three/src/renderers/WebGLRenderTarget.js","webpack:///./node_modules/three/src/cameras/CubeCamera.js","webpack:///./node_modules/three/src/textures/CubeTexture.js","webpack:///./node_modules/three/src/renderers/WebGLCubeRenderTarget.js","webpack:///./node_modules/three/src/renderers/webgl/WebGLCubeMaps.js","webpack:///./node_modules/three/src/renderers/webgl/WebGLExtensions.js","webpack:///./node_modules/three/src/renderers/webgl/WebGLGeometries.js","webpack:///./node_modules/three/src/renderers/webgl/WebGLIndexedBufferRenderer.js","webpack:///./node_modules/three/src/renderers/webgl/WebGLInfo.js","webpack:///./node_modules/three/src/renderers/webgl/WebGLMorphtargets.js","webpack:///./node_modules/three/src/renderers/webgl/WebGLObjects.js","webpack:///./node_modules/three/src/textures/DataTexture2DArray.js","webpack:///./node_modules/three/src/textures/DataTexture3D.js","webpack:///./node_modules/three/src/renderers/webgl/WebGLUniforms.js","webpack:///./node_modules/three/src/renderers/webgl/WebGLShader.js","webpack:///./node_modules/three/src/renderers/webgl/WebGLProgram.js","webpack:///./node_modules/three/src/renderers/webgl/WebGLPrograms.js","webpack:///./node_modules/three/src/renderers/webgl/WebGLProperties.js","webpack:///./node_modules/three/src/renderers/webgl/WebGLRenderLists.js","webpack:///./node_modules/three/src/renderers/webgl/WebGLLights.js","webpack:///./node_modules/three/src/renderers/webgl/WebGLRenderStates.js","webpack:///./node_modules/three/src/materials/MeshDepthMaterial.js","webpack:///./node_modules/three/src/materials/MeshDistanceMaterial.js","webpack:///./node_modules/three/src/renderers/webgl/WebGLShadowMap.js","webpack:///./node_modules/three/src/renderers/shaders/ShaderLib/vsm_vert.glsl.js","webpack:///./node_modules/three/src/renderers/shaders/ShaderLib/vsm_frag.glsl.js","webpack:///./node_modules/three/src/renderers/webgl/WebGLState.js","webpack:///./node_modules/three/src/renderers/webgl/WebGLTextures.js","webpack:///./node_modules/three/src/renderers/webgl/WebGLUtils.js","webpack:///./node_modules/three/src/cameras/ArrayCamera.js","webpack:///./node_modules/three/src/objects/Group.js","webpack:///./node_modules/three/src/renderers/webxr/WebXRController.js","webpack:///./node_modules/three/src/renderers/webxr/WebXRManager.js","webpack:///./node_modules/three/src/renderers/webgl/WebGLMaterials.js","webpack:///./node_modules/three/src/math/Spherical.js","webpack:///./node_modules/three/examples/jsm/controls/OrbitControls.js","webpack:///./node_modules/dat.gui/build/dat.gui.module.js","webpack:///./node_modules/three/src/core/Clock.js","webpack:///./node_modules/three/src/cameras/OrthographicCamera.js","webpack:///./node_modules/three/examples/jsm/shaders/CopyShader.js","webpack:///./node_modules/three/examples/jsm/postprocessing/Pass.js","webpack:///./node_modules/three/examples/jsm/postprocessing/ShaderPass.js","webpack:///./node_modules/three/examples/jsm/postprocessing/MaskPass.js","webpack:///./node_modules/three/examples/jsm/postprocessing/EffectComposer.js","webpack:///./node_modules/three/examples/jsm/postprocessing/RenderPass.js","webpack:///./node_modules/three/examples/jsm/shaders/LuminosityHighPassShader.js","webpack:///./node_modules/three/examples/jsm/postprocessing/UnrealBloomPass.js","webpack:///./node_modules/three/examples/jsm/shaders/AfterimageShader.js","webpack:///./node_modules/three/examples/jsm/postprocessing/AfterimagePass.js","webpack:///./node_modules/three/src/loaders/Cache.js","webpack:///./node_modules/three/src/loaders/LoadingManager.js","webpack:///./node_modules/three/src/loaders/Loader.js","webpack:///./node_modules/three/src/loaders/ImageLoader.js","webpack:///./node_modules/three/src/loaders/TextureLoader.js","webpack:///./node_modules/three/src/materials/PointsMaterial.js","webpack:///./node_modules/three/src/objects/Points.js","webpack:///./src/volParts/index.js","webpack:///./src/script.js","webpack:///./node_modules/three/src/renderers/WebGLRenderer.js","webpack:///./src/volParts/parts.vert.glsl","webpack:///./src/volParts/parts.frag.glsl"],"sourcesContent":["const _lut = [];\n\nfor ( let i = 0; i < 256; i ++ ) {\n\n\t_lut[ i ] = ( i < 16 ? '0' : '' ) + ( i ).toString( 16 );\n\n}\n\nlet _seed = 1234567;\n\nconst MathUtils = {\n\n\tDEG2RAD: Math.PI / 180,\n\tRAD2DEG: 180 / Math.PI,\n\n\tgenerateUUID: function () {\n\n\t\t// http://stackoverflow.com/questions/105034/how-to-create-a-guid-uuid-in-javascript/21963136#21963136\n\n\t\tconst d0 = Math.random() * 0xffffffff | 0;\n\t\tconst d1 = Math.random() * 0xffffffff | 0;\n\t\tconst d2 = Math.random() * 0xffffffff | 0;\n\t\tconst d3 = Math.random() * 0xffffffff | 0;\n\t\tconst uuid = _lut[ d0 & 0xff ] + _lut[ d0 >> 8 & 0xff ] + _lut[ d0 >> 16 & 0xff ] + _lut[ d0 >> 24 & 0xff ] + '-' +\n\t\t\t_lut[ d1 & 0xff ] + _lut[ d1 >> 8 & 0xff ] + '-' + _lut[ d1 >> 16 & 0x0f | 0x40 ] + _lut[ d1 >> 24 & 0xff ] + '-' +\n\t\t\t_lut[ d2 & 0x3f | 0x80 ] + _lut[ d2 >> 8 & 0xff ] + '-' + _lut[ d2 >> 16 & 0xff ] + _lut[ d2 >> 24 & 0xff ] +\n\t\t\t_lut[ d3 & 0xff ] + _lut[ d3 >> 8 & 0xff ] + _lut[ d3 >> 16 & 0xff ] + _lut[ d3 >> 24 & 0xff ];\n\n\t\t// .toUpperCase() here flattens concatenated strings to save heap memory space.\n\t\treturn uuid.toUpperCase();\n\n\t},\n\n\tclamp: function ( value, min, max ) {\n\n\t\treturn Math.max( min, Math.min( max, value ) );\n\n\t},\n\n\t// compute euclidian modulo of m % n\n\t// https://en.wikipedia.org/wiki/Modulo_operation\n\n\teuclideanModulo: function ( n, m ) {\n\n\t\treturn ( ( n % m ) + m ) % m;\n\n\t},\n\n\t// Linear mapping from range <a1, a2> to range <b1, b2>\n\n\tmapLinear: function ( x, a1, a2, b1, b2 ) {\n\n\t\treturn b1 + ( x - a1 ) * ( b2 - b1 ) / ( a2 - a1 );\n\n\t},\n\n\t// https://en.wikipedia.org/wiki/Linear_interpolation\n\n\tlerp: function ( x, y, t ) {\n\n\t\treturn ( 1 - t ) * x + t * y;\n\n\t},\n\n\t// http://www.rorydriscoll.com/2016/03/07/frame-rate-independent-damping-using-lerp/\n\n\tdamp: function ( x, y, lambda, dt ) {\n\n\t\treturn MathUtils.lerp( x, y, 1 - Math.exp( - lambda * dt ) );\n\n\t},\n\n\t// https://www.desmos.com/calculator/vcsjnyz7x4\n\n\tpingpong: function ( x, length = 1 ) {\n\n\t\treturn length - Math.abs( MathUtils.euclideanModulo( x, length * 2 ) - length );\n\n\t},\n\n\t// http://en.wikipedia.org/wiki/Smoothstep\n\n\tsmoothstep: function ( x, min, max ) {\n\n\t\tif ( x <= min ) return 0;\n\t\tif ( x >= max ) return 1;\n\n\t\tx = ( x - min ) / ( max - min );\n\n\t\treturn x * x * ( 3 - 2 * x );\n\n\t},\n\n\tsmootherstep: function ( x, min, max ) {\n\n\t\tif ( x <= min ) return 0;\n\t\tif ( x >= max ) return 1;\n\n\t\tx = ( x - min ) / ( max - min );\n\n\t\treturn x * x * x * ( x * ( x * 6 - 15 ) + 10 );\n\n\t},\n\n\t// Random integer from <low, high> interval\n\n\trandInt: function ( low, high ) {\n\n\t\treturn low + Math.floor( Math.random() * ( high - low + 1 ) );\n\n\t},\n\n\t// Random float from <low, high> interval\n\n\trandFloat: function ( low, high ) {\n\n\t\treturn low + Math.random() * ( high - low );\n\n\t},\n\n\t// Random float from <-range/2, range/2> interval\n\n\trandFloatSpread: function ( range ) {\n\n\t\treturn range * ( 0.5 - Math.random() );\n\n\t},\n\n\t// Deterministic pseudo-random float in the interval [ 0, 1 ]\n\n\tseededRandom: function ( s ) {\n\n\t\tif ( s !== undefined ) _seed = s % 2147483647;\n\n\t\t// Park-Miller algorithm\n\n\t\t_seed = _seed * 16807 % 2147483647;\n\n\t\treturn ( _seed - 1 ) / 2147483646;\n\n\t},\n\n\tdegToRad: function ( degrees ) {\n\n\t\treturn degrees * MathUtils.DEG2RAD;\n\n\t},\n\n\tradToDeg: function ( radians ) {\n\n\t\treturn radians * MathUtils.RAD2DEG;\n\n\t},\n\n\tisPowerOfTwo: function ( value ) {\n\n\t\treturn ( value & ( value - 1 ) ) === 0 && value !== 0;\n\n\t},\n\n\tceilPowerOfTwo: function ( value ) {\n\n\t\treturn Math.pow( 2, Math.ceil( Math.log( value ) / Math.LN2 ) );\n\n\t},\n\n\tfloorPowerOfTwo: function ( value ) {\n\n\t\treturn Math.pow( 2, Math.floor( Math.log( value ) / Math.LN2 ) );\n\n\t},\n\n\tsetQuaternionFromProperEuler: function ( q, a, b, c, order ) {\n\n\t\t// Intrinsic Proper Euler Angles - see https://en.wikipedia.org/wiki/Euler_angles\n\n\t\t// rotations are applied to the axes in the order specified by 'order'\n\t\t// rotation by angle 'a' is applied first, then by angle 'b', then by angle 'c'\n\t\t// angles are in radians\n\n\t\tconst cos = Math.cos;\n\t\tconst sin = Math.sin;\n\n\t\tconst c2 = cos( b / 2 );\n\t\tconst s2 = sin( b / 2 );\n\n\t\tconst c13 = cos( ( a + c ) / 2 );\n\t\tconst s13 = sin( ( a + c ) / 2 );\n\n\t\tconst c1_3 = cos( ( a - c ) / 2 );\n\t\tconst s1_3 = sin( ( a - c ) / 2 );\n\n\t\tconst c3_1 = cos( ( c - a ) / 2 );\n\t\tconst s3_1 = sin( ( c - a ) / 2 );\n\n\t\tswitch ( order ) {\n\n\t\t\tcase 'XYX':\n\t\t\t\tq.set( c2 * s13, s2 * c1_3, s2 * s1_3, c2 * c13 );\n\t\t\t\tbreak;\n\n\t\t\tcase 'YZY':\n\t\t\t\tq.set( s2 * s1_3, c2 * s13, s2 * c1_3, c2 * c13 );\n\t\t\t\tbreak;\n\n\t\t\tcase 'ZXZ':\n\t\t\t\tq.set( s2 * c1_3, s2 * s1_3, c2 * s13, c2 * c13 );\n\t\t\t\tbreak;\n\n\t\t\tcase 'XZX':\n\t\t\t\tq.set( c2 * s13, s2 * s3_1, s2 * c3_1, c2 * c13 );\n\t\t\t\tbreak;\n\n\t\t\tcase 'YXY':\n\t\t\t\tq.set( s2 * c3_1, c2 * s13, s2 * s3_1, c2 * c13 );\n\t\t\t\tbreak;\n\n\t\t\tcase 'ZYZ':\n\t\t\t\tq.set( s2 * s3_1, s2 * c3_1, c2 * s13, c2 * c13 );\n\t\t\t\tbreak;\n\n\t\t\tdefault:\n\t\t\t\tconsole.warn( 'THREE.MathUtils: .setQuaternionFromProperEuler() encountered an unknown order: ' + order );\n\n\t\t}\n\n\t}\n\n};\n\n\nexport { MathUtils };\n","import { MathUtils } from './MathUtils.js';\n\nclass Quaternion {\n\n\tconstructor( x = 0, y = 0, z = 0, w = 1 ) {\n\n\t\tthis._x = x;\n\t\tthis._y = y;\n\t\tthis._z = z;\n\t\tthis._w = w;\n\n\t}\n\n\tstatic slerp( qa, qb, qm, t ) {\n\n\t\treturn qm.copy( qa ).slerp( qb, t );\n\n\t}\n\n\tstatic slerpFlat( dst, dstOffset, src0, srcOffset0, src1, srcOffset1, t ) {\n\n\t\t// fuzz-free, array-based Quaternion SLERP operation\n\n\t\tlet x0 = src0[ srcOffset0 + 0 ],\n\t\t\ty0 = src0[ srcOffset0 + 1 ],\n\t\t\tz0 = src0[ srcOffset0 + 2 ],\n\t\t\tw0 = src0[ srcOffset0 + 3 ];\n\n\t\tconst x1 = src1[ srcOffset1 + 0 ],\n\t\t\ty1 = src1[ srcOffset1 + 1 ],\n\t\t\tz1 = src1[ srcOffset1 + 2 ],\n\t\t\tw1 = src1[ srcOffset1 + 3 ];\n\n\t\tif ( t === 0 ) {\n\n\t\t\tdst[ dstOffset + 0 ] = x0;\n\t\t\tdst[ dstOffset + 1 ] = y0;\n\t\t\tdst[ dstOffset + 2 ] = z0;\n\t\t\tdst[ dstOffset + 3 ] = w0;\n\t\t\treturn;\n\n\t\t}\n\n\t\tif ( t === 1 ) {\n\n\t\t\tdst[ dstOffset + 0 ] = x1;\n\t\t\tdst[ dstOffset + 1 ] = y1;\n\t\t\tdst[ dstOffset + 2 ] = z1;\n\t\t\tdst[ dstOffset + 3 ] = w1;\n\t\t\treturn;\n\n\t\t}\n\n\t\tif ( w0 !== w1 || x0 !== x1 || y0 !== y1 || z0 !== z1 ) {\n\n\t\t\tlet s = 1 - t;\n\t\t\tconst cos = x0 * x1 + y0 * y1 + z0 * z1 + w0 * w1,\n\t\t\t\tdir = ( cos >= 0 ? 1 : - 1 ),\n\t\t\t\tsqrSin = 1 - cos * cos;\n\n\t\t\t// Skip the Slerp for tiny steps to avoid numeric problems:\n\t\t\tif ( sqrSin > Number.EPSILON ) {\n\n\t\t\t\tconst sin = Math.sqrt( sqrSin ),\n\t\t\t\t\tlen = Math.atan2( sin, cos * dir );\n\n\t\t\t\ts = Math.sin( s * len ) / sin;\n\t\t\t\tt = Math.sin( t * len ) / sin;\n\n\t\t\t}\n\n\t\t\tconst tDir = t * dir;\n\n\t\t\tx0 = x0 * s + x1 * tDir;\n\t\t\ty0 = y0 * s + y1 * tDir;\n\t\t\tz0 = z0 * s + z1 * tDir;\n\t\t\tw0 = w0 * s + w1 * tDir;\n\n\t\t\t// Normalize in case we just did a lerp:\n\t\t\tif ( s === 1 - t ) {\n\n\t\t\t\tconst f = 1 / Math.sqrt( x0 * x0 + y0 * y0 + z0 * z0 + w0 * w0 );\n\n\t\t\t\tx0 *= f;\n\t\t\t\ty0 *= f;\n\t\t\t\tz0 *= f;\n\t\t\t\tw0 *= f;\n\n\t\t\t}\n\n\t\t}\n\n\t\tdst[ dstOffset ] = x0;\n\t\tdst[ dstOffset + 1 ] = y0;\n\t\tdst[ dstOffset + 2 ] = z0;\n\t\tdst[ dstOffset + 3 ] = w0;\n\n\t}\n\n\tstatic multiplyQuaternionsFlat( dst, dstOffset, src0, srcOffset0, src1, srcOffset1 ) {\n\n\t\tconst x0 = src0[ srcOffset0 ];\n\t\tconst y0 = src0[ srcOffset0 + 1 ];\n\t\tconst z0 = src0[ srcOffset0 + 2 ];\n\t\tconst w0 = src0[ srcOffset0 + 3 ];\n\n\t\tconst x1 = src1[ srcOffset1 ];\n\t\tconst y1 = src1[ srcOffset1 + 1 ];\n\t\tconst z1 = src1[ srcOffset1 + 2 ];\n\t\tconst w1 = src1[ srcOffset1 + 3 ];\n\n\t\tdst[ dstOffset ] = x0 * w1 + w0 * x1 + y0 * z1 - z0 * y1;\n\t\tdst[ dstOffset + 1 ] = y0 * w1 + w0 * y1 + z0 * x1 - x0 * z1;\n\t\tdst[ dstOffset + 2 ] = z0 * w1 + w0 * z1 + x0 * y1 - y0 * x1;\n\t\tdst[ dstOffset + 3 ] = w0 * w1 - x0 * x1 - y0 * y1 - z0 * z1;\n\n\t\treturn dst;\n\n\t}\n\n\tget x() {\n\n\t\treturn this._x;\n\n\t}\n\n\tset x( value ) {\n\n\t\tthis._x = value;\n\t\tthis._onChangeCallback();\n\n\t}\n\n\tget y() {\n\n\t\treturn this._y;\n\n\t}\n\n\tset y( value ) {\n\n\t\tthis._y = value;\n\t\tthis._onChangeCallback();\n\n\t}\n\n\tget z() {\n\n\t\treturn this._z;\n\n\t}\n\n\tset z( value ) {\n\n\t\tthis._z = value;\n\t\tthis._onChangeCallback();\n\n\t}\n\n\tget w() {\n\n\t\treturn this._w;\n\n\t}\n\n\tset w( value ) {\n\n\t\tthis._w = value;\n\t\tthis._onChangeCallback();\n\n\t}\n\n\tset( x, y, z, w ) {\n\n\t\tthis._x = x;\n\t\tthis._y = y;\n\t\tthis._z = z;\n\t\tthis._w = w;\n\n\t\tthis._onChangeCallback();\n\n\t\treturn this;\n\n\t}\n\n\tclone() {\n\n\t\treturn new this.constructor( this._x, this._y, this._z, this._w );\n\n\t}\n\n\tcopy( quaternion ) {\n\n\t\tthis._x = quaternion.x;\n\t\tthis._y = quaternion.y;\n\t\tthis._z = quaternion.z;\n\t\tthis._w = quaternion.w;\n\n\t\tthis._onChangeCallback();\n\n\t\treturn this;\n\n\t}\n\n\tsetFromEuler( euler, update ) {\n\n\t\tif ( ! ( euler && euler.isEuler ) ) {\n\n\t\t\tthrow new Error( 'THREE.Quaternion: .setFromEuler() now expects an Euler rotation rather than a Vector3 and order.' );\n\n\t\t}\n\n\t\tconst x = euler._x, y = euler._y, z = euler._z, order = euler._order;\n\n\t\t// http://www.mathworks.com/matlabcentral/fileexchange/\n\t\t// \t20696-function-to-convert-between-dcm-euler-angles-quaternions-and-euler-vectors/\n\t\t//\tcontent/SpinCalc.m\n\n\t\tconst cos = Math.cos;\n\t\tconst sin = Math.sin;\n\n\t\tconst c1 = cos( x / 2 );\n\t\tconst c2 = cos( y / 2 );\n\t\tconst c3 = cos( z / 2 );\n\n\t\tconst s1 = sin( x / 2 );\n\t\tconst s2 = sin( y / 2 );\n\t\tconst s3 = sin( z / 2 );\n\n\t\tswitch ( order ) {\n\n\t\t\tcase 'XYZ':\n\t\t\t\tthis._x = s1 * c2 * c3 + c1 * s2 * s3;\n\t\t\t\tthis._y = c1 * s2 * c3 - s1 * c2 * s3;\n\t\t\t\tthis._z = c1 * c2 * s3 + s1 * s2 * c3;\n\t\t\t\tthis._w = c1 * c2 * c3 - s1 * s2 * s3;\n\t\t\t\tbreak;\n\n\t\t\tcase 'YXZ':\n\t\t\t\tthis._x = s1 * c2 * c3 + c1 * s2 * s3;\n\t\t\t\tthis._y = c1 * s2 * c3 - s1 * c2 * s3;\n\t\t\t\tthis._z = c1 * c2 * s3 - s1 * s2 * c3;\n\t\t\t\tthis._w = c1 * c2 * c3 + s1 * s2 * s3;\n\t\t\t\tbreak;\n\n\t\t\tcase 'ZXY':\n\t\t\t\tthis._x = s1 * c2 * c3 - c1 * s2 * s3;\n\t\t\t\tthis._y = c1 * s2 * c3 + s1 * c2 * s3;\n\t\t\t\tthis._z = c1 * c2 * s3 + s1 * s2 * c3;\n\t\t\t\tthis._w = c1 * c2 * c3 - s1 * s2 * s3;\n\t\t\t\tbreak;\n\n\t\t\tcase 'ZYX':\n\t\t\t\tthis._x = s1 * c2 * c3 - c1 * s2 * s3;\n\t\t\t\tthis._y = c1 * s2 * c3 + s1 * c2 * s3;\n\t\t\t\tthis._z = c1 * c2 * s3 - s1 * s2 * c3;\n\t\t\t\tthis._w = c1 * c2 * c3 + s1 * s2 * s3;\n\t\t\t\tbreak;\n\n\t\t\tcase 'YZX':\n\t\t\t\tthis._x = s1 * c2 * c3 + c1 * s2 * s3;\n\t\t\t\tthis._y = c1 * s2 * c3 + s1 * c2 * s3;\n\t\t\t\tthis._z = c1 * c2 * s3 - s1 * s2 * c3;\n\t\t\t\tthis._w = c1 * c2 * c3 - s1 * s2 * s3;\n\t\t\t\tbreak;\n\n\t\t\tcase 'XZY':\n\t\t\t\tthis._x = s1 * c2 * c3 - c1 * s2 * s3;\n\t\t\t\tthis._y = c1 * s2 * c3 - s1 * c2 * s3;\n\t\t\t\tthis._z = c1 * c2 * s3 + s1 * s2 * c3;\n\t\t\t\tthis._w = c1 * c2 * c3 + s1 * s2 * s3;\n\t\t\t\tbreak;\n\n\t\t\tdefault:\n\t\t\t\tconsole.warn( 'THREE.Quaternion: .setFromEuler() encountered an unknown order: ' + order );\n\n\t\t}\n\n\t\tif ( update !== false ) this._onChangeCallback();\n\n\t\treturn this;\n\n\t}\n\n\tsetFromAxisAngle( axis, angle ) {\n\n\t\t// http://www.euclideanspace.com/maths/geometry/rotations/conversions/angleToQuaternion/index.htm\n\n\t\t// assumes axis is normalized\n\n\t\tconst halfAngle = angle / 2, s = Math.sin( halfAngle );\n\n\t\tthis._x = axis.x * s;\n\t\tthis._y = axis.y * s;\n\t\tthis._z = axis.z * s;\n\t\tthis._w = Math.cos( halfAngle );\n\n\t\tthis._onChangeCallback();\n\n\t\treturn this;\n\n\t}\n\n\tsetFromRotationMatrix( m ) {\n\n\t\t// http://www.euclideanspace.com/maths/geometry/rotations/conversions/matrixToQuaternion/index.htm\n\n\t\t// assumes the upper 3x3 of m is a pure rotation matrix (i.e, unscaled)\n\n\t\tconst te = m.elements,\n\n\t\t\tm11 = te[ 0 ], m12 = te[ 4 ], m13 = te[ 8 ],\n\t\t\tm21 = te[ 1 ], m22 = te[ 5 ], m23 = te[ 9 ],\n\t\t\tm31 = te[ 2 ], m32 = te[ 6 ], m33 = te[ 10 ],\n\n\t\t\ttrace = m11 + m22 + m33;\n\n\t\tif ( trace > 0 ) {\n\n\t\t\tconst s = 0.5 / Math.sqrt( trace + 1.0 );\n\n\t\t\tthis._w = 0.25 / s;\n\t\t\tthis._x = ( m32 - m23 ) * s;\n\t\t\tthis._y = ( m13 - m31 ) * s;\n\t\t\tthis._z = ( m21 - m12 ) * s;\n\n\t\t} else if ( m11 > m22 && m11 > m33 ) {\n\n\t\t\tconst s = 2.0 * Math.sqrt( 1.0 + m11 - m22 - m33 );\n\n\t\t\tthis._w = ( m32 - m23 ) / s;\n\t\t\tthis._x = 0.25 * s;\n\t\t\tthis._y = ( m12 + m21 ) / s;\n\t\t\tthis._z = ( m13 + m31 ) / s;\n\n\t\t} else if ( m22 > m33 ) {\n\n\t\t\tconst s = 2.0 * Math.sqrt( 1.0 + m22 - m11 - m33 );\n\n\t\t\tthis._w = ( m13 - m31 ) / s;\n\t\t\tthis._x = ( m12 + m21 ) / s;\n\t\t\tthis._y = 0.25 * s;\n\t\t\tthis._z = ( m23 + m32 ) / s;\n\n\t\t} else {\n\n\t\t\tconst s = 2.0 * Math.sqrt( 1.0 + m33 - m11 - m22 );\n\n\t\t\tthis._w = ( m21 - m12 ) / s;\n\t\t\tthis._x = ( m13 + m31 ) / s;\n\t\t\tthis._y = ( m23 + m32 ) / s;\n\t\t\tthis._z = 0.25 * s;\n\n\t\t}\n\n\t\tthis._onChangeCallback();\n\n\t\treturn this;\n\n\t}\n\n\tsetFromUnitVectors( vFrom, vTo ) {\n\n\t\t// assumes direction vectors vFrom and vTo are normalized\n\n\t\tconst EPS = 0.000001;\n\n\t\tlet r = vFrom.dot( vTo ) + 1;\n\n\t\tif ( r < EPS ) {\n\n\t\t\tr = 0;\n\n\t\t\tif ( Math.abs( vFrom.x ) > Math.abs( vFrom.z ) ) {\n\n\t\t\t\tthis._x = - vFrom.y;\n\t\t\t\tthis._y = vFrom.x;\n\t\t\t\tthis._z = 0;\n\t\t\t\tthis._w = r;\n\n\t\t\t} else {\n\n\t\t\t\tthis._x = 0;\n\t\t\t\tthis._y = - vFrom.z;\n\t\t\t\tthis._z = vFrom.y;\n\t\t\t\tthis._w = r;\n\n\t\t\t}\n\n\t\t} else {\n\n\t\t\t// crossVectors( vFrom, vTo ); // inlined to avoid cyclic dependency on Vector3\n\n\t\t\tthis._x = vFrom.y * vTo.z - vFrom.z * vTo.y;\n\t\t\tthis._y = vFrom.z * vTo.x - vFrom.x * vTo.z;\n\t\t\tthis._z = vFrom.x * vTo.y - vFrom.y * vTo.x;\n\t\t\tthis._w = r;\n\n\t\t}\n\n\t\treturn this.normalize();\n\n\t}\n\n\tangleTo( q ) {\n\n\t\treturn 2 * Math.acos( Math.abs( MathUtils.clamp( this.dot( q ), - 1, 1 ) ) );\n\n\t}\n\n\trotateTowards( q, step ) {\n\n\t\tconst angle = this.angleTo( q );\n\n\t\tif ( angle === 0 ) return this;\n\n\t\tconst t = Math.min( 1, step / angle );\n\n\t\tthis.slerp( q, t );\n\n\t\treturn this;\n\n\t}\n\n\tidentity() {\n\n\t\treturn this.set( 0, 0, 0, 1 );\n\n\t}\n\n\tinvert() {\n\n\t\t// quaternion is assumed to have unit length\n\n\t\treturn this.conjugate();\n\n\t}\n\n\tconjugate() {\n\n\t\tthis._x *= - 1;\n\t\tthis._y *= - 1;\n\t\tthis._z *= - 1;\n\n\t\tthis._onChangeCallback();\n\n\t\treturn this;\n\n\t}\n\n\tdot( v ) {\n\n\t\treturn this._x * v._x + this._y * v._y + this._z * v._z + this._w * v._w;\n\n\t}\n\n\tlengthSq() {\n\n\t\treturn this._x * this._x + this._y * this._y + this._z * this._z + this._w * this._w;\n\n\t}\n\n\tlength() {\n\n\t\treturn Math.sqrt( this._x * this._x + this._y * this._y + this._z * this._z + this._w * this._w );\n\n\t}\n\n\tnormalize() {\n\n\t\tlet l = this.length();\n\n\t\tif ( l === 0 ) {\n\n\t\t\tthis._x = 0;\n\t\t\tthis._y = 0;\n\t\t\tthis._z = 0;\n\t\t\tthis._w = 1;\n\n\t\t} else {\n\n\t\t\tl = 1 / l;\n\n\t\t\tthis._x = this._x * l;\n\t\t\tthis._y = this._y * l;\n\t\t\tthis._z = this._z * l;\n\t\t\tthis._w = this._w * l;\n\n\t\t}\n\n\t\tthis._onChangeCallback();\n\n\t\treturn this;\n\n\t}\n\n\tmultiply( q, p ) {\n\n\t\tif ( p !== undefined ) {\n\n\t\t\tconsole.warn( 'THREE.Quaternion: .multiply() now only accepts one argument. Use .multiplyQuaternions( a, b ) instead.' );\n\t\t\treturn this.multiplyQuaternions( q, p );\n\n\t\t}\n\n\t\treturn this.multiplyQuaternions( this, q );\n\n\t}\n\n\tpremultiply( q ) {\n\n\t\treturn this.multiplyQuaternions( q, this );\n\n\t}\n\n\tmultiplyQuaternions( a, b ) {\n\n\t\t// from http://www.euclideanspace.com/maths/algebra/realNormedAlgebra/quaternions/code/index.htm\n\n\t\tconst qax = a._x, qay = a._y, qaz = a._z, qaw = a._w;\n\t\tconst qbx = b._x, qby = b._y, qbz = b._z, qbw = b._w;\n\n\t\tthis._x = qax * qbw + qaw * qbx + qay * qbz - qaz * qby;\n\t\tthis._y = qay * qbw + qaw * qby + qaz * qbx - qax * qbz;\n\t\tthis._z = qaz * qbw + qaw * qbz + qax * qby - qay * qbx;\n\t\tthis._w = qaw * qbw - qax * qbx - qay * qby - qaz * qbz;\n\n\t\tthis._onChangeCallback();\n\n\t\treturn this;\n\n\t}\n\n\tslerp( qb, t ) {\n\n\t\tif ( t === 0 ) return this;\n\t\tif ( t === 1 ) return this.copy( qb );\n\n\t\tconst x = this._x, y = this._y, z = this._z, w = this._w;\n\n\t\t// http://www.euclideanspace.com/maths/algebra/realNormedAlgebra/quaternions/slerp/\n\n\t\tlet cosHalfTheta = w * qb._w + x * qb._x + y * qb._y + z * qb._z;\n\n\t\tif ( cosHalfTheta < 0 ) {\n\n\t\t\tthis._w = - qb._w;\n\t\t\tthis._x = - qb._x;\n\t\t\tthis._y = - qb._y;\n\t\t\tthis._z = - qb._z;\n\n\t\t\tcosHalfTheta = - cosHalfTheta;\n\n\t\t} else {\n\n\t\t\tthis.copy( qb );\n\n\t\t}\n\n\t\tif ( cosHalfTheta >= 1.0 ) {\n\n\t\t\tthis._w = w;\n\t\t\tthis._x = x;\n\t\t\tthis._y = y;\n\t\t\tthis._z = z;\n\n\t\t\treturn this;\n\n\t\t}\n\n\t\tconst sqrSinHalfTheta = 1.0 - cosHalfTheta * cosHalfTheta;\n\n\t\tif ( sqrSinHalfTheta <= Number.EPSILON ) {\n\n\t\t\tconst s = 1 - t;\n\t\t\tthis._w = s * w + t * this._w;\n\t\t\tthis._x = s * x + t * this._x;\n\t\t\tthis._y = s * y + t * this._y;\n\t\t\tthis._z = s * z + t * this._z;\n\n\t\t\tthis.normalize();\n\t\t\tthis._onChangeCallback();\n\n\t\t\treturn this;\n\n\t\t}\n\n\t\tconst sinHalfTheta = Math.sqrt( sqrSinHalfTheta );\n\t\tconst halfTheta = Math.atan2( sinHalfTheta, cosHalfTheta );\n\t\tconst ratioA = Math.sin( ( 1 - t ) * halfTheta ) / sinHalfTheta,\n\t\t\tratioB = Math.sin( t * halfTheta ) / sinHalfTheta;\n\n\t\tthis._w = ( w * ratioA + this._w * ratioB );\n\t\tthis._x = ( x * ratioA + this._x * ratioB );\n\t\tthis._y = ( y * ratioA + this._y * ratioB );\n\t\tthis._z = ( z * ratioA + this._z * ratioB );\n\n\t\tthis._onChangeCallback();\n\n\t\treturn this;\n\n\t}\n\n\tequals( quaternion ) {\n\n\t\treturn ( quaternion._x === this._x ) && ( quaternion._y === this._y ) && ( quaternion._z === this._z ) && ( quaternion._w === this._w );\n\n\t}\n\n\tfromArray( array, offset = 0 ) {\n\n\t\tthis._x = array[ offset ];\n\t\tthis._y = array[ offset + 1 ];\n\t\tthis._z = array[ offset + 2 ];\n\t\tthis._w = array[ offset + 3 ];\n\n\t\tthis._onChangeCallback();\n\n\t\treturn this;\n\n\t}\n\n\ttoArray( array = [], offset = 0 ) {\n\n\t\tarray[ offset ] = this._x;\n\t\tarray[ offset + 1 ] = this._y;\n\t\tarray[ offset + 2 ] = this._z;\n\t\tarray[ offset + 3 ] = this._w;\n\n\t\treturn array;\n\n\t}\n\n\tfromBufferAttribute( attribute, index ) {\n\n\t\tthis._x = attribute.getX( index );\n\t\tthis._y = attribute.getY( index );\n\t\tthis._z = attribute.getZ( index );\n\t\tthis._w = attribute.getW( index );\n\n\t\treturn this;\n\n\t}\n\n\t_onChange( callback ) {\n\n\t\tthis._onChangeCallback = callback;\n\n\t\treturn this;\n\n\t}\n\n\t_onChangeCallback() {}\n\n}\n\nQuaternion.prototype.isQuaternion = true;\n\nexport { Quaternion };\n","import { MathUtils } from './MathUtils.js';\nimport { Quaternion } from './Quaternion.js';\n\nclass Vector3 {\n\n\tconstructor( x = 0, y = 0, z = 0 ) {\n\n\t\tthis.x = x;\n\t\tthis.y = y;\n\t\tthis.z = z;\n\n\t}\n\n\tset( x, y, z ) {\n\n\t\tif ( z === undefined ) z = this.z; // sprite.scale.set(x,y)\n\n\t\tthis.x = x;\n\t\tthis.y = y;\n\t\tthis.z = z;\n\n\t\treturn this;\n\n\t}\n\n\tsetScalar( scalar ) {\n\n\t\tthis.x = scalar;\n\t\tthis.y = scalar;\n\t\tthis.z = scalar;\n\n\t\treturn this;\n\n\t}\n\n\tsetX( x ) {\n\n\t\tthis.x = x;\n\n\t\treturn this;\n\n\t}\n\n\tsetY( y ) {\n\n\t\tthis.y = y;\n\n\t\treturn this;\n\n\t}\n\n\tsetZ( z ) {\n\n\t\tthis.z = z;\n\n\t\treturn this;\n\n\t}\n\n\tsetComponent( index, value ) {\n\n\t\tswitch ( index ) {\n\n\t\t\tcase 0: this.x = value; break;\n\t\t\tcase 1: this.y = value; break;\n\t\t\tcase 2: this.z = value; break;\n\t\t\tdefault: throw new Error( 'index is out of range: ' + index );\n\n\t\t}\n\n\t\treturn this;\n\n\t}\n\n\tgetComponent( index ) {\n\n\t\tswitch ( index ) {\n\n\t\t\tcase 0: return this.x;\n\t\t\tcase 1: return this.y;\n\t\t\tcase 2: return this.z;\n\t\t\tdefault: throw new Error( 'index is out of range: ' + index );\n\n\t\t}\n\n\t}\n\n\tclone() {\n\n\t\treturn new this.constructor( this.x, this.y, this.z );\n\n\t}\n\n\tcopy( v ) {\n\n\t\tthis.x = v.x;\n\t\tthis.y = v.y;\n\t\tthis.z = v.z;\n\n\t\treturn this;\n\n\t}\n\n\tadd( v, w ) {\n\n\t\tif ( w !== undefined ) {\n\n\t\t\tconsole.warn( 'THREE.Vector3: .add() now only accepts one argument. Use .addVectors( a, b ) instead.' );\n\t\t\treturn this.addVectors( v, w );\n\n\t\t}\n\n\t\tthis.x += v.x;\n\t\tthis.y += v.y;\n\t\tthis.z += v.z;\n\n\t\treturn this;\n\n\t}\n\n\taddScalar( s ) {\n\n\t\tthis.x += s;\n\t\tthis.y += s;\n\t\tthis.z += s;\n\n\t\treturn this;\n\n\t}\n\n\taddVectors( a, b ) {\n\n\t\tthis.x = a.x + b.x;\n\t\tthis.y = a.y + b.y;\n\t\tthis.z = a.z + b.z;\n\n\t\treturn this;\n\n\t}\n\n\taddScaledVector( v, s ) {\n\n\t\tthis.x += v.x * s;\n\t\tthis.y += v.y * s;\n\t\tthis.z += v.z * s;\n\n\t\treturn this;\n\n\t}\n\n\tsub( v, w ) {\n\n\t\tif ( w !== undefined ) {\n\n\t\t\tconsole.warn( 'THREE.Vector3: .sub() now only accepts one argument. Use .subVectors( a, b ) instead.' );\n\t\t\treturn this.subVectors( v, w );\n\n\t\t}\n\n\t\tthis.x -= v.x;\n\t\tthis.y -= v.y;\n\t\tthis.z -= v.z;\n\n\t\treturn this;\n\n\t}\n\n\tsubScalar( s ) {\n\n\t\tthis.x -= s;\n\t\tthis.y -= s;\n\t\tthis.z -= s;\n\n\t\treturn this;\n\n\t}\n\n\tsubVectors( a, b ) {\n\n\t\tthis.x = a.x - b.x;\n\t\tthis.y = a.y - b.y;\n\t\tthis.z = a.z - b.z;\n\n\t\treturn this;\n\n\t}\n\n\tmultiply( v, w ) {\n\n\t\tif ( w !== undefined ) {\n\n\t\t\tconsole.warn( 'THREE.Vector3: .multiply() now only accepts one argument. Use .multiplyVectors( a, b ) instead.' );\n\t\t\treturn this.multiplyVectors( v, w );\n\n\t\t}\n\n\t\tthis.x *= v.x;\n\t\tthis.y *= v.y;\n\t\tthis.z *= v.z;\n\n\t\treturn this;\n\n\t}\n\n\tmultiplyScalar( scalar ) {\n\n\t\tthis.x *= scalar;\n\t\tthis.y *= scalar;\n\t\tthis.z *= scalar;\n\n\t\treturn this;\n\n\t}\n\n\tmultiplyVectors( a, b ) {\n\n\t\tthis.x = a.x * b.x;\n\t\tthis.y = a.y * b.y;\n\t\tthis.z = a.z * b.z;\n\n\t\treturn this;\n\n\t}\n\n\tapplyEuler( euler ) {\n\n\t\tif ( ! ( euler && euler.isEuler ) ) {\n\n\t\t\tconsole.error( 'THREE.Vector3: .applyEuler() now expects an Euler rotation rather than a Vector3 and order.' );\n\n\t\t}\n\n\t\treturn this.applyQuaternion( _quaternion.setFromEuler( euler ) );\n\n\t}\n\n\tapplyAxisAngle( axis, angle ) {\n\n\t\treturn this.applyQuaternion( _quaternion.setFromAxisAngle( axis, angle ) );\n\n\t}\n\n\tapplyMatrix3( m ) {\n\n\t\tconst x = this.x, y = this.y, z = this.z;\n\t\tconst e = m.elements;\n\n\t\tthis.x = e[ 0 ] * x + e[ 3 ] * y + e[ 6 ] * z;\n\t\tthis.y = e[ 1 ] * x + e[ 4 ] * y + e[ 7 ] * z;\n\t\tthis.z = e[ 2 ] * x + e[ 5 ] * y + e[ 8 ] * z;\n\n\t\treturn this;\n\n\t}\n\n\tapplyNormalMatrix( m ) {\n\n\t\treturn this.applyMatrix3( m ).normalize();\n\n\t}\n\n\tapplyMatrix4( m ) {\n\n\t\tconst x = this.x, y = this.y, z = this.z;\n\t\tconst e = m.elements;\n\n\t\tconst w = 1 / ( e[ 3 ] * x + e[ 7 ] * y + e[ 11 ] * z + e[ 15 ] );\n\n\t\tthis.x = ( e[ 0 ] * x + e[ 4 ] * y + e[ 8 ] * z + e[ 12 ] ) * w;\n\t\tthis.y = ( e[ 1 ] * x + e[ 5 ] * y + e[ 9 ] * z + e[ 13 ] ) * w;\n\t\tthis.z = ( e[ 2 ] * x + e[ 6 ] * y + e[ 10 ] * z + e[ 14 ] ) * w;\n\n\t\treturn this;\n\n\t}\n\n\tapplyQuaternion( q ) {\n\n\t\tconst x = this.x, y = this.y, z = this.z;\n\t\tconst qx = q.x, qy = q.y, qz = q.z, qw = q.w;\n\n\t\t// calculate quat * vector\n\n\t\tconst ix = qw * x + qy * z - qz * y;\n\t\tconst iy = qw * y + qz * x - qx * z;\n\t\tconst iz = qw * z + qx * y - qy * x;\n\t\tconst iw = - qx * x - qy * y - qz * z;\n\n\t\t// calculate result * inverse quat\n\n\t\tthis.x = ix * qw + iw * - qx + iy * - qz - iz * - qy;\n\t\tthis.y = iy * qw + iw * - qy + iz * - qx - ix * - qz;\n\t\tthis.z = iz * qw + iw * - qz + ix * - qy - iy * - qx;\n\n\t\treturn this;\n\n\t}\n\n\tproject( camera ) {\n\n\t\treturn this.applyMatrix4( camera.matrixWorldInverse ).applyMatrix4( camera.projectionMatrix );\n\n\t}\n\n\tunproject( camera ) {\n\n\t\treturn this.applyMatrix4( camera.projectionMatrixInverse ).applyMatrix4( camera.matrixWorld );\n\n\t}\n\n\ttransformDirection( m ) {\n\n\t\t// input: THREE.Matrix4 affine matrix\n\t\t// vector interpreted as a direction\n\n\t\tconst x = this.x, y = this.y, z = this.z;\n\t\tconst e = m.elements;\n\n\t\tthis.x = e[ 0 ] * x + e[ 4 ] * y + e[ 8 ] * z;\n\t\tthis.y = e[ 1 ] * x + e[ 5 ] * y + e[ 9 ] * z;\n\t\tthis.z = e[ 2 ] * x + e[ 6 ] * y + e[ 10 ] * z;\n\n\t\treturn this.normalize();\n\n\t}\n\n\tdivide( v ) {\n\n\t\tthis.x /= v.x;\n\t\tthis.y /= v.y;\n\t\tthis.z /= v.z;\n\n\t\treturn this;\n\n\t}\n\n\tdivideScalar( scalar ) {\n\n\t\treturn this.multiplyScalar( 1 / scalar );\n\n\t}\n\n\tmin( v ) {\n\n\t\tthis.x = Math.min( this.x, v.x );\n\t\tthis.y = Math.min( this.y, v.y );\n\t\tthis.z = Math.min( this.z, v.z );\n\n\t\treturn this;\n\n\t}\n\n\tmax( v ) {\n\n\t\tthis.x = Math.max( this.x, v.x );\n\t\tthis.y = Math.max( this.y, v.y );\n\t\tthis.z = Math.max( this.z, v.z );\n\n\t\treturn this;\n\n\t}\n\n\tclamp( min, max ) {\n\n\t\t// assumes min < max, componentwise\n\n\t\tthis.x = Math.max( min.x, Math.min( max.x, this.x ) );\n\t\tthis.y = Math.max( min.y, Math.min( max.y, this.y ) );\n\t\tthis.z = Math.max( min.z, Math.min( max.z, this.z ) );\n\n\t\treturn this;\n\n\t}\n\n\tclampScalar( minVal, maxVal ) {\n\n\t\tthis.x = Math.max( minVal, Math.min( maxVal, this.x ) );\n\t\tthis.y = Math.max( minVal, Math.min( maxVal, this.y ) );\n\t\tthis.z = Math.max( minVal, Math.min( maxVal, this.z ) );\n\n\t\treturn this;\n\n\t}\n\n\tclampLength( min, max ) {\n\n\t\tconst length = this.length();\n\n\t\treturn this.divideScalar( length || 1 ).multiplyScalar( Math.max( min, Math.min( max, length ) ) );\n\n\t}\n\n\tfloor() {\n\n\t\tthis.x = Math.floor( this.x );\n\t\tthis.y = Math.floor( this.y );\n\t\tthis.z = Math.floor( this.z );\n\n\t\treturn this;\n\n\t}\n\n\tceil() {\n\n\t\tthis.x = Math.ceil( this.x );\n\t\tthis.y = Math.ceil( this.y );\n\t\tthis.z = Math.ceil( this.z );\n\n\t\treturn this;\n\n\t}\n\n\tround() {\n\n\t\tthis.x = Math.round( this.x );\n\t\tthis.y = Math.round( this.y );\n\t\tthis.z = Math.round( this.z );\n\n\t\treturn this;\n\n\t}\n\n\troundToZero() {\n\n\t\tthis.x = ( this.x < 0 ) ? Math.ceil( this.x ) : Math.floor( this.x );\n\t\tthis.y = ( this.y < 0 ) ? Math.ceil( this.y ) : Math.floor( this.y );\n\t\tthis.z = ( this.z < 0 ) ? Math.ceil( this.z ) : Math.floor( this.z );\n\n\t\treturn this;\n\n\t}\n\n\tnegate() {\n\n\t\tthis.x = - this.x;\n\t\tthis.y = - this.y;\n\t\tthis.z = - this.z;\n\n\t\treturn this;\n\n\t}\n\n\tdot( v ) {\n\n\t\treturn this.x * v.x + this.y * v.y + this.z * v.z;\n\n\t}\n\n\t// TODO lengthSquared?\n\n\tlengthSq() {\n\n\t\treturn this.x * this.x + this.y * this.y + this.z * this.z;\n\n\t}\n\n\tlength() {\n\n\t\treturn Math.sqrt( this.x * this.x + this.y * this.y + this.z * this.z );\n\n\t}\n\n\tmanhattanLength() {\n\n\t\treturn Math.abs( this.x ) + Math.abs( this.y ) + Math.abs( this.z );\n\n\t}\n\n\tnormalize() {\n\n\t\treturn this.divideScalar( this.length() || 1 );\n\n\t}\n\n\tsetLength( length ) {\n\n\t\treturn this.normalize().multiplyScalar( length );\n\n\t}\n\n\tlerp( v, alpha ) {\n\n\t\tthis.x += ( v.x - this.x ) * alpha;\n\t\tthis.y += ( v.y - this.y ) * alpha;\n\t\tthis.z += ( v.z - this.z ) * alpha;\n\n\t\treturn this;\n\n\t}\n\n\tlerpVectors( v1, v2, alpha ) {\n\n\t\tthis.x = v1.x + ( v2.x - v1.x ) * alpha;\n\t\tthis.y = v1.y + ( v2.y - v1.y ) * alpha;\n\t\tthis.z = v1.z + ( v2.z - v1.z ) * alpha;\n\n\t\treturn this;\n\n\t}\n\n\tcross( v, w ) {\n\n\t\tif ( w !== undefined ) {\n\n\t\t\tconsole.warn( 'THREE.Vector3: .cross() now only accepts one argument. Use .crossVectors( a, b ) instead.' );\n\t\t\treturn this.crossVectors( v, w );\n\n\t\t}\n\n\t\treturn this.crossVectors( this, v );\n\n\t}\n\n\tcrossVectors( a, b ) {\n\n\t\tconst ax = a.x, ay = a.y, az = a.z;\n\t\tconst bx = b.x, by = b.y, bz = b.z;\n\n\t\tthis.x = ay * bz - az * by;\n\t\tthis.y = az * bx - ax * bz;\n\t\tthis.z = ax * by - ay * bx;\n\n\t\treturn this;\n\n\t}\n\n\tprojectOnVector( v ) {\n\n\t\tconst denominator = v.lengthSq();\n\n\t\tif ( denominator === 0 ) return this.set( 0, 0, 0 );\n\n\t\tconst scalar = v.dot( this ) / denominator;\n\n\t\treturn this.copy( v ).multiplyScalar( scalar );\n\n\t}\n\n\tprojectOnPlane( planeNormal ) {\n\n\t\t_vector.copy( this ).projectOnVector( planeNormal );\n\n\t\treturn this.sub( _vector );\n\n\t}\n\n\treflect( normal ) {\n\n\t\t// reflect incident vector off plane orthogonal to normal\n\t\t// normal is assumed to have unit length\n\n\t\treturn this.sub( _vector.copy( normal ).multiplyScalar( 2 * this.dot( normal ) ) );\n\n\t}\n\n\tangleTo( v ) {\n\n\t\tconst denominator = Math.sqrt( this.lengthSq() * v.lengthSq() );\n\n\t\tif ( denominator === 0 ) return Math.PI / 2;\n\n\t\tconst theta = this.dot( v ) / denominator;\n\n\t\t// clamp, to handle numerical problems\n\n\t\treturn Math.acos( MathUtils.clamp( theta, - 1, 1 ) );\n\n\t}\n\n\tdistanceTo( v ) {\n\n\t\treturn Math.sqrt( this.distanceToSquared( v ) );\n\n\t}\n\n\tdistanceToSquared( v ) {\n\n\t\tconst dx = this.x - v.x, dy = this.y - v.y, dz = this.z - v.z;\n\n\t\treturn dx * dx + dy * dy + dz * dz;\n\n\t}\n\n\tmanhattanDistanceTo( v ) {\n\n\t\treturn Math.abs( this.x - v.x ) + Math.abs( this.y - v.y ) + Math.abs( this.z - v.z );\n\n\t}\n\n\tsetFromSpherical( s ) {\n\n\t\treturn this.setFromSphericalCoords( s.radius, s.phi, s.theta );\n\n\t}\n\n\tsetFromSphericalCoords( radius, phi, theta ) {\n\n\t\tconst sinPhiRadius = Math.sin( phi ) * radius;\n\n\t\tthis.x = sinPhiRadius * Math.sin( theta );\n\t\tthis.y = Math.cos( phi ) * radius;\n\t\tthis.z = sinPhiRadius * Math.cos( theta );\n\n\t\treturn this;\n\n\t}\n\n\tsetFromCylindrical( c ) {\n\n\t\treturn this.setFromCylindricalCoords( c.radius, c.theta, c.y );\n\n\t}\n\n\tsetFromCylindricalCoords( radius, theta, y ) {\n\n\t\tthis.x = radius * Math.sin( theta );\n\t\tthis.y = y;\n\t\tthis.z = radius * Math.cos( theta );\n\n\t\treturn this;\n\n\t}\n\n\tsetFromMatrixPosition( m ) {\n\n\t\tconst e = m.elements;\n\n\t\tthis.x = e[ 12 ];\n\t\tthis.y = e[ 13 ];\n\t\tthis.z = e[ 14 ];\n\n\t\treturn this;\n\n\t}\n\n\tsetFromMatrixScale( m ) {\n\n\t\tconst sx = this.setFromMatrixColumn( m, 0 ).length();\n\t\tconst sy = this.setFromMatrixColumn( m, 1 ).length();\n\t\tconst sz = this.setFromMatrixColumn( m, 2 ).length();\n\n\t\tthis.x = sx;\n\t\tthis.y = sy;\n\t\tthis.z = sz;\n\n\t\treturn this;\n\n\t}\n\n\tsetFromMatrixColumn( m, index ) {\n\n\t\treturn this.fromArray( m.elements, index * 4 );\n\n\t}\n\n\tsetFromMatrix3Column( m, index ) {\n\n\t\treturn this.fromArray( m.elements, index * 3 );\n\n\t}\n\n\tequals( v ) {\n\n\t\treturn ( ( v.x === this.x ) && ( v.y === this.y ) && ( v.z === this.z ) );\n\n\t}\n\n\tfromArray( array, offset = 0 ) {\n\n\t\tthis.x = array[ offset ];\n\t\tthis.y = array[ offset + 1 ];\n\t\tthis.z = array[ offset + 2 ];\n\n\t\treturn this;\n\n\t}\n\n\ttoArray( array = [], offset = 0 ) {\n\n\t\tarray[ offset ] = this.x;\n\t\tarray[ offset + 1 ] = this.y;\n\t\tarray[ offset + 2 ] = this.z;\n\n\t\treturn array;\n\n\t}\n\n\tfromBufferAttribute( attribute, index, offset ) {\n\n\t\tif ( offset !== undefined ) {\n\n\t\t\tconsole.warn( 'THREE.Vector3: offset has been removed from .fromBufferAttribute().' );\n\n\t\t}\n\n\t\tthis.x = attribute.getX( index );\n\t\tthis.y = attribute.getY( index );\n\t\tthis.z = attribute.getZ( index );\n\n\t\treturn this;\n\n\t}\n\n\trandom() {\n\n\t\tthis.x = Math.random();\n\t\tthis.y = Math.random();\n\t\tthis.z = Math.random();\n\n\t\treturn this;\n\n\t}\n\n}\n\nVector3.prototype.isVector3 = true;\n\nconst _vector = /*@__PURE__*/ new Vector3();\nconst _quaternion = /*@__PURE__*/ new Quaternion();\n\nexport { Vector3 };\n","import { Vector3 } from './Vector3.js';\n\nclass Matrix4 {\n\n\tconstructor() {\n\n\t\tthis.elements = [\n\n\t\t\t1, 0, 0, 0,\n\t\t\t0, 1, 0, 0,\n\t\t\t0, 0, 1, 0,\n\t\t\t0, 0, 0, 1\n\n\t\t];\n\n\t\tif ( arguments.length > 0 ) {\n\n\t\t\tconsole.error( 'THREE.Matrix4: the constructor no longer reads arguments. use .set() instead.' );\n\n\t\t}\n\n\t}\n\n\tset( n11, n12, n13, n14, n21, n22, n23, n24, n31, n32, n33, n34, n41, n42, n43, n44 ) {\n\n\t\tconst te = this.elements;\n\n\t\tte[ 0 ] = n11; te[ 4 ] = n12; te[ 8 ] = n13; te[ 12 ] = n14;\n\t\tte[ 1 ] = n21; te[ 5 ] = n22; te[ 9 ] = n23; te[ 13 ] = n24;\n\t\tte[ 2 ] = n31; te[ 6 ] = n32; te[ 10 ] = n33; te[ 14 ] = n34;\n\t\tte[ 3 ] = n41; te[ 7 ] = n42; te[ 11 ] = n43; te[ 15 ] = n44;\n\n\t\treturn this;\n\n\t}\n\n\tidentity() {\n\n\t\tthis.set(\n\n\t\t\t1, 0, 0, 0,\n\t\t\t0, 1, 0, 0,\n\t\t\t0, 0, 1, 0,\n\t\t\t0, 0, 0, 1\n\n\t\t);\n\n\t\treturn this;\n\n\t}\n\n\tclone() {\n\n\t\treturn new Matrix4().fromArray( this.elements );\n\n\t}\n\n\tcopy( m ) {\n\n\t\tconst te = this.elements;\n\t\tconst me = m.elements;\n\n\t\tte[ 0 ] = me[ 0 ]; te[ 1 ] = me[ 1 ]; te[ 2 ] = me[ 2 ]; te[ 3 ] = me[ 3 ];\n\t\tte[ 4 ] = me[ 4 ]; te[ 5 ] = me[ 5 ]; te[ 6 ] = me[ 6 ]; te[ 7 ] = me[ 7 ];\n\t\tte[ 8 ] = me[ 8 ]; te[ 9 ] = me[ 9 ]; te[ 10 ] = me[ 10 ]; te[ 11 ] = me[ 11 ];\n\t\tte[ 12 ] = me[ 12 ]; te[ 13 ] = me[ 13 ]; te[ 14 ] = me[ 14 ]; te[ 15 ] = me[ 15 ];\n\n\t\treturn this;\n\n\t}\n\n\tcopyPosition( m ) {\n\n\t\tconst te = this.elements, me = m.elements;\n\n\t\tte[ 12 ] = me[ 12 ];\n\t\tte[ 13 ] = me[ 13 ];\n\t\tte[ 14 ] = me[ 14 ];\n\n\t\treturn this;\n\n\t}\n\n\tsetFromMatrix3( m ) {\n\n\t\tconst me = m.elements;\n\n\t\tthis.set(\n\n\t\t\tme[ 0 ], me[ 3 ], me[ 6 ], 0,\n\t\t\tme[ 1 ], me[ 4 ], me[ 7 ], 0,\n\t\t\tme[ 2 ], me[ 5 ], me[ 8 ], 0,\n\t\t\t0, 0, 0, 1\n\n\t\t);\n\n\t\treturn this;\n\n\t}\n\n\textractBasis( xAxis, yAxis, zAxis ) {\n\n\t\txAxis.setFromMatrixColumn( this, 0 );\n\t\tyAxis.setFromMatrixColumn( this, 1 );\n\t\tzAxis.setFromMatrixColumn( this, 2 );\n\n\t\treturn this;\n\n\t}\n\n\tmakeBasis( xAxis, yAxis, zAxis ) {\n\n\t\tthis.set(\n\t\t\txAxis.x, yAxis.x, zAxis.x, 0,\n\t\t\txAxis.y, yAxis.y, zAxis.y, 0,\n\t\t\txAxis.z, yAxis.z, zAxis.z, 0,\n\t\t\t0, 0, 0, 1\n\t\t);\n\n\t\treturn this;\n\n\t}\n\n\textractRotation( m ) {\n\n\t\t// this method does not support reflection matrices\n\n\t\tconst te = this.elements;\n\t\tconst me = m.elements;\n\n\t\tconst scaleX = 1 / _v1.setFromMatrixColumn( m, 0 ).length();\n\t\tconst scaleY = 1 / _v1.setFromMatrixColumn( m, 1 ).length();\n\t\tconst scaleZ = 1 / _v1.setFromMatrixColumn( m, 2 ).length();\n\n\t\tte[ 0 ] = me[ 0 ] * scaleX;\n\t\tte[ 1 ] = me[ 1 ] * scaleX;\n\t\tte[ 2 ] = me[ 2 ] * scaleX;\n\t\tte[ 3 ] = 0;\n\n\t\tte[ 4 ] = me[ 4 ] * scaleY;\n\t\tte[ 5 ] = me[ 5 ] * scaleY;\n\t\tte[ 6 ] = me[ 6 ] * scaleY;\n\t\tte[ 7 ] = 0;\n\n\t\tte[ 8 ] = me[ 8 ] * scaleZ;\n\t\tte[ 9 ] = me[ 9 ] * scaleZ;\n\t\tte[ 10 ] = me[ 10 ] * scaleZ;\n\t\tte[ 11 ] = 0;\n\n\t\tte[ 12 ] = 0;\n\t\tte[ 13 ] = 0;\n\t\tte[ 14 ] = 0;\n\t\tte[ 15 ] = 1;\n\n\t\treturn this;\n\n\t}\n\n\tmakeRotationFromEuler( euler ) {\n\n\t\tif ( ! ( euler && euler.isEuler ) ) {\n\n\t\t\tconsole.error( 'THREE.Matrix4: .makeRotationFromEuler() now expects a Euler rotation rather than a Vector3 and order.' );\n\n\t\t}\n\n\t\tconst te = this.elements;\n\n\t\tconst x = euler.x, y = euler.y, z = euler.z;\n\t\tconst a = Math.cos( x ), b = Math.sin( x );\n\t\tconst c = Math.cos( y ), d = Math.sin( y );\n\t\tconst e = Math.cos( z ), f = Math.sin( z );\n\n\t\tif ( euler.order === 'XYZ' ) {\n\n\t\t\tconst ae = a * e, af = a * f, be = b * e, bf = b * f;\n\n\t\t\tte[ 0 ] = c * e;\n\t\t\tte[ 4 ] = - c * f;\n\t\t\tte[ 8 ] = d;\n\n\t\t\tte[ 1 ] = af + be * d;\n\t\t\tte[ 5 ] = ae - bf * d;\n\t\t\tte[ 9 ] = - b * c;\n\n\t\t\tte[ 2 ] = bf - ae * d;\n\t\t\tte[ 6 ] = be + af * d;\n\t\t\tte[ 10 ] = a * c;\n\n\t\t} else if ( euler.order === 'YXZ' ) {\n\n\t\t\tconst ce = c * e, cf = c * f, de = d * e, df = d * f;\n\n\t\t\tte[ 0 ] = ce + df * b;\n\t\t\tte[ 4 ] = de * b - cf;\n\t\t\tte[ 8 ] = a * d;\n\n\t\t\tte[ 1 ] = a * f;\n\t\t\tte[ 5 ] = a * e;\n\t\t\tte[ 9 ] = - b;\n\n\t\t\tte[ 2 ] = cf * b - de;\n\t\t\tte[ 6 ] = df + ce * b;\n\t\t\tte[ 10 ] = a * c;\n\n\t\t} else if ( euler.order === 'ZXY' ) {\n\n\t\t\tconst ce = c * e, cf = c * f, de = d * e, df = d * f;\n\n\t\t\tte[ 0 ] = ce - df * b;\n\t\t\tte[ 4 ] = - a * f;\n\t\t\tte[ 8 ] = de + cf * b;\n\n\t\t\tte[ 1 ] = cf + de * b;\n\t\t\tte[ 5 ] = a * e;\n\t\t\tte[ 9 ] = df - ce * b;\n\n\t\t\tte[ 2 ] = - a * d;\n\t\t\tte[ 6 ] = b;\n\t\t\tte[ 10 ] = a * c;\n\n\t\t} else if ( euler.order === 'ZYX' ) {\n\n\t\t\tconst ae = a * e, af = a * f, be = b * e, bf = b * f;\n\n\t\t\tte[ 0 ] = c * e;\n\t\t\tte[ 4 ] = be * d - af;\n\t\t\tte[ 8 ] = ae * d + bf;\n\n\t\t\tte[ 1 ] = c * f;\n\t\t\tte[ 5 ] = bf * d + ae;\n\t\t\tte[ 9 ] = af * d - be;\n\n\t\t\tte[ 2 ] = - d;\n\t\t\tte[ 6 ] = b * c;\n\t\t\tte[ 10 ] = a * c;\n\n\t\t} else if ( euler.order === 'YZX' ) {\n\n\t\t\tconst ac = a * c, ad = a * d, bc = b * c, bd = b * d;\n\n\t\t\tte[ 0 ] = c * e;\n\t\t\tte[ 4 ] = bd - ac * f;\n\t\t\tte[ 8 ] = bc * f + ad;\n\n\t\t\tte[ 1 ] = f;\n\t\t\tte[ 5 ] = a * e;\n\t\t\tte[ 9 ] = - b * e;\n\n\t\t\tte[ 2 ] = - d * e;\n\t\t\tte[ 6 ] = ad * f + bc;\n\t\t\tte[ 10 ] = ac - bd * f;\n\n\t\t} else if ( euler.order === 'XZY' ) {\n\n\t\t\tconst ac = a * c, ad = a * d, bc = b * c, bd = b * d;\n\n\t\t\tte[ 0 ] = c * e;\n\t\t\tte[ 4 ] = - f;\n\t\t\tte[ 8 ] = d * e;\n\n\t\t\tte[ 1 ] = ac * f + bd;\n\t\t\tte[ 5 ] = a * e;\n\t\t\tte[ 9 ] = ad * f - bc;\n\n\t\t\tte[ 2 ] = bc * f - ad;\n\t\t\tte[ 6 ] = b * e;\n\t\t\tte[ 10 ] = bd * f + ac;\n\n\t\t}\n\n\t\t// bottom row\n\t\tte[ 3 ] = 0;\n\t\tte[ 7 ] = 0;\n\t\tte[ 11 ] = 0;\n\n\t\t// last column\n\t\tte[ 12 ] = 0;\n\t\tte[ 13 ] = 0;\n\t\tte[ 14 ] = 0;\n\t\tte[ 15 ] = 1;\n\n\t\treturn this;\n\n\t}\n\n\tmakeRotationFromQuaternion( q ) {\n\n\t\treturn this.compose( _zero, q, _one );\n\n\t}\n\n\tlookAt( eye, target, up ) {\n\n\t\tconst te = this.elements;\n\n\t\t_z.subVectors( eye, target );\n\n\t\tif ( _z.lengthSq() === 0 ) {\n\n\t\t\t// eye and target are in the same position\n\n\t\t\t_z.z = 1;\n\n\t\t}\n\n\t\t_z.normalize();\n\t\t_x.crossVectors( up, _z );\n\n\t\tif ( _x.lengthSq() === 0 ) {\n\n\t\t\t// up and z are parallel\n\n\t\t\tif ( Math.abs( up.z ) === 1 ) {\n\n\t\t\t\t_z.x += 0.0001;\n\n\t\t\t} else {\n\n\t\t\t\t_z.z += 0.0001;\n\n\t\t\t}\n\n\t\t\t_z.normalize();\n\t\t\t_x.crossVectors( up, _z );\n\n\t\t}\n\n\t\t_x.normalize();\n\t\t_y.crossVectors( _z, _x );\n\n\t\tte[ 0 ] = _x.x; te[ 4 ] = _y.x; te[ 8 ] = _z.x;\n\t\tte[ 1 ] = _x.y; te[ 5 ] = _y.y; te[ 9 ] = _z.y;\n\t\tte[ 2 ] = _x.z; te[ 6 ] = _y.z; te[ 10 ] = _z.z;\n\n\t\treturn this;\n\n\t}\n\n\tmultiply( m, n ) {\n\n\t\tif ( n !== undefined ) {\n\n\t\t\tconsole.warn( 'THREE.Matrix4: .multiply() now only accepts one argument. Use .multiplyMatrices( a, b ) instead.' );\n\t\t\treturn this.multiplyMatrices( m, n );\n\n\t\t}\n\n\t\treturn this.multiplyMatrices( this, m );\n\n\t}\n\n\tpremultiply( m ) {\n\n\t\treturn this.multiplyMatrices( m, this );\n\n\t}\n\n\tmultiplyMatrices( a, b ) {\n\n\t\tconst ae = a.elements;\n\t\tconst be = b.elements;\n\t\tconst te = this.elements;\n\n\t\tconst a11 = ae[ 0 ], a12 = ae[ 4 ], a13 = ae[ 8 ], a14 = ae[ 12 ];\n\t\tconst a21 = ae[ 1 ], a22 = ae[ 5 ], a23 = ae[ 9 ], a24 = ae[ 13 ];\n\t\tconst a31 = ae[ 2 ], a32 = ae[ 6 ], a33 = ae[ 10 ], a34 = ae[ 14 ];\n\t\tconst a41 = ae[ 3 ], a42 = ae[ 7 ], a43 = ae[ 11 ], a44 = ae[ 15 ];\n\n\t\tconst b11 = be[ 0 ], b12 = be[ 4 ], b13 = be[ 8 ], b14 = be[ 12 ];\n\t\tconst b21 = be[ 1 ], b22 = be[ 5 ], b23 = be[ 9 ], b24 = be[ 13 ];\n\t\tconst b31 = be[ 2 ], b32 = be[ 6 ], b33 = be[ 10 ], b34 = be[ 14 ];\n\t\tconst b41 = be[ 3 ], b42 = be[ 7 ], b43 = be[ 11 ], b44 = be[ 15 ];\n\n\t\tte[ 0 ] = a11 * b11 + a12 * b21 + a13 * b31 + a14 * b41;\n\t\tte[ 4 ] = a11 * b12 + a12 * b22 + a13 * b32 + a14 * b42;\n\t\tte[ 8 ] = a11 * b13 + a12 * b23 + a13 * b33 + a14 * b43;\n\t\tte[ 12 ] = a11 * b14 + a12 * b24 + a13 * b34 + a14 * b44;\n\n\t\tte[ 1 ] = a21 * b11 + a22 * b21 + a23 * b31 + a24 * b41;\n\t\tte[ 5 ] = a21 * b12 + a22 * b22 + a23 * b32 + a24 * b42;\n\t\tte[ 9 ] = a21 * b13 + a22 * b23 + a23 * b33 + a24 * b43;\n\t\tte[ 13 ] = a21 * b14 + a22 * b24 + a23 * b34 + a24 * b44;\n\n\t\tte[ 2 ] = a31 * b11 + a32 * b21 + a33 * b31 + a34 * b41;\n\t\tte[ 6 ] = a31 * b12 + a32 * b22 + a33 * b32 + a34 * b42;\n\t\tte[ 10 ] = a31 * b13 + a32 * b23 + a33 * b33 + a34 * b43;\n\t\tte[ 14 ] = a31 * b14 + a32 * b24 + a33 * b34 + a34 * b44;\n\n\t\tte[ 3 ] = a41 * b11 + a42 * b21 + a43 * b31 + a44 * b41;\n\t\tte[ 7 ] = a41 * b12 + a42 * b22 + a43 * b32 + a44 * b42;\n\t\tte[ 11 ] = a41 * b13 + a42 * b23 + a43 * b33 + a44 * b43;\n\t\tte[ 15 ] = a41 * b14 + a42 * b24 + a43 * b34 + a44 * b44;\n\n\t\treturn this;\n\n\t}\n\n\tmultiplyScalar( s ) {\n\n\t\tconst te = this.elements;\n\n\t\tte[ 0 ] *= s; te[ 4 ] *= s; te[ 8 ] *= s; te[ 12 ] *= s;\n\t\tte[ 1 ] *= s; te[ 5 ] *= s; te[ 9 ] *= s; te[ 13 ] *= s;\n\t\tte[ 2 ] *= s; te[ 6 ] *= s; te[ 10 ] *= s; te[ 14 ] *= s;\n\t\tte[ 3 ] *= s; te[ 7 ] *= s; te[ 11 ] *= s; te[ 15 ] *= s;\n\n\t\treturn this;\n\n\t}\n\n\tdeterminant() {\n\n\t\tconst te = this.elements;\n\n\t\tconst n11 = te[ 0 ], n12 = te[ 4 ], n13 = te[ 8 ], n14 = te[ 12 ];\n\t\tconst n21 = te[ 1 ], n22 = te[ 5 ], n23 = te[ 9 ], n24 = te[ 13 ];\n\t\tconst n31 = te[ 2 ], n32 = te[ 6 ], n33 = te[ 10 ], n34 = te[ 14 ];\n\t\tconst n41 = te[ 3 ], n42 = te[ 7 ], n43 = te[ 11 ], n44 = te[ 15 ];\n\n\t\t//TODO: make this more efficient\n\t\t//( based on http://www.euclideanspace.com/maths/algebra/matrix/functions/inverse/fourD/index.htm )\n\n\t\treturn (\n\t\t\tn41 * (\n\t\t\t\t+ n14 * n23 * n32\n\t\t\t\t - n13 * n24 * n32\n\t\t\t\t - n14 * n22 * n33\n\t\t\t\t + n12 * n24 * n33\n\t\t\t\t + n13 * n22 * n34\n\t\t\t\t - n12 * n23 * n34\n\t\t\t) +\n\t\t\tn42 * (\n\t\t\t\t+ n11 * n23 * n34\n\t\t\t\t - n11 * n24 * n33\n\t\t\t\t + n14 * n21 * n33\n\t\t\t\t - n13 * n21 * n34\n\t\t\t\t + n13 * n24 * n31\n\t\t\t\t - n14 * n23 * n31\n\t\t\t) +\n\t\t\tn43 * (\n\t\t\t\t+ n11 * n24 * n32\n\t\t\t\t - n11 * n22 * n34\n\t\t\t\t - n14 * n21 * n32\n\t\t\t\t + n12 * n21 * n34\n\t\t\t\t + n14 * n22 * n31\n\t\t\t\t - n12 * n24 * n31\n\t\t\t) +\n\t\t\tn44 * (\n\t\t\t\t- n13 * n22 * n31\n\t\t\t\t - n11 * n23 * n32\n\t\t\t\t + n11 * n22 * n33\n\t\t\t\t + n13 * n21 * n32\n\t\t\t\t - n12 * n21 * n33\n\t\t\t\t + n12 * n23 * n31\n\t\t\t)\n\n\t\t);\n\n\t}\n\n\ttranspose() {\n\n\t\tconst te = this.elements;\n\t\tlet tmp;\n\n\t\ttmp = te[ 1 ]; te[ 1 ] = te[ 4 ]; te[ 4 ] = tmp;\n\t\ttmp = te[ 2 ]; te[ 2 ] = te[ 8 ]; te[ 8 ] = tmp;\n\t\ttmp = te[ 6 ]; te[ 6 ] = te[ 9 ]; te[ 9 ] = tmp;\n\n\t\ttmp = te[ 3 ]; te[ 3 ] = te[ 12 ]; te[ 12 ] = tmp;\n\t\ttmp = te[ 7 ]; te[ 7 ] = te[ 13 ]; te[ 13 ] = tmp;\n\t\ttmp = te[ 11 ]; te[ 11 ] = te[ 14 ]; te[ 14 ] = tmp;\n\n\t\treturn this;\n\n\t}\n\n\tsetPosition( x, y, z ) {\n\n\t\tconst te = this.elements;\n\n\t\tif ( x.isVector3 ) {\n\n\t\t\tte[ 12 ] = x.x;\n\t\t\tte[ 13 ] = x.y;\n\t\t\tte[ 14 ] = x.z;\n\n\t\t} else {\n\n\t\t\tte[ 12 ] = x;\n\t\t\tte[ 13 ] = y;\n\t\t\tte[ 14 ] = z;\n\n\t\t}\n\n\t\treturn this;\n\n\t}\n\n\tinvert() {\n\n\t\t// based on http://www.euclideanspace.com/maths/algebra/matrix/functions/inverse/fourD/index.htm\n\t\tconst te = this.elements,\n\n\t\t\tn11 = te[ 0 ], n21 = te[ 1 ], n31 = te[ 2 ], n41 = te[ 3 ],\n\t\t\tn12 = te[ 4 ], n22 = te[ 5 ], n32 = te[ 6 ], n42 = te[ 7 ],\n\t\t\tn13 = te[ 8 ], n23 = te[ 9 ], n33 = te[ 10 ], n43 = te[ 11 ],\n\t\t\tn14 = te[ 12 ], n24 = te[ 13 ], n34 = te[ 14 ], n44 = te[ 15 ],\n\n\t\t\tt11 = n23 * n34 * n42 - n24 * n33 * n42 + n24 * n32 * n43 - n22 * n34 * n43 - n23 * n32 * n44 + n22 * n33 * n44,\n\t\t\tt12 = n14 * n33 * n42 - n13 * n34 * n42 - n14 * n32 * n43 + n12 * n34 * n43 + n13 * n32 * n44 - n12 * n33 * n44,\n\t\t\tt13 = n13 * n24 * n42 - n14 * n23 * n42 + n14 * n22 * n43 - n12 * n24 * n43 - n13 * n22 * n44 + n12 * n23 * n44,\n\t\t\tt14 = n14 * n23 * n32 - n13 * n24 * n32 - n14 * n22 * n33 + n12 * n24 * n33 + n13 * n22 * n34 - n12 * n23 * n34;\n\n\t\tconst det = n11 * t11 + n21 * t12 + n31 * t13 + n41 * t14;\n\n\t\tif ( det === 0 ) return this.set( 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0 );\n\n\t\tconst detInv = 1 / det;\n\n\t\tte[ 0 ] = t11 * detInv;\n\t\tte[ 1 ] = ( n24 * n33 * n41 - n23 * n34 * n41 - n24 * n31 * n43 + n21 * n34 * n43 + n23 * n31 * n44 - n21 * n33 * n44 ) * detInv;\n\t\tte[ 2 ] = ( n22 * n34 * n41 - n24 * n32 * n41 + n24 * n31 * n42 - n21 * n34 * n42 - n22 * n31 * n44 + n21 * n32 * n44 ) * detInv;\n\t\tte[ 3 ] = ( n23 * n32 * n41 - n22 * n33 * n41 - n23 * n31 * n42 + n21 * n33 * n42 + n22 * n31 * n43 - n21 * n32 * n43 ) * detInv;\n\n\t\tte[ 4 ] = t12 * detInv;\n\t\tte[ 5 ] = ( n13 * n34 * n41 - n14 * n33 * n41 + n14 * n31 * n43 - n11 * n34 * n43 - n13 * n31 * n44 + n11 * n33 * n44 ) * detInv;\n\t\tte[ 6 ] = ( n14 * n32 * n41 - n12 * n34 * n41 - n14 * n31 * n42 + n11 * n34 * n42 + n12 * n31 * n44 - n11 * n32 * n44 ) * detInv;\n\t\tte[ 7 ] = ( n12 * n33 * n41 - n13 * n32 * n41 + n13 * n31 * n42 - n11 * n33 * n42 - n12 * n31 * n43 + n11 * n32 * n43 ) * detInv;\n\n\t\tte[ 8 ] = t13 * detInv;\n\t\tte[ 9 ] = ( n14 * n23 * n41 - n13 * n24 * n41 - n14 * n21 * n43 + n11 * n24 * n43 + n13 * n21 * n44 - n11 * n23 * n44 ) * detInv;\n\t\tte[ 10 ] = ( n12 * n24 * n41 - n14 * n22 * n41 + n14 * n21 * n42 - n11 * n24 * n42 - n12 * n21 * n44 + n11 * n22 * n44 ) * detInv;\n\t\tte[ 11 ] = ( n13 * n22 * n41 - n12 * n23 * n41 - n13 * n21 * n42 + n11 * n23 * n42 + n12 * n21 * n43 - n11 * n22 * n43 ) * detInv;\n\n\t\tte[ 12 ] = t14 * detInv;\n\t\tte[ 13 ] = ( n13 * n24 * n31 - n14 * n23 * n31 + n14 * n21 * n33 - n11 * n24 * n33 - n13 * n21 * n34 + n11 * n23 * n34 ) * detInv;\n\t\tte[ 14 ] = ( n14 * n22 * n31 - n12 * n24 * n31 - n14 * n21 * n32 + n11 * n24 * n32 + n12 * n21 * n34 - n11 * n22 * n34 ) * detInv;\n\t\tte[ 15 ] = ( n12 * n23 * n31 - n13 * n22 * n31 + n13 * n21 * n32 - n11 * n23 * n32 - n12 * n21 * n33 + n11 * n22 * n33 ) * detInv;\n\n\t\treturn this;\n\n\t}\n\n\tscale( v ) {\n\n\t\tconst te = this.elements;\n\t\tconst x = v.x, y = v.y, z = v.z;\n\n\t\tte[ 0 ] *= x; te[ 4 ] *= y; te[ 8 ] *= z;\n\t\tte[ 1 ] *= x; te[ 5 ] *= y; te[ 9 ] *= z;\n\t\tte[ 2 ] *= x; te[ 6 ] *= y; te[ 10 ] *= z;\n\t\tte[ 3 ] *= x; te[ 7 ] *= y; te[ 11 ] *= z;\n\n\t\treturn this;\n\n\t}\n\n\tgetMaxScaleOnAxis() {\n\n\t\tconst te = this.elements;\n\n\t\tconst scaleXSq = te[ 0 ] * te[ 0 ] + te[ 1 ] * te[ 1 ] + te[ 2 ] * te[ 2 ];\n\t\tconst scaleYSq = te[ 4 ] * te[ 4 ] + te[ 5 ] * te[ 5 ] + te[ 6 ] * te[ 6 ];\n\t\tconst scaleZSq = te[ 8 ] * te[ 8 ] + te[ 9 ] * te[ 9 ] + te[ 10 ] * te[ 10 ];\n\n\t\treturn Math.sqrt( Math.max( scaleXSq, scaleYSq, scaleZSq ) );\n\n\t}\n\n\tmakeTranslation( x, y, z ) {\n\n\t\tthis.set(\n\n\t\t\t1, 0, 0, x,\n\t\t\t0, 1, 0, y,\n\t\t\t0, 0, 1, z,\n\t\t\t0, 0, 0, 1\n\n\t\t);\n\n\t\treturn this;\n\n\t}\n\n\tmakeRotationX( theta ) {\n\n\t\tconst c = Math.cos( theta ), s = Math.sin( theta );\n\n\t\tthis.set(\n\n\t\t\t1, 0, 0, 0,\n\t\t\t0, c, - s, 0,\n\t\t\t0, s, c, 0,\n\t\t\t0, 0, 0, 1\n\n\t\t);\n\n\t\treturn this;\n\n\t}\n\n\tmakeRotationY( theta ) {\n\n\t\tconst c = Math.cos( theta ), s = Math.sin( theta );\n\n\t\tthis.set(\n\n\t\t\t c, 0, s, 0,\n\t\t\t 0, 1, 0, 0,\n\t\t\t- s, 0, c, 0,\n\t\t\t 0, 0, 0, 1\n\n\t\t);\n\n\t\treturn this;\n\n\t}\n\n\tmakeRotationZ( theta ) {\n\n\t\tconst c = Math.cos( theta ), s = Math.sin( theta );\n\n\t\tthis.set(\n\n\t\t\tc, - s, 0, 0,\n\t\t\ts, c, 0, 0,\n\t\t\t0, 0, 1, 0,\n\t\t\t0, 0, 0, 1\n\n\t\t);\n\n\t\treturn this;\n\n\t}\n\n\tmakeRotationAxis( axis, angle ) {\n\n\t\t// Based on http://www.gamedev.net/reference/articles/article1199.asp\n\n\t\tconst c = Math.cos( angle );\n\t\tconst s = Math.sin( angle );\n\t\tconst t = 1 - c;\n\t\tconst x = axis.x, y = axis.y, z = axis.z;\n\t\tconst tx = t * x, ty = t * y;\n\n\t\tthis.set(\n\n\t\t\ttx * x + c, tx * y - s * z, tx * z + s * y, 0,\n\t\t\ttx * y + s * z, ty * y + c, ty * z - s * x, 0,\n\t\t\ttx * z - s * y, ty * z + s * x, t * z * z + c, 0,\n\t\t\t0, 0, 0, 1\n\n\t\t);\n\n\t\treturn this;\n\n\t}\n\n\tmakeScale( x, y, z ) {\n\n\t\tthis.set(\n\n\t\t\tx, 0, 0, 0,\n\t\t\t0, y, 0, 0,\n\t\t\t0, 0, z, 0,\n\t\t\t0, 0, 0, 1\n\n\t\t);\n\n\t\treturn this;\n\n\t}\n\n\tmakeShear( x, y, z ) {\n\n\t\tthis.set(\n\n\t\t\t1, y, z, 0,\n\t\t\tx, 1, z, 0,\n\t\t\tx, y, 1, 0,\n\t\t\t0, 0, 0, 1\n\n\t\t);\n\n\t\treturn this;\n\n\t}\n\n\tcompose( position, quaternion, scale ) {\n\n\t\tconst te = this.elements;\n\n\t\tconst x = quaternion._x, y = quaternion._y, z = quaternion._z, w = quaternion._w;\n\t\tconst x2 = x + x,\ty2 = y + y, z2 = z + z;\n\t\tconst xx = x * x2, xy = x * y2, xz = x * z2;\n\t\tconst yy = y * y2, yz = y * z2, zz = z * z2;\n\t\tconst wx = w * x2, wy = w * y2, wz = w * z2;\n\n\t\tconst sx = scale.x, sy = scale.y, sz = scale.z;\n\n\t\tte[ 0 ] = ( 1 - ( yy + zz ) ) * sx;\n\t\tte[ 1 ] = ( xy + wz ) * sx;\n\t\tte[ 2 ] = ( xz - wy ) * sx;\n\t\tte[ 3 ] = 0;\n\n\t\tte[ 4 ] = ( xy - wz ) * sy;\n\t\tte[ 5 ] = ( 1 - ( xx + zz ) ) * sy;\n\t\tte[ 6 ] = ( yz + wx ) * sy;\n\t\tte[ 7 ] = 0;\n\n\t\tte[ 8 ] = ( xz + wy ) * sz;\n\t\tte[ 9 ] = ( yz - wx ) * sz;\n\t\tte[ 10 ] = ( 1 - ( xx + yy ) ) * sz;\n\t\tte[ 11 ] = 0;\n\n\t\tte[ 12 ] = position.x;\n\t\tte[ 13 ] = position.y;\n\t\tte[ 14 ] = position.z;\n\t\tte[ 15 ] = 1;\n\n\t\treturn this;\n\n\t}\n\n\tdecompose( position, quaternion, scale ) {\n\n\t\tconst te = this.elements;\n\n\t\tlet sx = _v1.set( te[ 0 ], te[ 1 ], te[ 2 ] ).length();\n\t\tconst sy = _v1.set( te[ 4 ], te[ 5 ], te[ 6 ] ).length();\n\t\tconst sz = _v1.set( te[ 8 ], te[ 9 ], te[ 10 ] ).length();\n\n\t\t// if determine is negative, we need to invert one scale\n\t\tconst det = this.determinant();\n\t\tif ( det < 0 ) sx = - sx;\n\n\t\tposition.x = te[ 12 ];\n\t\tposition.y = te[ 13 ];\n\t\tposition.z = te[ 14 ];\n\n\t\t// scale the rotation part\n\t\t_m1.copy( this );\n\n\t\tconst invSX = 1 / sx;\n\t\tconst invSY = 1 / sy;\n\t\tconst invSZ = 1 / sz;\n\n\t\t_m1.elements[ 0 ] *= invSX;\n\t\t_m1.elements[ 1 ] *= invSX;\n\t\t_m1.elements[ 2 ] *= invSX;\n\n\t\t_m1.elements[ 4 ] *= invSY;\n\t\t_m1.elements[ 5 ] *= invSY;\n\t\t_m1.elements[ 6 ] *= invSY;\n\n\t\t_m1.elements[ 8 ] *= invSZ;\n\t\t_m1.elements[ 9 ] *= invSZ;\n\t\t_m1.elements[ 10 ] *= invSZ;\n\n\t\tquaternion.setFromRotationMatrix( _m1 );\n\n\t\tscale.x = sx;\n\t\tscale.y = sy;\n\t\tscale.z = sz;\n\n\t\treturn this;\n\n\t}\n\n\tmakePerspective( left, right, top, bottom, near, far ) {\n\n\t\tif ( far === undefined ) {\n\n\t\t\tconsole.warn( 'THREE.Matrix4: .makePerspective() has been redefined and has a new signature. Please check the docs.' );\n\n\t\t}\n\n\t\tconst te = this.elements;\n\t\tconst x = 2 * near / ( right - left );\n\t\tconst y = 2 * near / ( top - bottom );\n\n\t\tconst a = ( right + left ) / ( right - left );\n\t\tconst b = ( top + bottom ) / ( top - bottom );\n\t\tconst c = - ( far + near ) / ( far - near );\n\t\tconst d = - 2 * far * near / ( far - near );\n\n\t\tte[ 0 ] = x;\tte[ 4 ] = 0;\tte[ 8 ] = a;\tte[ 12 ] = 0;\n\t\tte[ 1 ] = 0;\tte[ 5 ] = y;\tte[ 9 ] = b;\tte[ 13 ] = 0;\n\t\tte[ 2 ] = 0;\tte[ 6 ] = 0;\tte[ 10 ] = c;\tte[ 14 ] = d;\n\t\tte[ 3 ] = 0;\tte[ 7 ] = 0;\tte[ 11 ] = - 1;\tte[ 15 ] = 0;\n\n\t\treturn this;\n\n\t}\n\n\tmakeOrthographic( left, right, top, bottom, near, far ) {\n\n\t\tconst te = this.elements;\n\t\tconst w = 1.0 / ( right - left );\n\t\tconst h = 1.0 / ( top - bottom );\n\t\tconst p = 1.0 / ( far - near );\n\n\t\tconst x = ( right + left ) * w;\n\t\tconst y = ( top + bottom ) * h;\n\t\tconst z = ( far + near ) * p;\n\n\t\tte[ 0 ] = 2 * w;\tte[ 4 ] = 0;\tte[ 8 ] = 0;\tte[ 12 ] = - x;\n\t\tte[ 1 ] = 0;\tte[ 5 ] = 2 * h;\tte[ 9 ] = 0;\tte[ 13 ] = - y;\n\t\tte[ 2 ] = 0;\tte[ 6 ] = 0;\tte[ 10 ] = - 2 * p;\tte[ 14 ] = - z;\n\t\tte[ 3 ] = 0;\tte[ 7 ] = 0;\tte[ 11 ] = 0;\tte[ 15 ] = 1;\n\n\t\treturn this;\n\n\t}\n\n\tequals( matrix ) {\n\n\t\tconst te = this.elements;\n\t\tconst me = matrix.elements;\n\n\t\tfor ( let i = 0; i < 16; i ++ ) {\n\n\t\t\tif ( te[ i ] !== me[ i ] ) return false;\n\n\t\t}\n\n\t\treturn true;\n\n\t}\n\n\tfromArray( array, offset = 0 ) {\n\n\t\tfor ( let i = 0; i < 16; i ++ ) {\n\n\t\t\tthis.elements[ i ] = array[ i + offset ];\n\n\t\t}\n\n\t\treturn this;\n\n\t}\n\n\ttoArray( array = [], offset = 0 ) {\n\n\t\tconst te = this.elements;\n\n\t\tarray[ offset ] = te[ 0 ];\n\t\tarray[ offset + 1 ] = te[ 1 ];\n\t\tarray[ offset + 2 ] = te[ 2 ];\n\t\tarray[ offset + 3 ] = te[ 3 ];\n\n\t\tarray[ offset + 4 ] = te[ 4 ];\n\t\tarray[ offset + 5 ] = te[ 5 ];\n\t\tarray[ offset + 6 ] = te[ 6 ];\n\t\tarray[ offset + 7 ] = te[ 7 ];\n\n\t\tarray[ offset + 8 ] = te[ 8 ];\n\t\tarray[ offset + 9 ] = te[ 9 ];\n\t\tarray[ offset + 10 ] = te[ 10 ];\n\t\tarray[ offset + 11 ] = te[ 11 ];\n\n\t\tarray[ offset + 12 ] = te[ 12 ];\n\t\tarray[ offset + 13 ] = te[ 13 ];\n\t\tarray[ offset + 14 ] = te[ 14 ];\n\t\tarray[ offset + 15 ] = te[ 15 ];\n\n\t\treturn array;\n\n\t}\n\n}\n\nMatrix4.prototype.isMatrix4 = true;\n\nconst _v1 = /*@__PURE__*/ new Vector3();\nconst _m1 = /*@__PURE__*/ new Matrix4();\nconst _zero = /*@__PURE__*/ new Vector3( 0, 0, 0 );\nconst _one = /*@__PURE__*/ new Vector3( 1, 1, 1 );\nconst _x = /*@__PURE__*/ new Vector3();\nconst _y = /*@__PURE__*/ new Vector3();\nconst _z = /*@__PURE__*/ new Vector3();\n\nexport { Matrix4 };\n","/**\n * https://github.com/mrdoob/eventdispatcher.js/\n */\n\nfunction EventDispatcher() {}\n\nObject.assign( EventDispatcher.prototype, {\n\n\taddEventListener: function ( type, listener ) {\n\n\t\tif ( this._listeners === undefined ) this._listeners = {};\n\n\t\tconst listeners = this._listeners;\n\n\t\tif ( listeners[ type ] === undefined ) {\n\n\t\t\tlisteners[ type ] = [];\n\n\t\t}\n\n\t\tif ( listeners[ type ].indexOf( listener ) === - 1 ) {\n\n\t\t\tlisteners[ type ].push( listener );\n\n\t\t}\n\n\t},\n\n\thasEventListener: function ( type, listener ) {\n\n\t\tif ( this._listeners === undefined ) return false;\n\n\t\tconst listeners = this._listeners;\n\n\t\treturn listeners[ type ] !== undefined && listeners[ type ].indexOf( listener ) !== - 1;\n\n\t},\n\n\tremoveEventListener: function ( type, listener ) {\n\n\t\tif ( this._listeners === undefined ) return;\n\n\t\tconst listeners = this._listeners;\n\t\tconst listenerArray = listeners[ type ];\n\n\t\tif ( listenerArray !== undefined ) {\n\n\t\t\tconst index = listenerArray.indexOf( listener );\n\n\t\t\tif ( index !== - 1 ) {\n\n\t\t\t\tlistenerArray.splice( index, 1 );\n\n\t\t\t}\n\n\t\t}\n\n\t},\n\n\tdispatchEvent: function ( event ) {\n\n\t\tif ( this._listeners === undefined ) return;\n\n\t\tconst listeners = this._listeners;\n\t\tconst listenerArray = listeners[ event.type ];\n\n\t\tif ( listenerArray !== undefined ) {\n\n\t\t\tevent.target = this;\n\n\t\t\t// Make a copy, in case listeners are removed while iterating.\n\t\t\tconst array = listenerArray.slice( 0 );\n\n\t\t\tfor ( let i = 0, l = array.length; i < l; i ++ ) {\n\n\t\t\t\tarray[ i ].call( this, event );\n\n\t\t\t}\n\n\t\t}\n\n\t}\n\n} );\n\n\nexport { EventDispatcher };\n","import { Quaternion } from './Quaternion.js';\nimport { Vector3 } from './Vector3.js';\nimport { Matrix4 } from './Matrix4.js';\nimport { MathUtils } from './MathUtils.js';\n\nconst _matrix = /*@__PURE__*/ new Matrix4();\nconst _quaternion = /*@__PURE__*/ new Quaternion();\n\nclass Euler {\n\n\tconstructor( x = 0, y = 0, z = 0, order = Euler.DefaultOrder ) {\n\n\t\tthis._x = x;\n\t\tthis._y = y;\n\t\tthis._z = z;\n\t\tthis._order = order;\n\n\t}\n\n\tget x() {\n\n\t\treturn this._x;\n\n\t}\n\n\tset x( value ) {\n\n\t\tthis._x = value;\n\t\tthis._onChangeCallback();\n\n\t}\n\n\tget y() {\n\n\t\treturn this._y;\n\n\t}\n\n\tset y( value ) {\n\n\t\tthis._y = value;\n\t\tthis._onChangeCallback();\n\n\t}\n\n\tget z() {\n\n\t\treturn this._z;\n\n\t}\n\n\tset z( value ) {\n\n\t\tthis._z = value;\n\t\tthis._onChangeCallback();\n\n\t}\n\n\tget order() {\n\n\t\treturn this._order;\n\n\t}\n\n\tset order( value ) {\n\n\t\tthis._order = value;\n\t\tthis._onChangeCallback();\n\n\t}\n\n\tset( x, y, z, order ) {\n\n\t\tthis._x = x;\n\t\tthis._y = y;\n\t\tthis._z = z;\n\t\tthis._order = order || this._order;\n\n\t\tthis._onChangeCallback();\n\n\t\treturn this;\n\n\t}\n\n\tclone() {\n\n\t\treturn new this.constructor( this._x, this._y, this._z, this._order );\n\n\t}\n\n\tcopy( euler ) {\n\n\t\tthis._x = euler._x;\n\t\tthis._y = euler._y;\n\t\tthis._z = euler._z;\n\t\tthis._order = euler._order;\n\n\t\tthis._onChangeCallback();\n\n\t\treturn this;\n\n\t}\n\n\tsetFromRotationMatrix( m, order, update ) {\n\n\t\tconst clamp = MathUtils.clamp;\n\n\t\t// assumes the upper 3x3 of m is a pure rotation matrix (i.e, unscaled)\n\n\t\tconst te = m.elements;\n\t\tconst m11 = te[ 0 ], m12 = te[ 4 ], m13 = te[ 8 ];\n\t\tconst m21 = te[ 1 ], m22 = te[ 5 ], m23 = te[ 9 ];\n\t\tconst m31 = te[ 2 ], m32 = te[ 6 ], m33 = te[ 10 ];\n\n\t\torder = order || this._order;\n\n\t\tswitch ( order ) {\n\n\t\t\tcase 'XYZ':\n\n\t\t\t\tthis._y = Math.asin( clamp( m13, - 1, 1 ) );\n\n\t\t\t\tif ( Math.abs( m13 ) < 0.9999999 ) {\n\n\t\t\t\t\tthis._x = Math.atan2( - m23, m33 );\n\t\t\t\t\tthis._z = Math.atan2( - m12, m11 );\n\n\t\t\t\t} else {\n\n\t\t\t\t\tthis._x = Math.atan2( m32, m22 );\n\t\t\t\t\tthis._z = 0;\n\n\t\t\t\t}\n\n\t\t\t\tbreak;\n\n\t\t\tcase 'YXZ':\n\n\t\t\t\tthis._x = Math.asin( - clamp( m23, - 1, 1 ) );\n\n\t\t\t\tif ( Math.abs( m23 ) < 0.9999999 ) {\n\n\t\t\t\t\tthis._y = Math.atan2( m13, m33 );\n\t\t\t\t\tthis._z = Math.atan2( m21, m22 );\n\n\t\t\t\t} else {\n\n\t\t\t\t\tthis._y = Math.atan2( - m31, m11 );\n\t\t\t\t\tthis._z = 0;\n\n\t\t\t\t}\n\n\t\t\t\tbreak;\n\n\t\t\tcase 'ZXY':\n\n\t\t\t\tthis._x = Math.asin( clamp( m32, - 1, 1 ) );\n\n\t\t\t\tif ( Math.abs( m32 ) < 0.9999999 ) {\n\n\t\t\t\t\tthis._y = Math.atan2( - m31, m33 );\n\t\t\t\t\tthis._z = Math.atan2( - m12, m22 );\n\n\t\t\t\t} else {\n\n\t\t\t\t\tthis._y = 0;\n\t\t\t\t\tthis._z = Math.atan2( m21, m11 );\n\n\t\t\t\t}\n\n\t\t\t\tbreak;\n\n\t\t\tcase 'ZYX':\n\n\t\t\t\tthis._y = Math.asin( - clamp( m31, - 1, 1 ) );\n\n\t\t\t\tif ( Math.abs( m31 ) < 0.9999999 ) {\n\n\t\t\t\t\tthis._x = Math.atan2( m32, m33 );\n\t\t\t\t\tthis._z = Math.atan2( m21, m11 );\n\n\t\t\t\t} else {\n\n\t\t\t\t\tthis._x = 0;\n\t\t\t\t\tthis._z = Math.atan2( - m12, m22 );\n\n\t\t\t\t}\n\n\t\t\t\tbreak;\n\n\t\t\tcase 'YZX':\n\n\t\t\t\tthis._z = Math.asin( clamp( m21, - 1, 1 ) );\n\n\t\t\t\tif ( Math.abs( m21 ) < 0.9999999 ) {\n\n\t\t\t\t\tthis._x = Math.atan2( - m23, m22 );\n\t\t\t\t\tthis._y = Math.atan2( - m31, m11 );\n\n\t\t\t\t} else {\n\n\t\t\t\t\tthis._x = 0;\n\t\t\t\t\tthis._y = Math.atan2( m13, m33 );\n\n\t\t\t\t}\n\n\t\t\t\tbreak;\n\n\t\t\tcase 'XZY':\n\n\t\t\t\tthis._z = Math.asin( - clamp( m12, - 1, 1 ) );\n\n\t\t\t\tif ( Math.abs( m12 ) < 0.9999999 ) {\n\n\t\t\t\t\tthis._x = Math.atan2( m32, m22 );\n\t\t\t\t\tthis._y = Math.atan2( m13, m11 );\n\n\t\t\t\t} else {\n\n\t\t\t\t\tthis._x = Math.atan2( - m23, m33 );\n\t\t\t\t\tthis._y = 0;\n\n\t\t\t\t}\n\n\t\t\t\tbreak;\n\n\t\t\tdefault:\n\n\t\t\t\tconsole.warn( 'THREE.Euler: .setFromRotationMatrix() encountered an unknown order: ' + order );\n\n\t\t}\n\n\t\tthis._order = order;\n\n\t\tif ( update !== false ) this._onChangeCallback();\n\n\t\treturn this;\n\n\t}\n\n\tsetFromQuaternion( q, order, update ) {\n\n\t\t_matrix.makeRotationFromQuaternion( q );\n\n\t\treturn this.setFromRotationMatrix( _matrix, order, update );\n\n\t}\n\n\tsetFromVector3( v, order ) {\n\n\t\treturn this.set( v.x, v.y, v.z, order || this._order );\n\n\t}\n\n\treorder( newOrder ) {\n\n\t\t// WARNING: this discards revolution information -bhouston\n\n\t\t_quaternion.setFromEuler( this );\n\n\t\treturn this.setFromQuaternion( _quaternion, newOrder );\n\n\t}\n\n\tequals( euler ) {\n\n\t\treturn ( euler._x === this._x ) && ( euler._y === this._y ) && ( euler._z === this._z ) && ( euler._order === this._order );\n\n\t}\n\n\tfromArray( array ) {\n\n\t\tthis._x = array[ 0 ];\n\t\tthis._y = array[ 1 ];\n\t\tthis._z = array[ 2 ];\n\t\tif ( array[ 3 ] !== undefined ) this._order = array[ 3 ];\n\n\t\tthis._onChangeCallback();\n\n\t\treturn this;\n\n\t}\n\n\ttoArray( array = [], offset = 0 ) {\n\n\t\tarray[ offset ] = this._x;\n\t\tarray[ offset + 1 ] = this._y;\n\t\tarray[ offset + 2 ] = this._z;\n\t\tarray[ offset + 3 ] = this._order;\n\n\t\treturn array;\n\n\t}\n\n\ttoVector3( optionalResult ) {\n\n\t\tif ( optionalResult ) {\n\n\t\t\treturn optionalResult.set( this._x, this._y, this._z );\n\n\t\t} else {\n\n\t\t\treturn new Vector3( this._x, this._y, this._z );\n\n\t\t}\n\n\t}\n\n\t_onChange( callback ) {\n\n\t\tthis._onChangeCallback = callback;\n\n\t\treturn this;\n\n\t}\n\n\t_onChangeCallback() {}\n\n}\n\nEuler.prototype.isEuler = true;\n\nEuler.DefaultOrder = 'XYZ';\nEuler.RotationOrders = [ 'XYZ', 'YZX', 'ZXY', 'XZY', 'YXZ', 'ZYX' ];\n\nexport { Euler };\n","class Layers {\n\n\tconstructor() {\n\n\t\tthis.mask = 1 | 0;\n\n\t}\n\n\tset( channel ) {\n\n\t\tthis.mask = 1 << channel | 0;\n\n\t}\n\n\tenable( channel ) {\n\n\t\tthis.mask |= 1 << channel | 0;\n\n\t}\n\n\tenableAll() {\n\n\t\tthis.mask = 0xffffffff | 0;\n\n\t}\n\n\ttoggle( channel ) {\n\n\t\tthis.mask ^= 1 << channel | 0;\n\n\t}\n\n\tdisable( channel ) {\n\n\t\tthis.mask &= ~ ( 1 << channel | 0 );\n\n\t}\n\n\tdisableAll() {\n\n\t\tthis.mask = 0;\n\n\t}\n\n\ttest( layers ) {\n\n\t\treturn ( this.mask & layers.mask ) !== 0;\n\n\t}\n\n}\n\n\nexport { Layers };\n","class Matrix3 {\n\n\tconstructor() {\n\n\t\tthis.elements = [\n\n\t\t\t1, 0, 0,\n\t\t\t0, 1, 0,\n\t\t\t0, 0, 1\n\n\t\t];\n\n\t\tif ( arguments.length > 0 ) {\n\n\t\t\tconsole.error( 'THREE.Matrix3: the constructor no longer reads arguments. use .set() instead.' );\n\n\t\t}\n\n\t}\n\n\tset( n11, n12, n13, n21, n22, n23, n31, n32, n33 ) {\n\n\t\tconst te = this.elements;\n\n\t\tte[ 0 ] = n11; te[ 1 ] = n21; te[ 2 ] = n31;\n\t\tte[ 3 ] = n12; te[ 4 ] = n22; te[ 5 ] = n32;\n\t\tte[ 6 ] = n13; te[ 7 ] = n23; te[ 8 ] = n33;\n\n\t\treturn this;\n\n\t}\n\n\tidentity() {\n\n\t\tthis.set(\n\n\t\t\t1, 0, 0,\n\t\t\t0, 1, 0,\n\t\t\t0, 0, 1\n\n\t\t);\n\n\t\treturn this;\n\n\t}\n\n\tcopy( m ) {\n\n\t\tconst te = this.elements;\n\t\tconst me = m.elements;\n\n\t\tte[ 0 ] = me[ 0 ]; te[ 1 ] = me[ 1 ]; te[ 2 ] = me[ 2 ];\n\t\tte[ 3 ] = me[ 3 ]; te[ 4 ] = me[ 4 ]; te[ 5 ] = me[ 5 ];\n\t\tte[ 6 ] = me[ 6 ]; te[ 7 ] = me[ 7 ]; te[ 8 ] = me[ 8 ];\n\n\t\treturn this;\n\n\t}\n\n\textractBasis( xAxis, yAxis, zAxis ) {\n\n\t\txAxis.setFromMatrix3Column( this, 0 );\n\t\tyAxis.setFromMatrix3Column( this, 1 );\n\t\tzAxis.setFromMatrix3Column( this, 2 );\n\n\t\treturn this;\n\n\t}\n\n\tsetFromMatrix4( m ) {\n\n\t\tconst me = m.elements;\n\n\t\tthis.set(\n\n\t\t\tme[ 0 ], me[ 4 ], me[ 8 ],\n\t\t\tme[ 1 ], me[ 5 ], me[ 9 ],\n\t\t\tme[ 2 ], me[ 6 ], me[ 10 ]\n\n\t\t);\n\n\t\treturn this;\n\n\t}\n\n\tmultiply( m ) {\n\n\t\treturn this.multiplyMatrices( this, m );\n\n\t}\n\n\tpremultiply( m ) {\n\n\t\treturn this.multiplyMatrices( m, this );\n\n\t}\n\n\tmultiplyMatrices( a, b ) {\n\n\t\tconst ae = a.elements;\n\t\tconst be = b.elements;\n\t\tconst te = this.elements;\n\n\t\tconst a11 = ae[ 0 ], a12 = ae[ 3 ], a13 = ae[ 6 ];\n\t\tconst a21 = ae[ 1 ], a22 = ae[ 4 ], a23 = ae[ 7 ];\n\t\tconst a31 = ae[ 2 ], a32 = ae[ 5 ], a33 = ae[ 8 ];\n\n\t\tconst b11 = be[ 0 ], b12 = be[ 3 ], b13 = be[ 6 ];\n\t\tconst b21 = be[ 1 ], b22 = be[ 4 ], b23 = be[ 7 ];\n\t\tconst b31 = be[ 2 ], b32 = be[ 5 ], b33 = be[ 8 ];\n\n\t\tte[ 0 ] = a11 * b11 + a12 * b21 + a13 * b31;\n\t\tte[ 3 ] = a11 * b12 + a12 * b22 + a13 * b32;\n\t\tte[ 6 ] = a11 * b13 + a12 * b23 + a13 * b33;\n\n\t\tte[ 1 ] = a21 * b11 + a22 * b21 + a23 * b31;\n\t\tte[ 4 ] = a21 * b12 + a22 * b22 + a23 * b32;\n\t\tte[ 7 ] = a21 * b13 + a22 * b23 + a23 * b33;\n\n\t\tte[ 2 ] = a31 * b11 + a32 * b21 + a33 * b31;\n\t\tte[ 5 ] = a31 * b12 + a32 * b22 + a33 * b32;\n\t\tte[ 8 ] = a31 * b13 + a32 * b23 + a33 * b33;\n\n\t\treturn this;\n\n\t}\n\n\tmultiplyScalar( s ) {\n\n\t\tconst te = this.elements;\n\n\t\tte[ 0 ] *= s; te[ 3 ] *= s; te[ 6 ] *= s;\n\t\tte[ 1 ] *= s; te[ 4 ] *= s; te[ 7 ] *= s;\n\t\tte[ 2 ] *= s; te[ 5 ] *= s; te[ 8 ] *= s;\n\n\t\treturn this;\n\n\t}\n\n\tdeterminant() {\n\n\t\tconst te = this.elements;\n\n\t\tconst a = te[ 0 ], b = te[ 1 ], c = te[ 2 ],\n\t\t\td = te[ 3 ], e = te[ 4 ], f = te[ 5 ],\n\t\t\tg = te[ 6 ], h = te[ 7 ], i = te[ 8 ];\n\n\t\treturn a * e * i - a * f * h - b * d * i + b * f * g + c * d * h - c * e * g;\n\n\t}\n\n\tinvert() {\n\n\t\tconst te = this.elements,\n\n\t\t\tn11 = te[ 0 ], n21 = te[ 1 ], n31 = te[ 2 ],\n\t\t\tn12 = te[ 3 ], n22 = te[ 4 ], n32 = te[ 5 ],\n\t\t\tn13 = te[ 6 ], n23 = te[ 7 ], n33 = te[ 8 ],\n\n\t\t\tt11 = n33 * n22 - n32 * n23,\n\t\t\tt12 = n32 * n13 - n33 * n12,\n\t\t\tt13 = n23 * n12 - n22 * n13,\n\n\t\t\tdet = n11 * t11 + n21 * t12 + n31 * t13;\n\n\t\tif ( det === 0 ) return this.set( 0, 0, 0, 0, 0, 0, 0, 0, 0 );\n\n\t\tconst detInv = 1 / det;\n\n\t\tte[ 0 ] = t11 * detInv;\n\t\tte[ 1 ] = ( n31 * n23 - n33 * n21 ) * detInv;\n\t\tte[ 2 ] = ( n32 * n21 - n31 * n22 ) * detInv;\n\n\t\tte[ 3 ] = t12 * detInv;\n\t\tte[ 4 ] = ( n33 * n11 - n31 * n13 ) * detInv;\n\t\tte[ 5 ] = ( n31 * n12 - n32 * n11 ) * detInv;\n\n\t\tte[ 6 ] = t13 * detInv;\n\t\tte[ 7 ] = ( n21 * n13 - n23 * n11 ) * detInv;\n\t\tte[ 8 ] = ( n22 * n11 - n21 * n12 ) * detInv;\n\n\t\treturn this;\n\n\t}\n\n\ttranspose() {\n\n\t\tlet tmp;\n\t\tconst m = this.elements;\n\n\t\ttmp = m[ 1 ]; m[ 1 ] = m[ 3 ]; m[ 3 ] = tmp;\n\t\ttmp = m[ 2 ]; m[ 2 ] = m[ 6 ]; m[ 6 ] = tmp;\n\t\ttmp = m[ 5 ]; m[ 5 ] = m[ 7 ]; m[ 7 ] = tmp;\n\n\t\treturn this;\n\n\t}\n\n\tgetNormalMatrix( matrix4 ) {\n\n\t\treturn this.setFromMatrix4( matrix4 ).invert().transpose();\n\n\t}\n\n\ttransposeIntoArray( r ) {\n\n\t\tconst m = this.elements;\n\n\t\tr[ 0 ] = m[ 0 ];\n\t\tr[ 1 ] = m[ 3 ];\n\t\tr[ 2 ] = m[ 6 ];\n\t\tr[ 3 ] = m[ 1 ];\n\t\tr[ 4 ] = m[ 4 ];\n\t\tr[ 5 ] = m[ 7 ];\n\t\tr[ 6 ] = m[ 2 ];\n\t\tr[ 7 ] = m[ 5 ];\n\t\tr[ 8 ] = m[ 8 ];\n\n\t\treturn this;\n\n\t}\n\n\tsetUvTransform( tx, ty, sx, sy, rotation, cx, cy ) {\n\n\t\tconst c = Math.cos( rotation );\n\t\tconst s = Math.sin( rotation );\n\n\t\tthis.set(\n\t\t\tsx * c, sx * s, - sx * ( c * cx + s * cy ) + cx + tx,\n\t\t\t- sy * s, sy * c, - sy * ( - s * cx + c * cy ) + cy + ty,\n\t\t\t0, 0, 1\n\t\t);\n\n\t\treturn this;\n\n\t}\n\n\tscale( sx, sy ) {\n\n\t\tconst te = this.elements;\n\n\t\tte[ 0 ] *= sx; te[ 3 ] *= sx; te[ 6 ] *= sx;\n\t\tte[ 1 ] *= sy; te[ 4 ] *= sy; te[ 7 ] *= sy;\n\n\t\treturn this;\n\n\t}\n\n\trotate( theta ) {\n\n\t\tconst c = Math.cos( theta );\n\t\tconst s = Math.sin( theta );\n\n\t\tconst te = this.elements;\n\n\t\tconst a11 = te[ 0 ], a12 = te[ 3 ], a13 = te[ 6 ];\n\t\tconst a21 = te[ 1 ], a22 = te[ 4 ], a23 = te[ 7 ];\n\n\t\tte[ 0 ] = c * a11 + s * a21;\n\t\tte[ 3 ] = c * a12 + s * a22;\n\t\tte[ 6 ] = c * a13 + s * a23;\n\n\t\tte[ 1 ] = - s * a11 + c * a21;\n\t\tte[ 4 ] = - s * a12 + c * a22;\n\t\tte[ 7 ] = - s * a13 + c * a23;\n\n\t\treturn this;\n\n\t}\n\n\ttranslate( tx, ty ) {\n\n\t\tconst te = this.elements;\n\n\t\tte[ 0 ] += tx * te[ 2 ]; te[ 3 ] += tx * te[ 5 ]; te[ 6 ] += tx * te[ 8 ];\n\t\tte[ 1 ] += ty * te[ 2 ]; te[ 4 ] += ty * te[ 5 ]; te[ 7 ] += ty * te[ 8 ];\n\n\t\treturn this;\n\n\t}\n\n\tequals( matrix ) {\n\n\t\tconst te = this.elements;\n\t\tconst me = matrix.elements;\n\n\t\tfor ( let i = 0; i < 9; i ++ ) {\n\n\t\t\tif ( te[ i ] !== me[ i ] ) return false;\n\n\t\t}\n\n\t\treturn true;\n\n\t}\n\n\tfromArray( array, offset = 0 ) {\n\n\t\tfor ( let i = 0; i < 9; i ++ ) {\n\n\t\t\tthis.elements[ i ] = array[ i + offset ];\n\n\t\t}\n\n\t\treturn this;\n\n\t}\n\n\ttoArray( array = [], offset = 0 ) {\n\n\t\tconst te = this.elements;\n\n\t\tarray[ offset ] = te[ 0 ];\n\t\tarray[ offset + 1 ] = te[ 1 ];\n\t\tarray[ offset + 2 ] = te[ 2 ];\n\n\t\tarray[ offset + 3 ] = te[ 3 ];\n\t\tarray[ offset + 4 ] = te[ 4 ];\n\t\tarray[ offset + 5 ] = te[ 5 ];\n\n\t\tarray[ offset + 6 ] = te[ 6 ];\n\t\tarray[ offset + 7 ] = te[ 7 ];\n\t\tarray[ offset + 8 ] = te[ 8 ];\n\n\t\treturn array;\n\n\t}\n\n\tclone() {\n\n\t\treturn new this.constructor().fromArray( this.elements );\n\n\t}\n\n}\n\nMatrix3.prototype.isMatrix3 = true;\n\nexport { Matrix3 };\n","import { Quaternion } from '../math/Quaternion.js';\nimport { Vector3 } from '../math/Vector3.js';\nimport { Matrix4 } from '../math/Matrix4.js';\nimport { EventDispatcher } from './EventDispatcher.js';\nimport { Euler } from '../math/Euler.js';\nimport { Layers } from './Layers.js';\nimport { Matrix3 } from '../math/Matrix3.js';\nimport { MathUtils } from '../math/MathUtils.js';\n\nlet _object3DId = 0;\n\nconst _v1 = new Vector3();\nconst _q1 = new Quaternion();\nconst _m1 = new Matrix4();\nconst _target = new Vector3();\n\nconst _position = new Vector3();\nconst _scale = new Vector3();\nconst _quaternion = new Quaternion();\n\nconst _xAxis = new Vector3( 1, 0, 0 );\nconst _yAxis = new Vector3( 0, 1, 0 );\nconst _zAxis = new Vector3( 0, 0, 1 );\n\nconst _addedEvent = { type: 'added' };\nconst _removedEvent = { type: 'removed' };\n\nfunction Object3D() {\n\n\tObject.defineProperty( this, 'id', { value: _object3DId ++ } );\n\n\tthis.uuid = MathUtils.generateUUID();\n\n\tthis.name = '';\n\tthis.type = 'Object3D';\n\n\tthis.parent = null;\n\tthis.children = [];\n\n\tthis.up = Object3D.DefaultUp.clone();\n\n\tconst position = new Vector3();\n\tconst rotation = new Euler();\n\tconst quaternion = new Quaternion();\n\tconst scale = new Vector3( 1, 1, 1 );\n\n\tfunction onRotationChange() {\n\n\t\tquaternion.setFromEuler( rotation, false );\n\n\t}\n\n\tfunction onQuaternionChange() {\n\n\t\trotation.setFromQuaternion( quaternion, undefined, false );\n\n\t}\n\n\trotation._onChange( onRotationChange );\n\tquaternion._onChange( onQuaternionChange );\n\n\tObject.defineProperties( this, {\n\t\tposition: {\n\t\t\tconfigurable: true,\n\t\t\tenumerable: true,\n\t\t\tvalue: position\n\t\t},\n\t\trotation: {\n\t\t\tconfigurable: true,\n\t\t\tenumerable: true,\n\t\t\tvalue: rotation\n\t\t},\n\t\tquaternion: {\n\t\t\tconfigurable: true,\n\t\t\tenumerable: true,\n\t\t\tvalue: quaternion\n\t\t},\n\t\tscale: {\n\t\t\tconfigurable: true,\n\t\t\tenumerable: true,\n\t\t\tvalue: scale\n\t\t},\n\t\tmodelViewMatrix: {\n\t\t\tvalue: new Matrix4()\n\t\t},\n\t\tnormalMatrix: {\n\t\t\tvalue: new Matrix3()\n\t\t}\n\t} );\n\n\tthis.matrix = new Matrix4();\n\tthis.matrixWorld = new Matrix4();\n\n\tthis.matrixAutoUpdate = Object3D.DefaultMatrixAutoUpdate;\n\tthis.matrixWorldNeedsUpdate = false;\n\n\tthis.layers = new Layers();\n\tthis.visible = true;\n\n\tthis.castShadow = false;\n\tthis.receiveShadow = false;\n\n\tthis.frustumCulled = true;\n\tthis.renderOrder = 0;\n\n\tthis.animations = [];\n\n\tthis.userData = {};\n\n}\n\nObject3D.DefaultUp = new Vector3( 0, 1, 0 );\nObject3D.DefaultMatrixAutoUpdate = true;\n\nObject3D.prototype = Object.assign( Object.create( EventDispatcher.prototype ), {\n\n\tconstructor: Object3D,\n\n\tisObject3D: true,\n\n\tonBeforeRender: function () {},\n\tonAfterRender: function () {},\n\n\tapplyMatrix4: function ( matrix ) {\n\n\t\tif ( this.matrixAutoUpdate ) this.updateMatrix();\n\n\t\tthis.matrix.premultiply( matrix );\n\n\t\tthis.matrix.decompose( this.position, this.quaternion, this.scale );\n\n\t},\n\n\tapplyQuaternion: function ( q ) {\n\n\t\tthis.quaternion.premultiply( q );\n\n\t\treturn this;\n\n\t},\n\n\tsetRotationFromAxisAngle: function ( axis, angle ) {\n\n\t\t// assumes axis is normalized\n\n\t\tthis.quaternion.setFromAxisAngle( axis, angle );\n\n\t},\n\n\tsetRotationFromEuler: function ( euler ) {\n\n\t\tthis.quaternion.setFromEuler( euler, true );\n\n\t},\n\n\tsetRotationFromMatrix: function ( m ) {\n\n\t\t// assumes the upper 3x3 of m is a pure rotation matrix (i.e, unscaled)\n\n\t\tthis.quaternion.setFromRotationMatrix( m );\n\n\t},\n\n\tsetRotationFromQuaternion: function ( q ) {\n\n\t\t// assumes q is normalized\n\n\t\tthis.quaternion.copy( q );\n\n\t},\n\n\trotateOnAxis: function ( axis, angle ) {\n\n\t\t// rotate object on axis in object space\n\t\t// axis is assumed to be normalized\n\n\t\t_q1.setFromAxisAngle( axis, angle );\n\n\t\tthis.quaternion.multiply( _q1 );\n\n\t\treturn this;\n\n\t},\n\n\trotateOnWorldAxis: function ( axis, angle ) {\n\n\t\t// rotate object on axis in world space\n\t\t// axis is assumed to be normalized\n\t\t// method assumes no rotated parent\n\n\t\t_q1.setFromAxisAngle( axis, angle );\n\n\t\tthis.quaternion.premultiply( _q1 );\n\n\t\treturn this;\n\n\t},\n\n\trotateX: function ( angle ) {\n\n\t\treturn this.rotateOnAxis( _xAxis, angle );\n\n\t},\n\n\trotateY: function ( angle ) {\n\n\t\treturn this.rotateOnAxis( _yAxis, angle );\n\n\t},\n\n\trotateZ: function ( angle ) {\n\n\t\treturn this.rotateOnAxis( _zAxis, angle );\n\n\t},\n\n\ttranslateOnAxis: function ( axis, distance ) {\n\n\t\t// translate object by distance along axis in object space\n\t\t// axis is assumed to be normalized\n\n\t\t_v1.copy( axis ).applyQuaternion( this.quaternion );\n\n\t\tthis.position.add( _v1.multiplyScalar( distance ) );\n\n\t\treturn this;\n\n\t},\n\n\ttranslateX: function ( distance ) {\n\n\t\treturn this.translateOnAxis( _xAxis, distance );\n\n\t},\n\n\ttranslateY: function ( distance ) {\n\n\t\treturn this.translateOnAxis( _yAxis, distance );\n\n\t},\n\n\ttranslateZ: function ( distance ) {\n\n\t\treturn this.translateOnAxis( _zAxis, distance );\n\n\t},\n\n\tlocalToWorld: function ( vector ) {\n\n\t\treturn vector.applyMatrix4( this.matrixWorld );\n\n\t},\n\n\tworldToLocal: function ( vector ) {\n\n\t\treturn vector.applyMatrix4( _m1.copy( this.matrixWorld ).invert() );\n\n\t},\n\n\tlookAt: function ( x, y, z ) {\n\n\t\t// This method does not support objects having non-uniformly-scaled parent(s)\n\n\t\tif ( x.isVector3 ) {\n\n\t\t\t_target.copy( x );\n\n\t\t} else {\n\n\t\t\t_target.set( x, y, z );\n\n\t\t}\n\n\t\tconst parent = this.parent;\n\n\t\tthis.updateWorldMatrix( true, false );\n\n\t\t_position.setFromMatrixPosition( this.matrixWorld );\n\n\t\tif ( this.isCamera || this.isLight ) {\n\n\t\t\t_m1.lookAt( _position, _target, this.up );\n\n\t\t} else {\n\n\t\t\t_m1.lookAt( _target, _position, this.up );\n\n\t\t}\n\n\t\tthis.quaternion.setFromRotationMatrix( _m1 );\n\n\t\tif ( parent ) {\n\n\t\t\t_m1.extractRotation( parent.matrixWorld );\n\t\t\t_q1.setFromRotationMatrix( _m1 );\n\t\t\tthis.quaternion.premultiply( _q1.invert() );\n\n\t\t}\n\n\t},\n\n\tadd: function ( object ) {\n\n\t\tif ( arguments.length > 1 ) {\n\n\t\t\tfor ( let i = 0; i < arguments.length; i ++ ) {\n\n\t\t\t\tthis.add( arguments[ i ] );\n\n\t\t\t}\n\n\t\t\treturn this;\n\n\t\t}\n\n\t\tif ( object === this ) {\n\n\t\t\tconsole.error( 'THREE.Object3D.add: object can\\'t be added as a child of itself.', object );\n\t\t\treturn this;\n\n\t\t}\n\n\t\tif ( object && object.isObject3D ) {\n\n\t\t\tif ( object.parent !== null ) {\n\n\t\t\t\tobject.parent.remove( object );\n\n\t\t\t}\n\n\t\t\tobject.parent = this;\n\t\t\tthis.children.push( object );\n\n\t\t\tobject.dispatchEvent( _addedEvent );\n\n\t\t} else {\n\n\t\t\tconsole.error( 'THREE.Object3D.add: object not an instance of THREE.Object3D.', object );\n\n\t\t}\n\n\t\treturn this;\n\n\t},\n\n\tremove: function ( object ) {\n\n\t\tif ( arguments.length > 1 ) {\n\n\t\t\tfor ( let i = 0; i < arguments.length; i ++ ) {\n\n\t\t\t\tthis.remove( arguments[ i ] );\n\n\t\t\t}\n\n\t\t\treturn this;\n\n\t\t}\n\n\t\tconst index = this.children.indexOf( object );\n\n\t\tif ( index !== - 1 ) {\n\n\t\t\tobject.parent = null;\n\t\t\tthis.children.splice( index, 1 );\n\n\t\t\tobject.dispatchEvent( _removedEvent );\n\n\t\t}\n\n\t\treturn this;\n\n\t},\n\n\tclear: function () {\n\n\t\tfor ( let i = 0; i < this.children.length; i ++ ) {\n\n\t\t\tconst object = this.children[ i ];\n\n\t\t\tobject.parent = null;\n\n\t\t\tobject.dispatchEvent( _removedEvent );\n\n\t\t}\n\n\t\tthis.children.length = 0;\n\n\t\treturn this;\n\n\n\t},\n\n\tattach: function ( object ) {\n\n\t\t// adds object as a child of this, while maintaining the object's world transform\n\n\t\tthis.updateWorldMatrix( true, false );\n\n\t\t_m1.copy( this.matrixWorld ).invert();\n\n\t\tif ( object.parent !== null ) {\n\n\t\t\tobject.parent.updateWorldMatrix( true, false );\n\n\t\t\t_m1.multiply( object.parent.matrixWorld );\n\n\t\t}\n\n\t\tobject.applyMatrix4( _m1 );\n\n\t\tthis.add( object );\n\n\t\tobject.updateWorldMatrix( false, true );\n\n\t\treturn this;\n\n\t},\n\n\tgetObjectById: function ( id ) {\n\n\t\treturn this.getObjectByProperty( 'id', id );\n\n\t},\n\n\tgetObjectByName: function ( name ) {\n\n\t\treturn this.getObjectByProperty( 'name', name );\n\n\t},\n\n\tgetObjectByProperty: function ( name, value ) {\n\n\t\tif ( this[ name ] === value ) return this;\n\n\t\tfor ( let i = 0, l = this.children.length; i < l; i ++ ) {\n\n\t\t\tconst child = this.children[ i ];\n\t\t\tconst object = child.getObjectByProperty( name, value );\n\n\t\t\tif ( object !== undefined ) {\n\n\t\t\t\treturn object;\n\n\t\t\t}\n\n\t\t}\n\n\t\treturn undefined;\n\n\t},\n\n\tgetWorldPosition: function ( target ) {\n\n\t\tif ( target === undefined ) {\n\n\t\t\tconsole.warn( 'THREE.Object3D: .getWorldPosition() target is now required' );\n\t\t\ttarget = new Vector3();\n\n\t\t}\n\n\t\tthis.updateWorldMatrix( true, false );\n\n\t\treturn target.setFromMatrixPosition( this.matrixWorld );\n\n\t},\n\n\tgetWorldQuaternion: function ( target ) {\n\n\t\tif ( target === undefined ) {\n\n\t\t\tconsole.warn( 'THREE.Object3D: .getWorldQuaternion() target is now required' );\n\t\t\ttarget = new Quaternion();\n\n\t\t}\n\n\t\tthis.updateWorldMatrix( true, false );\n\n\t\tthis.matrixWorld.decompose( _position, target, _scale );\n\n\t\treturn target;\n\n\t},\n\n\tgetWorldScale: function ( target ) {\n\n\t\tif ( target === undefined ) {\n\n\t\t\tconsole.warn( 'THREE.Object3D: .getWorldScale() target is now required' );\n\t\t\ttarget = new Vector3();\n\n\t\t}\n\n\t\tthis.updateWorldMatrix( true, false );\n\n\t\tthis.matrixWorld.decompose( _position, _quaternion, target );\n\n\t\treturn target;\n\n\t},\n\n\tgetWorldDirection: function ( target ) {\n\n\t\tif ( target === undefined ) {\n\n\t\t\tconsole.warn( 'THREE.Object3D: .getWorldDirection() target is now required' );\n\t\t\ttarget = new Vector3();\n\n\t\t}\n\n\t\tthis.updateWorldMatrix( true, false );\n\n\t\tconst e = this.matrixWorld.elements;\n\n\t\treturn target.set( e[ 8 ], e[ 9 ], e[ 10 ] ).normalize();\n\n\t},\n\n\traycast: function () {},\n\n\ttraverse: function ( callback ) {\n\n\t\tcallback( this );\n\n\t\tconst children = this.children;\n\n\t\tfor ( let i = 0, l = children.length; i < l; i ++ ) {\n\n\t\t\tchildren[ i ].traverse( callback );\n\n\t\t}\n\n\t},\n\n\ttraverseVisible: function ( callback ) {\n\n\t\tif ( this.visible === false ) return;\n\n\t\tcallback( this );\n\n\t\tconst children = this.children;\n\n\t\tfor ( let i = 0, l = children.length; i < l; i ++ ) {\n\n\t\t\tchildren[ i ].traverseVisible( callback );\n\n\t\t}\n\n\t},\n\n\ttraverseAncestors: function ( callback ) {\n\n\t\tconst parent = this.parent;\n\n\t\tif ( parent !== null ) {\n\n\t\t\tcallback( parent );\n\n\t\t\tparent.traverseAncestors( callback );\n\n\t\t}\n\n\t},\n\n\tupdateMatrix: function () {\n\n\t\tthis.matrix.compose( this.position, this.quaternion, this.scale );\n\n\t\tthis.matrixWorldNeedsUpdate = true;\n\n\t},\n\n\tupdateMatrixWorld: function ( force ) {\n\n\t\tif ( this.matrixAutoUpdate ) this.updateMatrix();\n\n\t\tif ( this.matrixWorldNeedsUpdate || force ) {\n\n\t\t\tif ( this.parent === null ) {\n\n\t\t\t\tthis.matrixWorld.copy( this.matrix );\n\n\t\t\t} else {\n\n\t\t\t\tthis.matrixWorld.multiplyMatrices( this.parent.matrixWorld, this.matrix );\n\n\t\t\t}\n\n\t\t\tthis.matrixWorldNeedsUpdate = false;\n\n\t\t\tforce = true;\n\n\t\t}\n\n\t\t// update children\n\n\t\tconst children = this.children;\n\n\t\tfor ( let i = 0, l = children.length; i < l; i ++ ) {\n\n\t\t\tchildren[ i ].updateMatrixWorld( force );\n\n\t\t}\n\n\t},\n\n\tupdateWorldMatrix: function ( updateParents, updateChildren ) {\n\n\t\tconst parent = this.parent;\n\n\t\tif ( updateParents === true && parent !== null ) {\n\n\t\t\tparent.updateWorldMatrix( true, false );\n\n\t\t}\n\n\t\tif ( this.matrixAutoUpdate ) this.updateMatrix();\n\n\t\tif ( this.parent === null ) {\n\n\t\t\tthis.matrixWorld.copy( this.matrix );\n\n\t\t} else {\n\n\t\t\tthis.matrixWorld.multiplyMatrices( this.parent.matrixWorld, this.matrix );\n\n\t\t}\n\n\t\t// update children\n\n\t\tif ( updateChildren === true ) {\n\n\t\t\tconst children = this.children;\n\n\t\t\tfor ( let i = 0, l = children.length; i < l; i ++ ) {\n\n\t\t\t\tchildren[ i ].updateWorldMatrix( false, true );\n\n\t\t\t}\n\n\t\t}\n\n\t},\n\n\ttoJSON: function ( meta ) {\n\n\t\t// meta is a string when called from JSON.stringify\n\t\tconst isRootObject = ( meta === undefined || typeof meta === 'string' );\n\n\t\tconst output = {};\n\n\t\t// meta is a hash used to collect geometries, materials.\n\t\t// not providing it implies that this is the root object\n\t\t// being serialized.\n\t\tif ( isRootObject ) {\n\n\t\t\t// initialize meta obj\n\t\t\tmeta = {\n\t\t\t\tgeometries: {},\n\t\t\t\tmaterials: {},\n\t\t\t\ttextures: {},\n\t\t\t\timages: {},\n\t\t\t\tshapes: {},\n\t\t\t\tskeletons: {},\n\t\t\t\tanimations: {}\n\t\t\t};\n\n\t\t\toutput.metadata = {\n\t\t\t\tversion: 4.5,\n\t\t\t\ttype: 'Object',\n\t\t\t\tgenerator: 'Object3D.toJSON'\n\t\t\t};\n\n\t\t}\n\n\t\t// standard Object3D serialization\n\n\t\tconst object = {};\n\n\t\tobject.uuid = this.uuid;\n\t\tobject.type = this.type;\n\n\t\tif ( this.name !== '' ) object.name = this.name;\n\t\tif ( this.castShadow === true ) object.castShadow = true;\n\t\tif ( this.receiveShadow === true ) object.receiveShadow = true;\n\t\tif ( this.visible === false ) object.visible = false;\n\t\tif ( this.frustumCulled === false ) object.frustumCulled = false;\n\t\tif ( this.renderOrder !== 0 ) object.renderOrder = this.renderOrder;\n\t\tif ( JSON.stringify( this.userData ) !== '{}' ) object.userData = this.userData;\n\n\t\tobject.layers = this.layers.mask;\n\t\tobject.matrix = this.matrix.toArray();\n\n\t\tif ( this.matrixAutoUpdate === false ) object.matrixAutoUpdate = false;\n\n\t\t// object specific properties\n\n\t\tif ( this.isInstancedMesh ) {\n\n\t\t\tobject.type = 'InstancedMesh';\n\t\t\tobject.count = this.count;\n\t\t\tobject.instanceMatrix = this.instanceMatrix.toJSON();\n\n\t\t}\n\n\t\t//\n\n\t\tfunction serialize( library, element ) {\n\n\t\t\tif ( library[ element.uuid ] === undefined ) {\n\n\t\t\t\tlibrary[ element.uuid ] = element.toJSON( meta );\n\n\t\t\t}\n\n\t\t\treturn element.uuid;\n\n\t\t}\n\n\t\tif ( this.isMesh || this.isLine || this.isPoints ) {\n\n\t\t\tobject.geometry = serialize( meta.geometries, this.geometry );\n\n\t\t\tconst parameters = this.geometry.parameters;\n\n\t\t\tif ( parameters !== undefined && parameters.shapes !== undefined ) {\n\n\t\t\t\tconst shapes = parameters.shapes;\n\n\t\t\t\tif ( Array.isArray( shapes ) ) {\n\n\t\t\t\t\tfor ( let i = 0, l = shapes.length; i < l; i ++ ) {\n\n\t\t\t\t\t\tconst shape = shapes[ i ];\n\n\t\t\t\t\t\tserialize( meta.shapes, shape );\n\n\t\t\t\t\t}\n\n\t\t\t\t} else {\n\n\t\t\t\t\tserialize( meta.shapes, shapes );\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t}\n\n\t\tif ( this.isSkinnedMesh ) {\n\n\t\t\tobject.bindMode = this.bindMode;\n\t\t\tobject.bindMatrix = this.bindMatrix.toArray();\n\n\t\t\tif ( this.skeleton !== undefined ) {\n\n\t\t\t\tserialize( meta.skeletons, this.skeleton );\n\n\t\t\t\tobject.skeleton = this.skeleton.uuid;\n\n\t\t\t}\n\n\t\t}\n\n\t\tif ( this.material !== undefined ) {\n\n\t\t\tif ( Array.isArray( this.material ) ) {\n\n\t\t\t\tconst uuids = [];\n\n\t\t\t\tfor ( let i = 0, l = this.material.length; i < l; i ++ ) {\n\n\t\t\t\t\tuuids.push( serialize( meta.materials, this.material[ i ] ) );\n\n\t\t\t\t}\n\n\t\t\t\tobject.material = uuids;\n\n\t\t\t} else {\n\n\t\t\t\tobject.material = serialize( meta.materials, this.material );\n\n\t\t\t}\n\n\t\t}\n\n\t\t//\n\n\t\tif ( this.children.length > 0 ) {\n\n\t\t\tobject.children = [];\n\n\t\t\tfor ( let i = 0; i < this.children.length; i ++ ) {\n\n\t\t\t\tobject.children.push( this.children[ i ].toJSON( meta ).object );\n\n\t\t\t}\n\n\t\t}\n\n\t\t//\n\n\t\tif ( this.animations.length > 0 ) {\n\n\t\t\tobject.animations = [];\n\n\t\t\tfor ( let i = 0; i < this.animations.length; i ++ ) {\n\n\t\t\t\tconst animation = this.animations[ i ];\n\n\t\t\t\tobject.animations.push( serialize( meta.animations, animation ) );\n\n\t\t\t}\n\n\t\t}\n\n\t\tif ( isRootObject ) {\n\n\t\t\tconst geometries = extractFromCache( meta.geometries );\n\t\t\tconst materials = extractFromCache( meta.materials );\n\t\t\tconst textures = extractFromCache( meta.textures );\n\t\t\tconst images = extractFromCache( meta.images );\n\t\t\tconst shapes = extractFromCache( meta.shapes );\n\t\t\tconst skeletons = extractFromCache( meta.skeletons );\n\t\t\tconst animations = extractFromCache( meta.animations );\n\n\t\t\tif ( geometries.length > 0 ) output.geometries = geometries;\n\t\t\tif ( materials.length > 0 ) output.materials = materials;\n\t\t\tif ( textures.length > 0 ) output.textures = textures;\n\t\t\tif ( images.length > 0 ) output.images = images;\n\t\t\tif ( shapes.length > 0 ) output.shapes = shapes;\n\t\t\tif ( skeletons.length > 0 ) output.skeletons = skeletons;\n\t\t\tif ( animations.length > 0 ) output.animations = animations;\n\n\t\t}\n\n\t\toutput.object = object;\n\n\t\treturn output;\n\n\t\t// extract data from the cache hash\n\t\t// remove metadata on each item\n\t\t// and return as array\n\t\tfunction extractFromCache( cache ) {\n\n\t\t\tconst values = [];\n\t\t\tfor ( const key in cache ) {\n\n\t\t\t\tconst data = cache[ key ];\n\t\t\t\tdelete data.metadata;\n\t\t\t\tvalues.push( data );\n\n\t\t\t}\n\n\t\t\treturn values;\n\n\t\t}\n\n\t},\n\n\tclone: function ( recursive ) {\n\n\t\treturn new this.constructor().copy( this, recursive );\n\n\t},\n\n\tcopy: function ( source, recursive = true ) {\n\n\t\tthis.name = source.name;\n\n\t\tthis.up.copy( source.up );\n\n\t\tthis.position.copy( source.position );\n\t\tthis.rotation.order = source.rotation.order;\n\t\tthis.quaternion.copy( source.quaternion );\n\t\tthis.scale.copy( source.scale );\n\n\t\tthis.matrix.copy( source.matrix );\n\t\tthis.matrixWorld.copy( source.matrixWorld );\n\n\t\tthis.matrixAutoUpdate = source.matrixAutoUpdate;\n\t\tthis.matrixWorldNeedsUpdate = source.matrixWorldNeedsUpdate;\n\n\t\tthis.layers.mask = source.layers.mask;\n\t\tthis.visible = source.visible;\n\n\t\tthis.castShadow = source.castShadow;\n\t\tthis.receiveShadow = source.receiveShadow;\n\n\t\tthis.frustumCulled = source.frustumCulled;\n\t\tthis.renderOrder = source.renderOrder;\n\n\t\tthis.userData = JSON.parse( JSON.stringify( source.userData ) );\n\n\t\tif ( recursive === true ) {\n\n\t\t\tfor ( let i = 0; i < source.children.length; i ++ ) {\n\n\t\t\t\tconst child = source.children[ i ];\n\t\t\t\tthis.add( child.clone() );\n\n\t\t\t}\n\n\t\t}\n\n\t\treturn this;\n\n\t}\n\n} );\n\n\nexport { Object3D };\n","import { Object3D } from '../core/Object3D.js';\n\nclass Scene extends Object3D {\n\n\tconstructor() {\n\n\t\tsuper();\n\n\t\tthis.type = 'Scene';\n\n\t\tthis.background = null;\n\t\tthis.environment = null;\n\t\tthis.fog = null;\n\n\t\tthis.overrideMaterial = null;\n\n\t\tthis.autoUpdate = true; // checked by the renderer\n\n\t\tif ( typeof __THREE_DEVTOOLS__ !== 'undefined' ) {\n\n\t\t\t__THREE_DEVTOOLS__.dispatchEvent( new CustomEvent( 'observe', { detail: this } ) ); // eslint-disable-line no-undef\n\n\t\t}\n\n\t}\n\n\tcopy( source, recursive ) {\n\n\t\tsuper.copy( source, recursive );\n\n\t\tif ( source.background !== null ) this.background = source.background.clone();\n\t\tif ( source.environment !== null ) this.environment = source.environment.clone();\n\t\tif ( source.fog !== null ) this.fog = source.fog.clone();\n\n\t\tif ( source.overrideMaterial !== null ) this.overrideMaterial = source.overrideMaterial.clone();\n\n\t\tthis.autoUpdate = source.autoUpdate;\n\t\tthis.matrixAutoUpdate = source.matrixAutoUpdate;\n\n\t\treturn this;\n\n\t}\n\n\ttoJSON( meta ) {\n\n\t\tconst data = super.toJSON( meta );\n\n\t\tif ( this.background !== null ) data.object.background = this.background.toJSON( meta );\n\t\tif ( this.environment !== null ) data.object.environment = this.environment.toJSON( meta );\n\t\tif ( this.fog !== null ) data.object.fog = this.fog.toJSON();\n\n\t\treturn data;\n\n\t}\n\n}\n\nScene.prototype.isScene = true;\n\nexport { Scene };\n","import { MathUtils } from './MathUtils.js';\n\nconst _colorKeywords = { 'aliceblue': 0xF0F8FF, 'antiquewhite': 0xFAEBD7, 'aqua': 0x00FFFF, 'aquamarine': 0x7FFFD4, 'azure': 0xF0FFFF,\n\t'beige': 0xF5F5DC, 'bisque': 0xFFE4C4, 'black': 0x000000, 'blanchedalmond': 0xFFEBCD, 'blue': 0x0000FF, 'blueviolet': 0x8A2BE2,\n\t'brown': 0xA52A2A, 'burlywood': 0xDEB887, 'cadetblue': 0x5F9EA0, 'chartreuse': 0x7FFF00, 'chocolate': 0xD2691E, 'coral': 0xFF7F50,\n\t'cornflowerblue': 0x6495ED, 'cornsilk': 0xFFF8DC, 'crimson': 0xDC143C, 'cyan': 0x00FFFF, 'darkblue': 0x00008B, 'darkcyan': 0x008B8B,\n\t'darkgoldenrod': 0xB8860B, 'darkgray': 0xA9A9A9, 'darkgreen': 0x006400, 'darkgrey': 0xA9A9A9, 'darkkhaki': 0xBDB76B, 'darkmagenta': 0x8B008B,\n\t'darkolivegreen': 0x556B2F, 'darkorange': 0xFF8C00, 'darkorchid': 0x9932CC, 'darkred': 0x8B0000, 'darksalmon': 0xE9967A, 'darkseagreen': 0x8FBC8F,\n\t'darkslateblue': 0x483D8B, 'darkslategray': 0x2F4F4F, 'darkslategrey': 0x2F4F4F, 'darkturquoise': 0x00CED1, 'darkviolet': 0x9400D3,\n\t'deeppink': 0xFF1493, 'deepskyblue': 0x00BFFF, 'dimgray': 0x696969, 'dimgrey': 0x696969, 'dodgerblue': 0x1E90FF, 'firebrick': 0xB22222,\n\t'floralwhite': 0xFFFAF0, 'forestgreen': 0x228B22, 'fuchsia': 0xFF00FF, 'gainsboro': 0xDCDCDC, 'ghostwhite': 0xF8F8FF, 'gold': 0xFFD700,\n\t'goldenrod': 0xDAA520, 'gray': 0x808080, 'green': 0x008000, 'greenyellow': 0xADFF2F, 'grey': 0x808080, 'honeydew': 0xF0FFF0, 'hotpink': 0xFF69B4,\n\t'indianred': 0xCD5C5C, 'indigo': 0x4B0082, 'ivory': 0xFFFFF0, 'khaki': 0xF0E68C, 'lavender': 0xE6E6FA, 'lavenderblush': 0xFFF0F5, 'lawngreen': 0x7CFC00,\n\t'lemonchiffon': 0xFFFACD, 'lightblue': 0xADD8E6, 'lightcoral': 0xF08080, 'lightcyan': 0xE0FFFF, 'lightgoldenrodyellow': 0xFAFAD2, 'lightgray': 0xD3D3D3,\n\t'lightgreen': 0x90EE90, 'lightgrey': 0xD3D3D3, 'lightpink': 0xFFB6C1, 'lightsalmon': 0xFFA07A, 'lightseagreen': 0x20B2AA, 'lightskyblue': 0x87CEFA,\n\t'lightslategray': 0x778899, 'lightslategrey': 0x778899, 'lightsteelblue': 0xB0C4DE, 'lightyellow': 0xFFFFE0, 'lime': 0x00FF00, 'limegreen': 0x32CD32,\n\t'linen': 0xFAF0E6, 'magenta': 0xFF00FF, 'maroon': 0x800000, 'mediumaquamarine': 0x66CDAA, 'mediumblue': 0x0000CD, 'mediumorchid': 0xBA55D3,\n\t'mediumpurple': 0x9370DB, 'mediumseagreen': 0x3CB371, 'mediumslateblue': 0x7B68EE, 'mediumspringgreen': 0x00FA9A, 'mediumturquoise': 0x48D1CC,\n\t'mediumvioletred': 0xC71585, 'midnightblue': 0x191970, 'mintcream': 0xF5FFFA, 'mistyrose': 0xFFE4E1, 'moccasin': 0xFFE4B5, 'navajowhite': 0xFFDEAD,\n\t'navy': 0x000080, 'oldlace': 0xFDF5E6, 'olive': 0x808000, 'olivedrab': 0x6B8E23, 'orange': 0xFFA500, 'orangered': 0xFF4500, 'orchid': 0xDA70D6,\n\t'palegoldenrod': 0xEEE8AA, 'palegreen': 0x98FB98, 'paleturquoise': 0xAFEEEE, 'palevioletred': 0xDB7093, 'papayawhip': 0xFFEFD5, 'peachpuff': 0xFFDAB9,\n\t'peru': 0xCD853F, 'pink': 0xFFC0CB, 'plum': 0xDDA0DD, 'powderblue': 0xB0E0E6, 'purple': 0x800080, 'rebeccapurple': 0x663399, 'red': 0xFF0000, 'rosybrown': 0xBC8F8F,\n\t'royalblue': 0x4169E1, 'saddlebrown': 0x8B4513, 'salmon': 0xFA8072, 'sandybrown': 0xF4A460, 'seagreen': 0x2E8B57, 'seashell': 0xFFF5EE,\n\t'sienna': 0xA0522D, 'silver': 0xC0C0C0, 'skyblue': 0x87CEEB, 'slateblue': 0x6A5ACD, 'slategray': 0x708090, 'slategrey': 0x708090, 'snow': 0xFFFAFA,\n\t'springgreen': 0x00FF7F, 'steelblue': 0x4682B4, 'tan': 0xD2B48C, 'teal': 0x008080, 'thistle': 0xD8BFD8, 'tomato': 0xFF6347, 'turquoise': 0x40E0D0,\n\t'violet': 0xEE82EE, 'wheat': 0xF5DEB3, 'white': 0xFFFFFF, 'whitesmoke': 0xF5F5F5, 'yellow': 0xFFFF00, 'yellowgreen': 0x9ACD32 };\n\nconst _hslA = { h: 0, s: 0, l: 0 };\nconst _hslB = { h: 0, s: 0, l: 0 };\n\nfunction hue2rgb( p, q, t ) {\n\n\tif ( t < 0 ) t += 1;\n\tif ( t > 1 ) t -= 1;\n\tif ( t < 1 / 6 ) return p + ( q - p ) * 6 * t;\n\tif ( t < 1 / 2 ) return q;\n\tif ( t < 2 / 3 ) return p + ( q - p ) * 6 * ( 2 / 3 - t );\n\treturn p;\n\n}\n\nfunction SRGBToLinear( c ) {\n\n\treturn ( c < 0.04045 ) ? c * 0.0773993808 : Math.pow( c * 0.9478672986 + 0.0521327014, 2.4 );\n\n}\n\nfunction LinearToSRGB( c ) {\n\n\treturn ( c < 0.0031308 ) ? c * 12.92 : 1.055 * ( Math.pow( c, 0.41666 ) ) - 0.055;\n\n}\n\nclass Color {\n\n\tconstructor( r, g, b ) {\n\n\t\tif ( g === undefined && b === undefined ) {\n\n\t\t\t// r is THREE.Color, hex or string\n\t\t\treturn this.set( r );\n\n\t\t}\n\n\t\treturn this.setRGB( r, g, b );\n\n\t}\n\n\tset( value ) {\n\n\t\tif ( value && value.isColor ) {\n\n\t\t\tthis.copy( value );\n\n\t\t} else if ( typeof value === 'number' ) {\n\n\t\t\tthis.setHex( value );\n\n\t\t} else if ( typeof value === 'string' ) {\n\n\t\t\tthis.setStyle( value );\n\n\t\t}\n\n\t\treturn this;\n\n\t}\n\n\tsetScalar( scalar ) {\n\n\t\tthis.r = scalar;\n\t\tthis.g = scalar;\n\t\tthis.b = scalar;\n\n\t\treturn this;\n\n\t}\n\n\tsetHex( hex ) {\n\n\t\thex = Math.floor( hex );\n\n\t\tthis.r = ( hex >> 16 & 255 ) / 255;\n\t\tthis.g = ( hex >> 8 & 255 ) / 255;\n\t\tthis.b = ( hex & 255 ) / 255;\n\n\t\treturn this;\n\n\t}\n\n\tsetRGB( r, g, b ) {\n\n\t\tthis.r = r;\n\t\tthis.g = g;\n\t\tthis.b = b;\n\n\t\treturn this;\n\n\t}\n\n\tsetHSL( h, s, l ) {\n\n\t\t// h,s,l ranges are in 0.0 - 1.0\n\t\th = MathUtils.euclideanModulo( h, 1 );\n\t\ts = MathUtils.clamp( s, 0, 1 );\n\t\tl = MathUtils.clamp( l, 0, 1 );\n\n\t\tif ( s === 0 ) {\n\n\t\t\tthis.r = this.g = this.b = l;\n\n\t\t} else {\n\n\t\t\tconst p = l <= 0.5 ? l * ( 1 + s ) : l + s - ( l * s );\n\t\t\tconst q = ( 2 * l ) - p;\n\n\t\t\tthis.r = hue2rgb( q, p, h + 1 / 3 );\n\t\t\tthis.g = hue2rgb( q, p, h );\n\t\t\tthis.b = hue2rgb( q, p, h - 1 / 3 );\n\n\t\t}\n\n\t\treturn this;\n\n\t}\n\n\tsetStyle( style ) {\n\n\t\tfunction handleAlpha( string ) {\n\n\t\t\tif ( string === undefined ) return;\n\n\t\t\tif ( parseFloat( string ) < 1 ) {\n\n\t\t\t\tconsole.warn( 'THREE.Color: Alpha component of ' + style + ' will be ignored.' );\n\n\t\t\t}\n\n\t\t}\n\n\n\t\tlet m;\n\n\t\tif ( m = /^((?:rgb|hsl)a?)\\(([^\\)]*)\\)/.exec( style ) ) {\n\n\t\t\t// rgb / hsl\n\n\t\t\tlet color;\n\t\t\tconst name = m[ 1 ];\n\t\t\tconst components = m[ 2 ];\n\n\t\t\tswitch ( name ) {\n\n\t\t\t\tcase 'rgb':\n\t\t\t\tcase 'rgba':\n\n\t\t\t\t\tif ( color = /^\\s*(\\d+)\\s*,\\s*(\\d+)\\s*,\\s*(\\d+)\\s*(?:,\\s*(\\d*\\.?\\d+)\\s*)?$/.exec( components ) ) {\n\n\t\t\t\t\t\t// rgb(255,0,0) rgba(255,0,0,0.5)\n\t\t\t\t\t\tthis.r = Math.min( 255, parseInt( color[ 1 ], 10 ) ) / 255;\n\t\t\t\t\t\tthis.g = Math.min( 255, parseInt( color[ 2 ], 10 ) ) / 255;\n\t\t\t\t\t\tthis.b = Math.min( 255, parseInt( color[ 3 ], 10 ) ) / 255;\n\n\t\t\t\t\t\thandleAlpha( color[ 4 ] );\n\n\t\t\t\t\t\treturn this;\n\n\t\t\t\t\t}\n\n\t\t\t\t\tif ( color = /^\\s*(\\d+)\\%\\s*,\\s*(\\d+)\\%\\s*,\\s*(\\d+)\\%\\s*(?:,\\s*(\\d*\\.?\\d+)\\s*)?$/.exec( components ) ) {\n\n\t\t\t\t\t\t// rgb(100%,0%,0%) rgba(100%,0%,0%,0.5)\n\t\t\t\t\t\tthis.r = Math.min( 100, parseInt( color[ 1 ], 10 ) ) / 100;\n\t\t\t\t\t\tthis.g = Math.min( 100, parseInt( color[ 2 ], 10 ) ) / 100;\n\t\t\t\t\t\tthis.b = Math.min( 100, parseInt( color[ 3 ], 10 ) ) / 100;\n\n\t\t\t\t\t\thandleAlpha( color[ 4 ] );\n\n\t\t\t\t\t\treturn this;\n\n\t\t\t\t\t}\n\n\t\t\t\t\tbreak;\n\n\t\t\t\tcase 'hsl':\n\t\t\t\tcase 'hsla':\n\n\t\t\t\t\tif ( color = /^\\s*(\\d*\\.?\\d+)\\s*,\\s*(\\d+)\\%\\s*,\\s*(\\d+)\\%\\s*(?:,\\s*(\\d*\\.?\\d+)\\s*)?$/.exec( components ) ) {\n\n\t\t\t\t\t\t// hsl(120,50%,50%) hsla(120,50%,50%,0.5)\n\t\t\t\t\t\tconst h = parseFloat( color[ 1 ] ) / 360;\n\t\t\t\t\t\tconst s = parseInt( color[ 2 ], 10 ) / 100;\n\t\t\t\t\t\tconst l = parseInt( color[ 3 ], 10 ) / 100;\n\n\t\t\t\t\t\thandleAlpha( color[ 4 ] );\n\n\t\t\t\t\t\treturn this.setHSL( h, s, l );\n\n\t\t\t\t\t}\n\n\t\t\t\t\tbreak;\n\n\t\t\t}\n\n\t\t} else if ( m = /^\\#([A-Fa-f\\d]+)$/.exec( style ) ) {\n\n\t\t\t// hex color\n\n\t\t\tconst hex = m[ 1 ];\n\t\t\tconst size = hex.length;\n\n\t\t\tif ( size === 3 ) {\n\n\t\t\t\t// #ff0\n\t\t\t\tthis.r = parseInt( hex.charAt( 0 ) + hex.charAt( 0 ), 16 ) / 255;\n\t\t\t\tthis.g = parseInt( hex.charAt( 1 ) + hex.charAt( 1 ), 16 ) / 255;\n\t\t\t\tthis.b = parseInt( hex.charAt( 2 ) + hex.charAt( 2 ), 16 ) / 255;\n\n\t\t\t\treturn this;\n\n\t\t\t} else if ( size === 6 ) {\n\n\t\t\t\t// #ff0000\n\t\t\t\tthis.r = parseInt( hex.charAt( 0 ) + hex.charAt( 1 ), 16 ) / 255;\n\t\t\t\tthis.g = parseInt( hex.charAt( 2 ) + hex.charAt( 3 ), 16 ) / 255;\n\t\t\t\tthis.b = parseInt( hex.charAt( 4 ) + hex.charAt( 5 ), 16 ) / 255;\n\n\t\t\t\treturn this;\n\n\t\t\t}\n\n\t\t}\n\n\t\tif ( style && style.length > 0 ) {\n\n\t\t\treturn this.setColorName( style );\n\n\t\t}\n\n\t\treturn this;\n\n\t}\n\n\tsetColorName( style ) {\n\n\t\t// color keywords\n\t\tconst hex = _colorKeywords[ style ];\n\n\t\tif ( hex !== undefined ) {\n\n\t\t\t// red\n\t\t\tthis.setHex( hex );\n\n\t\t} else {\n\n\t\t\t// unknown color\n\t\t\tconsole.warn( 'THREE.Color: Unknown color ' + style );\n\n\t\t}\n\n\t\treturn this;\n\n\t}\n\n\tclone() {\n\n\t\treturn new this.constructor( this.r, this.g, this.b );\n\n\t}\n\n\tcopy( color ) {\n\n\t\tthis.r = color.r;\n\t\tthis.g = color.g;\n\t\tthis.b = color.b;\n\n\t\treturn this;\n\n\t}\n\n\tcopyGammaToLinear( color, gammaFactor = 2.0 ) {\n\n\t\tthis.r = Math.pow( color.r, gammaFactor );\n\t\tthis.g = Math.pow( color.g, gammaFactor );\n\t\tthis.b = Math.pow( color.b, gammaFactor );\n\n\t\treturn this;\n\n\t}\n\n\tcopyLinearToGamma( color, gammaFactor = 2.0 ) {\n\n\t\tconst safeInverse = ( gammaFactor > 0 ) ? ( 1.0 / gammaFactor ) : 1.0;\n\n\t\tthis.r = Math.pow( color.r, safeInverse );\n\t\tthis.g = Math.pow( color.g, safeInverse );\n\t\tthis.b = Math.pow( color.b, safeInverse );\n\n\t\treturn this;\n\n\t}\n\n\tconvertGammaToLinear( gammaFactor ) {\n\n\t\tthis.copyGammaToLinear( this, gammaFactor );\n\n\t\treturn this;\n\n\t}\n\n\tconvertLinearToGamma( gammaFactor ) {\n\n\t\tthis.copyLinearToGamma( this, gammaFactor );\n\n\t\treturn this;\n\n\t}\n\n\tcopySRGBToLinear( color ) {\n\n\t\tthis.r = SRGBToLinear( color.r );\n\t\tthis.g = SRGBToLinear( color.g );\n\t\tthis.b = SRGBToLinear( color.b );\n\n\t\treturn this;\n\n\t}\n\n\tcopyLinearToSRGB( color ) {\n\n\t\tthis.r = LinearToSRGB( color.r );\n\t\tthis.g = LinearToSRGB( color.g );\n\t\tthis.b = LinearToSRGB( color.b );\n\n\t\treturn this;\n\n\t}\n\n\tconvertSRGBToLinear() {\n\n\t\tthis.copySRGBToLinear( this );\n\n\t\treturn this;\n\n\t}\n\n\tconvertLinearToSRGB() {\n\n\t\tthis.copyLinearToSRGB( this );\n\n\t\treturn this;\n\n\t}\n\n\tgetHex() {\n\n\t\treturn ( this.r * 255 ) << 16 ^ ( this.g * 255 ) << 8 ^ ( this.b * 255 ) << 0;\n\n\t}\n\n\tgetHexString() {\n\n\t\treturn ( '000000' + this.getHex().toString( 16 ) ).slice( - 6 );\n\n\t}\n\n\tgetHSL( target ) {\n\n\t\t// h,s,l ranges are in 0.0 - 1.0\n\n\t\tif ( target === undefined ) {\n\n\t\t\tconsole.warn( 'THREE.Color: .getHSL() target is now required' );\n\t\t\ttarget = { h: 0, s: 0, l: 0 };\n\n\t\t}\n\n\t\tconst r = this.r, g = this.g, b = this.b;\n\n\t\tconst max = Math.max( r, g, b );\n\t\tconst min = Math.min( r, g, b );\n\n\t\tlet hue, saturation;\n\t\tconst lightness = ( min + max ) / 2.0;\n\n\t\tif ( min === max ) {\n\n\t\t\thue = 0;\n\t\t\tsaturation = 0;\n\n\t\t} else {\n\n\t\t\tconst delta = max - min;\n\n\t\t\tsaturation = lightness <= 0.5 ? delta / ( max + min ) : delta / ( 2 - max - min );\n\n\t\t\tswitch ( max ) {\n\n\t\t\t\tcase r: hue = ( g - b ) / delta + ( g < b ? 6 : 0 ); break;\n\t\t\t\tcase g: hue = ( b - r ) / delta + 2; break;\n\t\t\t\tcase b: hue = ( r - g ) / delta + 4; break;\n\n\t\t\t}\n\n\t\t\thue /= 6;\n\n\t\t}\n\n\t\ttarget.h = hue;\n\t\ttarget.s = saturation;\n\t\ttarget.l = lightness;\n\n\t\treturn target;\n\n\t}\n\n\tgetStyle() {\n\n\t\treturn 'rgb(' + ( ( this.r * 255 ) | 0 ) + ',' + ( ( this.g * 255 ) | 0 ) + ',' + ( ( this.b * 255 ) | 0 ) + ')';\n\n\t}\n\n\toffsetHSL( h, s, l ) {\n\n\t\tthis.getHSL( _hslA );\n\n\t\t_hslA.h += h; _hslA.s += s; _hslA.l += l;\n\n\t\tthis.setHSL( _hslA.h, _hslA.s, _hslA.l );\n\n\t\treturn this;\n\n\t}\n\n\tadd( color ) {\n\n\t\tthis.r += color.r;\n\t\tthis.g += color.g;\n\t\tthis.b += color.b;\n\n\t\treturn this;\n\n\t}\n\n\taddColors( color1, color2 ) {\n\n\t\tthis.r = color1.r + color2.r;\n\t\tthis.g = color1.g + color2.g;\n\t\tthis.b = color1.b + color2.b;\n\n\t\treturn this;\n\n\t}\n\n\taddScalar( s ) {\n\n\t\tthis.r += s;\n\t\tthis.g += s;\n\t\tthis.b += s;\n\n\t\treturn this;\n\n\t}\n\n\tsub( color ) {\n\n\t\tthis.r = Math.max( 0, this.r - color.r );\n\t\tthis.g = Math.max( 0, this.g - color.g );\n\t\tthis.b = Math.max( 0, this.b - color.b );\n\n\t\treturn this;\n\n\t}\n\n\tmultiply( color ) {\n\n\t\tthis.r *= color.r;\n\t\tthis.g *= color.g;\n\t\tthis.b *= color.b;\n\n\t\treturn this;\n\n\t}\n\n\tmultiplyScalar( s ) {\n\n\t\tthis.r *= s;\n\t\tthis.g *= s;\n\t\tthis.b *= s;\n\n\t\treturn this;\n\n\t}\n\n\tlerp( color, alpha ) {\n\n\t\tthis.r += ( color.r - this.r ) * alpha;\n\t\tthis.g += ( color.g - this.g ) * alpha;\n\t\tthis.b += ( color.b - this.b ) * alpha;\n\n\t\treturn this;\n\n\t}\n\n\tlerpColors( color1, color2, alpha ) {\n\n\t\tthis.r = color1.r + ( color2.r - color1.r ) * alpha;\n\t\tthis.g = color1.g + ( color2.g - color1.g ) * alpha;\n\t\tthis.b = color1.b + ( color2.b - color1.b ) * alpha;\n\n\t\treturn this;\n\n\t}\n\n\tlerpHSL( color, alpha ) {\n\n\t\tthis.getHSL( _hslA );\n\t\tcolor.getHSL( _hslB );\n\n\t\tconst h = MathUtils.lerp( _hslA.h, _hslB.h, alpha );\n\t\tconst s = MathUtils.lerp( _hslA.s, _hslB.s, alpha );\n\t\tconst l = MathUtils.lerp( _hslA.l, _hslB.l, alpha );\n\n\t\tthis.setHSL( h, s, l );\n\n\t\treturn this;\n\n\t}\n\n\tequals( c ) {\n\n\t\treturn ( c.r === this.r ) && ( c.g === this.g ) && ( c.b === this.b );\n\n\t}\n\n\tfromArray( array, offset = 0 ) {\n\n\t\tthis.r = array[ offset ];\n\t\tthis.g = array[ offset + 1 ];\n\t\tthis.b = array[ offset + 2 ];\n\n\t\treturn this;\n\n\t}\n\n\ttoArray( array = [], offset = 0 ) {\n\n\t\tarray[ offset ] = this.r;\n\t\tarray[ offset + 1 ] = this.g;\n\t\tarray[ offset + 2 ] = this.b;\n\n\t\treturn array;\n\n\t}\n\n\tfromBufferAttribute( attribute, index ) {\n\n\t\tthis.r = attribute.getX( index );\n\t\tthis.g = attribute.getY( index );\n\t\tthis.b = attribute.getZ( index );\n\n\t\tif ( attribute.normalized === true ) {\n\n\t\t\t// assuming Uint8Array\n\n\t\t\tthis.r /= 255;\n\t\t\tthis.g /= 255;\n\t\t\tthis.b /= 255;\n\n\t\t}\n\n\t\treturn this;\n\n\t}\n\n\ttoJSON() {\n\n\t\treturn this.getHex();\n\n\t}\n\n}\n\nColor.NAMES = _colorKeywords;\n\nColor.prototype.isColor = true;\nColor.prototype.r = 1;\nColor.prototype.g = 1;\nColor.prototype.b = 1;\n\nexport { Color };\n","import { Object3D } from '../core/Object3D.js';\nimport { Color } from '../math/Color.js';\n\nclass Light extends Object3D {\n\n\tconstructor( color, intensity = 1 ) {\n\n\t\tsuper();\n\n\t\tthis.type = 'Light';\n\n\t\tthis.color = new Color( color );\n\t\tthis.intensity = intensity;\n\n\t}\n\n\tcopy( source ) {\n\n\t\tsuper.copy( source );\n\n\t\tthis.color.copy( source.color );\n\t\tthis.intensity = source.intensity;\n\n\t\treturn this;\n\n\t}\n\n\ttoJSON( meta ) {\n\n\t\tconst data = super.toJSON( meta );\n\n\t\tdata.object.color = this.color.getHex();\n\t\tdata.object.intensity = this.intensity;\n\n\t\tif ( this.groundColor !== undefined ) data.object.groundColor = this.groundColor.getHex();\n\n\t\tif ( this.distance !== undefined ) data.object.distance = this.distance;\n\t\tif ( this.angle !== undefined ) data.object.angle = this.angle;\n\t\tif ( this.decay !== undefined ) data.object.decay = this.decay;\n\t\tif ( this.penumbra !== undefined ) data.object.penumbra = this.penumbra;\n\n\t\tif ( this.shadow !== undefined ) data.object.shadow = this.shadow.toJSON();\n\n\t\treturn data;\n\n\t}\n\n}\n\nLight.prototype.isLight = true;\n\nexport { Light };\n","class Vector2 {\n\n\tconstructor( x = 0, y = 0 ) {\n\n\t\tthis.x = x;\n\t\tthis.y = y;\n\n\t}\n\n\tget width() {\n\n\t\treturn this.x;\n\n\t}\n\n\tset width( value ) {\n\n\t\tthis.x = value;\n\n\t}\n\n\tget height() {\n\n\t\treturn this.y;\n\n\t}\n\n\tset height( value ) {\n\n\t\tthis.y = value;\n\n\t}\n\n\tset( x, y ) {\n\n\t\tthis.x = x;\n\t\tthis.y = y;\n\n\t\treturn this;\n\n\t}\n\n\tsetScalar( scalar ) {\n\n\t\tthis.x = scalar;\n\t\tthis.y = scalar;\n\n\t\treturn this;\n\n\t}\n\n\tsetX( x ) {\n\n\t\tthis.x = x;\n\n\t\treturn this;\n\n\t}\n\n\tsetY( y ) {\n\n\t\tthis.y = y;\n\n\t\treturn this;\n\n\t}\n\n\tsetComponent( index, value ) {\n\n\t\tswitch ( index ) {\n\n\t\t\tcase 0: this.x = value; break;\n\t\t\tcase 1: this.y = value; break;\n\t\t\tdefault: throw new Error( 'index is out of range: ' + index );\n\n\t\t}\n\n\t\treturn this;\n\n\t}\n\n\tgetComponent( index ) {\n\n\t\tswitch ( index ) {\n\n\t\t\tcase 0: return this.x;\n\t\t\tcase 1: return this.y;\n\t\t\tdefault: throw new Error( 'index is out of range: ' + index );\n\n\t\t}\n\n\t}\n\n\tclone() {\n\n\t\treturn new this.constructor( this.x, this.y );\n\n\t}\n\n\tcopy( v ) {\n\n\t\tthis.x = v.x;\n\t\tthis.y = v.y;\n\n\t\treturn this;\n\n\t}\n\n\tadd( v, w ) {\n\n\t\tif ( w !== undefined ) {\n\n\t\t\tconsole.warn( 'THREE.Vector2: .add() now only accepts one argument. Use .addVectors( a, b ) instead.' );\n\t\t\treturn this.addVectors( v, w );\n\n\t\t}\n\n\t\tthis.x += v.x;\n\t\tthis.y += v.y;\n\n\t\treturn this;\n\n\t}\n\n\taddScalar( s ) {\n\n\t\tthis.x += s;\n\t\tthis.y += s;\n\n\t\treturn this;\n\n\t}\n\n\taddVectors( a, b ) {\n\n\t\tthis.x = a.x + b.x;\n\t\tthis.y = a.y + b.y;\n\n\t\treturn this;\n\n\t}\n\n\taddScaledVector( v, s ) {\n\n\t\tthis.x += v.x * s;\n\t\tthis.y += v.y * s;\n\n\t\treturn this;\n\n\t}\n\n\tsub( v, w ) {\n\n\t\tif ( w !== undefined ) {\n\n\t\t\tconsole.warn( 'THREE.Vector2: .sub() now only accepts one argument. Use .subVectors( a, b ) instead.' );\n\t\t\treturn this.subVectors( v, w );\n\n\t\t}\n\n\t\tthis.x -= v.x;\n\t\tthis.y -= v.y;\n\n\t\treturn this;\n\n\t}\n\n\tsubScalar( s ) {\n\n\t\tthis.x -= s;\n\t\tthis.y -= s;\n\n\t\treturn this;\n\n\t}\n\n\tsubVectors( a, b ) {\n\n\t\tthis.x = a.x - b.x;\n\t\tthis.y = a.y - b.y;\n\n\t\treturn this;\n\n\t}\n\n\tmultiply( v ) {\n\n\t\tthis.x *= v.x;\n\t\tthis.y *= v.y;\n\n\t\treturn this;\n\n\t}\n\n\tmultiplyScalar( scalar ) {\n\n\t\tthis.x *= scalar;\n\t\tthis.y *= scalar;\n\n\t\treturn this;\n\n\t}\n\n\tdivide( v ) {\n\n\t\tthis.x /= v.x;\n\t\tthis.y /= v.y;\n\n\t\treturn this;\n\n\t}\n\n\tdivideScalar( scalar ) {\n\n\t\treturn this.multiplyScalar( 1 / scalar );\n\n\t}\n\n\tapplyMatrix3( m ) {\n\n\t\tconst x = this.x, y = this.y;\n\t\tconst e = m.elements;\n\n\t\tthis.x = e[ 0 ] * x + e[ 3 ] * y + e[ 6 ];\n\t\tthis.y = e[ 1 ] * x + e[ 4 ] * y + e[ 7 ];\n\n\t\treturn this;\n\n\t}\n\n\tmin( v ) {\n\n\t\tthis.x = Math.min( this.x, v.x );\n\t\tthis.y = Math.min( this.y, v.y );\n\n\t\treturn this;\n\n\t}\n\n\tmax( v ) {\n\n\t\tthis.x = Math.max( this.x, v.x );\n\t\tthis.y = Math.max( this.y, v.y );\n\n\t\treturn this;\n\n\t}\n\n\tclamp( min, max ) {\n\n\t\t// assumes min < max, componentwise\n\n\t\tthis.x = Math.max( min.x, Math.min( max.x, this.x ) );\n\t\tthis.y = Math.max( min.y, Math.min( max.y, this.y ) );\n\n\t\treturn this;\n\n\t}\n\n\tclampScalar( minVal, maxVal ) {\n\n\t\tthis.x = Math.max( minVal, Math.min( maxVal, this.x ) );\n\t\tthis.y = Math.max( minVal, Math.min( maxVal, this.y ) );\n\n\t\treturn this;\n\n\t}\n\n\tclampLength( min, max ) {\n\n\t\tconst length = this.length();\n\n\t\treturn this.divideScalar( length || 1 ).multiplyScalar( Math.max( min, Math.min( max, length ) ) );\n\n\t}\n\n\tfloor() {\n\n\t\tthis.x = Math.floor( this.x );\n\t\tthis.y = Math.floor( this.y );\n\n\t\treturn this;\n\n\t}\n\n\tceil() {\n\n\t\tthis.x = Math.ceil( this.x );\n\t\tthis.y = Math.ceil( this.y );\n\n\t\treturn this;\n\n\t}\n\n\tround() {\n\n\t\tthis.x = Math.round( this.x );\n\t\tthis.y = Math.round( this.y );\n\n\t\treturn this;\n\n\t}\n\n\troundToZero() {\n\n\t\tthis.x = ( this.x < 0 ) ? Math.ceil( this.x ) : Math.floor( this.x );\n\t\tthis.y = ( this.y < 0 ) ? Math.ceil( this.y ) : Math.floor( this.y );\n\n\t\treturn this;\n\n\t}\n\n\tnegate() {\n\n\t\tthis.x = - this.x;\n\t\tthis.y = - this.y;\n\n\t\treturn this;\n\n\t}\n\n\tdot( v ) {\n\n\t\treturn this.x * v.x + this.y * v.y;\n\n\t}\n\n\tcross( v ) {\n\n\t\treturn this.x * v.y - this.y * v.x;\n\n\t}\n\n\tlengthSq() {\n\n\t\treturn this.x * this.x + this.y * this.y;\n\n\t}\n\n\tlength() {\n\n\t\treturn Math.sqrt( this.x * this.x + this.y * this.y );\n\n\t}\n\n\tmanhattanLength() {\n\n\t\treturn Math.abs( this.x ) + Math.abs( this.y );\n\n\t}\n\n\tnormalize() {\n\n\t\treturn this.divideScalar( this.length() || 1 );\n\n\t}\n\n\tangle() {\n\n\t\t// computes the angle in radians with respect to the positive x-axis\n\n\t\tconst angle = Math.atan2( - this.y, - this.x ) + Math.PI;\n\n\t\treturn angle;\n\n\t}\n\n\tdistanceTo( v ) {\n\n\t\treturn Math.sqrt( this.distanceToSquared( v ) );\n\n\t}\n\n\tdistanceToSquared( v ) {\n\n\t\tconst dx = this.x - v.x, dy = this.y - v.y;\n\t\treturn dx * dx + dy * dy;\n\n\t}\n\n\tmanhattanDistanceTo( v ) {\n\n\t\treturn Math.abs( this.x - v.x ) + Math.abs( this.y - v.y );\n\n\t}\n\n\tsetLength( length ) {\n\n\t\treturn this.normalize().multiplyScalar( length );\n\n\t}\n\n\tlerp( v, alpha ) {\n\n\t\tthis.x += ( v.x - this.x ) * alpha;\n\t\tthis.y += ( v.y - this.y ) * alpha;\n\n\t\treturn this;\n\n\t}\n\n\tlerpVectors( v1, v2, alpha ) {\n\n\t\tthis.x = v1.x + ( v2.x - v1.x ) * alpha;\n\t\tthis.y = v1.y + ( v2.y - v1.y ) * alpha;\n\n\t\treturn this;\n\n\t}\n\n\tequals( v ) {\n\n\t\treturn ( ( v.x === this.x ) && ( v.y === this.y ) );\n\n\t}\n\n\tfromArray( array, offset = 0 ) {\n\n\t\tthis.x = array[ offset ];\n\t\tthis.y = array[ offset + 1 ];\n\n\t\treturn this;\n\n\t}\n\n\ttoArray( array = [], offset = 0 ) {\n\n\t\tarray[ offset ] = this.x;\n\t\tarray[ offset + 1 ] = this.y;\n\n\t\treturn array;\n\n\t}\n\n\tfromBufferAttribute( attribute, index, offset ) {\n\n\t\tif ( offset !== undefined ) {\n\n\t\t\tconsole.warn( 'THREE.Vector2: offset has been removed from .fromBufferAttribute().' );\n\n\t\t}\n\n\t\tthis.x = attribute.getX( index );\n\t\tthis.y = attribute.getY( index );\n\n\t\treturn this;\n\n\t}\n\n\trotateAround( center, angle ) {\n\n\t\tconst c = Math.cos( angle ), s = Math.sin( angle );\n\n\t\tconst x = this.x - center.x;\n\t\tconst y = this.y - center.y;\n\n\t\tthis.x = x * c - y * s + center.x;\n\t\tthis.y = x * s + y * c + center.y;\n\n\t\treturn this;\n\n\t}\n\n\trandom() {\n\n\t\tthis.x = Math.random();\n\t\tthis.y = Math.random();\n\n\t\treturn this;\n\n\t}\n\n}\n\nVector2.prototype.isVector2 = true;\n\nexport { Vector2 };\n","class Vector4 {\n\n\tconstructor( x = 0, y = 0, z = 0, w = 1 ) {\n\n\t\tthis.x = x;\n\t\tthis.y = y;\n\t\tthis.z = z;\n\t\tthis.w = w;\n\n\t}\n\n\tget width() {\n\n\t\treturn this.z;\n\n\t}\n\n\tset width( value ) {\n\n\t\tthis.z = value;\n\n\t}\n\n\tget height() {\n\n\t\treturn this.w;\n\n\t}\n\n\tset height( value ) {\n\n\t\tthis.w = value;\n\n\t}\n\n\tset( x, y, z, w ) {\n\n\t\tthis.x = x;\n\t\tthis.y = y;\n\t\tthis.z = z;\n\t\tthis.w = w;\n\n\t\treturn this;\n\n\t}\n\n\tsetScalar( scalar ) {\n\n\t\tthis.x = scalar;\n\t\tthis.y = scalar;\n\t\tthis.z = scalar;\n\t\tthis.w = scalar;\n\n\t\treturn this;\n\n\t}\n\n\tsetX( x ) {\n\n\t\tthis.x = x;\n\n\t\treturn this;\n\n\t}\n\n\tsetY( y ) {\n\n\t\tthis.y = y;\n\n\t\treturn this;\n\n\t}\n\n\tsetZ( z ) {\n\n\t\tthis.z = z;\n\n\t\treturn this;\n\n\t}\n\n\tsetW( w ) {\n\n\t\tthis.w = w;\n\n\t\treturn this;\n\n\t}\n\n\tsetComponent( index, value ) {\n\n\t\tswitch ( index ) {\n\n\t\t\tcase 0: this.x = value; break;\n\t\t\tcase 1: this.y = value; break;\n\t\t\tcase 2: this.z = value; break;\n\t\t\tcase 3: this.w = value; break;\n\t\t\tdefault: throw new Error( 'index is out of range: ' + index );\n\n\t\t}\n\n\t\treturn this;\n\n\t}\n\n\tgetComponent( index ) {\n\n\t\tswitch ( index ) {\n\n\t\t\tcase 0: return this.x;\n\t\t\tcase 1: return this.y;\n\t\t\tcase 2: return this.z;\n\t\t\tcase 3: return this.w;\n\t\t\tdefault: throw new Error( 'index is out of range: ' + index );\n\n\t\t}\n\n\t}\n\n\tclone() {\n\n\t\treturn new this.constructor( this.x, this.y, this.z, this.w );\n\n\t}\n\n\tcopy( v ) {\n\n\t\tthis.x = v.x;\n\t\tthis.y = v.y;\n\t\tthis.z = v.z;\n\t\tthis.w = ( v.w !== undefined ) ? v.w : 1;\n\n\t\treturn this;\n\n\t}\n\n\tadd( v, w ) {\n\n\t\tif ( w !== undefined ) {\n\n\t\t\tconsole.warn( 'THREE.Vector4: .add() now only accepts one argument. Use .addVectors( a, b ) instead.' );\n\t\t\treturn this.addVectors( v, w );\n\n\t\t}\n\n\t\tthis.x += v.x;\n\t\tthis.y += v.y;\n\t\tthis.z += v.z;\n\t\tthis.w += v.w;\n\n\t\treturn this;\n\n\t}\n\n\taddScalar( s ) {\n\n\t\tthis.x += s;\n\t\tthis.y += s;\n\t\tthis.z += s;\n\t\tthis.w += s;\n\n\t\treturn this;\n\n\t}\n\n\taddVectors( a, b ) {\n\n\t\tthis.x = a.x + b.x;\n\t\tthis.y = a.y + b.y;\n\t\tthis.z = a.z + b.z;\n\t\tthis.w = a.w + b.w;\n\n\t\treturn this;\n\n\t}\n\n\taddScaledVector( v, s ) {\n\n\t\tthis.x += v.x * s;\n\t\tthis.y += v.y * s;\n\t\tthis.z += v.z * s;\n\t\tthis.w += v.w * s;\n\n\t\treturn this;\n\n\t}\n\n\tsub( v, w ) {\n\n\t\tif ( w !== undefined ) {\n\n\t\t\tconsole.warn( 'THREE.Vector4: .sub() now only accepts one argument. Use .subVectors( a, b ) instead.' );\n\t\t\treturn this.subVectors( v, w );\n\n\t\t}\n\n\t\tthis.x -= v.x;\n\t\tthis.y -= v.y;\n\t\tthis.z -= v.z;\n\t\tthis.w -= v.w;\n\n\t\treturn this;\n\n\t}\n\n\tsubScalar( s ) {\n\n\t\tthis.x -= s;\n\t\tthis.y -= s;\n\t\tthis.z -= s;\n\t\tthis.w -= s;\n\n\t\treturn this;\n\n\t}\n\n\tsubVectors( a, b ) {\n\n\t\tthis.x = a.x - b.x;\n\t\tthis.y = a.y - b.y;\n\t\tthis.z = a.z - b.z;\n\t\tthis.w = a.w - b.w;\n\n\t\treturn this;\n\n\t}\n\n\tmultiply( v ) {\n\n\t\tthis.x *= v.x;\n\t\tthis.y *= v.y;\n\t\tthis.z *= v.z;\n\t\tthis.w *= v.w;\n\n\t\treturn this;\n\n\t}\n\n\tmultiplyScalar( scalar ) {\n\n\t\tthis.x *= scalar;\n\t\tthis.y *= scalar;\n\t\tthis.z *= scalar;\n\t\tthis.w *= scalar;\n\n\t\treturn this;\n\n\t}\n\n\tapplyMatrix4( m ) {\n\n\t\tconst x = this.x, y = this.y, z = this.z, w = this.w;\n\t\tconst e = m.elements;\n\n\t\tthis.x = e[ 0 ] * x + e[ 4 ] * y + e[ 8 ] * z + e[ 12 ] * w;\n\t\tthis.y = e[ 1 ] * x + e[ 5 ] * y + e[ 9 ] * z + e[ 13 ] * w;\n\t\tthis.z = e[ 2 ] * x + e[ 6 ] * y + e[ 10 ] * z + e[ 14 ] * w;\n\t\tthis.w = e[ 3 ] * x + e[ 7 ] * y + e[ 11 ] * z + e[ 15 ] * w;\n\n\t\treturn this;\n\n\t}\n\n\tdivideScalar( scalar ) {\n\n\t\treturn this.multiplyScalar( 1 / scalar );\n\n\t}\n\n\tsetAxisAngleFromQuaternion( q ) {\n\n\t\t// http://www.euclideanspace.com/maths/geometry/rotations/conversions/quaternionToAngle/index.htm\n\n\t\t// q is assumed to be normalized\n\n\t\tthis.w = 2 * Math.acos( q.w );\n\n\t\tconst s = Math.sqrt( 1 - q.w * q.w );\n\n\t\tif ( s < 0.0001 ) {\n\n\t\t\tthis.x = 1;\n\t\t\tthis.y = 0;\n\t\t\tthis.z = 0;\n\n\t\t} else {\n\n\t\t\tthis.x = q.x / s;\n\t\t\tthis.y = q.y / s;\n\t\t\tthis.z = q.z / s;\n\n\t\t}\n\n\t\treturn this;\n\n\t}\n\n\tsetAxisAngleFromRotationMatrix( m ) {\n\n\t\t// http://www.euclideanspace.com/maths/geometry/rotations/conversions/matrixToAngle/index.htm\n\n\t\t// assumes the upper 3x3 of m is a pure rotation matrix (i.e, unscaled)\n\n\t\tlet angle, x, y, z; // variables for result\n\t\tconst epsilon = 0.01,\t\t// margin to allow for rounding errors\n\t\t\tepsilon2 = 0.1,\t\t// margin to distinguish between 0 and 180 degrees\n\n\t\t\tte = m.elements,\n\n\t\t\tm11 = te[ 0 ], m12 = te[ 4 ], m13 = te[ 8 ],\n\t\t\tm21 = te[ 1 ], m22 = te[ 5 ], m23 = te[ 9 ],\n\t\t\tm31 = te[ 2 ], m32 = te[ 6 ], m33 = te[ 10 ];\n\n\t\tif ( ( Math.abs( m12 - m21 ) < epsilon ) &&\n\t\t     ( Math.abs( m13 - m31 ) < epsilon ) &&\n\t\t     ( Math.abs( m23 - m32 ) < epsilon ) ) {\n\n\t\t\t// singularity found\n\t\t\t// first check for identity matrix which must have +1 for all terms\n\t\t\t// in leading diagonal and zero in other terms\n\n\t\t\tif ( ( Math.abs( m12 + m21 ) < epsilon2 ) &&\n\t\t\t     ( Math.abs( m13 + m31 ) < epsilon2 ) &&\n\t\t\t     ( Math.abs( m23 + m32 ) < epsilon2 ) &&\n\t\t\t     ( Math.abs( m11 + m22 + m33 - 3 ) < epsilon2 ) ) {\n\n\t\t\t\t// this singularity is identity matrix so angle = 0\n\n\t\t\t\tthis.set( 1, 0, 0, 0 );\n\n\t\t\t\treturn this; // zero angle, arbitrary axis\n\n\t\t\t}\n\n\t\t\t// otherwise this singularity is angle = 180\n\n\t\t\tangle = Math.PI;\n\n\t\t\tconst xx = ( m11 + 1 ) / 2;\n\t\t\tconst yy = ( m22 + 1 ) / 2;\n\t\t\tconst zz = ( m33 + 1 ) / 2;\n\t\t\tconst xy = ( m12 + m21 ) / 4;\n\t\t\tconst xz = ( m13 + m31 ) / 4;\n\t\t\tconst yz = ( m23 + m32 ) / 4;\n\n\t\t\tif ( ( xx > yy ) && ( xx > zz ) ) {\n\n\t\t\t\t// m11 is the largest diagonal term\n\n\t\t\t\tif ( xx < epsilon ) {\n\n\t\t\t\t\tx = 0;\n\t\t\t\t\ty = 0.707106781;\n\t\t\t\t\tz = 0.707106781;\n\n\t\t\t\t} else {\n\n\t\t\t\t\tx = Math.sqrt( xx );\n\t\t\t\t\ty = xy / x;\n\t\t\t\t\tz = xz / x;\n\n\t\t\t\t}\n\n\t\t\t} else if ( yy > zz ) {\n\n\t\t\t\t// m22 is the largest diagonal term\n\n\t\t\t\tif ( yy < epsilon ) {\n\n\t\t\t\t\tx = 0.707106781;\n\t\t\t\t\ty = 0;\n\t\t\t\t\tz = 0.707106781;\n\n\t\t\t\t} else {\n\n\t\t\t\t\ty = Math.sqrt( yy );\n\t\t\t\t\tx = xy / y;\n\t\t\t\t\tz = yz / y;\n\n\t\t\t\t}\n\n\t\t\t} else {\n\n\t\t\t\t// m33 is the largest diagonal term so base result on this\n\n\t\t\t\tif ( zz < epsilon ) {\n\n\t\t\t\t\tx = 0.707106781;\n\t\t\t\t\ty = 0.707106781;\n\t\t\t\t\tz = 0;\n\n\t\t\t\t} else {\n\n\t\t\t\t\tz = Math.sqrt( zz );\n\t\t\t\t\tx = xz / z;\n\t\t\t\t\ty = yz / z;\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t\tthis.set( x, y, z, angle );\n\n\t\t\treturn this; // return 180 deg rotation\n\n\t\t}\n\n\t\t// as we have reached here there are no singularities so we can handle normally\n\n\t\tlet s = Math.sqrt( ( m32 - m23 ) * ( m32 - m23 ) +\n\t\t\t( m13 - m31 ) * ( m13 - m31 ) +\n\t\t\t( m21 - m12 ) * ( m21 - m12 ) ); // used to normalize\n\n\t\tif ( Math.abs( s ) < 0.001 ) s = 1;\n\n\t\t// prevent divide by zero, should not happen if matrix is orthogonal and should be\n\t\t// caught by singularity test above, but I've left it in just in case\n\n\t\tthis.x = ( m32 - m23 ) / s;\n\t\tthis.y = ( m13 - m31 ) / s;\n\t\tthis.z = ( m21 - m12 ) / s;\n\t\tthis.w = Math.acos( ( m11 + m22 + m33 - 1 ) / 2 );\n\n\t\treturn this;\n\n\t}\n\n\tmin( v ) {\n\n\t\tthis.x = Math.min( this.x, v.x );\n\t\tthis.y = Math.min( this.y, v.y );\n\t\tthis.z = Math.min( this.z, v.z );\n\t\tthis.w = Math.min( this.w, v.w );\n\n\t\treturn this;\n\n\t}\n\n\tmax( v ) {\n\n\t\tthis.x = Math.max( this.x, v.x );\n\t\tthis.y = Math.max( this.y, v.y );\n\t\tthis.z = Math.max( this.z, v.z );\n\t\tthis.w = Math.max( this.w, v.w );\n\n\t\treturn this;\n\n\t}\n\n\tclamp( min, max ) {\n\n\t\t// assumes min < max, componentwise\n\n\t\tthis.x = Math.max( min.x, Math.min( max.x, this.x ) );\n\t\tthis.y = Math.max( min.y, Math.min( max.y, this.y ) );\n\t\tthis.z = Math.max( min.z, Math.min( max.z, this.z ) );\n\t\tthis.w = Math.max( min.w, Math.min( max.w, this.w ) );\n\n\t\treturn this;\n\n\t}\n\n\tclampScalar( minVal, maxVal ) {\n\n\t\tthis.x = Math.max( minVal, Math.min( maxVal, this.x ) );\n\t\tthis.y = Math.max( minVal, Math.min( maxVal, this.y ) );\n\t\tthis.z = Math.max( minVal, Math.min( maxVal, this.z ) );\n\t\tthis.w = Math.max( minVal, Math.min( maxVal, this.w ) );\n\n\t\treturn this;\n\n\t}\n\n\tclampLength( min, max ) {\n\n\t\tconst length = this.length();\n\n\t\treturn this.divideScalar( length || 1 ).multiplyScalar( Math.max( min, Math.min( max, length ) ) );\n\n\t}\n\n\tfloor() {\n\n\t\tthis.x = Math.floor( this.x );\n\t\tthis.y = Math.floor( this.y );\n\t\tthis.z = Math.floor( this.z );\n\t\tthis.w = Math.floor( this.w );\n\n\t\treturn this;\n\n\t}\n\n\tceil() {\n\n\t\tthis.x = Math.ceil( this.x );\n\t\tthis.y = Math.ceil( this.y );\n\t\tthis.z = Math.ceil( this.z );\n\t\tthis.w = Math.ceil( this.w );\n\n\t\treturn this;\n\n\t}\n\n\tround() {\n\n\t\tthis.x = Math.round( this.x );\n\t\tthis.y = Math.round( this.y );\n\t\tthis.z = Math.round( this.z );\n\t\tthis.w = Math.round( this.w );\n\n\t\treturn this;\n\n\t}\n\n\troundToZero() {\n\n\t\tthis.x = ( this.x < 0 ) ? Math.ceil( this.x ) : Math.floor( this.x );\n\t\tthis.y = ( this.y < 0 ) ? Math.ceil( this.y ) : Math.floor( this.y );\n\t\tthis.z = ( this.z < 0 ) ? Math.ceil( this.z ) : Math.floor( this.z );\n\t\tthis.w = ( this.w < 0 ) ? Math.ceil( this.w ) : Math.floor( this.w );\n\n\t\treturn this;\n\n\t}\n\n\tnegate() {\n\n\t\tthis.x = - this.x;\n\t\tthis.y = - this.y;\n\t\tthis.z = - this.z;\n\t\tthis.w = - this.w;\n\n\t\treturn this;\n\n\t}\n\n\tdot( v ) {\n\n\t\treturn this.x * v.x + this.y * v.y + this.z * v.z + this.w * v.w;\n\n\t}\n\n\tlengthSq() {\n\n\t\treturn this.x * this.x + this.y * this.y + this.z * this.z + this.w * this.w;\n\n\t}\n\n\tlength() {\n\n\t\treturn Math.sqrt( this.x * this.x + this.y * this.y + this.z * this.z + this.w * this.w );\n\n\t}\n\n\tmanhattanLength() {\n\n\t\treturn Math.abs( this.x ) + Math.abs( this.y ) + Math.abs( this.z ) + Math.abs( this.w );\n\n\t}\n\n\tnormalize() {\n\n\t\treturn this.divideScalar( this.length() || 1 );\n\n\t}\n\n\tsetLength( length ) {\n\n\t\treturn this.normalize().multiplyScalar( length );\n\n\t}\n\n\tlerp( v, alpha ) {\n\n\t\tthis.x += ( v.x - this.x ) * alpha;\n\t\tthis.y += ( v.y - this.y ) * alpha;\n\t\tthis.z += ( v.z - this.z ) * alpha;\n\t\tthis.w += ( v.w - this.w ) * alpha;\n\n\t\treturn this;\n\n\t}\n\n\tlerpVectors( v1, v2, alpha ) {\n\n\t\tthis.x = v1.x + ( v2.x - v1.x ) * alpha;\n\t\tthis.y = v1.y + ( v2.y - v1.y ) * alpha;\n\t\tthis.z = v1.z + ( v2.z - v1.z ) * alpha;\n\t\tthis.w = v1.w + ( v2.w - v1.w ) * alpha;\n\n\t\treturn this;\n\n\t}\n\n\tequals( v ) {\n\n\t\treturn ( ( v.x === this.x ) && ( v.y === this.y ) && ( v.z === this.z ) && ( v.w === this.w ) );\n\n\t}\n\n\tfromArray( array, offset = 0 ) {\n\n\t\tthis.x = array[ offset ];\n\t\tthis.y = array[ offset + 1 ];\n\t\tthis.z = array[ offset + 2 ];\n\t\tthis.w = array[ offset + 3 ];\n\n\t\treturn this;\n\n\t}\n\n\ttoArray( array = [], offset = 0 ) {\n\n\t\tarray[ offset ] = this.x;\n\t\tarray[ offset + 1 ] = this.y;\n\t\tarray[ offset + 2 ] = this.z;\n\t\tarray[ offset + 3 ] = this.w;\n\n\t\treturn array;\n\n\t}\n\n\tfromBufferAttribute( attribute, index, offset ) {\n\n\t\tif ( offset !== undefined ) {\n\n\t\t\tconsole.warn( 'THREE.Vector4: offset has been removed from .fromBufferAttribute().' );\n\n\t\t}\n\n\t\tthis.x = attribute.getX( index );\n\t\tthis.y = attribute.getY( index );\n\t\tthis.z = attribute.getZ( index );\n\t\tthis.w = attribute.getW( index );\n\n\t\treturn this;\n\n\t}\n\n\trandom() {\n\n\t\tthis.x = Math.random();\n\t\tthis.y = Math.random();\n\t\tthis.z = Math.random();\n\t\tthis.w = Math.random();\n\n\t\treturn this;\n\n\t}\n\n}\n\nVector4.prototype.isVector4 = true;\n\nexport { Vector4 };\n","import { Vector3 } from './Vector3.js';\n\nclass Box3 {\n\n\tconstructor( min = new Vector3( + Infinity, + Infinity, + Infinity ), max = new Vector3( - Infinity, - Infinity, - Infinity ) ) {\n\n\t\tthis.min = min;\n\t\tthis.max = max;\n\n\t}\n\n\tset( min, max ) {\n\n\t\tthis.min.copy( min );\n\t\tthis.max.copy( max );\n\n\t\treturn this;\n\n\t}\n\n\tsetFromArray( array ) {\n\n\t\tlet minX = + Infinity;\n\t\tlet minY = + Infinity;\n\t\tlet minZ = + Infinity;\n\n\t\tlet maxX = - Infinity;\n\t\tlet maxY = - Infinity;\n\t\tlet maxZ = - Infinity;\n\n\t\tfor ( let i = 0, l = array.length; i < l; i += 3 ) {\n\n\t\t\tconst x = array[ i ];\n\t\t\tconst y = array[ i + 1 ];\n\t\t\tconst z = array[ i + 2 ];\n\n\t\t\tif ( x < minX ) minX = x;\n\t\t\tif ( y < minY ) minY = y;\n\t\t\tif ( z < minZ ) minZ = z;\n\n\t\t\tif ( x > maxX ) maxX = x;\n\t\t\tif ( y > maxY ) maxY = y;\n\t\t\tif ( z > maxZ ) maxZ = z;\n\n\t\t}\n\n\t\tthis.min.set( minX, minY, minZ );\n\t\tthis.max.set( maxX, maxY, maxZ );\n\n\t\treturn this;\n\n\t}\n\n\tsetFromBufferAttribute( attribute ) {\n\n\t\tlet minX = + Infinity;\n\t\tlet minY = + Infinity;\n\t\tlet minZ = + Infinity;\n\n\t\tlet maxX = - Infinity;\n\t\tlet maxY = - Infinity;\n\t\tlet maxZ = - Infinity;\n\n\t\tfor ( let i = 0, l = attribute.count; i < l; i ++ ) {\n\n\t\t\tconst x = attribute.getX( i );\n\t\t\tconst y = attribute.getY( i );\n\t\t\tconst z = attribute.getZ( i );\n\n\t\t\tif ( x < minX ) minX = x;\n\t\t\tif ( y < minY ) minY = y;\n\t\t\tif ( z < minZ ) minZ = z;\n\n\t\t\tif ( x > maxX ) maxX = x;\n\t\t\tif ( y > maxY ) maxY = y;\n\t\t\tif ( z > maxZ ) maxZ = z;\n\n\t\t}\n\n\t\tthis.min.set( minX, minY, minZ );\n\t\tthis.max.set( maxX, maxY, maxZ );\n\n\t\treturn this;\n\n\t}\n\n\tsetFromPoints( points ) {\n\n\t\tthis.makeEmpty();\n\n\t\tfor ( let i = 0, il = points.length; i < il; i ++ ) {\n\n\t\t\tthis.expandByPoint( points[ i ] );\n\n\t\t}\n\n\t\treturn this;\n\n\t}\n\n\tsetFromCenterAndSize( center, size ) {\n\n\t\tconst halfSize = _vector.copy( size ).multiplyScalar( 0.5 );\n\n\t\tthis.min.copy( center ).sub( halfSize );\n\t\tthis.max.copy( center ).add( halfSize );\n\n\t\treturn this;\n\n\t}\n\n\tsetFromObject( object ) {\n\n\t\tthis.makeEmpty();\n\n\t\treturn this.expandByObject( object );\n\n\t}\n\n\tclone() {\n\n\t\treturn new this.constructor().copy( this );\n\n\t}\n\n\tcopy( box ) {\n\n\t\tthis.min.copy( box.min );\n\t\tthis.max.copy( box.max );\n\n\t\treturn this;\n\n\t}\n\n\tmakeEmpty() {\n\n\t\tthis.min.x = this.min.y = this.min.z = + Infinity;\n\t\tthis.max.x = this.max.y = this.max.z = - Infinity;\n\n\t\treturn this;\n\n\t}\n\n\tisEmpty() {\n\n\t\t// this is a more robust check for empty than ( volume <= 0 ) because volume can get positive with two negative axes\n\n\t\treturn ( this.max.x < this.min.x ) || ( this.max.y < this.min.y ) || ( this.max.z < this.min.z );\n\n\t}\n\n\tgetCenter( target ) {\n\n\t\tif ( target === undefined ) {\n\n\t\t\tconsole.warn( 'THREE.Box3: .getCenter() target is now required' );\n\t\t\ttarget = new Vector3();\n\n\t\t}\n\n\t\treturn this.isEmpty() ? target.set( 0, 0, 0 ) : target.addVectors( this.min, this.max ).multiplyScalar( 0.5 );\n\n\t}\n\n\tgetSize( target ) {\n\n\t\tif ( target === undefined ) {\n\n\t\t\tconsole.warn( 'THREE.Box3: .getSize() target is now required' );\n\t\t\ttarget = new Vector3();\n\n\t\t}\n\n\t\treturn this.isEmpty() ? target.set( 0, 0, 0 ) : target.subVectors( this.max, this.min );\n\n\t}\n\n\texpandByPoint( point ) {\n\n\t\tthis.min.min( point );\n\t\tthis.max.max( point );\n\n\t\treturn this;\n\n\t}\n\n\texpandByVector( vector ) {\n\n\t\tthis.min.sub( vector );\n\t\tthis.max.add( vector );\n\n\t\treturn this;\n\n\t}\n\n\texpandByScalar( scalar ) {\n\n\t\tthis.min.addScalar( - scalar );\n\t\tthis.max.addScalar( scalar );\n\n\t\treturn this;\n\n\t}\n\n\texpandByObject( object ) {\n\n\t\t// Computes the world-axis-aligned bounding box of an object (including its children),\n\t\t// accounting for both the object's, and children's, world transforms\n\n\t\tobject.updateWorldMatrix( false, false );\n\n\t\tconst geometry = object.geometry;\n\n\t\tif ( geometry !== undefined ) {\n\n\t\t\tif ( geometry.boundingBox === null ) {\n\n\t\t\t\tgeometry.computeBoundingBox();\n\n\t\t\t}\n\n\t\t\t_box.copy( geometry.boundingBox );\n\t\t\t_box.applyMatrix4( object.matrixWorld );\n\n\t\t\tthis.union( _box );\n\n\t\t}\n\n\t\tconst children = object.children;\n\n\t\tfor ( let i = 0, l = children.length; i < l; i ++ ) {\n\n\t\t\tthis.expandByObject( children[ i ] );\n\n\t\t}\n\n\t\treturn this;\n\n\t}\n\n\tcontainsPoint( point ) {\n\n\t\treturn point.x < this.min.x || point.x > this.max.x ||\n\t\t\tpoint.y < this.min.y || point.y > this.max.y ||\n\t\t\tpoint.z < this.min.z || point.z > this.max.z ? false : true;\n\n\t}\n\n\tcontainsBox( box ) {\n\n\t\treturn this.min.x <= box.min.x && box.max.x <= this.max.x &&\n\t\t\tthis.min.y <= box.min.y && box.max.y <= this.max.y &&\n\t\t\tthis.min.z <= box.min.z && box.max.z <= this.max.z;\n\n\t}\n\n\tgetParameter( point, target ) {\n\n\t\t// This can potentially have a divide by zero if the box\n\t\t// has a size dimension of 0.\n\n\t\tif ( target === undefined ) {\n\n\t\t\tconsole.warn( 'THREE.Box3: .getParameter() target is now required' );\n\t\t\ttarget = new Vector3();\n\n\t\t}\n\n\t\treturn target.set(\n\t\t\t( point.x - this.min.x ) / ( this.max.x - this.min.x ),\n\t\t\t( point.y - this.min.y ) / ( this.max.y - this.min.y ),\n\t\t\t( point.z - this.min.z ) / ( this.max.z - this.min.z )\n\t\t);\n\n\t}\n\n\tintersectsBox( box ) {\n\n\t\t// using 6 splitting planes to rule out intersections.\n\t\treturn box.max.x < this.min.x || box.min.x > this.max.x ||\n\t\t\tbox.max.y < this.min.y || box.min.y > this.max.y ||\n\t\t\tbox.max.z < this.min.z || box.min.z > this.max.z ? false : true;\n\n\t}\n\n\tintersectsSphere( sphere ) {\n\n\t\t// Find the point on the AABB closest to the sphere center.\n\t\tthis.clampPoint( sphere.center, _vector );\n\n\t\t// If that point is inside the sphere, the AABB and sphere intersect.\n\t\treturn _vector.distanceToSquared( sphere.center ) <= ( sphere.radius * sphere.radius );\n\n\t}\n\n\tintersectsPlane( plane ) {\n\n\t\t// We compute the minimum and maximum dot product values. If those values\n\t\t// are on the same side (back or front) of the plane, then there is no intersection.\n\n\t\tlet min, max;\n\n\t\tif ( plane.normal.x > 0 ) {\n\n\t\t\tmin = plane.normal.x * this.min.x;\n\t\t\tmax = plane.normal.x * this.max.x;\n\n\t\t} else {\n\n\t\t\tmin = plane.normal.x * this.max.x;\n\t\t\tmax = plane.normal.x * this.min.x;\n\n\t\t}\n\n\t\tif ( plane.normal.y > 0 ) {\n\n\t\t\tmin += plane.normal.y * this.min.y;\n\t\t\tmax += plane.normal.y * this.max.y;\n\n\t\t} else {\n\n\t\t\tmin += plane.normal.y * this.max.y;\n\t\t\tmax += plane.normal.y * this.min.y;\n\n\t\t}\n\n\t\tif ( plane.normal.z > 0 ) {\n\n\t\t\tmin += plane.normal.z * this.min.z;\n\t\t\tmax += plane.normal.z * this.max.z;\n\n\t\t} else {\n\n\t\t\tmin += plane.normal.z * this.max.z;\n\t\t\tmax += plane.normal.z * this.min.z;\n\n\t\t}\n\n\t\treturn ( min <= - plane.constant && max >= - plane.constant );\n\n\t}\n\n\tintersectsTriangle( triangle ) {\n\n\t\tif ( this.isEmpty() ) {\n\n\t\t\treturn false;\n\n\t\t}\n\n\t\t// compute box center and extents\n\t\tthis.getCenter( _center );\n\t\t_extents.subVectors( this.max, _center );\n\n\t\t// translate triangle to aabb origin\n\t\t_v0.subVectors( triangle.a, _center );\n\t\t_v1.subVectors( triangle.b, _center );\n\t\t_v2.subVectors( triangle.c, _center );\n\n\t\t// compute edge vectors for triangle\n\t\t_f0.subVectors( _v1, _v0 );\n\t\t_f1.subVectors( _v2, _v1 );\n\t\t_f2.subVectors( _v0, _v2 );\n\n\t\t// test against axes that are given by cross product combinations of the edges of the triangle and the edges of the aabb\n\t\t// make an axis testing of each of the 3 sides of the aabb against each of the 3 sides of the triangle = 9 axis of separation\n\t\t// axis_ij = u_i x f_j (u0, u1, u2 = face normals of aabb = x,y,z axes vectors since aabb is axis aligned)\n\t\tlet axes = [\n\t\t\t0, - _f0.z, _f0.y, 0, - _f1.z, _f1.y, 0, - _f2.z, _f2.y,\n\t\t\t_f0.z, 0, - _f0.x, _f1.z, 0, - _f1.x, _f2.z, 0, - _f2.x,\n\t\t\t- _f0.y, _f0.x, 0, - _f1.y, _f1.x, 0, - _f2.y, _f2.x, 0\n\t\t];\n\t\tif ( ! satForAxes( axes, _v0, _v1, _v2, _extents ) ) {\n\n\t\t\treturn false;\n\n\t\t}\n\n\t\t// test 3 face normals from the aabb\n\t\taxes = [ 1, 0, 0, 0, 1, 0, 0, 0, 1 ];\n\t\tif ( ! satForAxes( axes, _v0, _v1, _v2, _extents ) ) {\n\n\t\t\treturn false;\n\n\t\t}\n\n\t\t// finally testing the face normal of the triangle\n\t\t// use already existing triangle edge vectors here\n\t\t_triangleNormal.crossVectors( _f0, _f1 );\n\t\taxes = [ _triangleNormal.x, _triangleNormal.y, _triangleNormal.z ];\n\n\t\treturn satForAxes( axes, _v0, _v1, _v2, _extents );\n\n\t}\n\n\tclampPoint( point, target ) {\n\n\t\tif ( target === undefined ) {\n\n\t\t\tconsole.warn( 'THREE.Box3: .clampPoint() target is now required' );\n\t\t\ttarget = new Vector3();\n\n\t\t}\n\n\t\treturn target.copy( point ).clamp( this.min, this.max );\n\n\t}\n\n\tdistanceToPoint( point ) {\n\n\t\tconst clampedPoint = _vector.copy( point ).clamp( this.min, this.max );\n\n\t\treturn clampedPoint.sub( point ).length();\n\n\t}\n\n\tgetBoundingSphere( target ) {\n\n\t\tif ( target === undefined ) {\n\n\t\t\tconsole.error( 'THREE.Box3: .getBoundingSphere() target is now required' );\n\t\t\t//target = new Sphere(); // removed to avoid cyclic dependency\n\n\t\t}\n\n\t\tthis.getCenter( target.center );\n\n\t\ttarget.radius = this.getSize( _vector ).length() * 0.5;\n\n\t\treturn target;\n\n\t}\n\n\tintersect( box ) {\n\n\t\tthis.min.max( box.min );\n\t\tthis.max.min( box.max );\n\n\t\t// ensure that if there is no overlap, the result is fully empty, not slightly empty with non-inf/+inf values that will cause subsequence intersects to erroneously return valid values.\n\t\tif ( this.isEmpty() ) this.makeEmpty();\n\n\t\treturn this;\n\n\t}\n\n\tunion( box ) {\n\n\t\tthis.min.min( box.min );\n\t\tthis.max.max( box.max );\n\n\t\treturn this;\n\n\t}\n\n\tapplyMatrix4( matrix ) {\n\n\t\t// transform of empty box is an empty box.\n\t\tif ( this.isEmpty() ) return this;\n\n\t\t// NOTE: I am using a binary pattern to specify all 2^3 combinations below\n\t\t_points[ 0 ].set( this.min.x, this.min.y, this.min.z ).applyMatrix4( matrix ); // 000\n\t\t_points[ 1 ].set( this.min.x, this.min.y, this.max.z ).applyMatrix4( matrix ); // 001\n\t\t_points[ 2 ].set( this.min.x, this.max.y, this.min.z ).applyMatrix4( matrix ); // 010\n\t\t_points[ 3 ].set( this.min.x, this.max.y, this.max.z ).applyMatrix4( matrix ); // 011\n\t\t_points[ 4 ].set( this.max.x, this.min.y, this.min.z ).applyMatrix4( matrix ); // 100\n\t\t_points[ 5 ].set( this.max.x, this.min.y, this.max.z ).applyMatrix4( matrix ); // 101\n\t\t_points[ 6 ].set( this.max.x, this.max.y, this.min.z ).applyMatrix4( matrix ); // 110\n\t\t_points[ 7 ].set( this.max.x, this.max.y, this.max.z ).applyMatrix4( matrix ); // 111\n\n\t\tthis.setFromPoints( _points );\n\n\t\treturn this;\n\n\t}\n\n\ttranslate( offset ) {\n\n\t\tthis.min.add( offset );\n\t\tthis.max.add( offset );\n\n\t\treturn this;\n\n\t}\n\n\tequals( box ) {\n\n\t\treturn box.min.equals( this.min ) && box.max.equals( this.max );\n\n\t}\n\n}\n\nBox3.prototype.isBox3 = true;\n\nconst _points = [\n\t/*@__PURE__*/ new Vector3(),\n\t/*@__PURE__*/ new Vector3(),\n\t/*@__PURE__*/ new Vector3(),\n\t/*@__PURE__*/ new Vector3(),\n\t/*@__PURE__*/ new Vector3(),\n\t/*@__PURE__*/ new Vector3(),\n\t/*@__PURE__*/ new Vector3(),\n\t/*@__PURE__*/ new Vector3()\n];\n\nconst _vector = /*@__PURE__*/ new Vector3();\n\nconst _box = /*@__PURE__*/ new Box3();\n\n// triangle centered vertices\n\nconst _v0 = /*@__PURE__*/ new Vector3();\nconst _v1 = /*@__PURE__*/ new Vector3();\nconst _v2 = /*@__PURE__*/ new Vector3();\n\n// triangle edge vectors\n\nconst _f0 = /*@__PURE__*/ new Vector3();\nconst _f1 = /*@__PURE__*/ new Vector3();\nconst _f2 = /*@__PURE__*/ new Vector3();\n\nconst _center = /*@__PURE__*/ new Vector3();\nconst _extents = /*@__PURE__*/ new Vector3();\nconst _triangleNormal = /*@__PURE__*/ new Vector3();\nconst _testAxis = /*@__PURE__*/ new Vector3();\n\nfunction satForAxes( axes, v0, v1, v2, extents ) {\n\n\tfor ( let i = 0, j = axes.length - 3; i <= j; i += 3 ) {\n\n\t\t_testAxis.fromArray( axes, i );\n\t\t// project the aabb onto the seperating axis\n\t\tconst r = extents.x * Math.abs( _testAxis.x ) + extents.y * Math.abs( _testAxis.y ) + extents.z * Math.abs( _testAxis.z );\n\t\t// project all 3 vertices of the triangle onto the seperating axis\n\t\tconst p0 = v0.dot( _testAxis );\n\t\tconst p1 = v1.dot( _testAxis );\n\t\tconst p2 = v2.dot( _testAxis );\n\t\t// actual test, basically see if either of the most extreme of the triangle points intersects r\n\t\tif ( Math.max( - Math.max( p0, p1, p2 ), Math.min( p0, p1, p2 ) ) > r ) {\n\n\t\t\t// points of the projected triangle are outside the projected half-length of the aabb\n\t\t\t// the axis is seperating and we can exit\n\t\t\treturn false;\n\n\t\t}\n\n\t}\n\n\treturn true;\n\n}\n\nexport { Box3 };\n","import { Box3 } from './Box3.js';\nimport { Vector3 } from './Vector3.js';\n\nconst _box = /*@__PURE__*/ new Box3();\n\nclass Sphere {\n\n\tconstructor( center = new Vector3(), radius = - 1 ) {\n\n\t\tthis.center = center;\n\t\tthis.radius = radius;\n\n\t}\n\n\tset( center, radius ) {\n\n\t\tthis.center.copy( center );\n\t\tthis.radius = radius;\n\n\t\treturn this;\n\n\t}\n\n\tsetFromPoints( points, optionalCenter ) {\n\n\t\tconst center = this.center;\n\n\t\tif ( optionalCenter !== undefined ) {\n\n\t\t\tcenter.copy( optionalCenter );\n\n\t\t} else {\n\n\t\t\t_box.setFromPoints( points ).getCenter( center );\n\n\t\t}\n\n\t\tlet maxRadiusSq = 0;\n\n\t\tfor ( let i = 0, il = points.length; i < il; i ++ ) {\n\n\t\t\tmaxRadiusSq = Math.max( maxRadiusSq, center.distanceToSquared( points[ i ] ) );\n\n\t\t}\n\n\t\tthis.radius = Math.sqrt( maxRadiusSq );\n\n\t\treturn this;\n\n\t}\n\n\tcopy( sphere ) {\n\n\t\tthis.center.copy( sphere.center );\n\t\tthis.radius = sphere.radius;\n\n\t\treturn this;\n\n\t}\n\n\tisEmpty() {\n\n\t\treturn ( this.radius < 0 );\n\n\t}\n\n\tmakeEmpty() {\n\n\t\tthis.center.set( 0, 0, 0 );\n\t\tthis.radius = - 1;\n\n\t\treturn this;\n\n\t}\n\n\tcontainsPoint( point ) {\n\n\t\treturn ( point.distanceToSquared( this.center ) <= ( this.radius * this.radius ) );\n\n\t}\n\n\tdistanceToPoint( point ) {\n\n\t\treturn ( point.distanceTo( this.center ) - this.radius );\n\n\t}\n\n\tintersectsSphere( sphere ) {\n\n\t\tconst radiusSum = this.radius + sphere.radius;\n\n\t\treturn sphere.center.distanceToSquared( this.center ) <= ( radiusSum * radiusSum );\n\n\t}\n\n\tintersectsBox( box ) {\n\n\t\treturn box.intersectsSphere( this );\n\n\t}\n\n\tintersectsPlane( plane ) {\n\n\t\treturn Math.abs( plane.distanceToPoint( this.center ) ) <= this.radius;\n\n\t}\n\n\tclampPoint( point, target ) {\n\n\t\tconst deltaLengthSq = this.center.distanceToSquared( point );\n\n\t\tif ( target === undefined ) {\n\n\t\t\tconsole.warn( 'THREE.Sphere: .clampPoint() target is now required' );\n\t\t\ttarget = new Vector3();\n\n\t\t}\n\n\t\ttarget.copy( point );\n\n\t\tif ( deltaLengthSq > ( this.radius * this.radius ) ) {\n\n\t\t\ttarget.sub( this.center ).normalize();\n\t\t\ttarget.multiplyScalar( this.radius ).add( this.center );\n\n\t\t}\n\n\t\treturn target;\n\n\t}\n\n\tgetBoundingBox( target ) {\n\n\t\tif ( target === undefined ) {\n\n\t\t\tconsole.warn( 'THREE.Sphere: .getBoundingBox() target is now required' );\n\t\t\ttarget = new Box3();\n\n\t\t}\n\n\t\tif ( this.isEmpty() ) {\n\n\t\t\t// Empty sphere produces empty bounding box\n\t\t\ttarget.makeEmpty();\n\t\t\treturn target;\n\n\t\t}\n\n\t\ttarget.set( this.center, this.center );\n\t\ttarget.expandByScalar( this.radius );\n\n\t\treturn target;\n\n\t}\n\n\tapplyMatrix4( matrix ) {\n\n\t\tthis.center.applyMatrix4( matrix );\n\t\tthis.radius = this.radius * matrix.getMaxScaleOnAxis();\n\n\t\treturn this;\n\n\t}\n\n\ttranslate( offset ) {\n\n\t\tthis.center.add( offset );\n\n\t\treturn this;\n\n\t}\n\n\tequals( sphere ) {\n\n\t\treturn sphere.center.equals( this.center ) && ( sphere.radius === this.radius );\n\n\t}\n\n\tclone() {\n\n\t\treturn new this.constructor().copy( this );\n\n\t}\n\n}\n\nexport { Sphere };\n","import { Matrix3 } from './Matrix3.js';\nimport { Vector3 } from './Vector3.js';\n\nconst _vector1 = /*@__PURE__*/ new Vector3();\nconst _vector2 = /*@__PURE__*/ new Vector3();\nconst _normalMatrix = /*@__PURE__*/ new Matrix3();\n\nclass Plane {\n\n\tconstructor( normal = new Vector3( 1, 0, 0 ), constant = 0 ) {\n\n\t\t// normal is assumed to be normalized\n\n\t\tthis.normal = normal;\n\t\tthis.constant = constant;\n\n\t}\n\n\tset( normal, constant ) {\n\n\t\tthis.normal.copy( normal );\n\t\tthis.constant = constant;\n\n\t\treturn this;\n\n\t}\n\n\tsetComponents( x, y, z, w ) {\n\n\t\tthis.normal.set( x, y, z );\n\t\tthis.constant = w;\n\n\t\treturn this;\n\n\t}\n\n\tsetFromNormalAndCoplanarPoint( normal, point ) {\n\n\t\tthis.normal.copy( normal );\n\t\tthis.constant = - point.dot( this.normal );\n\n\t\treturn this;\n\n\t}\n\n\tsetFromCoplanarPoints( a, b, c ) {\n\n\t\tconst normal = _vector1.subVectors( c, b ).cross( _vector2.subVectors( a, b ) ).normalize();\n\n\t\t// Q: should an error be thrown if normal is zero (e.g. degenerate plane)?\n\n\t\tthis.setFromNormalAndCoplanarPoint( normal, a );\n\n\t\treturn this;\n\n\t}\n\n\tcopy( plane ) {\n\n\t\tthis.normal.copy( plane.normal );\n\t\tthis.constant = plane.constant;\n\n\t\treturn this;\n\n\t}\n\n\tnormalize() {\n\n\t\t// Note: will lead to a divide by zero if the plane is invalid.\n\n\t\tconst inverseNormalLength = 1.0 / this.normal.length();\n\t\tthis.normal.multiplyScalar( inverseNormalLength );\n\t\tthis.constant *= inverseNormalLength;\n\n\t\treturn this;\n\n\t}\n\n\tnegate() {\n\n\t\tthis.constant *= - 1;\n\t\tthis.normal.negate();\n\n\t\treturn this;\n\n\t}\n\n\tdistanceToPoint( point ) {\n\n\t\treturn this.normal.dot( point ) + this.constant;\n\n\t}\n\n\tdistanceToSphere( sphere ) {\n\n\t\treturn this.distanceToPoint( sphere.center ) - sphere.radius;\n\n\t}\n\n\tprojectPoint( point, target ) {\n\n\t\tif ( target === undefined ) {\n\n\t\t\tconsole.warn( 'THREE.Plane: .projectPoint() target is now required' );\n\t\t\ttarget = new Vector3();\n\n\t\t}\n\n\t\treturn target.copy( this.normal ).multiplyScalar( - this.distanceToPoint( point ) ).add( point );\n\n\t}\n\n\tintersectLine( line, target ) {\n\n\t\tif ( target === undefined ) {\n\n\t\t\tconsole.warn( 'THREE.Plane: .intersectLine() target is now required' );\n\t\t\ttarget = new Vector3();\n\n\t\t}\n\n\t\tconst direction = line.delta( _vector1 );\n\n\t\tconst denominator = this.normal.dot( direction );\n\n\t\tif ( denominator === 0 ) {\n\n\t\t\t// line is coplanar, return origin\n\t\t\tif ( this.distanceToPoint( line.start ) === 0 ) {\n\n\t\t\t\treturn target.copy( line.start );\n\n\t\t\t}\n\n\t\t\t// Unsure if this is the correct method to handle this case.\n\t\t\treturn undefined;\n\n\t\t}\n\n\t\tconst t = - ( line.start.dot( this.normal ) + this.constant ) / denominator;\n\n\t\tif ( t < 0 || t > 1 ) {\n\n\t\t\treturn undefined;\n\n\t\t}\n\n\t\treturn target.copy( direction ).multiplyScalar( t ).add( line.start );\n\n\t}\n\n\tintersectsLine( line ) {\n\n\t\t// Note: this tests if a line intersects the plane, not whether it (or its end-points) are coplanar with it.\n\n\t\tconst startSign = this.distanceToPoint( line.start );\n\t\tconst endSign = this.distanceToPoint( line.end );\n\n\t\treturn ( startSign < 0 && endSign > 0 ) || ( endSign < 0 && startSign > 0 );\n\n\t}\n\n\tintersectsBox( box ) {\n\n\t\treturn box.intersectsPlane( this );\n\n\t}\n\n\tintersectsSphere( sphere ) {\n\n\t\treturn sphere.intersectsPlane( this );\n\n\t}\n\n\tcoplanarPoint( target ) {\n\n\t\tif ( target === undefined ) {\n\n\t\t\tconsole.warn( 'THREE.Plane: .coplanarPoint() target is now required' );\n\t\t\ttarget = new Vector3();\n\n\t\t}\n\n\t\treturn target.copy( this.normal ).multiplyScalar( - this.constant );\n\n\t}\n\n\tapplyMatrix4( matrix, optionalNormalMatrix ) {\n\n\t\tconst normalMatrix = optionalNormalMatrix || _normalMatrix.getNormalMatrix( matrix );\n\n\t\tconst referencePoint = this.coplanarPoint( _vector1 ).applyMatrix4( matrix );\n\n\t\tconst normal = this.normal.applyMatrix3( normalMatrix ).normalize();\n\n\t\tthis.constant = - referencePoint.dot( normal );\n\n\t\treturn this;\n\n\t}\n\n\ttranslate( offset ) {\n\n\t\tthis.constant -= offset.dot( this.normal );\n\n\t\treturn this;\n\n\t}\n\n\tequals( plane ) {\n\n\t\treturn plane.normal.equals( this.normal ) && ( plane.constant === this.constant );\n\n\t}\n\n\tclone() {\n\n\t\treturn new this.constructor().copy( this );\n\n\t}\n\n}\n\nPlane.prototype.isPlane = true;\n\nexport { Plane };\n","import { Vector3 } from './Vector3.js';\nimport { Sphere } from './Sphere.js';\nimport { Plane } from './Plane.js';\n\nconst _sphere = /*@__PURE__*/ new Sphere();\nconst _vector = /*@__PURE__*/ new Vector3();\n\nclass Frustum {\n\n\tconstructor( p0 = new Plane(), p1 = new Plane(), p2 = new Plane(), p3 = new Plane(), p4 = new Plane(), p5 = new Plane() ) {\n\n\t\tthis.planes = [ p0, p1, p2, p3, p4, p5 ];\n\n\t}\n\n\tset( p0, p1, p2, p3, p4, p5 ) {\n\n\t\tconst planes = this.planes;\n\n\t\tplanes[ 0 ].copy( p0 );\n\t\tplanes[ 1 ].copy( p1 );\n\t\tplanes[ 2 ].copy( p2 );\n\t\tplanes[ 3 ].copy( p3 );\n\t\tplanes[ 4 ].copy( p4 );\n\t\tplanes[ 5 ].copy( p5 );\n\n\t\treturn this;\n\n\t}\n\n\tcopy( frustum ) {\n\n\t\tconst planes = this.planes;\n\n\t\tfor ( let i = 0; i < 6; i ++ ) {\n\n\t\t\tplanes[ i ].copy( frustum.planes[ i ] );\n\n\t\t}\n\n\t\treturn this;\n\n\t}\n\n\tsetFromProjectionMatrix( m ) {\n\n\t\tconst planes = this.planes;\n\t\tconst me = m.elements;\n\t\tconst me0 = me[ 0 ], me1 = me[ 1 ], me2 = me[ 2 ], me3 = me[ 3 ];\n\t\tconst me4 = me[ 4 ], me5 = me[ 5 ], me6 = me[ 6 ], me7 = me[ 7 ];\n\t\tconst me8 = me[ 8 ], me9 = me[ 9 ], me10 = me[ 10 ], me11 = me[ 11 ];\n\t\tconst me12 = me[ 12 ], me13 = me[ 13 ], me14 = me[ 14 ], me15 = me[ 15 ];\n\n\t\tplanes[ 0 ].setComponents( me3 - me0, me7 - me4, me11 - me8, me15 - me12 ).normalize();\n\t\tplanes[ 1 ].setComponents( me3 + me0, me7 + me4, me11 + me8, me15 + me12 ).normalize();\n\t\tplanes[ 2 ].setComponents( me3 + me1, me7 + me5, me11 + me9, me15 + me13 ).normalize();\n\t\tplanes[ 3 ].setComponents( me3 - me1, me7 - me5, me11 - me9, me15 - me13 ).normalize();\n\t\tplanes[ 4 ].setComponents( me3 - me2, me7 - me6, me11 - me10, me15 - me14 ).normalize();\n\t\tplanes[ 5 ].setComponents( me3 + me2, me7 + me6, me11 + me10, me15 + me14 ).normalize();\n\n\t\treturn this;\n\n\t}\n\n\tintersectsObject( object ) {\n\n\t\tconst geometry = object.geometry;\n\n\t\tif ( geometry.boundingSphere === null ) geometry.computeBoundingSphere();\n\n\t\t_sphere.copy( geometry.boundingSphere ).applyMatrix4( object.matrixWorld );\n\n\t\treturn this.intersectsSphere( _sphere );\n\n\t}\n\n\tintersectsSprite( sprite ) {\n\n\t\t_sphere.center.set( 0, 0, 0 );\n\t\t_sphere.radius = 0.7071067811865476;\n\t\t_sphere.applyMatrix4( sprite.matrixWorld );\n\n\t\treturn this.intersectsSphere( _sphere );\n\n\t}\n\n\tintersectsSphere( sphere ) {\n\n\t\tconst planes = this.planes;\n\t\tconst center = sphere.center;\n\t\tconst negRadius = - sphere.radius;\n\n\t\tfor ( let i = 0; i < 6; i ++ ) {\n\n\t\t\tconst distance = planes[ i ].distanceToPoint( center );\n\n\t\t\tif ( distance < negRadius ) {\n\n\t\t\t\treturn false;\n\n\t\t\t}\n\n\t\t}\n\n\t\treturn true;\n\n\t}\n\n\tintersectsBox( box ) {\n\n\t\tconst planes = this.planes;\n\n\t\tfor ( let i = 0; i < 6; i ++ ) {\n\n\t\t\tconst plane = planes[ i ];\n\n\t\t\t// corner at max distance\n\n\t\t\t_vector.x = plane.normal.x > 0 ? box.max.x : box.min.x;\n\t\t\t_vector.y = plane.normal.y > 0 ? box.max.y : box.min.y;\n\t\t\t_vector.z = plane.normal.z > 0 ? box.max.z : box.min.z;\n\n\t\t\tif ( plane.distanceToPoint( _vector ) < 0 ) {\n\n\t\t\t\treturn false;\n\n\t\t\t}\n\n\t\t}\n\n\t\treturn true;\n\n\t}\n\n\tcontainsPoint( point ) {\n\n\t\tconst planes = this.planes;\n\n\t\tfor ( let i = 0; i < 6; i ++ ) {\n\n\t\t\tif ( planes[ i ].distanceToPoint( point ) < 0 ) {\n\n\t\t\t\treturn false;\n\n\t\t\t}\n\n\t\t}\n\n\t\treturn true;\n\n\t}\n\n\tclone() {\n\n\t\treturn new this.constructor().copy( this );\n\n\t}\n\n}\n\n\nexport { Frustum };\n","import { Matrix4 } from '../math/Matrix4.js';\nimport { Vector2 } from '../math/Vector2.js';\nimport { Vector3 } from '../math/Vector3.js';\nimport { Vector4 } from '../math/Vector4.js';\nimport { Frustum } from '../math/Frustum.js';\n\nconst _projScreenMatrix = /*@__PURE__*/ new Matrix4();\nconst _lightPositionWorld = /*@__PURE__*/ new Vector3();\nconst _lookTarget = /*@__PURE__*/ new Vector3();\n\nclass LightShadow {\n\n\tconstructor( camera ) {\n\n\t\tthis.camera = camera;\n\n\t\tthis.bias = 0;\n\t\tthis.normalBias = 0;\n\t\tthis.radius = 1;\n\n\t\tthis.mapSize = new Vector2( 512, 512 );\n\n\t\tthis.map = null;\n\t\tthis.mapPass = null;\n\t\tthis.matrix = new Matrix4();\n\n\t\tthis.autoUpdate = true;\n\t\tthis.needsUpdate = false;\n\n\t\tthis._frustum = new Frustum();\n\t\tthis._frameExtents = new Vector2( 1, 1 );\n\n\t\tthis._viewportCount = 1;\n\n\t\tthis._viewports = [\n\n\t\t\tnew Vector4( 0, 0, 1, 1 )\n\n\t\t];\n\n\t}\n\n\tgetViewportCount() {\n\n\t\treturn this._viewportCount;\n\n\t}\n\n\tgetFrustum() {\n\n\t\treturn this._frustum;\n\n\t}\n\n\tupdateMatrices( light ) {\n\n\t\tconst shadowCamera = this.camera;\n\t\tconst shadowMatrix = this.matrix;\n\n\t\t_lightPositionWorld.setFromMatrixPosition( light.matrixWorld );\n\t\tshadowCamera.position.copy( _lightPositionWorld );\n\n\t\t_lookTarget.setFromMatrixPosition( light.target.matrixWorld );\n\t\tshadowCamera.lookAt( _lookTarget );\n\t\tshadowCamera.updateMatrixWorld();\n\n\t\t_projScreenMatrix.multiplyMatrices( shadowCamera.projectionMatrix, shadowCamera.matrixWorldInverse );\n\t\tthis._frustum.setFromProjectionMatrix( _projScreenMatrix );\n\n\t\tshadowMatrix.set(\n\t\t\t0.5, 0.0, 0.0, 0.5,\n\t\t\t0.0, 0.5, 0.0, 0.5,\n\t\t\t0.0, 0.0, 0.5, 0.5,\n\t\t\t0.0, 0.0, 0.0, 1.0\n\t\t);\n\n\t\tshadowMatrix.multiply( shadowCamera.projectionMatrix );\n\t\tshadowMatrix.multiply( shadowCamera.matrixWorldInverse );\n\n\t}\n\n\tgetViewport( viewportIndex ) {\n\n\t\treturn this._viewports[ viewportIndex ];\n\n\t}\n\n\tgetFrameExtents() {\n\n\t\treturn this._frameExtents;\n\n\t}\n\n\tcopy( source ) {\n\n\t\tthis.camera = source.camera.clone();\n\n\t\tthis.bias = source.bias;\n\t\tthis.radius = source.radius;\n\n\t\tthis.mapSize.copy( source.mapSize );\n\n\t\treturn this;\n\n\t}\n\n\tclone() {\n\n\t\treturn new this.constructor().copy( this );\n\n\t}\n\n\ttoJSON() {\n\n\t\tconst object = {};\n\n\t\tif ( this.bias !== 0 ) object.bias = this.bias;\n\t\tif ( this.normalBias !== 0 ) object.normalBias = this.normalBias;\n\t\tif ( this.radius !== 1 ) object.radius = this.radius;\n\t\tif ( this.mapSize.x !== 512 || this.mapSize.y !== 512 ) object.mapSize = this.mapSize.toArray();\n\n\t\tobject.camera = this.camera.toJSON( false ).object;\n\t\tdelete object.camera.matrix;\n\n\t\treturn object;\n\n\t}\n\n}\n\nexport { LightShadow };\n","import { Matrix4 } from '../math/Matrix4.js';\nimport { Object3D } from '../core/Object3D.js';\nimport { Vector3 } from '../math/Vector3.js';\n\nfunction Camera() {\n\n\tObject3D.call( this );\n\n\tthis.type = 'Camera';\n\n\tthis.matrixWorldInverse = new Matrix4();\n\n\tthis.projectionMatrix = new Matrix4();\n\tthis.projectionMatrixInverse = new Matrix4();\n\n}\n\nCamera.prototype = Object.assign( Object.create( Object3D.prototype ), {\n\n\tconstructor: Camera,\n\n\tisCamera: true,\n\n\tcopy: function ( source, recursive ) {\n\n\t\tObject3D.prototype.copy.call( this, source, recursive );\n\n\t\tthis.matrixWorldInverse.copy( source.matrixWorldInverse );\n\n\t\tthis.projectionMatrix.copy( source.projectionMatrix );\n\t\tthis.projectionMatrixInverse.copy( source.projectionMatrixInverse );\n\n\t\treturn this;\n\n\t},\n\n\tgetWorldDirection: function ( target ) {\n\n\t\tif ( target === undefined ) {\n\n\t\t\tconsole.warn( 'THREE.Camera: .getWorldDirection() target is now required' );\n\t\t\ttarget = new Vector3();\n\n\t\t}\n\n\t\tthis.updateWorldMatrix( true, false );\n\n\t\tconst e = this.matrixWorld.elements;\n\n\t\treturn target.set( - e[ 8 ], - e[ 9 ], - e[ 10 ] ).normalize();\n\n\t},\n\n\tupdateMatrixWorld: function ( force ) {\n\n\t\tObject3D.prototype.updateMatrixWorld.call( this, force );\n\n\t\tthis.matrixWorldInverse.copy( this.matrixWorld ).invert();\n\n\t},\n\n\tupdateWorldMatrix: function ( updateParents, updateChildren ) {\n\n\t\tObject3D.prototype.updateWorldMatrix.call( this, updateParents, updateChildren );\n\n\t\tthis.matrixWorldInverse.copy( this.matrixWorld ).invert();\n\n\t},\n\n\tclone: function () {\n\n\t\treturn new this.constructor().copy( this );\n\n\t}\n\n} );\n\nexport { Camera };\n","import { Camera } from './Camera.js';\nimport { Object3D } from '../core/Object3D.js';\nimport { MathUtils } from '../math/MathUtils.js';\n\nfunction PerspectiveCamera( fov = 50, aspect = 1, near = 0.1, far = 2000 ) {\n\n\tCamera.call( this );\n\n\tthis.type = 'PerspectiveCamera';\n\n\tthis.fov = fov;\n\tthis.zoom = 1;\n\n\tthis.near = near;\n\tthis.far = far;\n\tthis.focus = 10;\n\n\tthis.aspect = aspect;\n\tthis.view = null;\n\n\tthis.filmGauge = 35;\t// width of the film (default in millimeters)\n\tthis.filmOffset = 0;\t// horizontal film offset (same unit as gauge)\n\n\tthis.updateProjectionMatrix();\n\n}\n\nPerspectiveCamera.prototype = Object.assign( Object.create( Camera.prototype ), {\n\n\tconstructor: PerspectiveCamera,\n\n\tisPerspectiveCamera: true,\n\n\tcopy: function ( source, recursive ) {\n\n\t\tCamera.prototype.copy.call( this, source, recursive );\n\n\t\tthis.fov = source.fov;\n\t\tthis.zoom = source.zoom;\n\n\t\tthis.near = source.near;\n\t\tthis.far = source.far;\n\t\tthis.focus = source.focus;\n\n\t\tthis.aspect = source.aspect;\n\t\tthis.view = source.view === null ? null : Object.assign( {}, source.view );\n\n\t\tthis.filmGauge = source.filmGauge;\n\t\tthis.filmOffset = source.filmOffset;\n\n\t\treturn this;\n\n\t},\n\n\t/**\n\t * Sets the FOV by focal length in respect to the current .filmGauge.\n\t *\n\t * The default film gauge is 35, so that the focal length can be specified for\n\t * a 35mm (full frame) camera.\n\t *\n\t * Values for focal length and film gauge must have the same unit.\n\t */\n\tsetFocalLength: function ( focalLength ) {\n\n\t\t/** see {@link http://www.bobatkins.com/photography/technical/field_of_view.html} */\n\t\tconst vExtentSlope = 0.5 * this.getFilmHeight() / focalLength;\n\n\t\tthis.fov = MathUtils.RAD2DEG * 2 * Math.atan( vExtentSlope );\n\t\tthis.updateProjectionMatrix();\n\n\t},\n\n\t/**\n\t * Calculates the focal length from the current .fov and .filmGauge.\n\t */\n\tgetFocalLength: function () {\n\n\t\tconst vExtentSlope = Math.tan( MathUtils.DEG2RAD * 0.5 * this.fov );\n\n\t\treturn 0.5 * this.getFilmHeight() / vExtentSlope;\n\n\t},\n\n\tgetEffectiveFOV: function () {\n\n\t\treturn MathUtils.RAD2DEG * 2 * Math.atan(\n\t\t\tMath.tan( MathUtils.DEG2RAD * 0.5 * this.fov ) / this.zoom );\n\n\t},\n\n\tgetFilmWidth: function () {\n\n\t\t// film not completely covered in portrait format (aspect < 1)\n\t\treturn this.filmGauge * Math.min( this.aspect, 1 );\n\n\t},\n\n\tgetFilmHeight: function () {\n\n\t\t// film not completely covered in landscape format (aspect > 1)\n\t\treturn this.filmGauge / Math.max( this.aspect, 1 );\n\n\t},\n\n\t/**\n\t * Sets an offset in a larger frustum. This is useful for multi-window or\n\t * multi-monitor/multi-machine setups.\n\t *\n\t * For example, if you have 3x2 monitors and each monitor is 1920x1080 and\n\t * the monitors are in grid like this\n\t *\n\t *   +---+---+---+\n\t *   | A | B | C |\n\t *   +---+---+---+\n\t *   | D | E | F |\n\t *   +---+---+---+\n\t *\n\t * then for each monitor you would call it like this\n\t *\n\t *   const w = 1920;\n\t *   const h = 1080;\n\t *   const fullWidth = w * 3;\n\t *   const fullHeight = h * 2;\n\t *\n\t *   --A--\n\t *   camera.setViewOffset( fullWidth, fullHeight, w * 0, h * 0, w, h );\n\t *   --B--\n\t *   camera.setViewOffset( fullWidth, fullHeight, w * 1, h * 0, w, h );\n\t *   --C--\n\t *   camera.setViewOffset( fullWidth, fullHeight, w * 2, h * 0, w, h );\n\t *   --D--\n\t *   camera.setViewOffset( fullWidth, fullHeight, w * 0, h * 1, w, h );\n\t *   --E--\n\t *   camera.setViewOffset( fullWidth, fullHeight, w * 1, h * 1, w, h );\n\t *   --F--\n\t *   camera.setViewOffset( fullWidth, fullHeight, w * 2, h * 1, w, h );\n\t *\n\t *   Note there is no reason monitors have to be the same size or in a grid.\n\t */\n\tsetViewOffset: function ( fullWidth, fullHeight, x, y, width, height ) {\n\n\t\tthis.aspect = fullWidth / fullHeight;\n\n\t\tif ( this.view === null ) {\n\n\t\t\tthis.view = {\n\t\t\t\tenabled: true,\n\t\t\t\tfullWidth: 1,\n\t\t\t\tfullHeight: 1,\n\t\t\t\toffsetX: 0,\n\t\t\t\toffsetY: 0,\n\t\t\t\twidth: 1,\n\t\t\t\theight: 1\n\t\t\t};\n\n\t\t}\n\n\t\tthis.view.enabled = true;\n\t\tthis.view.fullWidth = fullWidth;\n\t\tthis.view.fullHeight = fullHeight;\n\t\tthis.view.offsetX = x;\n\t\tthis.view.offsetY = y;\n\t\tthis.view.width = width;\n\t\tthis.view.height = height;\n\n\t\tthis.updateProjectionMatrix();\n\n\t},\n\n\tclearViewOffset: function () {\n\n\t\tif ( this.view !== null ) {\n\n\t\t\tthis.view.enabled = false;\n\n\t\t}\n\n\t\tthis.updateProjectionMatrix();\n\n\t},\n\n\tupdateProjectionMatrix: function () {\n\n\t\tconst near = this.near;\n\t\tlet top = near * Math.tan( MathUtils.DEG2RAD * 0.5 * this.fov ) / this.zoom;\n\t\tlet height = 2 * top;\n\t\tlet width = this.aspect * height;\n\t\tlet left = - 0.5 * width;\n\t\tconst view = this.view;\n\n\t\tif ( this.view !== null && this.view.enabled ) {\n\n\t\t\tconst fullWidth = view.fullWidth,\n\t\t\t\tfullHeight = view.fullHeight;\n\n\t\t\tleft += view.offsetX * width / fullWidth;\n\t\t\ttop -= view.offsetY * height / fullHeight;\n\t\t\twidth *= view.width / fullWidth;\n\t\t\theight *= view.height / fullHeight;\n\n\t\t}\n\n\t\tconst skew = this.filmOffset;\n\t\tif ( skew !== 0 ) left += near * skew / this.getFilmWidth();\n\n\t\tthis.projectionMatrix.makePerspective( left, left + width, top, top - height, near, this.far );\n\n\t\tthis.projectionMatrixInverse.copy( this.projectionMatrix ).invert();\n\n\t},\n\n\ttoJSON: function ( meta ) {\n\n\t\tconst data = Object3D.prototype.toJSON.call( this, meta );\n\n\t\tdata.object.fov = this.fov;\n\t\tdata.object.zoom = this.zoom;\n\n\t\tdata.object.near = this.near;\n\t\tdata.object.far = this.far;\n\t\tdata.object.focus = this.focus;\n\n\t\tdata.object.aspect = this.aspect;\n\n\t\tif ( this.view !== null ) data.object.view = Object.assign( {}, this.view );\n\n\t\tdata.object.filmGauge = this.filmGauge;\n\t\tdata.object.filmOffset = this.filmOffset;\n\n\t\treturn data;\n\n\t}\n\n} );\n\n\nexport { PerspectiveCamera };\n","import { LightShadow } from './LightShadow.js';\nimport { PerspectiveCamera } from '../cameras/PerspectiveCamera.js';\nimport { Matrix4 } from '../math/Matrix4.js';\nimport { Vector2 } from '../math/Vector2.js';\nimport { Vector3 } from '../math/Vector3.js';\nimport { Vector4 } from '../math/Vector4.js';\n\nconst _projScreenMatrix = /*@__PURE__*/ new Matrix4();\nconst _lightPositionWorld = /*@__PURE__*/ new Vector3();\nconst _lookTarget = /*@__PURE__*/ new Vector3();\n\nclass PointLightShadow extends LightShadow {\n\n\tconstructor() {\n\n\t\tsuper( new PerspectiveCamera( 90, 1, 0.5, 500 ) );\n\n\t\tthis._frameExtents = new Vector2( 4, 2 );\n\n\t\tthis._viewportCount = 6;\n\n\t\tthis._viewports = [\n\t\t\t// These viewports map a cube-map onto a 2D texture with the\n\t\t\t// following orientation:\n\t\t\t//\n\t\t\t//  xzXZ\n\t\t\t//   y Y\n\t\t\t//\n\t\t\t// X - Positive x direction\n\t\t\t// x - Negative x direction\n\t\t\t// Y - Positive y direction\n\t\t\t// y - Negative y direction\n\t\t\t// Z - Positive z direction\n\t\t\t// z - Negative z direction\n\n\t\t\t// positive X\n\t\t\tnew Vector4( 2, 1, 1, 1 ),\n\t\t\t// negative X\n\t\t\tnew Vector4( 0, 1, 1, 1 ),\n\t\t\t// positive Z\n\t\t\tnew Vector4( 3, 1, 1, 1 ),\n\t\t\t// negative Z\n\t\t\tnew Vector4( 1, 1, 1, 1 ),\n\t\t\t// positive Y\n\t\t\tnew Vector4( 3, 0, 1, 1 ),\n\t\t\t// negative Y\n\t\t\tnew Vector4( 1, 0, 1, 1 )\n\t\t];\n\n\t\tthis._cubeDirections = [\n\t\t\tnew Vector3( 1, 0, 0 ), new Vector3( - 1, 0, 0 ), new Vector3( 0, 0, 1 ),\n\t\t\tnew Vector3( 0, 0, - 1 ), new Vector3( 0, 1, 0 ), new Vector3( 0, - 1, 0 )\n\t\t];\n\n\t\tthis._cubeUps = [\n\t\t\tnew Vector3( 0, 1, 0 ), new Vector3( 0, 1, 0 ), new Vector3( 0, 1, 0 ),\n\t\t\tnew Vector3( 0, 1, 0 ), new Vector3( 0, 0, 1 ),\tnew Vector3( 0, 0, - 1 )\n\t\t];\n\n\t}\n\n\tupdateMatrices( light, viewportIndex = 0 ) {\n\n\t\tconst camera = this.camera;\n\t\tconst shadowMatrix = this.matrix;\n\n\t\t_lightPositionWorld.setFromMatrixPosition( light.matrixWorld );\n\t\tcamera.position.copy( _lightPositionWorld );\n\n\t\t_lookTarget.copy( camera.position );\n\t\t_lookTarget.add( this._cubeDirections[ viewportIndex ] );\n\t\tcamera.up.copy( this._cubeUps[ viewportIndex ] );\n\t\tcamera.lookAt( _lookTarget );\n\t\tcamera.updateMatrixWorld();\n\n\t\tshadowMatrix.makeTranslation( - _lightPositionWorld.x, - _lightPositionWorld.y, - _lightPositionWorld.z );\n\n\t\t_projScreenMatrix.multiplyMatrices( camera.projectionMatrix, camera.matrixWorldInverse );\n\t\tthis._frustum.setFromProjectionMatrix( _projScreenMatrix );\n\n\t}\n\n}\n\nPointLightShadow.prototype.isPointLightShadow = true;\n\nexport { PointLightShadow };\n","import { Light } from './Light.js';\nimport { PointLightShadow } from './PointLightShadow.js';\n\nclass PointLight extends Light {\n\n\tconstructor( color, intensity, distance = 0, decay = 1 ) {\n\n\t\tsuper( color, intensity );\n\n\t\tthis.type = 'PointLight';\n\n\t\tthis.distance = distance;\n\t\tthis.decay = decay; // for physically correct lights, should be 2.\n\n\t\tthis.shadow = new PointLightShadow();\n\n\t}\n\n\tget power() {\n\n\t\t// intensity = power per solid angle.\n\t\t// ref: equation (15) from https://seblagarde.files.wordpress.com/2015/07/course_notes_moving_frostbite_to_pbr_v32.pdf\n\t\treturn this.intensity * 4 * Math.PI;\n\n\t}\n\n\tset power( power ) {\n\n\t\t// intensity = power per solid angle.\n\t\t// ref: equation (15) from https://seblagarde.files.wordpress.com/2015/07/course_notes_moving_frostbite_to_pbr_v32.pdf\n\t\tthis.intensity = power / ( 4 * Math.PI );\n\n\t}\n\n\tcopy( source ) {\n\n\t\tsuper.copy( source );\n\n\t\tthis.distance = source.distance;\n\t\tthis.decay = source.decay;\n\n\t\tthis.shadow = source.shadow.clone();\n\n\t\treturn this;\n\n\t}\n\n}\n\nPointLight.prototype.isPointLight = true;\n\nexport { PointLight };\n","export const REVISION = '126';\nexport const MOUSE = { LEFT: 0, MIDDLE: 1, RIGHT: 2, ROTATE: 0, DOLLY: 1, PAN: 2 };\nexport const TOUCH = { ROTATE: 0, PAN: 1, DOLLY_PAN: 2, DOLLY_ROTATE: 3 };\nexport const CullFaceNone = 0;\nexport const CullFaceBack = 1;\nexport const CullFaceFront = 2;\nexport const CullFaceFrontBack = 3;\nexport const BasicShadowMap = 0;\nexport const PCFShadowMap = 1;\nexport const PCFSoftShadowMap = 2;\nexport const VSMShadowMap = 3;\nexport const FrontSide = 0;\nexport const BackSide = 1;\nexport const DoubleSide = 2;\nexport const FlatShading = 1;\nexport const SmoothShading = 2;\nexport const NoBlending = 0;\nexport const NormalBlending = 1;\nexport const AdditiveBlending = 2;\nexport const SubtractiveBlending = 3;\nexport const MultiplyBlending = 4;\nexport const CustomBlending = 5;\nexport const AddEquation = 100;\nexport const SubtractEquation = 101;\nexport const ReverseSubtractEquation = 102;\nexport const MinEquation = 103;\nexport const MaxEquation = 104;\nexport const ZeroFactor = 200;\nexport const OneFactor = 201;\nexport const SrcColorFactor = 202;\nexport const OneMinusSrcColorFactor = 203;\nexport const SrcAlphaFactor = 204;\nexport const OneMinusSrcAlphaFactor = 205;\nexport const DstAlphaFactor = 206;\nexport const OneMinusDstAlphaFactor = 207;\nexport const DstColorFactor = 208;\nexport const OneMinusDstColorFactor = 209;\nexport const SrcAlphaSaturateFactor = 210;\nexport const NeverDepth = 0;\nexport const AlwaysDepth = 1;\nexport const LessDepth = 2;\nexport const LessEqualDepth = 3;\nexport const EqualDepth = 4;\nexport const GreaterEqualDepth = 5;\nexport const GreaterDepth = 6;\nexport const NotEqualDepth = 7;\nexport const MultiplyOperation = 0;\nexport const MixOperation = 1;\nexport const AddOperation = 2;\nexport const NoToneMapping = 0;\nexport const LinearToneMapping = 1;\nexport const ReinhardToneMapping = 2;\nexport const CineonToneMapping = 3;\nexport const ACESFilmicToneMapping = 4;\nexport const CustomToneMapping = 5;\n\nexport const UVMapping = 300;\nexport const CubeReflectionMapping = 301;\nexport const CubeRefractionMapping = 302;\nexport const EquirectangularReflectionMapping = 303;\nexport const EquirectangularRefractionMapping = 304;\nexport const CubeUVReflectionMapping = 306;\nexport const CubeUVRefractionMapping = 307;\nexport const RepeatWrapping = 1000;\nexport const ClampToEdgeWrapping = 1001;\nexport const MirroredRepeatWrapping = 1002;\nexport const NearestFilter = 1003;\nexport const NearestMipmapNearestFilter = 1004;\nexport const NearestMipMapNearestFilter = 1004;\nexport const NearestMipmapLinearFilter = 1005;\nexport const NearestMipMapLinearFilter = 1005;\nexport const LinearFilter = 1006;\nexport const LinearMipmapNearestFilter = 1007;\nexport const LinearMipMapNearestFilter = 1007;\nexport const LinearMipmapLinearFilter = 1008;\nexport const LinearMipMapLinearFilter = 1008;\nexport const UnsignedByteType = 1009;\nexport const ByteType = 1010;\nexport const ShortType = 1011;\nexport const UnsignedShortType = 1012;\nexport const IntType = 1013;\nexport const UnsignedIntType = 1014;\nexport const FloatType = 1015;\nexport const HalfFloatType = 1016;\nexport const UnsignedShort4444Type = 1017;\nexport const UnsignedShort5551Type = 1018;\nexport const UnsignedShort565Type = 1019;\nexport const UnsignedInt248Type = 1020;\nexport const AlphaFormat = 1021;\nexport const RGBFormat = 1022;\nexport const RGBAFormat = 1023;\nexport const LuminanceFormat = 1024;\nexport const LuminanceAlphaFormat = 1025;\nexport const RGBEFormat = RGBAFormat;\nexport const DepthFormat = 1026;\nexport const DepthStencilFormat = 1027;\nexport const RedFormat = 1028;\nexport const RedIntegerFormat = 1029;\nexport const RGFormat = 1030;\nexport const RGIntegerFormat = 1031;\nexport const RGBIntegerFormat = 1032;\nexport const RGBAIntegerFormat = 1033;\n\nexport const RGB_S3TC_DXT1_Format = 33776;\nexport const RGBA_S3TC_DXT1_Format = 33777;\nexport const RGBA_S3TC_DXT3_Format = 33778;\nexport const RGBA_S3TC_DXT5_Format = 33779;\nexport const RGB_PVRTC_4BPPV1_Format = 35840;\nexport const RGB_PVRTC_2BPPV1_Format = 35841;\nexport const RGBA_PVRTC_4BPPV1_Format = 35842;\nexport const RGBA_PVRTC_2BPPV1_Format = 35843;\nexport const RGB_ETC1_Format = 36196;\nexport const RGB_ETC2_Format = 37492;\nexport const RGBA_ETC2_EAC_Format = 37496;\nexport const RGBA_ASTC_4x4_Format = 37808;\nexport const RGBA_ASTC_5x4_Format = 37809;\nexport const RGBA_ASTC_5x5_Format = 37810;\nexport const RGBA_ASTC_6x5_Format = 37811;\nexport const RGBA_ASTC_6x6_Format = 37812;\nexport const RGBA_ASTC_8x5_Format = 37813;\nexport const RGBA_ASTC_8x6_Format = 37814;\nexport const RGBA_ASTC_8x8_Format = 37815;\nexport const RGBA_ASTC_10x5_Format = 37816;\nexport const RGBA_ASTC_10x6_Format = 37817;\nexport const RGBA_ASTC_10x8_Format = 37818;\nexport const RGBA_ASTC_10x10_Format = 37819;\nexport const RGBA_ASTC_12x10_Format = 37820;\nexport const RGBA_ASTC_12x12_Format = 37821;\nexport const RGBA_BPTC_Format = 36492;\nexport const SRGB8_ALPHA8_ASTC_4x4_Format = 37840;\nexport const SRGB8_ALPHA8_ASTC_5x4_Format = 37841;\nexport const SRGB8_ALPHA8_ASTC_5x5_Format = 37842;\nexport const SRGB8_ALPHA8_ASTC_6x5_Format = 37843;\nexport const SRGB8_ALPHA8_ASTC_6x6_Format = 37844;\nexport const SRGB8_ALPHA8_ASTC_8x5_Format = 37845;\nexport const SRGB8_ALPHA8_ASTC_8x6_Format = 37846;\nexport const SRGB8_ALPHA8_ASTC_8x8_Format = 37847;\nexport const SRGB8_ALPHA8_ASTC_10x5_Format = 37848;\nexport const SRGB8_ALPHA8_ASTC_10x6_Format = 37849;\nexport const SRGB8_ALPHA8_ASTC_10x8_Format = 37850;\nexport const SRGB8_ALPHA8_ASTC_10x10_Format = 37851;\nexport const SRGB8_ALPHA8_ASTC_12x10_Format = 37852;\nexport const SRGB8_ALPHA8_ASTC_12x12_Format = 37853;\nexport const LoopOnce = 2200;\nexport const LoopRepeat = 2201;\nexport const LoopPingPong = 2202;\nexport const InterpolateDiscrete = 2300;\nexport const InterpolateLinear = 2301;\nexport const InterpolateSmooth = 2302;\nexport const ZeroCurvatureEnding = 2400;\nexport const ZeroSlopeEnding = 2401;\nexport const WrapAroundEnding = 2402;\nexport const NormalAnimationBlendMode = 2500;\nexport const AdditiveAnimationBlendMode = 2501;\nexport const TrianglesDrawMode = 0;\nexport const TriangleStripDrawMode = 1;\nexport const TriangleFanDrawMode = 2;\nexport const LinearEncoding = 3000;\nexport const sRGBEncoding = 3001;\nexport const GammaEncoding = 3007;\nexport const RGBEEncoding = 3002;\nexport const LogLuvEncoding = 3003;\nexport const RGBM7Encoding = 3004;\nexport const RGBM16Encoding = 3005;\nexport const RGBDEncoding = 3006;\nexport const BasicDepthPacking = 3200;\nexport const RGBADepthPacking = 3201;\nexport const TangentSpaceNormalMap = 0;\nexport const ObjectSpaceNormalMap = 1;\n\nexport const ZeroStencilOp = 0;\nexport const KeepStencilOp = 7680;\nexport const ReplaceStencilOp = 7681;\nexport const IncrementStencilOp = 7682;\nexport const DecrementStencilOp = 7683;\nexport const IncrementWrapStencilOp = 34055;\nexport const DecrementWrapStencilOp = 34056;\nexport const InvertStencilOp = 5386;\n\nexport const NeverStencilFunc = 512;\nexport const LessStencilFunc = 513;\nexport const EqualStencilFunc = 514;\nexport const LessEqualStencilFunc = 515;\nexport const GreaterStencilFunc = 516;\nexport const NotEqualStencilFunc = 517;\nexport const GreaterEqualStencilFunc = 518;\nexport const AlwaysStencilFunc = 519;\n\nexport const StaticDrawUsage = 35044;\nexport const DynamicDrawUsage = 35048;\nexport const StreamDrawUsage = 35040;\nexport const StaticReadUsage = 35045;\nexport const DynamicReadUsage = 35049;\nexport const StreamReadUsage = 35041;\nexport const StaticCopyUsage = 35046;\nexport const DynamicCopyUsage = 35050;\nexport const StreamCopyUsage = 35042;\n\nexport const GLSL1 = '100';\nexport const GLSL3 = '300 es';\n","let _canvas;\n\nconst ImageUtils = {\n\n\tgetDataURL: function ( image ) {\n\n\t\tif ( /^data:/i.test( image.src ) ) {\n\n\t\t\treturn image.src;\n\n\t\t}\n\n\t\tif ( typeof HTMLCanvasElement == 'undefined' ) {\n\n\t\t\treturn image.src;\n\n\t\t}\n\n\t\tlet canvas;\n\n\t\tif ( image instanceof HTMLCanvasElement ) {\n\n\t\t\tcanvas = image;\n\n\t\t} else {\n\n\t\t\tif ( _canvas === undefined ) _canvas = document.createElementNS( 'http://www.w3.org/1999/xhtml', 'canvas' );\n\n\t\t\t_canvas.width = image.width;\n\t\t\t_canvas.height = image.height;\n\n\t\t\tconst context = _canvas.getContext( '2d' );\n\n\t\t\tif ( image instanceof ImageData ) {\n\n\t\t\t\tcontext.putImageData( image, 0, 0 );\n\n\t\t\t} else {\n\n\t\t\t\tcontext.drawImage( image, 0, 0, image.width, image.height );\n\n\t\t\t}\n\n\t\t\tcanvas = _canvas;\n\n\t\t}\n\n\t\tif ( canvas.width > 2048 || canvas.height > 2048 ) {\n\n\t\t\treturn canvas.toDataURL( 'image/jpeg', 0.6 );\n\n\t\t} else {\n\n\t\t\treturn canvas.toDataURL( 'image/png' );\n\n\t\t}\n\n\t}\n\n};\n\nexport { ImageUtils };\n","import { EventDispatcher } from '../core/EventDispatcher.js';\nimport {\n\tMirroredRepeatWrapping,\n\tClampToEdgeWrapping,\n\tRepeatWrapping,\n\tLinearEncoding,\n\tUnsignedByteType,\n\tRGBAFormat,\n\tLinearMipmapLinearFilter,\n\tLinearFilter,\n\tUVMapping\n} from '../constants.js';\nimport { MathUtils } from '../math/MathUtils.js';\nimport { Vector2 } from '../math/Vector2.js';\nimport { Matrix3 } from '../math/Matrix3.js';\nimport { ImageUtils } from '../extras/ImageUtils.js';\n\nlet textureId = 0;\n\nclass Texture extends EventDispatcher {\n\n\tconstructor( image = Texture.DEFAULT_IMAGE, mapping = Texture.DEFAULT_MAPPING, wrapS = ClampToEdgeWrapping, wrapT = ClampToEdgeWrapping, magFilter = LinearFilter, minFilter = LinearMipmapLinearFilter, format = RGBAFormat, type = UnsignedByteType, anisotropy = 1, encoding = LinearEncoding ) {\n\n\t\tsuper();\n\n\t\tObject.defineProperty( this, 'id', { value: textureId ++ } );\n\n\t\tthis.uuid = MathUtils.generateUUID();\n\n\t\tthis.name = '';\n\n\t\tthis.image = image;\n\t\tthis.mipmaps = [];\n\n\t\tthis.mapping = mapping;\n\n\t\tthis.wrapS = wrapS;\n\t\tthis.wrapT = wrapT;\n\n\t\tthis.magFilter = magFilter;\n\t\tthis.minFilter = minFilter;\n\n\t\tthis.anisotropy = anisotropy;\n\n\t\tthis.format = format;\n\t\tthis.internalFormat = null;\n\t\tthis.type = type;\n\n\t\tthis.offset = new Vector2( 0, 0 );\n\t\tthis.repeat = new Vector2( 1, 1 );\n\t\tthis.center = new Vector2( 0, 0 );\n\t\tthis.rotation = 0;\n\n\t\tthis.matrixAutoUpdate = true;\n\t\tthis.matrix = new Matrix3();\n\n\t\tthis.generateMipmaps = true;\n\t\tthis.premultiplyAlpha = false;\n\t\tthis.flipY = true;\n\t\tthis.unpackAlignment = 4;\t// valid values: 1, 2, 4, 8 (see http://www.khronos.org/opengles/sdk/docs/man/xhtml/glPixelStorei.xml)\n\n\t\t// Values of encoding !== THREE.LinearEncoding only supported on map, envMap and emissiveMap.\n\t\t//\n\t\t// Also changing the encoding after already used by a Material will not automatically make the Material\n\t\t// update. You need to explicitly call Material.needsUpdate to trigger it to recompile.\n\t\tthis.encoding = encoding;\n\n\t\tthis.version = 0;\n\t\tthis.onUpdate = null;\n\n\t}\n\n\tupdateMatrix() {\n\n\t\tthis.matrix.setUvTransform( this.offset.x, this.offset.y, this.repeat.x, this.repeat.y, this.rotation, this.center.x, this.center.y );\n\n\t}\n\n\tclone() {\n\n\t\treturn new this.constructor().copy( this );\n\n\t}\n\n\tcopy( source ) {\n\n\t\tthis.name = source.name;\n\n\t\tthis.image = source.image;\n\t\tthis.mipmaps = source.mipmaps.slice( 0 );\n\n\t\tthis.mapping = source.mapping;\n\n\t\tthis.wrapS = source.wrapS;\n\t\tthis.wrapT = source.wrapT;\n\n\t\tthis.magFilter = source.magFilter;\n\t\tthis.minFilter = source.minFilter;\n\n\t\tthis.anisotropy = source.anisotropy;\n\n\t\tthis.format = source.format;\n\t\tthis.internalFormat = source.internalFormat;\n\t\tthis.type = source.type;\n\n\t\tthis.offset.copy( source.offset );\n\t\tthis.repeat.copy( source.repeat );\n\t\tthis.center.copy( source.center );\n\t\tthis.rotation = source.rotation;\n\n\t\tthis.matrixAutoUpdate = source.matrixAutoUpdate;\n\t\tthis.matrix.copy( source.matrix );\n\n\t\tthis.generateMipmaps = source.generateMipmaps;\n\t\tthis.premultiplyAlpha = source.premultiplyAlpha;\n\t\tthis.flipY = source.flipY;\n\t\tthis.unpackAlignment = source.unpackAlignment;\n\t\tthis.encoding = source.encoding;\n\n\t\treturn this;\n\n\t}\n\n\ttoJSON( meta ) {\n\n\t\tconst isRootObject = ( meta === undefined || typeof meta === 'string' );\n\n\t\tif ( ! isRootObject && meta.textures[ this.uuid ] !== undefined ) {\n\n\t\t\treturn meta.textures[ this.uuid ];\n\n\t\t}\n\n\t\tconst output = {\n\n\t\t\tmetadata: {\n\t\t\t\tversion: 4.5,\n\t\t\t\ttype: 'Texture',\n\t\t\t\tgenerator: 'Texture.toJSON'\n\t\t\t},\n\n\t\t\tuuid: this.uuid,\n\t\t\tname: this.name,\n\n\t\t\tmapping: this.mapping,\n\n\t\t\trepeat: [ this.repeat.x, this.repeat.y ],\n\t\t\toffset: [ this.offset.x, this.offset.y ],\n\t\t\tcenter: [ this.center.x, this.center.y ],\n\t\t\trotation: this.rotation,\n\n\t\t\twrap: [ this.wrapS, this.wrapT ],\n\n\t\t\tformat: this.format,\n\t\t\ttype: this.type,\n\t\t\tencoding: this.encoding,\n\n\t\t\tminFilter: this.minFilter,\n\t\t\tmagFilter: this.magFilter,\n\t\t\tanisotropy: this.anisotropy,\n\n\t\t\tflipY: this.flipY,\n\n\t\t\tpremultiplyAlpha: this.premultiplyAlpha,\n\t\t\tunpackAlignment: this.unpackAlignment\n\n\t\t};\n\n\t\tif ( this.image !== undefined ) {\n\n\t\t\t// TODO: Move to THREE.Image\n\n\t\t\tconst image = this.image;\n\n\t\t\tif ( image.uuid === undefined ) {\n\n\t\t\t\timage.uuid = MathUtils.generateUUID(); // UGH\n\n\t\t\t}\n\n\t\t\tif ( ! isRootObject && meta.images[ image.uuid ] === undefined ) {\n\n\t\t\t\tlet url;\n\n\t\t\t\tif ( Array.isArray( image ) ) {\n\n\t\t\t\t\t// process array of images e.g. CubeTexture\n\n\t\t\t\t\turl = [];\n\n\t\t\t\t\tfor ( let i = 0, l = image.length; i < l; i ++ ) {\n\n\t\t\t\t\t\t// check cube texture with data textures\n\n\t\t\t\t\t\tif ( image[ i ].isDataTexture ) {\n\n\t\t\t\t\t\t\turl.push( serializeImage( image[ i ].image ) );\n\n\t\t\t\t\t\t} else {\n\n\t\t\t\t\t\t\turl.push( serializeImage( image[ i ] ) );\n\n\t\t\t\t\t\t}\n\n\t\t\t\t\t}\n\n\t\t\t\t} else {\n\n\t\t\t\t\t// process single image\n\n\t\t\t\t\turl = serializeImage( image );\n\n\t\t\t\t}\n\n\t\t\t\tmeta.images[ image.uuid ] = {\n\t\t\t\t\tuuid: image.uuid,\n\t\t\t\t\turl: url\n\t\t\t\t};\n\n\t\t\t}\n\n\t\t\toutput.image = image.uuid;\n\n\t\t}\n\n\t\tif ( ! isRootObject ) {\n\n\t\t\tmeta.textures[ this.uuid ] = output;\n\n\t\t}\n\n\t\treturn output;\n\n\t}\n\n\tdispose() {\n\n\t\tthis.dispatchEvent( { type: 'dispose' } );\n\n\t}\n\n\ttransformUv( uv ) {\n\n\t\tif ( this.mapping !== UVMapping ) return uv;\n\n\t\tuv.applyMatrix3( this.matrix );\n\n\t\tif ( uv.x < 0 || uv.x > 1 ) {\n\n\t\t\tswitch ( this.wrapS ) {\n\n\t\t\t\tcase RepeatWrapping:\n\n\t\t\t\t\tuv.x = uv.x - Math.floor( uv.x );\n\t\t\t\t\tbreak;\n\n\t\t\t\tcase ClampToEdgeWrapping:\n\n\t\t\t\t\tuv.x = uv.x < 0 ? 0 : 1;\n\t\t\t\t\tbreak;\n\n\t\t\t\tcase MirroredRepeatWrapping:\n\n\t\t\t\t\tif ( Math.abs( Math.floor( uv.x ) % 2 ) === 1 ) {\n\n\t\t\t\t\t\tuv.x = Math.ceil( uv.x ) - uv.x;\n\n\t\t\t\t\t} else {\n\n\t\t\t\t\t\tuv.x = uv.x - Math.floor( uv.x );\n\n\t\t\t\t\t}\n\n\t\t\t\t\tbreak;\n\n\t\t\t}\n\n\t\t}\n\n\t\tif ( uv.y < 0 || uv.y > 1 ) {\n\n\t\t\tswitch ( this.wrapT ) {\n\n\t\t\t\tcase RepeatWrapping:\n\n\t\t\t\t\tuv.y = uv.y - Math.floor( uv.y );\n\t\t\t\t\tbreak;\n\n\t\t\t\tcase ClampToEdgeWrapping:\n\n\t\t\t\t\tuv.y = uv.y < 0 ? 0 : 1;\n\t\t\t\t\tbreak;\n\n\t\t\t\tcase MirroredRepeatWrapping:\n\n\t\t\t\t\tif ( Math.abs( Math.floor( uv.y ) % 2 ) === 1 ) {\n\n\t\t\t\t\t\tuv.y = Math.ceil( uv.y ) - uv.y;\n\n\t\t\t\t\t} else {\n\n\t\t\t\t\t\tuv.y = uv.y - Math.floor( uv.y );\n\n\t\t\t\t\t}\n\n\t\t\t\t\tbreak;\n\n\t\t\t}\n\n\t\t}\n\n\t\tif ( this.flipY ) {\n\n\t\t\tuv.y = 1 - uv.y;\n\n\t\t}\n\n\t\treturn uv;\n\n\t}\n\n\tset needsUpdate( value ) {\n\n\t\tif ( value === true ) this.version ++;\n\n\t}\n\n}\n\nTexture.DEFAULT_IMAGE = undefined;\nTexture.DEFAULT_MAPPING = UVMapping;\n\nTexture.prototype.isTexture = true;\n\nfunction serializeImage( image ) {\n\n\tif ( ( typeof HTMLImageElement !== 'undefined' && image instanceof HTMLImageElement ) ||\n\t\t( typeof HTMLCanvasElement !== 'undefined' && image instanceof HTMLCanvasElement ) ||\n\t\t( typeof ImageBitmap !== 'undefined' && image instanceof ImageBitmap ) ) {\n\n\t\t// default images\n\n\t\treturn ImageUtils.getDataURL( image );\n\n\t} else {\n\n\t\tif ( image.data ) {\n\n\t\t\t// images of DataTexture\n\n\t\t\treturn {\n\t\t\t\tdata: Array.prototype.slice.call( image.data ),\n\t\t\t\twidth: image.width,\n\t\t\t\theight: image.height,\n\t\t\t\ttype: image.data.constructor.name\n\t\t\t};\n\n\t\t} else {\n\n\t\t\tconsole.warn( 'THREE.Texture: Unable to serialize Texture.' );\n\t\t\treturn {};\n\n\t\t}\n\n\t}\n\n}\n\nexport { Texture };\n","import { Texture } from './Texture.js';\nimport { NearestFilter } from '../constants.js';\n\nclass DataTexture extends Texture {\n\n\tconstructor( data, width, height, format, type, mapping, wrapS, wrapT, magFilter, minFilter, anisotropy, encoding ) {\n\n\t\tsuper( null, mapping, wrapS, wrapT, magFilter, minFilter, format, type, anisotropy, encoding );\n\n\t\tthis.image = { data: data || null, width: width || 1, height: height || 1 };\n\n\t\tthis.magFilter = magFilter !== undefined ? magFilter : NearestFilter;\n\t\tthis.minFilter = minFilter !== undefined ? minFilter : NearestFilter;\n\n\t\tthis.generateMipmaps = false;\n\t\tthis.flipY = false;\n\t\tthis.unpackAlignment = 1;\n\n\t\tthis.needsUpdate = true;\n\n\t}\n\n}\n\nDataTexture.prototype.isDataTexture = true;\n\nexport { DataTexture };\n","function WebGLAnimation() {\n\n\tlet context = null;\n\tlet isAnimating = false;\n\tlet animationLoop = null;\n\tlet requestId = null;\n\n\tfunction onAnimationFrame( time, frame ) {\n\n\t\tanimationLoop( time, frame );\n\n\t\trequestId = context.requestAnimationFrame( onAnimationFrame );\n\n\t}\n\n\treturn {\n\n\t\tstart: function () {\n\n\t\t\tif ( isAnimating === true ) return;\n\t\t\tif ( animationLoop === null ) return;\n\n\t\t\trequestId = context.requestAnimationFrame( onAnimationFrame );\n\n\t\t\tisAnimating = true;\n\n\t\t},\n\n\t\tstop: function () {\n\n\t\t\tcontext.cancelAnimationFrame( requestId );\n\n\t\t\tisAnimating = false;\n\n\t\t},\n\n\t\tsetAnimationLoop: function ( callback ) {\n\n\t\t\tanimationLoop = callback;\n\n\t\t},\n\n\t\tsetContext: function ( value ) {\n\n\t\t\tcontext = value;\n\n\t\t}\n\n\t};\n\n}\n\nexport { WebGLAnimation };\n","function WebGLAttributes( gl, capabilities ) {\n\n\tconst isWebGL2 = capabilities.isWebGL2;\n\n\tconst buffers = new WeakMap();\n\n\tfunction createBuffer( attribute, bufferType ) {\n\n\t\tconst array = attribute.array;\n\t\tconst usage = attribute.usage;\n\n\t\tconst buffer = gl.createBuffer();\n\n\t\tgl.bindBuffer( bufferType, buffer );\n\t\tgl.bufferData( bufferType, array, usage );\n\n\t\tattribute.onUploadCallback();\n\n\t\tlet type = gl.FLOAT;\n\n\t\tif ( array instanceof Float32Array ) {\n\n\t\t\ttype = gl.FLOAT;\n\n\t\t} else if ( array instanceof Float64Array ) {\n\n\t\t\tconsole.warn( 'THREE.WebGLAttributes: Unsupported data buffer format: Float64Array.' );\n\n\t\t} else if ( array instanceof Uint16Array ) {\n\n\t\t\tif ( attribute.isFloat16BufferAttribute ) {\n\n\t\t\t\tif ( isWebGL2 ) {\n\n\t\t\t\t\ttype = gl.HALF_FLOAT;\n\n\t\t\t\t} else {\n\n\t\t\t\t\tconsole.warn( 'THREE.WebGLAttributes: Usage of Float16BufferAttribute requires WebGL2.' );\n\n\t\t\t\t}\n\n\t\t\t} else {\n\n\t\t\t\ttype = gl.UNSIGNED_SHORT;\n\n\t\t\t}\n\n\t\t} else if ( array instanceof Int16Array ) {\n\n\t\t\ttype = gl.SHORT;\n\n\t\t} else if ( array instanceof Uint32Array ) {\n\n\t\t\ttype = gl.UNSIGNED_INT;\n\n\t\t} else if ( array instanceof Int32Array ) {\n\n\t\t\ttype = gl.INT;\n\n\t\t} else if ( array instanceof Int8Array ) {\n\n\t\t\ttype = gl.BYTE;\n\n\t\t} else if ( array instanceof Uint8Array ) {\n\n\t\t\ttype = gl.UNSIGNED_BYTE;\n\n\t\t}\n\n\t\treturn {\n\t\t\tbuffer: buffer,\n\t\t\ttype: type,\n\t\t\tbytesPerElement: array.BYTES_PER_ELEMENT,\n\t\t\tversion: attribute.version\n\t\t};\n\n\t}\n\n\tfunction updateBuffer( buffer, attribute, bufferType ) {\n\n\t\tconst array = attribute.array;\n\t\tconst updateRange = attribute.updateRange;\n\n\t\tgl.bindBuffer( bufferType, buffer );\n\n\t\tif ( updateRange.count === - 1 ) {\n\n\t\t\t// Not using update ranges\n\n\t\t\tgl.bufferSubData( bufferType, 0, array );\n\n\t\t} else {\n\n\t\t\tif ( isWebGL2 ) {\n\n\t\t\t\tgl.bufferSubData( bufferType, updateRange.offset * array.BYTES_PER_ELEMENT,\n\t\t\t\t\tarray, updateRange.offset, updateRange.count );\n\n\t\t\t} else {\n\n\t\t\t\tgl.bufferSubData( bufferType, updateRange.offset * array.BYTES_PER_ELEMENT,\n\t\t\t\t\tarray.subarray( updateRange.offset, updateRange.offset + updateRange.count ) );\n\n\t\t\t}\n\n\t\t\tupdateRange.count = - 1; // reset range\n\n\t\t}\n\n\t}\n\n\t//\n\n\tfunction get( attribute ) {\n\n\t\tif ( attribute.isInterleavedBufferAttribute ) attribute = attribute.data;\n\n\t\treturn buffers.get( attribute );\n\n\t}\n\n\tfunction remove( attribute ) {\n\n\t\tif ( attribute.isInterleavedBufferAttribute ) attribute = attribute.data;\n\n\t\tconst data = buffers.get( attribute );\n\n\t\tif ( data ) {\n\n\t\t\tgl.deleteBuffer( data.buffer );\n\n\t\t\tbuffers.delete( attribute );\n\n\t\t}\n\n\t}\n\n\tfunction update( attribute, bufferType ) {\n\n\t\tif ( attribute.isGLBufferAttribute ) {\n\n\t\t\tconst cached = buffers.get( attribute );\n\n\t\t\tif ( ! cached || cached.version < attribute.version ) {\n\n\t\t\t\tbuffers.set( attribute, {\n\t\t\t\t\tbuffer: attribute.buffer,\n\t\t\t\t\ttype: attribute.type,\n\t\t\t\t\tbytesPerElement: attribute.elementSize,\n\t\t\t\t\tversion: attribute.version\n\t\t\t\t} );\n\n\t\t\t}\n\n\t\t\treturn;\n\n\t\t}\n\n\t\tif ( attribute.isInterleavedBufferAttribute ) attribute = attribute.data;\n\n\t\tconst data = buffers.get( attribute );\n\n\t\tif ( data === undefined ) {\n\n\t\t\tbuffers.set( attribute, createBuffer( attribute, bufferType ) );\n\n\t\t} else if ( data.version < attribute.version ) {\n\n\t\t\tupdateBuffer( data.buffer, attribute, bufferType );\n\n\t\t\tdata.version = attribute.version;\n\n\t\t}\n\n\t}\n\n\treturn {\n\n\t\tget: get,\n\t\tremove: remove,\n\t\tupdate: update\n\n\t};\n\n}\n\n\nexport { WebGLAttributes };\n","import { Vector4 } from '../math/Vector4.js';\nimport { Vector3 } from '../math/Vector3.js';\nimport { Vector2 } from '../math/Vector2.js';\nimport { Color } from '../math/Color.js';\nimport { StaticDrawUsage } from '../constants.js';\n\nconst _vector = new Vector3();\nconst _vector2 = new Vector2();\n\nfunction BufferAttribute( array, itemSize, normalized ) {\n\n\tif ( Array.isArray( array ) ) {\n\n\t\tthrow new TypeError( 'THREE.BufferAttribute: array should be a Typed Array.' );\n\n\t}\n\n\tthis.name = '';\n\n\tthis.array = array;\n\tthis.itemSize = itemSize;\n\tthis.count = array !== undefined ? array.length / itemSize : 0;\n\tthis.normalized = normalized === true;\n\n\tthis.usage = StaticDrawUsage;\n\tthis.updateRange = { offset: 0, count: - 1 };\n\n\tthis.version = 0;\n\n}\n\nObject.defineProperty( BufferAttribute.prototype, 'needsUpdate', {\n\n\tset: function ( value ) {\n\n\t\tif ( value === true ) this.version ++;\n\n\t}\n\n} );\n\nObject.assign( BufferAttribute.prototype, {\n\n\tisBufferAttribute: true,\n\n\tonUploadCallback: function () {},\n\n\tsetUsage: function ( value ) {\n\n\t\tthis.usage = value;\n\n\t\treturn this;\n\n\t},\n\n\tcopy: function ( source ) {\n\n\t\tthis.name = source.name;\n\t\tthis.array = new source.array.constructor( source.array );\n\t\tthis.itemSize = source.itemSize;\n\t\tthis.count = source.count;\n\t\tthis.normalized = source.normalized;\n\n\t\tthis.usage = source.usage;\n\n\t\treturn this;\n\n\t},\n\n\tcopyAt: function ( index1, attribute, index2 ) {\n\n\t\tindex1 *= this.itemSize;\n\t\tindex2 *= attribute.itemSize;\n\n\t\tfor ( let i = 0, l = this.itemSize; i < l; i ++ ) {\n\n\t\t\tthis.array[ index1 + i ] = attribute.array[ index2 + i ];\n\n\t\t}\n\n\t\treturn this;\n\n\t},\n\n\tcopyArray: function ( array ) {\n\n\t\tthis.array.set( array );\n\n\t\treturn this;\n\n\t},\n\n\tcopyColorsArray: function ( colors ) {\n\n\t\tconst array = this.array;\n\t\tlet offset = 0;\n\n\t\tfor ( let i = 0, l = colors.length; i < l; i ++ ) {\n\n\t\t\tlet color = colors[ i ];\n\n\t\t\tif ( color === undefined ) {\n\n\t\t\t\tconsole.warn( 'THREE.BufferAttribute.copyColorsArray(): color is undefined', i );\n\t\t\t\tcolor = new Color();\n\n\t\t\t}\n\n\t\t\tarray[ offset ++ ] = color.r;\n\t\t\tarray[ offset ++ ] = color.g;\n\t\t\tarray[ offset ++ ] = color.b;\n\n\t\t}\n\n\t\treturn this;\n\n\t},\n\n\tcopyVector2sArray: function ( vectors ) {\n\n\t\tconst array = this.array;\n\t\tlet offset = 0;\n\n\t\tfor ( let i = 0, l = vectors.length; i < l; i ++ ) {\n\n\t\t\tlet vector = vectors[ i ];\n\n\t\t\tif ( vector === undefined ) {\n\n\t\t\t\tconsole.warn( 'THREE.BufferAttribute.copyVector2sArray(): vector is undefined', i );\n\t\t\t\tvector = new Vector2();\n\n\t\t\t}\n\n\t\t\tarray[ offset ++ ] = vector.x;\n\t\t\tarray[ offset ++ ] = vector.y;\n\n\t\t}\n\n\t\treturn this;\n\n\t},\n\n\tcopyVector3sArray: function ( vectors ) {\n\n\t\tconst array = this.array;\n\t\tlet offset = 0;\n\n\t\tfor ( let i = 0, l = vectors.length; i < l; i ++ ) {\n\n\t\t\tlet vector = vectors[ i ];\n\n\t\t\tif ( vector === undefined ) {\n\n\t\t\t\tconsole.warn( 'THREE.BufferAttribute.copyVector3sArray(): vector is undefined', i );\n\t\t\t\tvector = new Vector3();\n\n\t\t\t}\n\n\t\t\tarray[ offset ++ ] = vector.x;\n\t\t\tarray[ offset ++ ] = vector.y;\n\t\t\tarray[ offset ++ ] = vector.z;\n\n\t\t}\n\n\t\treturn this;\n\n\t},\n\n\tcopyVector4sArray: function ( vectors ) {\n\n\t\tconst array = this.array;\n\t\tlet offset = 0;\n\n\t\tfor ( let i = 0, l = vectors.length; i < l; i ++ ) {\n\n\t\t\tlet vector = vectors[ i ];\n\n\t\t\tif ( vector === undefined ) {\n\n\t\t\t\tconsole.warn( 'THREE.BufferAttribute.copyVector4sArray(): vector is undefined', i );\n\t\t\t\tvector = new Vector4();\n\n\t\t\t}\n\n\t\t\tarray[ offset ++ ] = vector.x;\n\t\t\tarray[ offset ++ ] = vector.y;\n\t\t\tarray[ offset ++ ] = vector.z;\n\t\t\tarray[ offset ++ ] = vector.w;\n\n\t\t}\n\n\t\treturn this;\n\n\t},\n\n\tapplyMatrix3: function ( m ) {\n\n\t\tif ( this.itemSize === 2 ) {\n\n\t\t\tfor ( let i = 0, l = this.count; i < l; i ++ ) {\n\n\t\t\t\t_vector2.fromBufferAttribute( this, i );\n\t\t\t\t_vector2.applyMatrix3( m );\n\n\t\t\t\tthis.setXY( i, _vector2.x, _vector2.y );\n\n\t\t\t}\n\n\t\t} else if ( this.itemSize === 3 ) {\n\n\t\t\tfor ( let i = 0, l = this.count; i < l; i ++ ) {\n\n\t\t\t\t_vector.fromBufferAttribute( this, i );\n\t\t\t\t_vector.applyMatrix3( m );\n\n\t\t\t\tthis.setXYZ( i, _vector.x, _vector.y, _vector.z );\n\n\t\t\t}\n\n\t\t}\n\n\t\treturn this;\n\n\t},\n\n\tapplyMatrix4: function ( m ) {\n\n\t\tfor ( let i = 0, l = this.count; i < l; i ++ ) {\n\n\t\t\t_vector.x = this.getX( i );\n\t\t\t_vector.y = this.getY( i );\n\t\t\t_vector.z = this.getZ( i );\n\n\t\t\t_vector.applyMatrix4( m );\n\n\t\t\tthis.setXYZ( i, _vector.x, _vector.y, _vector.z );\n\n\t\t}\n\n\t\treturn this;\n\n\t},\n\n\tapplyNormalMatrix: function ( m ) {\n\n\t\tfor ( let i = 0, l = this.count; i < l; i ++ ) {\n\n\t\t\t_vector.x = this.getX( i );\n\t\t\t_vector.y = this.getY( i );\n\t\t\t_vector.z = this.getZ( i );\n\n\t\t\t_vector.applyNormalMatrix( m );\n\n\t\t\tthis.setXYZ( i, _vector.x, _vector.y, _vector.z );\n\n\t\t}\n\n\t\treturn this;\n\n\t},\n\n\ttransformDirection: function ( m ) {\n\n\t\tfor ( let i = 0, l = this.count; i < l; i ++ ) {\n\n\t\t\t_vector.x = this.getX( i );\n\t\t\t_vector.y = this.getY( i );\n\t\t\t_vector.z = this.getZ( i );\n\n\t\t\t_vector.transformDirection( m );\n\n\t\t\tthis.setXYZ( i, _vector.x, _vector.y, _vector.z );\n\n\t\t}\n\n\t\treturn this;\n\n\t},\n\n\tset: function ( value, offset = 0 ) {\n\n\t\tthis.array.set( value, offset );\n\n\t\treturn this;\n\n\t},\n\n\tgetX: function ( index ) {\n\n\t\treturn this.array[ index * this.itemSize ];\n\n\t},\n\n\tsetX: function ( index, x ) {\n\n\t\tthis.array[ index * this.itemSize ] = x;\n\n\t\treturn this;\n\n\t},\n\n\tgetY: function ( index ) {\n\n\t\treturn this.array[ index * this.itemSize + 1 ];\n\n\t},\n\n\tsetY: function ( index, y ) {\n\n\t\tthis.array[ index * this.itemSize + 1 ] = y;\n\n\t\treturn this;\n\n\t},\n\n\tgetZ: function ( index ) {\n\n\t\treturn this.array[ index * this.itemSize + 2 ];\n\n\t},\n\n\tsetZ: function ( index, z ) {\n\n\t\tthis.array[ index * this.itemSize + 2 ] = z;\n\n\t\treturn this;\n\n\t},\n\n\tgetW: function ( index ) {\n\n\t\treturn this.array[ index * this.itemSize + 3 ];\n\n\t},\n\n\tsetW: function ( index, w ) {\n\n\t\tthis.array[ index * this.itemSize + 3 ] = w;\n\n\t\treturn this;\n\n\t},\n\n\tsetXY: function ( index, x, y ) {\n\n\t\tindex *= this.itemSize;\n\n\t\tthis.array[ index + 0 ] = x;\n\t\tthis.array[ index + 1 ] = y;\n\n\t\treturn this;\n\n\t},\n\n\tsetXYZ: function ( index, x, y, z ) {\n\n\t\tindex *= this.itemSize;\n\n\t\tthis.array[ index + 0 ] = x;\n\t\tthis.array[ index + 1 ] = y;\n\t\tthis.array[ index + 2 ] = z;\n\n\t\treturn this;\n\n\t},\n\n\tsetXYZW: function ( index, x, y, z, w ) {\n\n\t\tindex *= this.itemSize;\n\n\t\tthis.array[ index + 0 ] = x;\n\t\tthis.array[ index + 1 ] = y;\n\t\tthis.array[ index + 2 ] = z;\n\t\tthis.array[ index + 3 ] = w;\n\n\t\treturn this;\n\n\t},\n\n\tonUpload: function ( callback ) {\n\n\t\tthis.onUploadCallback = callback;\n\n\t\treturn this;\n\n\t},\n\n\tclone: function () {\n\n\t\treturn new this.constructor( this.array, this.itemSize ).copy( this );\n\n\t},\n\n\ttoJSON: function () {\n\n\t\treturn {\n\t\t\titemSize: this.itemSize,\n\t\t\ttype: this.array.constructor.name,\n\t\t\tarray: Array.prototype.slice.call( this.array ),\n\t\t\tnormalized: this.normalized\n\t\t};\n\n\t}\n\n} );\n\n//\n\nfunction Int8BufferAttribute( array, itemSize, normalized ) {\n\n\tBufferAttribute.call( this, new Int8Array( array ), itemSize, normalized );\n\n}\n\nInt8BufferAttribute.prototype = Object.create( BufferAttribute.prototype );\nInt8BufferAttribute.prototype.constructor = Int8BufferAttribute;\n\n\nfunction Uint8BufferAttribute( array, itemSize, normalized ) {\n\n\tBufferAttribute.call( this, new Uint8Array( array ), itemSize, normalized );\n\n}\n\nUint8BufferAttribute.prototype = Object.create( BufferAttribute.prototype );\nUint8BufferAttribute.prototype.constructor = Uint8BufferAttribute;\n\n\nfunction Uint8ClampedBufferAttribute( array, itemSize, normalized ) {\n\n\tBufferAttribute.call( this, new Uint8ClampedArray( array ), itemSize, normalized );\n\n}\n\nUint8ClampedBufferAttribute.prototype = Object.create( BufferAttribute.prototype );\nUint8ClampedBufferAttribute.prototype.constructor = Uint8ClampedBufferAttribute;\n\n\nfunction Int16BufferAttribute( array, itemSize, normalized ) {\n\n\tBufferAttribute.call( this, new Int16Array( array ), itemSize, normalized );\n\n}\n\nInt16BufferAttribute.prototype = Object.create( BufferAttribute.prototype );\nInt16BufferAttribute.prototype.constructor = Int16BufferAttribute;\n\n\nfunction Uint16BufferAttribute( array, itemSize, normalized ) {\n\n\tBufferAttribute.call( this, new Uint16Array( array ), itemSize, normalized );\n\n}\n\nUint16BufferAttribute.prototype = Object.create( BufferAttribute.prototype );\nUint16BufferAttribute.prototype.constructor = Uint16BufferAttribute;\n\n\nfunction Int32BufferAttribute( array, itemSize, normalized ) {\n\n\tBufferAttribute.call( this, new Int32Array( array ), itemSize, normalized );\n\n}\n\nInt32BufferAttribute.prototype = Object.create( BufferAttribute.prototype );\nInt32BufferAttribute.prototype.constructor = Int32BufferAttribute;\n\n\nfunction Uint32BufferAttribute( array, itemSize, normalized ) {\n\n\tBufferAttribute.call( this, new Uint32Array( array ), itemSize, normalized );\n\n}\n\nUint32BufferAttribute.prototype = Object.create( BufferAttribute.prototype );\nUint32BufferAttribute.prototype.constructor = Uint32BufferAttribute;\n\nfunction Float16BufferAttribute( array, itemSize, normalized ) {\n\n\tBufferAttribute.call( this, new Uint16Array( array ), itemSize, normalized );\n\n}\n\nFloat16BufferAttribute.prototype = Object.create( BufferAttribute.prototype );\nFloat16BufferAttribute.prototype.constructor = Float16BufferAttribute;\nFloat16BufferAttribute.prototype.isFloat16BufferAttribute = true;\n\nfunction Float32BufferAttribute( array, itemSize, normalized ) {\n\n\tBufferAttribute.call( this, new Float32Array( array ), itemSize, normalized );\n\n}\n\nFloat32BufferAttribute.prototype = Object.create( BufferAttribute.prototype );\nFloat32BufferAttribute.prototype.constructor = Float32BufferAttribute;\n\n\nfunction Float64BufferAttribute( array, itemSize, normalized ) {\n\n\tBufferAttribute.call( this, new Float64Array( array ), itemSize, normalized );\n\n}\n\nFloat64BufferAttribute.prototype = Object.create( BufferAttribute.prototype );\nFloat64BufferAttribute.prototype.constructor = Float64BufferAttribute;\n\n//\n\nexport {\n\tFloat64BufferAttribute,\n\tFloat32BufferAttribute,\n\tFloat16BufferAttribute,\n\tUint32BufferAttribute,\n\tInt32BufferAttribute,\n\tUint16BufferAttribute,\n\tInt16BufferAttribute,\n\tUint8ClampedBufferAttribute,\n\tUint8BufferAttribute,\n\tInt8BufferAttribute,\n\tBufferAttribute\n};\n","function arrayMin( array ) {\n\n\tif ( array.length === 0 ) return Infinity;\n\n\tlet min = array[ 0 ];\n\n\tfor ( let i = 1, l = array.length; i < l; ++ i ) {\n\n\t\tif ( array[ i ] < min ) min = array[ i ];\n\n\t}\n\n\treturn min;\n\n}\n\nfunction arrayMax( array ) {\n\n\tif ( array.length === 0 ) return - Infinity;\n\n\tlet max = array[ 0 ];\n\n\tfor ( let i = 1, l = array.length; i < l; ++ i ) {\n\n\t\tif ( array[ i ] > max ) max = array[ i ];\n\n\t}\n\n\treturn max;\n\n}\n\nconst TYPED_ARRAYS = {\n\tInt8Array: Int8Array,\n\tUint8Array: Uint8Array,\n\tUint8ClampedArray: Uint8ClampedArray,\n\tInt16Array: Int16Array,\n\tUint16Array: Uint16Array,\n\tInt32Array: Int32Array,\n\tUint32Array: Uint32Array,\n\tFloat32Array: Float32Array,\n\tFloat64Array: Float64Array\n};\n\nfunction getTypedArray( type, buffer ) {\n\n\treturn new TYPED_ARRAYS[ type ]( buffer );\n\n}\n\nexport { arrayMin, arrayMax, getTypedArray };\n","import { Vector3 } from '../math/Vector3.js';\nimport { Vector2 } from '../math/Vector2.js';\nimport { Box3 } from '../math/Box3.js';\nimport { EventDispatcher } from './EventDispatcher.js';\nimport { BufferAttribute, Float32BufferAttribute, Uint16BufferAttribute, Uint32BufferAttribute } from './BufferAttribute.js';\nimport { Sphere } from '../math/Sphere.js';\nimport { Object3D } from './Object3D.js';\nimport { Matrix4 } from '../math/Matrix4.js';\nimport { Matrix3 } from '../math/Matrix3.js';\nimport { MathUtils } from '../math/MathUtils.js';\nimport { arrayMax } from '../utils.js';\n\nlet _id = 0;\n\nconst _m1 = new Matrix4();\nconst _obj = new Object3D();\nconst _offset = new Vector3();\nconst _box = new Box3();\nconst _boxMorphTargets = new Box3();\nconst _vector = new Vector3();\n\nfunction BufferGeometry() {\n\n\tObject.defineProperty( this, 'id', { value: _id ++ } );\n\n\tthis.uuid = MathUtils.generateUUID();\n\n\tthis.name = '';\n\tthis.type = 'BufferGeometry';\n\n\tthis.index = null;\n\tthis.attributes = {};\n\n\tthis.morphAttributes = {};\n\tthis.morphTargetsRelative = false;\n\n\tthis.groups = [];\n\n\tthis.boundingBox = null;\n\tthis.boundingSphere = null;\n\n\tthis.drawRange = { start: 0, count: Infinity };\n\n\tthis.userData = {};\n\n}\n\nBufferGeometry.prototype = Object.assign( Object.create( EventDispatcher.prototype ), {\n\n\tconstructor: BufferGeometry,\n\n\tisBufferGeometry: true,\n\n\tgetIndex: function () {\n\n\t\treturn this.index;\n\n\t},\n\n\tsetIndex: function ( index ) {\n\n\t\tif ( Array.isArray( index ) ) {\n\n\t\t\tthis.index = new ( arrayMax( index ) > 65535 ? Uint32BufferAttribute : Uint16BufferAttribute )( index, 1 );\n\n\t\t} else {\n\n\t\t\tthis.index = index;\n\n\t\t}\n\n\t\treturn this;\n\n\t},\n\n\tgetAttribute: function ( name ) {\n\n\t\treturn this.attributes[ name ];\n\n\t},\n\n\tsetAttribute: function ( name, attribute ) {\n\n\t\tthis.attributes[ name ] = attribute;\n\n\t\treturn this;\n\n\t},\n\n\tdeleteAttribute: function ( name ) {\n\n\t\tdelete this.attributes[ name ];\n\n\t\treturn this;\n\n\t},\n\n\thasAttribute: function ( name ) {\n\n\t\treturn this.attributes[ name ] !== undefined;\n\n\t},\n\n\taddGroup: function ( start, count, materialIndex = 0 ) {\n\n\t\tthis.groups.push( {\n\n\t\t\tstart: start,\n\t\t\tcount: count,\n\t\t\tmaterialIndex: materialIndex\n\n\t\t} );\n\n\t},\n\n\tclearGroups: function () {\n\n\t\tthis.groups = [];\n\n\t},\n\n\tsetDrawRange: function ( start, count ) {\n\n\t\tthis.drawRange.start = start;\n\t\tthis.drawRange.count = count;\n\n\t},\n\n\tapplyMatrix4: function ( matrix ) {\n\n\t\tconst position = this.attributes.position;\n\n\t\tif ( position !== undefined ) {\n\n\t\t\tposition.applyMatrix4( matrix );\n\n\t\t\tposition.needsUpdate = true;\n\n\t\t}\n\n\t\tconst normal = this.attributes.normal;\n\n\t\tif ( normal !== undefined ) {\n\n\t\t\tconst normalMatrix = new Matrix3().getNormalMatrix( matrix );\n\n\t\t\tnormal.applyNormalMatrix( normalMatrix );\n\n\t\t\tnormal.needsUpdate = true;\n\n\t\t}\n\n\t\tconst tangent = this.attributes.tangent;\n\n\t\tif ( tangent !== undefined ) {\n\n\t\t\ttangent.transformDirection( matrix );\n\n\t\t\ttangent.needsUpdate = true;\n\n\t\t}\n\n\t\tif ( this.boundingBox !== null ) {\n\n\t\t\tthis.computeBoundingBox();\n\n\t\t}\n\n\t\tif ( this.boundingSphere !== null ) {\n\n\t\t\tthis.computeBoundingSphere();\n\n\t\t}\n\n\t\treturn this;\n\n\t},\n\n\trotateX: function ( angle ) {\n\n\t\t// rotate geometry around world x-axis\n\n\t\t_m1.makeRotationX( angle );\n\n\t\tthis.applyMatrix4( _m1 );\n\n\t\treturn this;\n\n\t},\n\n\trotateY: function ( angle ) {\n\n\t\t// rotate geometry around world y-axis\n\n\t\t_m1.makeRotationY( angle );\n\n\t\tthis.applyMatrix4( _m1 );\n\n\t\treturn this;\n\n\t},\n\n\trotateZ: function ( angle ) {\n\n\t\t// rotate geometry around world z-axis\n\n\t\t_m1.makeRotationZ( angle );\n\n\t\tthis.applyMatrix4( _m1 );\n\n\t\treturn this;\n\n\t},\n\n\ttranslate: function ( x, y, z ) {\n\n\t\t// translate geometry\n\n\t\t_m1.makeTranslation( x, y, z );\n\n\t\tthis.applyMatrix4( _m1 );\n\n\t\treturn this;\n\n\t},\n\n\tscale: function ( x, y, z ) {\n\n\t\t// scale geometry\n\n\t\t_m1.makeScale( x, y, z );\n\n\t\tthis.applyMatrix4( _m1 );\n\n\t\treturn this;\n\n\t},\n\n\tlookAt: function ( vector ) {\n\n\t\t_obj.lookAt( vector );\n\n\t\t_obj.updateMatrix();\n\n\t\tthis.applyMatrix4( _obj.matrix );\n\n\t\treturn this;\n\n\t},\n\n\tcenter: function () {\n\n\t\tthis.computeBoundingBox();\n\n\t\tthis.boundingBox.getCenter( _offset ).negate();\n\n\t\tthis.translate( _offset.x, _offset.y, _offset.z );\n\n\t\treturn this;\n\n\t},\n\n\tsetFromPoints: function ( points ) {\n\n\t\tconst position = [];\n\n\t\tfor ( let i = 0, l = points.length; i < l; i ++ ) {\n\n\t\t\tconst point = points[ i ];\n\t\t\tposition.push( point.x, point.y, point.z || 0 );\n\n\t\t}\n\n\t\tthis.setAttribute( 'position', new Float32BufferAttribute( position, 3 ) );\n\n\t\treturn this;\n\n\t},\n\n\tcomputeBoundingBox: function () {\n\n\t\tif ( this.boundingBox === null ) {\n\n\t\t\tthis.boundingBox = new Box3();\n\n\t\t}\n\n\t\tconst position = this.attributes.position;\n\t\tconst morphAttributesPosition = this.morphAttributes.position;\n\n\t\tif ( position && position.isGLBufferAttribute ) {\n\n\t\t\tconsole.error( 'THREE.BufferGeometry.computeBoundingBox(): GLBufferAttribute requires a manual bounding box. Alternatively set \"mesh.frustumCulled\" to \"false\".', this );\n\n\t\t\tthis.boundingBox.set(\n\t\t\t\tnew Vector3( - Infinity, - Infinity, - Infinity ),\n\t\t\t\tnew Vector3( + Infinity, + Infinity, + Infinity )\n\t\t\t);\n\n\t\t\treturn;\n\n\t\t}\n\n\t\tif ( position !== undefined ) {\n\n\t\t\tthis.boundingBox.setFromBufferAttribute( position );\n\n\t\t\t// process morph attributes if present\n\n\t\t\tif ( morphAttributesPosition ) {\n\n\t\t\t\tfor ( let i = 0, il = morphAttributesPosition.length; i < il; i ++ ) {\n\n\t\t\t\t\tconst morphAttribute = morphAttributesPosition[ i ];\n\t\t\t\t\t_box.setFromBufferAttribute( morphAttribute );\n\n\t\t\t\t\tif ( this.morphTargetsRelative ) {\n\n\t\t\t\t\t\t_vector.addVectors( this.boundingBox.min, _box.min );\n\t\t\t\t\t\tthis.boundingBox.expandByPoint( _vector );\n\n\t\t\t\t\t\t_vector.addVectors( this.boundingBox.max, _box.max );\n\t\t\t\t\t\tthis.boundingBox.expandByPoint( _vector );\n\n\t\t\t\t\t} else {\n\n\t\t\t\t\t\tthis.boundingBox.expandByPoint( _box.min );\n\t\t\t\t\t\tthis.boundingBox.expandByPoint( _box.max );\n\n\t\t\t\t\t}\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t} else {\n\n\t\t\tthis.boundingBox.makeEmpty();\n\n\t\t}\n\n\t\tif ( isNaN( this.boundingBox.min.x ) || isNaN( this.boundingBox.min.y ) || isNaN( this.boundingBox.min.z ) ) {\n\n\t\t\tconsole.error( 'THREE.BufferGeometry.computeBoundingBox(): Computed min/max have NaN values. The \"position\" attribute is likely to have NaN values.', this );\n\n\t\t}\n\n\t},\n\n\tcomputeBoundingSphere: function () {\n\n\t\tif ( this.boundingSphere === null ) {\n\n\t\t\tthis.boundingSphere = new Sphere();\n\n\t\t}\n\n\t\tconst position = this.attributes.position;\n\t\tconst morphAttributesPosition = this.morphAttributes.position;\n\n\t\tif ( position && position.isGLBufferAttribute ) {\n\n\t\t\tconsole.error( 'THREE.BufferGeometry.computeBoundingSphere(): GLBufferAttribute requires a manual bounding sphere. Alternatively set \"mesh.frustumCulled\" to \"false\".', this );\n\n\t\t\tthis.boundingSphere.set( new Vector3(), Infinity );\n\n\t\t\treturn;\n\n\t\t}\n\n\t\tif ( position ) {\n\n\t\t\t// first, find the center of the bounding sphere\n\n\t\t\tconst center = this.boundingSphere.center;\n\n\t\t\t_box.setFromBufferAttribute( position );\n\n\t\t\t// process morph attributes if present\n\n\t\t\tif ( morphAttributesPosition ) {\n\n\t\t\t\tfor ( let i = 0, il = morphAttributesPosition.length; i < il; i ++ ) {\n\n\t\t\t\t\tconst morphAttribute = morphAttributesPosition[ i ];\n\t\t\t\t\t_boxMorphTargets.setFromBufferAttribute( morphAttribute );\n\n\t\t\t\t\tif ( this.morphTargetsRelative ) {\n\n\t\t\t\t\t\t_vector.addVectors( _box.min, _boxMorphTargets.min );\n\t\t\t\t\t\t_box.expandByPoint( _vector );\n\n\t\t\t\t\t\t_vector.addVectors( _box.max, _boxMorphTargets.max );\n\t\t\t\t\t\t_box.expandByPoint( _vector );\n\n\t\t\t\t\t} else {\n\n\t\t\t\t\t\t_box.expandByPoint( _boxMorphTargets.min );\n\t\t\t\t\t\t_box.expandByPoint( _boxMorphTargets.max );\n\n\t\t\t\t\t}\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t\t_box.getCenter( center );\n\n\t\t\t// second, try to find a boundingSphere with a radius smaller than the\n\t\t\t// boundingSphere of the boundingBox: sqrt(3) smaller in the best case\n\n\t\t\tlet maxRadiusSq = 0;\n\n\t\t\tfor ( let i = 0, il = position.count; i < il; i ++ ) {\n\n\t\t\t\t_vector.fromBufferAttribute( position, i );\n\n\t\t\t\tmaxRadiusSq = Math.max( maxRadiusSq, center.distanceToSquared( _vector ) );\n\n\t\t\t}\n\n\t\t\t// process morph attributes if present\n\n\t\t\tif ( morphAttributesPosition ) {\n\n\t\t\t\tfor ( let i = 0, il = morphAttributesPosition.length; i < il; i ++ ) {\n\n\t\t\t\t\tconst morphAttribute = morphAttributesPosition[ i ];\n\t\t\t\t\tconst morphTargetsRelative = this.morphTargetsRelative;\n\n\t\t\t\t\tfor ( let j = 0, jl = morphAttribute.count; j < jl; j ++ ) {\n\n\t\t\t\t\t\t_vector.fromBufferAttribute( morphAttribute, j );\n\n\t\t\t\t\t\tif ( morphTargetsRelative ) {\n\n\t\t\t\t\t\t\t_offset.fromBufferAttribute( position, j );\n\t\t\t\t\t\t\t_vector.add( _offset );\n\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\tmaxRadiusSq = Math.max( maxRadiusSq, center.distanceToSquared( _vector ) );\n\n\t\t\t\t\t}\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t\tthis.boundingSphere.radius = Math.sqrt( maxRadiusSq );\n\n\t\t\tif ( isNaN( this.boundingSphere.radius ) ) {\n\n\t\t\t\tconsole.error( 'THREE.BufferGeometry.computeBoundingSphere(): Computed radius is NaN. The \"position\" attribute is likely to have NaN values.', this );\n\n\t\t\t}\n\n\t\t}\n\n\t},\n\n\tcomputeFaceNormals: function () {\n\n\t\t// backwards compatibility\n\n\t},\n\n\tcomputeTangents: function () {\n\n\t\tconst index = this.index;\n\t\tconst attributes = this.attributes;\n\n\t\t// based on http://www.terathon.com/code/tangent.html\n\t\t// (per vertex tangents)\n\n\t\tif ( index === null ||\n\t\t\t attributes.position === undefined ||\n\t\t\t attributes.normal === undefined ||\n\t\t\t attributes.uv === undefined ) {\n\n\t\t\tconsole.error( 'THREE.BufferGeometry: .computeTangents() failed. Missing required attributes (index, position, normal or uv)' );\n\t\t\treturn;\n\n\t\t}\n\n\t\tconst indices = index.array;\n\t\tconst positions = attributes.position.array;\n\t\tconst normals = attributes.normal.array;\n\t\tconst uvs = attributes.uv.array;\n\n\t\tconst nVertices = positions.length / 3;\n\n\t\tif ( attributes.tangent === undefined ) {\n\n\t\t\tthis.setAttribute( 'tangent', new BufferAttribute( new Float32Array( 4 * nVertices ), 4 ) );\n\n\t\t}\n\n\t\tconst tangents = attributes.tangent.array;\n\n\t\tconst tan1 = [], tan2 = [];\n\n\t\tfor ( let i = 0; i < nVertices; i ++ ) {\n\n\t\t\ttan1[ i ] = new Vector3();\n\t\t\ttan2[ i ] = new Vector3();\n\n\t\t}\n\n\t\tconst vA = new Vector3(),\n\t\t\tvB = new Vector3(),\n\t\t\tvC = new Vector3(),\n\n\t\t\tuvA = new Vector2(),\n\t\t\tuvB = new Vector2(),\n\t\t\tuvC = new Vector2(),\n\n\t\t\tsdir = new Vector3(),\n\t\t\ttdir = new Vector3();\n\n\t\tfunction handleTriangle( a, b, c ) {\n\n\t\t\tvA.fromArray( positions, a * 3 );\n\t\t\tvB.fromArray( positions, b * 3 );\n\t\t\tvC.fromArray( positions, c * 3 );\n\n\t\t\tuvA.fromArray( uvs, a * 2 );\n\t\t\tuvB.fromArray( uvs, b * 2 );\n\t\t\tuvC.fromArray( uvs, c * 2 );\n\n\t\t\tvB.sub( vA );\n\t\t\tvC.sub( vA );\n\n\t\t\tuvB.sub( uvA );\n\t\t\tuvC.sub( uvA );\n\n\t\t\tconst r = 1.0 / ( uvB.x * uvC.y - uvC.x * uvB.y );\n\n\t\t\t// silently ignore degenerate uv triangles having coincident or colinear vertices\n\n\t\t\tif ( ! isFinite( r ) ) return;\n\n\t\t\tsdir.copy( vB ).multiplyScalar( uvC.y ).addScaledVector( vC, - uvB.y ).multiplyScalar( r );\n\t\t\ttdir.copy( vC ).multiplyScalar( uvB.x ).addScaledVector( vB, - uvC.x ).multiplyScalar( r );\n\n\t\t\ttan1[ a ].add( sdir );\n\t\t\ttan1[ b ].add( sdir );\n\t\t\ttan1[ c ].add( sdir );\n\n\t\t\ttan2[ a ].add( tdir );\n\t\t\ttan2[ b ].add( tdir );\n\t\t\ttan2[ c ].add( tdir );\n\n\t\t}\n\n\t\tlet groups = this.groups;\n\n\t\tif ( groups.length === 0 ) {\n\n\t\t\tgroups = [ {\n\t\t\t\tstart: 0,\n\t\t\t\tcount: indices.length\n\t\t\t} ];\n\n\t\t}\n\n\t\tfor ( let i = 0, il = groups.length; i < il; ++ i ) {\n\n\t\t\tconst group = groups[ i ];\n\n\t\t\tconst start = group.start;\n\t\t\tconst count = group.count;\n\n\t\t\tfor ( let j = start, jl = start + count; j < jl; j += 3 ) {\n\n\t\t\t\thandleTriangle(\n\t\t\t\t\tindices[ j + 0 ],\n\t\t\t\t\tindices[ j + 1 ],\n\t\t\t\t\tindices[ j + 2 ]\n\t\t\t\t);\n\n\t\t\t}\n\n\t\t}\n\n\t\tconst tmp = new Vector3(), tmp2 = new Vector3();\n\t\tconst n = new Vector3(), n2 = new Vector3();\n\n\t\tfunction handleVertex( v ) {\n\n\t\t\tn.fromArray( normals, v * 3 );\n\t\t\tn2.copy( n );\n\n\t\t\tconst t = tan1[ v ];\n\n\t\t\t// Gram-Schmidt orthogonalize\n\n\t\t\ttmp.copy( t );\n\t\t\ttmp.sub( n.multiplyScalar( n.dot( t ) ) ).normalize();\n\n\t\t\t// Calculate handedness\n\n\t\t\ttmp2.crossVectors( n2, t );\n\t\t\tconst test = tmp2.dot( tan2[ v ] );\n\t\t\tconst w = ( test < 0.0 ) ? - 1.0 : 1.0;\n\n\t\t\ttangents[ v * 4 ] = tmp.x;\n\t\t\ttangents[ v * 4 + 1 ] = tmp.y;\n\t\t\ttangents[ v * 4 + 2 ] = tmp.z;\n\t\t\ttangents[ v * 4 + 3 ] = w;\n\n\t\t}\n\n\t\tfor ( let i = 0, il = groups.length; i < il; ++ i ) {\n\n\t\t\tconst group = groups[ i ];\n\n\t\t\tconst start = group.start;\n\t\t\tconst count = group.count;\n\n\t\t\tfor ( let j = start, jl = start + count; j < jl; j += 3 ) {\n\n\t\t\t\thandleVertex( indices[ j + 0 ] );\n\t\t\t\thandleVertex( indices[ j + 1 ] );\n\t\t\t\thandleVertex( indices[ j + 2 ] );\n\n\t\t\t}\n\n\t\t}\n\n\t},\n\n\tcomputeVertexNormals: function () {\n\n\t\tconst index = this.index;\n\t\tconst positionAttribute = this.getAttribute( 'position' );\n\n\t\tif ( positionAttribute !== undefined ) {\n\n\t\t\tlet normalAttribute = this.getAttribute( 'normal' );\n\n\t\t\tif ( normalAttribute === undefined ) {\n\n\t\t\t\tnormalAttribute = new BufferAttribute( new Float32Array( positionAttribute.count * 3 ), 3 );\n\t\t\t\tthis.setAttribute( 'normal', normalAttribute );\n\n\t\t\t} else {\n\n\t\t\t\t// reset existing normals to zero\n\n\t\t\t\tfor ( let i = 0, il = normalAttribute.count; i < il; i ++ ) {\n\n\t\t\t\t\tnormalAttribute.setXYZ( i, 0, 0, 0 );\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t\tconst pA = new Vector3(), pB = new Vector3(), pC = new Vector3();\n\t\t\tconst nA = new Vector3(), nB = new Vector3(), nC = new Vector3();\n\t\t\tconst cb = new Vector3(), ab = new Vector3();\n\n\t\t\t// indexed elements\n\n\t\t\tif ( index ) {\n\n\t\t\t\tfor ( let i = 0, il = index.count; i < il; i += 3 ) {\n\n\t\t\t\t\tconst vA = index.getX( i + 0 );\n\t\t\t\t\tconst vB = index.getX( i + 1 );\n\t\t\t\t\tconst vC = index.getX( i + 2 );\n\n\t\t\t\t\tpA.fromBufferAttribute( positionAttribute, vA );\n\t\t\t\t\tpB.fromBufferAttribute( positionAttribute, vB );\n\t\t\t\t\tpC.fromBufferAttribute( positionAttribute, vC );\n\n\t\t\t\t\tcb.subVectors( pC, pB );\n\t\t\t\t\tab.subVectors( pA, pB );\n\t\t\t\t\tcb.cross( ab );\n\n\t\t\t\t\tnA.fromBufferAttribute( normalAttribute, vA );\n\t\t\t\t\tnB.fromBufferAttribute( normalAttribute, vB );\n\t\t\t\t\tnC.fromBufferAttribute( normalAttribute, vC );\n\n\t\t\t\t\tnA.add( cb );\n\t\t\t\t\tnB.add( cb );\n\t\t\t\t\tnC.add( cb );\n\n\t\t\t\t\tnormalAttribute.setXYZ( vA, nA.x, nA.y, nA.z );\n\t\t\t\t\tnormalAttribute.setXYZ( vB, nB.x, nB.y, nB.z );\n\t\t\t\t\tnormalAttribute.setXYZ( vC, nC.x, nC.y, nC.z );\n\n\t\t\t\t}\n\n\t\t\t} else {\n\n\t\t\t\t// non-indexed elements (unconnected triangle soup)\n\n\t\t\t\tfor ( let i = 0, il = positionAttribute.count; i < il; i += 3 ) {\n\n\t\t\t\t\tpA.fromBufferAttribute( positionAttribute, i + 0 );\n\t\t\t\t\tpB.fromBufferAttribute( positionAttribute, i + 1 );\n\t\t\t\t\tpC.fromBufferAttribute( positionAttribute, i + 2 );\n\n\t\t\t\t\tcb.subVectors( pC, pB );\n\t\t\t\t\tab.subVectors( pA, pB );\n\t\t\t\t\tcb.cross( ab );\n\n\t\t\t\t\tnormalAttribute.setXYZ( i + 0, cb.x, cb.y, cb.z );\n\t\t\t\t\tnormalAttribute.setXYZ( i + 1, cb.x, cb.y, cb.z );\n\t\t\t\t\tnormalAttribute.setXYZ( i + 2, cb.x, cb.y, cb.z );\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t\tthis.normalizeNormals();\n\n\t\t\tnormalAttribute.needsUpdate = true;\n\n\t\t}\n\n\t},\n\n\tmerge: function ( geometry, offset ) {\n\n\t\tif ( ! ( geometry && geometry.isBufferGeometry ) ) {\n\n\t\t\tconsole.error( 'THREE.BufferGeometry.merge(): geometry not an instance of THREE.BufferGeometry.', geometry );\n\t\t\treturn;\n\n\t\t}\n\n\t\tif ( offset === undefined ) {\n\n\t\t\toffset = 0;\n\n\t\t\tconsole.warn(\n\t\t\t\t'THREE.BufferGeometry.merge(): Overwriting original geometry, starting at offset=0. '\n\t\t\t\t+ 'Use BufferGeometryUtils.mergeBufferGeometries() for lossless merge.'\n\t\t\t);\n\n\t\t}\n\n\t\tconst attributes = this.attributes;\n\n\t\tfor ( const key in attributes ) {\n\n\t\t\tif ( geometry.attributes[ key ] === undefined ) continue;\n\n\t\t\tconst attribute1 = attributes[ key ];\n\t\t\tconst attributeArray1 = attribute1.array;\n\n\t\t\tconst attribute2 = geometry.attributes[ key ];\n\t\t\tconst attributeArray2 = attribute2.array;\n\n\t\t\tconst attributeOffset = attribute2.itemSize * offset;\n\t\t\tconst length = Math.min( attributeArray2.length, attributeArray1.length - attributeOffset );\n\n\t\t\tfor ( let i = 0, j = attributeOffset; i < length; i ++, j ++ ) {\n\n\t\t\t\tattributeArray1[ j ] = attributeArray2[ i ];\n\n\t\t\t}\n\n\t\t}\n\n\t\treturn this;\n\n\t},\n\n\tnormalizeNormals: function () {\n\n\t\tconst normals = this.attributes.normal;\n\n\t\tfor ( let i = 0, il = normals.count; i < il; i ++ ) {\n\n\t\t\t_vector.fromBufferAttribute( normals, i );\n\n\t\t\t_vector.normalize();\n\n\t\t\tnormals.setXYZ( i, _vector.x, _vector.y, _vector.z );\n\n\t\t}\n\n\t},\n\n\ttoNonIndexed: function () {\n\n\t\tfunction convertBufferAttribute( attribute, indices ) {\n\n\t\t\tconst array = attribute.array;\n\t\t\tconst itemSize = attribute.itemSize;\n\t\t\tconst normalized = attribute.normalized;\n\n\t\t\tconst array2 = new array.constructor( indices.length * itemSize );\n\n\t\t\tlet index = 0, index2 = 0;\n\n\t\t\tfor ( let i = 0, l = indices.length; i < l; i ++ ) {\n\n\t\t\t\tindex = indices[ i ] * itemSize;\n\n\t\t\t\tfor ( let j = 0; j < itemSize; j ++ ) {\n\n\t\t\t\t\tarray2[ index2 ++ ] = array[ index ++ ];\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t\treturn new BufferAttribute( array2, itemSize, normalized );\n\n\t\t}\n\n\t\t//\n\n\t\tif ( this.index === null ) {\n\n\t\t\tconsole.warn( 'THREE.BufferGeometry.toNonIndexed(): BufferGeometry is already non-indexed.' );\n\t\t\treturn this;\n\n\t\t}\n\n\t\tconst geometry2 = new BufferGeometry();\n\n\t\tconst indices = this.index.array;\n\t\tconst attributes = this.attributes;\n\n\t\t// attributes\n\n\t\tfor ( const name in attributes ) {\n\n\t\t\tconst attribute = attributes[ name ];\n\n\t\t\tconst newAttribute = convertBufferAttribute( attribute, indices );\n\n\t\t\tgeometry2.setAttribute( name, newAttribute );\n\n\t\t}\n\n\t\t// morph attributes\n\n\t\tconst morphAttributes = this.morphAttributes;\n\n\t\tfor ( const name in morphAttributes ) {\n\n\t\t\tconst morphArray = [];\n\t\t\tconst morphAttribute = morphAttributes[ name ]; // morphAttribute: array of Float32BufferAttributes\n\n\t\t\tfor ( let i = 0, il = morphAttribute.length; i < il; i ++ ) {\n\n\t\t\t\tconst attribute = morphAttribute[ i ];\n\n\t\t\t\tconst newAttribute = convertBufferAttribute( attribute, indices );\n\n\t\t\t\tmorphArray.push( newAttribute );\n\n\t\t\t}\n\n\t\t\tgeometry2.morphAttributes[ name ] = morphArray;\n\n\t\t}\n\n\t\tgeometry2.morphTargetsRelative = this.morphTargetsRelative;\n\n\t\t// groups\n\n\t\tconst groups = this.groups;\n\n\t\tfor ( let i = 0, l = groups.length; i < l; i ++ ) {\n\n\t\t\tconst group = groups[ i ];\n\t\t\tgeometry2.addGroup( group.start, group.count, group.materialIndex );\n\n\t\t}\n\n\t\treturn geometry2;\n\n\t},\n\n\ttoJSON: function () {\n\n\t\tconst data = {\n\t\t\tmetadata: {\n\t\t\t\tversion: 4.5,\n\t\t\t\ttype: 'BufferGeometry',\n\t\t\t\tgenerator: 'BufferGeometry.toJSON'\n\t\t\t}\n\t\t};\n\n\t\t// standard BufferGeometry serialization\n\n\t\tdata.uuid = this.uuid;\n\t\tdata.type = this.type;\n\t\tif ( this.name !== '' ) data.name = this.name;\n\t\tif ( Object.keys( this.userData ).length > 0 ) data.userData = this.userData;\n\n\t\tif ( this.parameters !== undefined ) {\n\n\t\t\tconst parameters = this.parameters;\n\n\t\t\tfor ( const key in parameters ) {\n\n\t\t\t\tif ( parameters[ key ] !== undefined ) data[ key ] = parameters[ key ];\n\n\t\t\t}\n\n\t\t\treturn data;\n\n\t\t}\n\n\t\tdata.data = { attributes: {} };\n\n\t\tconst index = this.index;\n\n\t\tif ( index !== null ) {\n\n\t\t\tdata.data.index = {\n\t\t\t\ttype: index.array.constructor.name,\n\t\t\t\tarray: Array.prototype.slice.call( index.array )\n\t\t\t};\n\n\t\t}\n\n\t\tconst attributes = this.attributes;\n\n\t\tfor ( const key in attributes ) {\n\n\t\t\tconst attribute = attributes[ key ];\n\n\t\t\tconst attributeData = attribute.toJSON( data.data );\n\n\t\t\tif ( attribute.name !== '' ) attributeData.name = attribute.name;\n\n\t\t\tdata.data.attributes[ key ] = attributeData;\n\n\t\t}\n\n\t\tconst morphAttributes = {};\n\t\tlet hasMorphAttributes = false;\n\n\t\tfor ( const key in this.morphAttributes ) {\n\n\t\t\tconst attributeArray = this.morphAttributes[ key ];\n\n\t\t\tconst array = [];\n\n\t\t\tfor ( let i = 0, il = attributeArray.length; i < il; i ++ ) {\n\n\t\t\t\tconst attribute = attributeArray[ i ];\n\n\t\t\t\tconst attributeData = attribute.toJSON( data.data );\n\n\t\t\t\tif ( attribute.name !== '' ) attributeData.name = attribute.name;\n\n\t\t\t\tarray.push( attributeData );\n\n\t\t\t}\n\n\t\t\tif ( array.length > 0 ) {\n\n\t\t\t\tmorphAttributes[ key ] = array;\n\n\t\t\t\thasMorphAttributes = true;\n\n\t\t\t}\n\n\t\t}\n\n\t\tif ( hasMorphAttributes ) {\n\n\t\t\tdata.data.morphAttributes = morphAttributes;\n\t\t\tdata.data.morphTargetsRelative = this.morphTargetsRelative;\n\n\t\t}\n\n\t\tconst groups = this.groups;\n\n\t\tif ( groups.length > 0 ) {\n\n\t\t\tdata.data.groups = JSON.parse( JSON.stringify( groups ) );\n\n\t\t}\n\n\t\tconst boundingSphere = this.boundingSphere;\n\n\t\tif ( boundingSphere !== null ) {\n\n\t\t\tdata.data.boundingSphere = {\n\t\t\t\tcenter: boundingSphere.center.toArray(),\n\t\t\t\tradius: boundingSphere.radius\n\t\t\t};\n\n\t\t}\n\n\t\treturn data;\n\n\t},\n\n\tclone: function () {\n\n\t\t/*\n\t\t // Handle primitives\n\n\t\t const parameters = this.parameters;\n\n\t\t if ( parameters !== undefined ) {\n\n\t\t const values = [];\n\n\t\t for ( const key in parameters ) {\n\n\t\t values.push( parameters[ key ] );\n\n\t\t }\n\n\t\t const geometry = Object.create( this.constructor.prototype );\n\t\t this.constructor.apply( geometry, values );\n\t\t return geometry;\n\n\t\t }\n\n\t\t return new this.constructor().copy( this );\n\t\t */\n\n\t\treturn new BufferGeometry().copy( this );\n\n\t},\n\n\tcopy: function ( source ) {\n\n\t\t// reset\n\n\t\tthis.index = null;\n\t\tthis.attributes = {};\n\t\tthis.morphAttributes = {};\n\t\tthis.groups = [];\n\t\tthis.boundingBox = null;\n\t\tthis.boundingSphere = null;\n\n\t\t// used for storing cloned, shared data\n\n\t\tconst data = {};\n\n\t\t// name\n\n\t\tthis.name = source.name;\n\n\t\t// index\n\n\t\tconst index = source.index;\n\n\t\tif ( index !== null ) {\n\n\t\t\tthis.setIndex( index.clone( data ) );\n\n\t\t}\n\n\t\t// attributes\n\n\t\tconst attributes = source.attributes;\n\n\t\tfor ( const name in attributes ) {\n\n\t\t\tconst attribute = attributes[ name ];\n\t\t\tthis.setAttribute( name, attribute.clone( data ) );\n\n\t\t}\n\n\t\t// morph attributes\n\n\t\tconst morphAttributes = source.morphAttributes;\n\n\t\tfor ( const name in morphAttributes ) {\n\n\t\t\tconst array = [];\n\t\t\tconst morphAttribute = morphAttributes[ name ]; // morphAttribute: array of Float32BufferAttributes\n\n\t\t\tfor ( let i = 0, l = morphAttribute.length; i < l; i ++ ) {\n\n\t\t\t\tarray.push( morphAttribute[ i ].clone( data ) );\n\n\t\t\t}\n\n\t\t\tthis.morphAttributes[ name ] = array;\n\n\t\t}\n\n\t\tthis.morphTargetsRelative = source.morphTargetsRelative;\n\n\t\t// groups\n\n\t\tconst groups = source.groups;\n\n\t\tfor ( let i = 0, l = groups.length; i < l; i ++ ) {\n\n\t\t\tconst group = groups[ i ];\n\t\t\tthis.addGroup( group.start, group.count, group.materialIndex );\n\n\t\t}\n\n\t\t// bounding box\n\n\t\tconst boundingBox = source.boundingBox;\n\n\t\tif ( boundingBox !== null ) {\n\n\t\t\tthis.boundingBox = boundingBox.clone();\n\n\t\t}\n\n\t\t// bounding sphere\n\n\t\tconst boundingSphere = source.boundingSphere;\n\n\t\tif ( boundingSphere !== null ) {\n\n\t\t\tthis.boundingSphere = boundingSphere.clone();\n\n\t\t}\n\n\t\t// draw range\n\n\t\tthis.drawRange.start = source.drawRange.start;\n\t\tthis.drawRange.count = source.drawRange.count;\n\n\t\t// user data\n\n\t\tthis.userData = source.userData;\n\n\t\treturn this;\n\n\t},\n\n\tdispose: function () {\n\n\t\tthis.dispatchEvent( { type: 'dispose' } );\n\n\t}\n\n} );\n\n\nexport { BufferGeometry };\n","import { BufferGeometry } from '../core/BufferGeometry.js';\nimport { Float32BufferAttribute } from '../core/BufferAttribute.js';\nimport { Vector3 } from '../math/Vector3.js';\n\nclass BoxGeometry extends BufferGeometry {\n\n\tconstructor( width = 1, height = 1, depth = 1, widthSegments = 1, heightSegments = 1, depthSegments = 1 ) {\n\n\t\tsuper();\n\n\t\tthis.type = 'BoxGeometry';\n\n\t\tthis.parameters = {\n\t\t\twidth: width,\n\t\t\theight: height,\n\t\t\tdepth: depth,\n\t\t\twidthSegments: widthSegments,\n\t\t\theightSegments: heightSegments,\n\t\t\tdepthSegments: depthSegments\n\t\t};\n\n\t\tconst scope = this;\n\n\t\t// segments\n\n\t\twidthSegments = Math.floor( widthSegments );\n\t\theightSegments = Math.floor( heightSegments );\n\t\tdepthSegments = Math.floor( depthSegments );\n\n\t\t// buffers\n\n\t\tconst indices = [];\n\t\tconst vertices = [];\n\t\tconst normals = [];\n\t\tconst uvs = [];\n\n\t\t// helper variables\n\n\t\tlet numberOfVertices = 0;\n\t\tlet groupStart = 0;\n\n\t\t// build each side of the box geometry\n\n\t\tbuildPlane( 'z', 'y', 'x', - 1, - 1, depth, height, width, depthSegments, heightSegments, 0 ); // px\n\t\tbuildPlane( 'z', 'y', 'x', 1, - 1, depth, height, - width, depthSegments, heightSegments, 1 ); // nx\n\t\tbuildPlane( 'x', 'z', 'y', 1, 1, width, depth, height, widthSegments, depthSegments, 2 ); // py\n\t\tbuildPlane( 'x', 'z', 'y', 1, - 1, width, depth, - height, widthSegments, depthSegments, 3 ); // ny\n\t\tbuildPlane( 'x', 'y', 'z', 1, - 1, width, height, depth, widthSegments, heightSegments, 4 ); // pz\n\t\tbuildPlane( 'x', 'y', 'z', - 1, - 1, width, height, - depth, widthSegments, heightSegments, 5 ); // nz\n\n\t\t// build geometry\n\n\t\tthis.setIndex( indices );\n\t\tthis.setAttribute( 'position', new Float32BufferAttribute( vertices, 3 ) );\n\t\tthis.setAttribute( 'normal', new Float32BufferAttribute( normals, 3 ) );\n\t\tthis.setAttribute( 'uv', new Float32BufferAttribute( uvs, 2 ) );\n\n\t\tfunction buildPlane( u, v, w, udir, vdir, width, height, depth, gridX, gridY, materialIndex ) {\n\n\t\t\tconst segmentWidth = width / gridX;\n\t\t\tconst segmentHeight = height / gridY;\n\n\t\t\tconst widthHalf = width / 2;\n\t\t\tconst heightHalf = height / 2;\n\t\t\tconst depthHalf = depth / 2;\n\n\t\t\tconst gridX1 = gridX + 1;\n\t\t\tconst gridY1 = gridY + 1;\n\n\t\t\tlet vertexCounter = 0;\n\t\t\tlet groupCount = 0;\n\n\t\t\tconst vector = new Vector3();\n\n\t\t\t// generate vertices, normals and uvs\n\n\t\t\tfor ( let iy = 0; iy < gridY1; iy ++ ) {\n\n\t\t\t\tconst y = iy * segmentHeight - heightHalf;\n\n\t\t\t\tfor ( let ix = 0; ix < gridX1; ix ++ ) {\n\n\t\t\t\t\tconst x = ix * segmentWidth - widthHalf;\n\n\t\t\t\t\t// set values to correct vector component\n\n\t\t\t\t\tvector[ u ] = x * udir;\n\t\t\t\t\tvector[ v ] = y * vdir;\n\t\t\t\t\tvector[ w ] = depthHalf;\n\n\t\t\t\t\t// now apply vector to vertex buffer\n\n\t\t\t\t\tvertices.push( vector.x, vector.y, vector.z );\n\n\t\t\t\t\t// set values to correct vector component\n\n\t\t\t\t\tvector[ u ] = 0;\n\t\t\t\t\tvector[ v ] = 0;\n\t\t\t\t\tvector[ w ] = depth > 0 ? 1 : - 1;\n\n\t\t\t\t\t// now apply vector to normal buffer\n\n\t\t\t\t\tnormals.push( vector.x, vector.y, vector.z );\n\n\t\t\t\t\t// uvs\n\n\t\t\t\t\tuvs.push( ix / gridX );\n\t\t\t\t\tuvs.push( 1 - ( iy / gridY ) );\n\n\t\t\t\t\t// counters\n\n\t\t\t\t\tvertexCounter += 1;\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t\t// indices\n\n\t\t\t// 1. you need three indices to draw a single face\n\t\t\t// 2. a single segment consists of two faces\n\t\t\t// 3. so we need to generate six (2*3) indices per segment\n\n\t\t\tfor ( let iy = 0; iy < gridY; iy ++ ) {\n\n\t\t\t\tfor ( let ix = 0; ix < gridX; ix ++ ) {\n\n\t\t\t\t\tconst a = numberOfVertices + ix + gridX1 * iy;\n\t\t\t\t\tconst b = numberOfVertices + ix + gridX1 * ( iy + 1 );\n\t\t\t\t\tconst c = numberOfVertices + ( ix + 1 ) + gridX1 * ( iy + 1 );\n\t\t\t\t\tconst d = numberOfVertices + ( ix + 1 ) + gridX1 * iy;\n\n\t\t\t\t\t// faces\n\n\t\t\t\t\tindices.push( a, b, d );\n\t\t\t\t\tindices.push( b, c, d );\n\n\t\t\t\t\t// increase counter\n\n\t\t\t\t\tgroupCount += 6;\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t\t// add a group to the geometry. this will ensure multi material support\n\n\t\t\tscope.addGroup( groupStart, groupCount, materialIndex );\n\n\t\t\t// calculate new start value for groups\n\n\t\t\tgroupStart += groupCount;\n\n\t\t\t// update total number of vertices\n\n\t\t\tnumberOfVertices += vertexCounter;\n\n\t\t}\n\n\t}\n\n}\n\nexport { BoxGeometry, BoxGeometry as BoxBufferGeometry };\n","import { BufferGeometry } from '../core/BufferGeometry.js';\nimport { Float32BufferAttribute } from '../core/BufferAttribute.js';\n\nclass PlaneGeometry extends BufferGeometry {\n\n\tconstructor( width = 1, height = 1, widthSegments = 1, heightSegments = 1 ) {\n\n\t\tsuper();\n\t\tthis.type = 'PlaneGeometry';\n\n\t\tthis.parameters = {\n\t\t\twidth: width,\n\t\t\theight: height,\n\t\t\twidthSegments: widthSegments,\n\t\t\theightSegments: heightSegments\n\t\t};\n\n\t\tconst width_half = width / 2;\n\t\tconst height_half = height / 2;\n\n\t\tconst gridX = Math.floor( widthSegments );\n\t\tconst gridY = Math.floor( heightSegments );\n\n\t\tconst gridX1 = gridX + 1;\n\t\tconst gridY1 = gridY + 1;\n\n\t\tconst segment_width = width / gridX;\n\t\tconst segment_height = height / gridY;\n\n\t\t//\n\n\t\tconst indices = [];\n\t\tconst vertices = [];\n\t\tconst normals = [];\n\t\tconst uvs = [];\n\n\t\tfor ( let iy = 0; iy < gridY1; iy ++ ) {\n\n\t\t\tconst y = iy * segment_height - height_half;\n\n\t\t\tfor ( let ix = 0; ix < gridX1; ix ++ ) {\n\n\t\t\t\tconst x = ix * segment_width - width_half;\n\n\t\t\t\tvertices.push( x, - y, 0 );\n\n\t\t\t\tnormals.push( 0, 0, 1 );\n\n\t\t\t\tuvs.push( ix / gridX );\n\t\t\t\tuvs.push( 1 - ( iy / gridY ) );\n\n\t\t\t}\n\n\t\t}\n\n\t\tfor ( let iy = 0; iy < gridY; iy ++ ) {\n\n\t\t\tfor ( let ix = 0; ix < gridX; ix ++ ) {\n\n\t\t\t\tconst a = ix + gridX1 * iy;\n\t\t\t\tconst b = ix + gridX1 * ( iy + 1 );\n\t\t\t\tconst c = ( ix + 1 ) + gridX1 * ( iy + 1 );\n\t\t\t\tconst d = ( ix + 1 ) + gridX1 * iy;\n\n\t\t\t\tindices.push( a, b, d );\n\t\t\t\tindices.push( b, c, d );\n\n\t\t\t}\n\n\t\t}\n\n\t\tthis.setIndex( indices );\n\t\tthis.setAttribute( 'position', new Float32BufferAttribute( vertices, 3 ) );\n\t\tthis.setAttribute( 'normal', new Float32BufferAttribute( normals, 3 ) );\n\t\tthis.setAttribute( 'uv', new Float32BufferAttribute( uvs, 2 ) );\n\n\t}\n\n}\n\nexport { PlaneGeometry, PlaneGeometry as PlaneBufferGeometry };\n","import { EventDispatcher } from '../core/EventDispatcher.js';\nimport { FrontSide, FlatShading, NormalBlending, LessEqualDepth, AddEquation, OneMinusSrcAlphaFactor, SrcAlphaFactor, AlwaysStencilFunc, KeepStencilOp } from '../constants.js';\nimport { MathUtils } from '../math/MathUtils.js';\n\nlet materialId = 0;\n\nfunction Material() {\n\n\tObject.defineProperty( this, 'id', { value: materialId ++ } );\n\n\tthis.uuid = MathUtils.generateUUID();\n\n\tthis.name = '';\n\tthis.type = 'Material';\n\n\tthis.fog = true;\n\n\tthis.blending = NormalBlending;\n\tthis.side = FrontSide;\n\tthis.vertexColors = false;\n\n\tthis.opacity = 1;\n\tthis.transparent = false;\n\n\tthis.blendSrc = SrcAlphaFactor;\n\tthis.blendDst = OneMinusSrcAlphaFactor;\n\tthis.blendEquation = AddEquation;\n\tthis.blendSrcAlpha = null;\n\tthis.blendDstAlpha = null;\n\tthis.blendEquationAlpha = null;\n\n\tthis.depthFunc = LessEqualDepth;\n\tthis.depthTest = true;\n\tthis.depthWrite = true;\n\n\tthis.stencilWriteMask = 0xff;\n\tthis.stencilFunc = AlwaysStencilFunc;\n\tthis.stencilRef = 0;\n\tthis.stencilFuncMask = 0xff;\n\tthis.stencilFail = KeepStencilOp;\n\tthis.stencilZFail = KeepStencilOp;\n\tthis.stencilZPass = KeepStencilOp;\n\tthis.stencilWrite = false;\n\n\tthis.clippingPlanes = null;\n\tthis.clipIntersection = false;\n\tthis.clipShadows = false;\n\n\tthis.shadowSide = null;\n\n\tthis.colorWrite = true;\n\n\tthis.precision = null; // override the renderer's default precision for this material\n\n\tthis.polygonOffset = false;\n\tthis.polygonOffsetFactor = 0;\n\tthis.polygonOffsetUnits = 0;\n\n\tthis.dithering = false;\n\n\tthis.alphaTest = 0;\n\tthis.premultipliedAlpha = false;\n\n\tthis.visible = true;\n\n\tthis.toneMapped = true;\n\n\tthis.userData = {};\n\n\tthis.version = 0;\n\n}\n\nMaterial.prototype = Object.assign( Object.create( EventDispatcher.prototype ), {\n\n\tconstructor: Material,\n\n\tisMaterial: true,\n\n\tonBeforeCompile: function ( /* shaderobject, renderer */ ) {},\n\n\tcustomProgramCacheKey: function () {\n\n\t\treturn this.onBeforeCompile.toString();\n\n\t},\n\n\tsetValues: function ( values ) {\n\n\t\tif ( values === undefined ) return;\n\n\t\tfor ( const key in values ) {\n\n\t\t\tconst newValue = values[ key ];\n\n\t\t\tif ( newValue === undefined ) {\n\n\t\t\t\tconsole.warn( 'THREE.Material: \\'' + key + '\\' parameter is undefined.' );\n\t\t\t\tcontinue;\n\n\t\t\t}\n\n\t\t\t// for backward compatability if shading is set in the constructor\n\t\t\tif ( key === 'shading' ) {\n\n\t\t\t\tconsole.warn( 'THREE.' + this.type + ': .shading has been removed. Use the boolean .flatShading instead.' );\n\t\t\t\tthis.flatShading = ( newValue === FlatShading ) ? true : false;\n\t\t\t\tcontinue;\n\n\t\t\t}\n\n\t\t\tconst currentValue = this[ key ];\n\n\t\t\tif ( currentValue === undefined ) {\n\n\t\t\t\tconsole.warn( 'THREE.' + this.type + ': \\'' + key + '\\' is not a property of this material.' );\n\t\t\t\tcontinue;\n\n\t\t\t}\n\n\t\t\tif ( currentValue && currentValue.isColor ) {\n\n\t\t\t\tcurrentValue.set( newValue );\n\n\t\t\t} else if ( ( currentValue && currentValue.isVector3 ) && ( newValue && newValue.isVector3 ) ) {\n\n\t\t\t\tcurrentValue.copy( newValue );\n\n\t\t\t} else {\n\n\t\t\t\tthis[ key ] = newValue;\n\n\t\t\t}\n\n\t\t}\n\n\t},\n\n\ttoJSON: function ( meta ) {\n\n\t\tconst isRoot = ( meta === undefined || typeof meta === 'string' );\n\n\t\tif ( isRoot ) {\n\n\t\t\tmeta = {\n\t\t\t\ttextures: {},\n\t\t\t\timages: {}\n\t\t\t};\n\n\t\t}\n\n\t\tconst data = {\n\t\t\tmetadata: {\n\t\t\t\tversion: 4.5,\n\t\t\t\ttype: 'Material',\n\t\t\t\tgenerator: 'Material.toJSON'\n\t\t\t}\n\t\t};\n\n\t\t// standard Material serialization\n\t\tdata.uuid = this.uuid;\n\t\tdata.type = this.type;\n\n\t\tif ( this.name !== '' ) data.name = this.name;\n\n\t\tif ( this.color && this.color.isColor ) data.color = this.color.getHex();\n\n\t\tif ( this.roughness !== undefined ) data.roughness = this.roughness;\n\t\tif ( this.metalness !== undefined ) data.metalness = this.metalness;\n\n\t\tif ( this.sheen && this.sheen.isColor ) data.sheen = this.sheen.getHex();\n\t\tif ( this.emissive && this.emissive.isColor ) data.emissive = this.emissive.getHex();\n\t\tif ( this.emissiveIntensity && this.emissiveIntensity !== 1 ) data.emissiveIntensity = this.emissiveIntensity;\n\n\t\tif ( this.specular && this.specular.isColor ) data.specular = this.specular.getHex();\n\t\tif ( this.shininess !== undefined ) data.shininess = this.shininess;\n\t\tif ( this.clearcoat !== undefined ) data.clearcoat = this.clearcoat;\n\t\tif ( this.clearcoatRoughness !== undefined ) data.clearcoatRoughness = this.clearcoatRoughness;\n\n\t\tif ( this.clearcoatMap && this.clearcoatMap.isTexture ) {\n\n\t\t\tdata.clearcoatMap = this.clearcoatMap.toJSON( meta ).uuid;\n\n\t\t}\n\n\t\tif ( this.clearcoatRoughnessMap && this.clearcoatRoughnessMap.isTexture ) {\n\n\t\t\tdata.clearcoatRoughnessMap = this.clearcoatRoughnessMap.toJSON( meta ).uuid;\n\n\t\t}\n\n\t\tif ( this.clearcoatNormalMap && this.clearcoatNormalMap.isTexture ) {\n\n\t\t\tdata.clearcoatNormalMap = this.clearcoatNormalMap.toJSON( meta ).uuid;\n\t\t\tdata.clearcoatNormalScale = this.clearcoatNormalScale.toArray();\n\n\t\t}\n\n\t\tif ( this.map && this.map.isTexture ) data.map = this.map.toJSON( meta ).uuid;\n\t\tif ( this.matcap && this.matcap.isTexture ) data.matcap = this.matcap.toJSON( meta ).uuid;\n\t\tif ( this.alphaMap && this.alphaMap.isTexture ) data.alphaMap = this.alphaMap.toJSON( meta ).uuid;\n\n\t\tif ( this.lightMap && this.lightMap.isTexture ) {\n\n\t\t\tdata.lightMap = this.lightMap.toJSON( meta ).uuid;\n\t\t\tdata.lightMapIntensity = this.lightMapIntensity;\n\n\t\t}\n\n\t\tif ( this.aoMap && this.aoMap.isTexture ) {\n\n\t\t\tdata.aoMap = this.aoMap.toJSON( meta ).uuid;\n\t\t\tdata.aoMapIntensity = this.aoMapIntensity;\n\n\t\t}\n\n\t\tif ( this.bumpMap && this.bumpMap.isTexture ) {\n\n\t\t\tdata.bumpMap = this.bumpMap.toJSON( meta ).uuid;\n\t\t\tdata.bumpScale = this.bumpScale;\n\n\t\t}\n\n\t\tif ( this.normalMap && this.normalMap.isTexture ) {\n\n\t\t\tdata.normalMap = this.normalMap.toJSON( meta ).uuid;\n\t\t\tdata.normalMapType = this.normalMapType;\n\t\t\tdata.normalScale = this.normalScale.toArray();\n\n\t\t}\n\n\t\tif ( this.displacementMap && this.displacementMap.isTexture ) {\n\n\t\t\tdata.displacementMap = this.displacementMap.toJSON( meta ).uuid;\n\t\t\tdata.displacementScale = this.displacementScale;\n\t\t\tdata.displacementBias = this.displacementBias;\n\n\t\t}\n\n\t\tif ( this.roughnessMap && this.roughnessMap.isTexture ) data.roughnessMap = this.roughnessMap.toJSON( meta ).uuid;\n\t\tif ( this.metalnessMap && this.metalnessMap.isTexture ) data.metalnessMap = this.metalnessMap.toJSON( meta ).uuid;\n\n\t\tif ( this.emissiveMap && this.emissiveMap.isTexture ) data.emissiveMap = this.emissiveMap.toJSON( meta ).uuid;\n\t\tif ( this.specularMap && this.specularMap.isTexture ) data.specularMap = this.specularMap.toJSON( meta ).uuid;\n\n\t\tif ( this.envMap && this.envMap.isTexture ) {\n\n\t\t\tdata.envMap = this.envMap.toJSON( meta ).uuid;\n\t\t\tdata.reflectivity = this.reflectivity; // Scale behind envMap\n\t\t\tdata.refractionRatio = this.refractionRatio;\n\n\t\t\tif ( this.combine !== undefined ) data.combine = this.combine;\n\t\t\tif ( this.envMapIntensity !== undefined ) data.envMapIntensity = this.envMapIntensity;\n\n\t\t}\n\n\t\tif ( this.gradientMap && this.gradientMap.isTexture ) {\n\n\t\t\tdata.gradientMap = this.gradientMap.toJSON( meta ).uuid;\n\n\t\t}\n\n\t\tif ( this.size !== undefined ) data.size = this.size;\n\t\tif ( this.sizeAttenuation !== undefined ) data.sizeAttenuation = this.sizeAttenuation;\n\n\t\tif ( this.blending !== NormalBlending ) data.blending = this.blending;\n\t\tif ( this.side !== FrontSide ) data.side = this.side;\n\t\tif ( this.vertexColors ) data.vertexColors = true;\n\n\t\tif ( this.opacity < 1 ) data.opacity = this.opacity;\n\t\tif ( this.transparent === true ) data.transparent = this.transparent;\n\n\t\tdata.depthFunc = this.depthFunc;\n\t\tdata.depthTest = this.depthTest;\n\t\tdata.depthWrite = this.depthWrite;\n\n\t\tdata.stencilWrite = this.stencilWrite;\n\t\tdata.stencilWriteMask = this.stencilWriteMask;\n\t\tdata.stencilFunc = this.stencilFunc;\n\t\tdata.stencilRef = this.stencilRef;\n\t\tdata.stencilFuncMask = this.stencilFuncMask;\n\t\tdata.stencilFail = this.stencilFail;\n\t\tdata.stencilZFail = this.stencilZFail;\n\t\tdata.stencilZPass = this.stencilZPass;\n\n\t\t// rotation (SpriteMaterial)\n\t\tif ( this.rotation && this.rotation !== 0 ) data.rotation = this.rotation;\n\n\t\tif ( this.polygonOffset === true ) data.polygonOffset = true;\n\t\tif ( this.polygonOffsetFactor !== 0 ) data.polygonOffsetFactor = this.polygonOffsetFactor;\n\t\tif ( this.polygonOffsetUnits !== 0 ) data.polygonOffsetUnits = this.polygonOffsetUnits;\n\n\t\tif ( this.linewidth && this.linewidth !== 1 ) data.linewidth = this.linewidth;\n\t\tif ( this.dashSize !== undefined ) data.dashSize = this.dashSize;\n\t\tif ( this.gapSize !== undefined ) data.gapSize = this.gapSize;\n\t\tif ( this.scale !== undefined ) data.scale = this.scale;\n\n\t\tif ( this.dithering === true ) data.dithering = true;\n\n\t\tif ( this.alphaTest > 0 ) data.alphaTest = this.alphaTest;\n\t\tif ( this.premultipliedAlpha === true ) data.premultipliedAlpha = this.premultipliedAlpha;\n\n\t\tif ( this.wireframe === true ) data.wireframe = this.wireframe;\n\t\tif ( this.wireframeLinewidth > 1 ) data.wireframeLinewidth = this.wireframeLinewidth;\n\t\tif ( this.wireframeLinecap !== 'round' ) data.wireframeLinecap = this.wireframeLinecap;\n\t\tif ( this.wireframeLinejoin !== 'round' ) data.wireframeLinejoin = this.wireframeLinejoin;\n\n\t\tif ( this.morphTargets === true ) data.morphTargets = true;\n\t\tif ( this.morphNormals === true ) data.morphNormals = true;\n\t\tif ( this.skinning === true ) data.skinning = true;\n\n\t\tif ( this.flatShading === true ) data.flatShading = this.flatShading;\n\n\t\tif ( this.visible === false ) data.visible = false;\n\n\t\tif ( this.toneMapped === false ) data.toneMapped = false;\n\n\t\tif ( JSON.stringify( this.userData ) !== '{}' ) data.userData = this.userData;\n\n\t\t// TODO: Copied from Object3D.toJSON\n\n\t\tfunction extractFromCache( cache ) {\n\n\t\t\tconst values = [];\n\n\t\t\tfor ( const key in cache ) {\n\n\t\t\t\tconst data = cache[ key ];\n\t\t\t\tdelete data.metadata;\n\t\t\t\tvalues.push( data );\n\n\t\t\t}\n\n\t\t\treturn values;\n\n\t\t}\n\n\t\tif ( isRoot ) {\n\n\t\t\tconst textures = extractFromCache( meta.textures );\n\t\t\tconst images = extractFromCache( meta.images );\n\n\t\t\tif ( textures.length > 0 ) data.textures = textures;\n\t\t\tif ( images.length > 0 ) data.images = images;\n\n\t\t}\n\n\t\treturn data;\n\n\t},\n\n\tclone: function () {\n\n\t\treturn new this.constructor().copy( this );\n\n\t},\n\n\tcopy: function ( source ) {\n\n\t\tthis.name = source.name;\n\n\t\tthis.fog = source.fog;\n\n\t\tthis.blending = source.blending;\n\t\tthis.side = source.side;\n\t\tthis.vertexColors = source.vertexColors;\n\n\t\tthis.opacity = source.opacity;\n\t\tthis.transparent = source.transparent;\n\n\t\tthis.blendSrc = source.blendSrc;\n\t\tthis.blendDst = source.blendDst;\n\t\tthis.blendEquation = source.blendEquation;\n\t\tthis.blendSrcAlpha = source.blendSrcAlpha;\n\t\tthis.blendDstAlpha = source.blendDstAlpha;\n\t\tthis.blendEquationAlpha = source.blendEquationAlpha;\n\n\t\tthis.depthFunc = source.depthFunc;\n\t\tthis.depthTest = source.depthTest;\n\t\tthis.depthWrite = source.depthWrite;\n\n\t\tthis.stencilWriteMask = source.stencilWriteMask;\n\t\tthis.stencilFunc = source.stencilFunc;\n\t\tthis.stencilRef = source.stencilRef;\n\t\tthis.stencilFuncMask = source.stencilFuncMask;\n\t\tthis.stencilFail = source.stencilFail;\n\t\tthis.stencilZFail = source.stencilZFail;\n\t\tthis.stencilZPass = source.stencilZPass;\n\t\tthis.stencilWrite = source.stencilWrite;\n\n\t\tconst srcPlanes = source.clippingPlanes;\n\t\tlet dstPlanes = null;\n\n\t\tif ( srcPlanes !== null ) {\n\n\t\t\tconst n = srcPlanes.length;\n\t\t\tdstPlanes = new Array( n );\n\n\t\t\tfor ( let i = 0; i !== n; ++ i ) {\n\n\t\t\t\tdstPlanes[ i ] = srcPlanes[ i ].clone();\n\n\t\t\t}\n\n\t\t}\n\n\t\tthis.clippingPlanes = dstPlanes;\n\t\tthis.clipIntersection = source.clipIntersection;\n\t\tthis.clipShadows = source.clipShadows;\n\n\t\tthis.shadowSide = source.shadowSide;\n\n\t\tthis.colorWrite = source.colorWrite;\n\n\t\tthis.precision = source.precision;\n\n\t\tthis.polygonOffset = source.polygonOffset;\n\t\tthis.polygonOffsetFactor = source.polygonOffsetFactor;\n\t\tthis.polygonOffsetUnits = source.polygonOffsetUnits;\n\n\t\tthis.dithering = source.dithering;\n\n\t\tthis.alphaTest = source.alphaTest;\n\t\tthis.premultipliedAlpha = source.premultipliedAlpha;\n\n\t\tthis.visible = source.visible;\n\n\t\tthis.toneMapped = source.toneMapped;\n\n\t\tthis.userData = JSON.parse( JSON.stringify( source.userData ) );\n\n\t\treturn this;\n\n\t},\n\n\tdispose: function () {\n\n\t\tthis.dispatchEvent( { type: 'dispose' } );\n\n\t}\n\n} );\n\nObject.defineProperty( Material.prototype, 'needsUpdate', {\n\n\tset: function ( value ) {\n\n\t\tif ( value === true ) this.version ++;\n\n\t}\n\n} );\n\nexport { Material };\n","/**\n * Uniform Utilities\n */\n\nexport function cloneUniforms( src ) {\n\n\tconst dst = {};\n\n\tfor ( const u in src ) {\n\n\t\tdst[ u ] = {};\n\n\t\tfor ( const p in src[ u ] ) {\n\n\t\t\tconst property = src[ u ][ p ];\n\n\t\t\tif ( property && ( property.isColor ||\n\t\t\t\tproperty.isMatrix3 || property.isMatrix4 ||\n\t\t\t\tproperty.isVector2 || property.isVector3 || property.isVector4 ||\n\t\t\t\tproperty.isTexture || property.isQuaternion ) ) {\n\n\t\t\t\tdst[ u ][ p ] = property.clone();\n\n\t\t\t} else if ( Array.isArray( property ) ) {\n\n\t\t\t\tdst[ u ][ p ] = property.slice();\n\n\t\t\t} else {\n\n\t\t\t\tdst[ u ][ p ] = property;\n\n\t\t\t}\n\n\t\t}\n\n\t}\n\n\treturn dst;\n\n}\n\nexport function mergeUniforms( uniforms ) {\n\n\tconst merged = {};\n\n\tfor ( let u = 0; u < uniforms.length; u ++ ) {\n\n\t\tconst tmp = cloneUniforms( uniforms[ u ] );\n\n\t\tfor ( const p in tmp ) {\n\n\t\t\tmerged[ p ] = tmp[ p ];\n\n\t\t}\n\n\t}\n\n\treturn merged;\n\n}\n\n// Legacy\n\nconst UniformsUtils = { clone: cloneUniforms, merge: mergeUniforms };\n\nexport { UniformsUtils };\n","import { Material } from './Material.js';\nimport { cloneUniforms } from '../renderers/shaders/UniformsUtils.js';\n\nimport default_vertex from '../renderers/shaders/ShaderChunk/default_vertex.glsl.js';\nimport default_fragment from '../renderers/shaders/ShaderChunk/default_fragment.glsl.js';\n\n/**\n * parameters = {\n *  defines: { \"label\" : \"value\" },\n *  uniforms: { \"parameter1\": { value: 1.0 }, \"parameter2\": { value2: 2 } },\n *\n *  fragmentShader: <string>,\n *  vertexShader: <string>,\n *\n *  wireframe: <boolean>,\n *  wireframeLinewidth: <float>,\n *\n *  lights: <bool>,\n *\n *  skinning: <bool>,\n *  morphTargets: <bool>,\n *  morphNormals: <bool>\n * }\n */\n\nfunction ShaderMaterial( parameters ) {\n\n\tMaterial.call( this );\n\n\tthis.type = 'ShaderMaterial';\n\n\tthis.defines = {};\n\tthis.uniforms = {};\n\n\tthis.vertexShader = default_vertex;\n\tthis.fragmentShader = default_fragment;\n\n\tthis.linewidth = 1;\n\n\tthis.wireframe = false;\n\tthis.wireframeLinewidth = 1;\n\n\tthis.fog = false; // set to use scene fog\n\tthis.lights = false; // set to use scene lights\n\tthis.clipping = false; // set to use user-defined clipping planes\n\n\tthis.skinning = false; // set to use skinning attribute streams\n\tthis.morphTargets = false; // set to use morph targets\n\tthis.morphNormals = false; // set to use morph normals\n\n\tthis.extensions = {\n\t\tderivatives: false, // set to use derivatives\n\t\tfragDepth: false, // set to use fragment depth values\n\t\tdrawBuffers: false, // set to use draw buffers\n\t\tshaderTextureLOD: false // set to use shader texture LOD\n\t};\n\n\t// When rendered geometry doesn't include these attributes but the material does,\n\t// use these default values in WebGL. This avoids errors when buffer data is missing.\n\tthis.defaultAttributeValues = {\n\t\t'color': [ 1, 1, 1 ],\n\t\t'uv': [ 0, 0 ],\n\t\t'uv2': [ 0, 0 ]\n\t};\n\n\tthis.index0AttributeName = undefined;\n\tthis.uniformsNeedUpdate = false;\n\n\tthis.glslVersion = null;\n\n\tif ( parameters !== undefined ) {\n\n\t\tif ( parameters.attributes !== undefined ) {\n\n\t\t\tconsole.error( 'THREE.ShaderMaterial: attributes should now be defined in THREE.BufferGeometry instead.' );\n\n\t\t}\n\n\t\tthis.setValues( parameters );\n\n\t}\n\n}\n\nShaderMaterial.prototype = Object.create( Material.prototype );\nShaderMaterial.prototype.constructor = ShaderMaterial;\n\nShaderMaterial.prototype.isShaderMaterial = true;\n\nShaderMaterial.prototype.copy = function ( source ) {\n\n\tMaterial.prototype.copy.call( this, source );\n\n\tthis.fragmentShader = source.fragmentShader;\n\tthis.vertexShader = source.vertexShader;\n\n\tthis.uniforms = cloneUniforms( source.uniforms );\n\n\tthis.defines = Object.assign( {}, source.defines );\n\n\tthis.wireframe = source.wireframe;\n\tthis.wireframeLinewidth = source.wireframeLinewidth;\n\n\tthis.lights = source.lights;\n\tthis.clipping = source.clipping;\n\n\tthis.skinning = source.skinning;\n\n\tthis.morphTargets = source.morphTargets;\n\tthis.morphNormals = source.morphNormals;\n\n\tthis.extensions = Object.assign( {}, source.extensions );\n\n\tthis.glslVersion = source.glslVersion;\n\n\treturn this;\n\n};\n\nShaderMaterial.prototype.toJSON = function ( meta ) {\n\n\tconst data = Material.prototype.toJSON.call( this, meta );\n\n\tdata.glslVersion = this.glslVersion;\n\tdata.uniforms = {};\n\n\tfor ( const name in this.uniforms ) {\n\n\t\tconst uniform = this.uniforms[ name ];\n\t\tconst value = uniform.value;\n\n\t\tif ( value && value.isTexture ) {\n\n\t\t\tdata.uniforms[ name ] = {\n\t\t\t\ttype: 't',\n\t\t\t\tvalue: value.toJSON( meta ).uuid\n\t\t\t};\n\n\t\t} else if ( value && value.isColor ) {\n\n\t\t\tdata.uniforms[ name ] = {\n\t\t\t\ttype: 'c',\n\t\t\t\tvalue: value.getHex()\n\t\t\t};\n\n\t\t} else if ( value && value.isVector2 ) {\n\n\t\t\tdata.uniforms[ name ] = {\n\t\t\t\ttype: 'v2',\n\t\t\t\tvalue: value.toArray()\n\t\t\t};\n\n\t\t} else if ( value && value.isVector3 ) {\n\n\t\t\tdata.uniforms[ name ] = {\n\t\t\t\ttype: 'v3',\n\t\t\t\tvalue: value.toArray()\n\t\t\t};\n\n\t\t} else if ( value && value.isVector4 ) {\n\n\t\t\tdata.uniforms[ name ] = {\n\t\t\t\ttype: 'v4',\n\t\t\t\tvalue: value.toArray()\n\t\t\t};\n\n\t\t} else if ( value && value.isMatrix3 ) {\n\n\t\t\tdata.uniforms[ name ] = {\n\t\t\t\ttype: 'm3',\n\t\t\t\tvalue: value.toArray()\n\t\t\t};\n\n\t\t} else if ( value && value.isMatrix4 ) {\n\n\t\t\tdata.uniforms[ name ] = {\n\t\t\t\ttype: 'm4',\n\t\t\t\tvalue: value.toArray()\n\t\t\t};\n\n\t\t} else {\n\n\t\t\tdata.uniforms[ name ] = {\n\t\t\t\tvalue: value\n\t\t\t};\n\n\t\t\t// note: the array variants v2v, v3v, v4v, m4v and tv are not supported so far\n\n\t\t}\n\n\t}\n\n\tif ( Object.keys( this.defines ).length > 0 ) data.defines = this.defines;\n\n\tdata.vertexShader = this.vertexShader;\n\tdata.fragmentShader = this.fragmentShader;\n\n\tconst extensions = {};\n\n\tfor ( const key in this.extensions ) {\n\n\t\tif ( this.extensions[ key ] === true ) extensions[ key ] = true;\n\n\t}\n\n\tif ( Object.keys( extensions ).length > 0 ) data.extensions = extensions;\n\n\treturn data;\n\n};\n\n\nexport { ShaderMaterial };\n","export default /* glsl */`\nvoid main() {\n\tgl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );\n}\n`;\n","export default /* glsl */`\nvoid main() {\n\tgl_FragColor = vec4( 1.0, 0.0, 0.0, 1.0 );\n}\n`;\n","import { Vector3 } from './Vector3.js';\n\nconst _vector = /*@__PURE__*/ new Vector3();\nconst _segCenter = /*@__PURE__*/ new Vector3();\nconst _segDir = /*@__PURE__*/ new Vector3();\nconst _diff = /*@__PURE__*/ new Vector3();\n\nconst _edge1 = /*@__PURE__*/ new Vector3();\nconst _edge2 = /*@__PURE__*/ new Vector3();\nconst _normal = /*@__PURE__*/ new Vector3();\n\nclass Ray {\n\n\tconstructor( origin = new Vector3(), direction = new Vector3( 0, 0, - 1 ) ) {\n\n\t\tthis.origin = origin;\n\t\tthis.direction = direction;\n\n\t}\n\n\tset( origin, direction ) {\n\n\t\tthis.origin.copy( origin );\n\t\tthis.direction.copy( direction );\n\n\t\treturn this;\n\n\t}\n\n\tcopy( ray ) {\n\n\t\tthis.origin.copy( ray.origin );\n\t\tthis.direction.copy( ray.direction );\n\n\t\treturn this;\n\n\t}\n\n\tat( t, target ) {\n\n\t\tif ( target === undefined ) {\n\n\t\t\tconsole.warn( 'THREE.Ray: .at() target is now required' );\n\t\t\ttarget = new Vector3();\n\n\t\t}\n\n\t\treturn target.copy( this.direction ).multiplyScalar( t ).add( this.origin );\n\n\t}\n\n\tlookAt( v ) {\n\n\t\tthis.direction.copy( v ).sub( this.origin ).normalize();\n\n\t\treturn this;\n\n\t}\n\n\trecast( t ) {\n\n\t\tthis.origin.copy( this.at( t, _vector ) );\n\n\t\treturn this;\n\n\t}\n\n\tclosestPointToPoint( point, target ) {\n\n\t\tif ( target === undefined ) {\n\n\t\t\tconsole.warn( 'THREE.Ray: .closestPointToPoint() target is now required' );\n\t\t\ttarget = new Vector3();\n\n\t\t}\n\n\t\ttarget.subVectors( point, this.origin );\n\n\t\tconst directionDistance = target.dot( this.direction );\n\n\t\tif ( directionDistance < 0 ) {\n\n\t\t\treturn target.copy( this.origin );\n\n\t\t}\n\n\t\treturn target.copy( this.direction ).multiplyScalar( directionDistance ).add( this.origin );\n\n\t}\n\n\tdistanceToPoint( point ) {\n\n\t\treturn Math.sqrt( this.distanceSqToPoint( point ) );\n\n\t}\n\n\tdistanceSqToPoint( point ) {\n\n\t\tconst directionDistance = _vector.subVectors( point, this.origin ).dot( this.direction );\n\n\t\t// point behind the ray\n\n\t\tif ( directionDistance < 0 ) {\n\n\t\t\treturn this.origin.distanceToSquared( point );\n\n\t\t}\n\n\t\t_vector.copy( this.direction ).multiplyScalar( directionDistance ).add( this.origin );\n\n\t\treturn _vector.distanceToSquared( point );\n\n\t}\n\n\tdistanceSqToSegment( v0, v1, optionalPointOnRay, optionalPointOnSegment ) {\n\n\t\t// from http://www.geometrictools.com/GTEngine/Include/Mathematics/GteDistRaySegment.h\n\t\t// It returns the min distance between the ray and the segment\n\t\t// defined by v0 and v1\n\t\t// It can also set two optional targets :\n\t\t// - The closest point on the ray\n\t\t// - The closest point on the segment\n\n\t\t_segCenter.copy( v0 ).add( v1 ).multiplyScalar( 0.5 );\n\t\t_segDir.copy( v1 ).sub( v0 ).normalize();\n\t\t_diff.copy( this.origin ).sub( _segCenter );\n\n\t\tconst segExtent = v0.distanceTo( v1 ) * 0.5;\n\t\tconst a01 = - this.direction.dot( _segDir );\n\t\tconst b0 = _diff.dot( this.direction );\n\t\tconst b1 = - _diff.dot( _segDir );\n\t\tconst c = _diff.lengthSq();\n\t\tconst det = Math.abs( 1 - a01 * a01 );\n\t\tlet s0, s1, sqrDist, extDet;\n\n\t\tif ( det > 0 ) {\n\n\t\t\t// The ray and segment are not parallel.\n\n\t\t\ts0 = a01 * b1 - b0;\n\t\t\ts1 = a01 * b0 - b1;\n\t\t\textDet = segExtent * det;\n\n\t\t\tif ( s0 >= 0 ) {\n\n\t\t\t\tif ( s1 >= - extDet ) {\n\n\t\t\t\t\tif ( s1 <= extDet ) {\n\n\t\t\t\t\t\t// region 0\n\t\t\t\t\t\t// Minimum at interior points of ray and segment.\n\n\t\t\t\t\t\tconst invDet = 1 / det;\n\t\t\t\t\t\ts0 *= invDet;\n\t\t\t\t\t\ts1 *= invDet;\n\t\t\t\t\t\tsqrDist = s0 * ( s0 + a01 * s1 + 2 * b0 ) + s1 * ( a01 * s0 + s1 + 2 * b1 ) + c;\n\n\t\t\t\t\t} else {\n\n\t\t\t\t\t\t// region 1\n\n\t\t\t\t\t\ts1 = segExtent;\n\t\t\t\t\t\ts0 = Math.max( 0, - ( a01 * s1 + b0 ) );\n\t\t\t\t\t\tsqrDist = - s0 * s0 + s1 * ( s1 + 2 * b1 ) + c;\n\n\t\t\t\t\t}\n\n\t\t\t\t} else {\n\n\t\t\t\t\t// region 5\n\n\t\t\t\t\ts1 = - segExtent;\n\t\t\t\t\ts0 = Math.max( 0, - ( a01 * s1 + b0 ) );\n\t\t\t\t\tsqrDist = - s0 * s0 + s1 * ( s1 + 2 * b1 ) + c;\n\n\t\t\t\t}\n\n\t\t\t} else {\n\n\t\t\t\tif ( s1 <= - extDet ) {\n\n\t\t\t\t\t// region 4\n\n\t\t\t\t\ts0 = Math.max( 0, - ( - a01 * segExtent + b0 ) );\n\t\t\t\t\ts1 = ( s0 > 0 ) ? - segExtent : Math.min( Math.max( - segExtent, - b1 ), segExtent );\n\t\t\t\t\tsqrDist = - s0 * s0 + s1 * ( s1 + 2 * b1 ) + c;\n\n\t\t\t\t} else if ( s1 <= extDet ) {\n\n\t\t\t\t\t// region 3\n\n\t\t\t\t\ts0 = 0;\n\t\t\t\t\ts1 = Math.min( Math.max( - segExtent, - b1 ), segExtent );\n\t\t\t\t\tsqrDist = s1 * ( s1 + 2 * b1 ) + c;\n\n\t\t\t\t} else {\n\n\t\t\t\t\t// region 2\n\n\t\t\t\t\ts0 = Math.max( 0, - ( a01 * segExtent + b0 ) );\n\t\t\t\t\ts1 = ( s0 > 0 ) ? segExtent : Math.min( Math.max( - segExtent, - b1 ), segExtent );\n\t\t\t\t\tsqrDist = - s0 * s0 + s1 * ( s1 + 2 * b1 ) + c;\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t} else {\n\n\t\t\t// Ray and segment are parallel.\n\n\t\t\ts1 = ( a01 > 0 ) ? - segExtent : segExtent;\n\t\t\ts0 = Math.max( 0, - ( a01 * s1 + b0 ) );\n\t\t\tsqrDist = - s0 * s0 + s1 * ( s1 + 2 * b1 ) + c;\n\n\t\t}\n\n\t\tif ( optionalPointOnRay ) {\n\n\t\t\toptionalPointOnRay.copy( this.direction ).multiplyScalar( s0 ).add( this.origin );\n\n\t\t}\n\n\t\tif ( optionalPointOnSegment ) {\n\n\t\t\toptionalPointOnSegment.copy( _segDir ).multiplyScalar( s1 ).add( _segCenter );\n\n\t\t}\n\n\t\treturn sqrDist;\n\n\t}\n\n\tintersectSphere( sphere, target ) {\n\n\t\t_vector.subVectors( sphere.center, this.origin );\n\t\tconst tca = _vector.dot( this.direction );\n\t\tconst d2 = _vector.dot( _vector ) - tca * tca;\n\t\tconst radius2 = sphere.radius * sphere.radius;\n\n\t\tif ( d2 > radius2 ) return null;\n\n\t\tconst thc = Math.sqrt( radius2 - d2 );\n\n\t\t// t0 = first intersect point - entrance on front of sphere\n\t\tconst t0 = tca - thc;\n\n\t\t// t1 = second intersect point - exit point on back of sphere\n\t\tconst t1 = tca + thc;\n\n\t\t// test to see if both t0 and t1 are behind the ray - if so, return null\n\t\tif ( t0 < 0 && t1 < 0 ) return null;\n\n\t\t// test to see if t0 is behind the ray:\n\t\t// if it is, the ray is inside the sphere, so return the second exit point scaled by t1,\n\t\t// in order to always return an intersect point that is in front of the ray.\n\t\tif ( t0 < 0 ) return this.at( t1, target );\n\n\t\t// else t0 is in front of the ray, so return the first collision point scaled by t0\n\t\treturn this.at( t0, target );\n\n\t}\n\n\tintersectsSphere( sphere ) {\n\n\t\treturn this.distanceSqToPoint( sphere.center ) <= ( sphere.radius * sphere.radius );\n\n\t}\n\n\tdistanceToPlane( plane ) {\n\n\t\tconst denominator = plane.normal.dot( this.direction );\n\n\t\tif ( denominator === 0 ) {\n\n\t\t\t// line is coplanar, return origin\n\t\t\tif ( plane.distanceToPoint( this.origin ) === 0 ) {\n\n\t\t\t\treturn 0;\n\n\t\t\t}\n\n\t\t\t// Null is preferable to undefined since undefined means.... it is undefined\n\n\t\t\treturn null;\n\n\t\t}\n\n\t\tconst t = - ( this.origin.dot( plane.normal ) + plane.constant ) / denominator;\n\n\t\t// Return if the ray never intersects the plane\n\n\t\treturn t >= 0 ? t : null;\n\n\t}\n\n\tintersectPlane( plane, target ) {\n\n\t\tconst t = this.distanceToPlane( plane );\n\n\t\tif ( t === null ) {\n\n\t\t\treturn null;\n\n\t\t}\n\n\t\treturn this.at( t, target );\n\n\t}\n\n\tintersectsPlane( plane ) {\n\n\t\t// check if the ray lies on the plane first\n\n\t\tconst distToPoint = plane.distanceToPoint( this.origin );\n\n\t\tif ( distToPoint === 0 ) {\n\n\t\t\treturn true;\n\n\t\t}\n\n\t\tconst denominator = plane.normal.dot( this.direction );\n\n\t\tif ( denominator * distToPoint < 0 ) {\n\n\t\t\treturn true;\n\n\t\t}\n\n\t\t// ray origin is behind the plane (and is pointing behind it)\n\n\t\treturn false;\n\n\t}\n\n\tintersectBox( box, target ) {\n\n\t\tlet tmin, tmax, tymin, tymax, tzmin, tzmax;\n\n\t\tconst invdirx = 1 / this.direction.x,\n\t\t\tinvdiry = 1 / this.direction.y,\n\t\t\tinvdirz = 1 / this.direction.z;\n\n\t\tconst origin = this.origin;\n\n\t\tif ( invdirx >= 0 ) {\n\n\t\t\ttmin = ( box.min.x - origin.x ) * invdirx;\n\t\t\ttmax = ( box.max.x - origin.x ) * invdirx;\n\n\t\t} else {\n\n\t\t\ttmin = ( box.max.x - origin.x ) * invdirx;\n\t\t\ttmax = ( box.min.x - origin.x ) * invdirx;\n\n\t\t}\n\n\t\tif ( invdiry >= 0 ) {\n\n\t\t\ttymin = ( box.min.y - origin.y ) * invdiry;\n\t\t\ttymax = ( box.max.y - origin.y ) * invdiry;\n\n\t\t} else {\n\n\t\t\ttymin = ( box.max.y - origin.y ) * invdiry;\n\t\t\ttymax = ( box.min.y - origin.y ) * invdiry;\n\n\t\t}\n\n\t\tif ( ( tmin > tymax ) || ( tymin > tmax ) ) return null;\n\n\t\t// These lines also handle the case where tmin or tmax is NaN\n\t\t// (result of 0 * Infinity). x !== x returns true if x is NaN\n\n\t\tif ( tymin > tmin || tmin !== tmin ) tmin = tymin;\n\n\t\tif ( tymax < tmax || tmax !== tmax ) tmax = tymax;\n\n\t\tif ( invdirz >= 0 ) {\n\n\t\t\ttzmin = ( box.min.z - origin.z ) * invdirz;\n\t\t\ttzmax = ( box.max.z - origin.z ) * invdirz;\n\n\t\t} else {\n\n\t\t\ttzmin = ( box.max.z - origin.z ) * invdirz;\n\t\t\ttzmax = ( box.min.z - origin.z ) * invdirz;\n\n\t\t}\n\n\t\tif ( ( tmin > tzmax ) || ( tzmin > tmax ) ) return null;\n\n\t\tif ( tzmin > tmin || tmin !== tmin ) tmin = tzmin;\n\n\t\tif ( tzmax < tmax || tmax !== tmax ) tmax = tzmax;\n\n\t\t//return point closest to the ray (positive side)\n\n\t\tif ( tmax < 0 ) return null;\n\n\t\treturn this.at( tmin >= 0 ? tmin : tmax, target );\n\n\t}\n\n\tintersectsBox( box ) {\n\n\t\treturn this.intersectBox( box, _vector ) !== null;\n\n\t}\n\n\tintersectTriangle( a, b, c, backfaceCulling, target ) {\n\n\t\t// Compute the offset origin, edges, and normal.\n\n\t\t// from http://www.geometrictools.com/GTEngine/Include/Mathematics/GteIntrRay3Triangle3.h\n\n\t\t_edge1.subVectors( b, a );\n\t\t_edge2.subVectors( c, a );\n\t\t_normal.crossVectors( _edge1, _edge2 );\n\n\t\t// Solve Q + t*D = b1*E1 + b2*E2 (Q = kDiff, D = ray direction,\n\t\t// E1 = kEdge1, E2 = kEdge2, N = Cross(E1,E2)) by\n\t\t//   |Dot(D,N)|*b1 = sign(Dot(D,N))*Dot(D,Cross(Q,E2))\n\t\t//   |Dot(D,N)|*b2 = sign(Dot(D,N))*Dot(D,Cross(E1,Q))\n\t\t//   |Dot(D,N)|*t = -sign(Dot(D,N))*Dot(Q,N)\n\t\tlet DdN = this.direction.dot( _normal );\n\t\tlet sign;\n\n\t\tif ( DdN > 0 ) {\n\n\t\t\tif ( backfaceCulling ) return null;\n\t\t\tsign = 1;\n\n\t\t} else if ( DdN < 0 ) {\n\n\t\t\tsign = - 1;\n\t\t\tDdN = - DdN;\n\n\t\t} else {\n\n\t\t\treturn null;\n\n\t\t}\n\n\t\t_diff.subVectors( this.origin, a );\n\t\tconst DdQxE2 = sign * this.direction.dot( _edge2.crossVectors( _diff, _edge2 ) );\n\n\t\t// b1 < 0, no intersection\n\t\tif ( DdQxE2 < 0 ) {\n\n\t\t\treturn null;\n\n\t\t}\n\n\t\tconst DdE1xQ = sign * this.direction.dot( _edge1.cross( _diff ) );\n\n\t\t// b2 < 0, no intersection\n\t\tif ( DdE1xQ < 0 ) {\n\n\t\t\treturn null;\n\n\t\t}\n\n\t\t// b1+b2 > 1, no intersection\n\t\tif ( DdQxE2 + DdE1xQ > DdN ) {\n\n\t\t\treturn null;\n\n\t\t}\n\n\t\t// Line intersects triangle, check if ray does.\n\t\tconst QdN = - sign * _diff.dot( _normal );\n\n\t\t// t < 0, no intersection\n\t\tif ( QdN < 0 ) {\n\n\t\t\treturn null;\n\n\t\t}\n\n\t\t// Ray intersects triangle.\n\t\treturn this.at( QdN / DdN, target );\n\n\t}\n\n\tapplyMatrix4( matrix4 ) {\n\n\t\tthis.origin.applyMatrix4( matrix4 );\n\t\tthis.direction.transformDirection( matrix4 );\n\n\t\treturn this;\n\n\t}\n\n\tequals( ray ) {\n\n\t\treturn ray.origin.equals( this.origin ) && ray.direction.equals( this.direction );\n\n\t}\n\n\tclone() {\n\n\t\treturn new this.constructor().copy( this );\n\n\t}\n\n}\n\nexport { Ray };\n","import { Vector3 } from './Vector3.js';\nimport { Plane } from './Plane.js';\n\nconst _v0 = /*@__PURE__*/ new Vector3();\nconst _v1 = /*@__PURE__*/ new Vector3();\nconst _v2 = /*@__PURE__*/ new Vector3();\nconst _v3 = /*@__PURE__*/ new Vector3();\n\nconst _vab = /*@__PURE__*/ new Vector3();\nconst _vac = /*@__PURE__*/ new Vector3();\nconst _vbc = /*@__PURE__*/ new Vector3();\nconst _vap = /*@__PURE__*/ new Vector3();\nconst _vbp = /*@__PURE__*/ new Vector3();\nconst _vcp = /*@__PURE__*/ new Vector3();\n\nclass Triangle {\n\n\tconstructor( a = new Vector3(), b = new Vector3(), c = new Vector3() ) {\n\n\t\tthis.a = a;\n\t\tthis.b = b;\n\t\tthis.c = c;\n\n\t}\n\n\tstatic getNormal( a, b, c, target ) {\n\n\t\tif ( target === undefined ) {\n\n\t\t\tconsole.warn( 'THREE.Triangle: .getNormal() target is now required' );\n\t\t\ttarget = new Vector3();\n\n\t\t}\n\n\t\ttarget.subVectors( c, b );\n\t\t_v0.subVectors( a, b );\n\t\ttarget.cross( _v0 );\n\n\t\tconst targetLengthSq = target.lengthSq();\n\t\tif ( targetLengthSq > 0 ) {\n\n\t\t\treturn target.multiplyScalar( 1 / Math.sqrt( targetLengthSq ) );\n\n\t\t}\n\n\t\treturn target.set( 0, 0, 0 );\n\n\t}\n\n\t// static/instance method to calculate barycentric coordinates\n\t// based on: http://www.blackpawn.com/texts/pointinpoly/default.html\n\tstatic getBarycoord( point, a, b, c, target ) {\n\n\t\t_v0.subVectors( c, a );\n\t\t_v1.subVectors( b, a );\n\t\t_v2.subVectors( point, a );\n\n\t\tconst dot00 = _v0.dot( _v0 );\n\t\tconst dot01 = _v0.dot( _v1 );\n\t\tconst dot02 = _v0.dot( _v2 );\n\t\tconst dot11 = _v1.dot( _v1 );\n\t\tconst dot12 = _v1.dot( _v2 );\n\n\t\tconst denom = ( dot00 * dot11 - dot01 * dot01 );\n\n\t\tif ( target === undefined ) {\n\n\t\t\tconsole.warn( 'THREE.Triangle: .getBarycoord() target is now required' );\n\t\t\ttarget = new Vector3();\n\n\t\t}\n\n\t\t// collinear or singular triangle\n\t\tif ( denom === 0 ) {\n\n\t\t\t// arbitrary location outside of triangle?\n\t\t\t// not sure if this is the best idea, maybe should be returning undefined\n\t\t\treturn target.set( - 2, - 1, - 1 );\n\n\t\t}\n\n\t\tconst invDenom = 1 / denom;\n\t\tconst u = ( dot11 * dot02 - dot01 * dot12 ) * invDenom;\n\t\tconst v = ( dot00 * dot12 - dot01 * dot02 ) * invDenom;\n\n\t\t// barycentric coordinates must always sum to 1\n\t\treturn target.set( 1 - u - v, v, u );\n\n\t}\n\n\tstatic containsPoint( point, a, b, c ) {\n\n\t\tthis.getBarycoord( point, a, b, c, _v3 );\n\n\t\treturn ( _v3.x >= 0 ) && ( _v3.y >= 0 ) && ( ( _v3.x + _v3.y ) <= 1 );\n\n\t}\n\n\tstatic getUV( point, p1, p2, p3, uv1, uv2, uv3, target ) {\n\n\t\tthis.getBarycoord( point, p1, p2, p3, _v3 );\n\n\t\ttarget.set( 0, 0 );\n\t\ttarget.addScaledVector( uv1, _v3.x );\n\t\ttarget.addScaledVector( uv2, _v3.y );\n\t\ttarget.addScaledVector( uv3, _v3.z );\n\n\t\treturn target;\n\n\t}\n\n\tstatic isFrontFacing( a, b, c, direction ) {\n\n\t\t_v0.subVectors( c, b );\n\t\t_v1.subVectors( a, b );\n\n\t\t// strictly front facing\n\t\treturn ( _v0.cross( _v1 ).dot( direction ) < 0 ) ? true : false;\n\n\t}\n\n\tset( a, b, c ) {\n\n\t\tthis.a.copy( a );\n\t\tthis.b.copy( b );\n\t\tthis.c.copy( c );\n\n\t\treturn this;\n\n\t}\n\n\tsetFromPointsAndIndices( points, i0, i1, i2 ) {\n\n\t\tthis.a.copy( points[ i0 ] );\n\t\tthis.b.copy( points[ i1 ] );\n\t\tthis.c.copy( points[ i2 ] );\n\n\t\treturn this;\n\n\t}\n\n\tclone() {\n\n\t\treturn new this.constructor().copy( this );\n\n\t}\n\n\tcopy( triangle ) {\n\n\t\tthis.a.copy( triangle.a );\n\t\tthis.b.copy( triangle.b );\n\t\tthis.c.copy( triangle.c );\n\n\t\treturn this;\n\n\t}\n\n\tgetArea() {\n\n\t\t_v0.subVectors( this.c, this.b );\n\t\t_v1.subVectors( this.a, this.b );\n\n\t\treturn _v0.cross( _v1 ).length() * 0.5;\n\n\t}\n\n\tgetMidpoint( target ) {\n\n\t\tif ( target === undefined ) {\n\n\t\t\tconsole.warn( 'THREE.Triangle: .getMidpoint() target is now required' );\n\t\t\ttarget = new Vector3();\n\n\t\t}\n\n\t\treturn target.addVectors( this.a, this.b ).add( this.c ).multiplyScalar( 1 / 3 );\n\n\t}\n\n\tgetNormal( target ) {\n\n\t\treturn Triangle.getNormal( this.a, this.b, this.c, target );\n\n\t}\n\n\tgetPlane( target ) {\n\n\t\tif ( target === undefined ) {\n\n\t\t\tconsole.warn( 'THREE.Triangle: .getPlane() target is now required' );\n\t\t\ttarget = new Plane();\n\n\t\t}\n\n\t\treturn target.setFromCoplanarPoints( this.a, this.b, this.c );\n\n\t}\n\n\tgetBarycoord( point, target ) {\n\n\t\treturn Triangle.getBarycoord( point, this.a, this.b, this.c, target );\n\n\t}\n\n\tgetUV( point, uv1, uv2, uv3, target ) {\n\n\t\treturn Triangle.getUV( point, this.a, this.b, this.c, uv1, uv2, uv3, target );\n\n\t}\n\n\tcontainsPoint( point ) {\n\n\t\treturn Triangle.containsPoint( point, this.a, this.b, this.c );\n\n\t}\n\n\tisFrontFacing( direction ) {\n\n\t\treturn Triangle.isFrontFacing( this.a, this.b, this.c, direction );\n\n\t}\n\n\tintersectsBox( box ) {\n\n\t\treturn box.intersectsTriangle( this );\n\n\t}\n\n\tclosestPointToPoint( p, target ) {\n\n\t\tif ( target === undefined ) {\n\n\t\t\tconsole.warn( 'THREE.Triangle: .closestPointToPoint() target is now required' );\n\t\t\ttarget = new Vector3();\n\n\t\t}\n\n\t\tconst a = this.a, b = this.b, c = this.c;\n\t\tlet v, w;\n\n\t\t// algorithm thanks to Real-Time Collision Detection by Christer Ericson,\n\t\t// published by Morgan Kaufmann Publishers, (c) 2005 Elsevier Inc.,\n\t\t// under the accompanying license; see chapter 5.1.5 for detailed explanation.\n\t\t// basically, we're distinguishing which of the voronoi regions of the triangle\n\t\t// the point lies in with the minimum amount of redundant computation.\n\n\t\t_vab.subVectors( b, a );\n\t\t_vac.subVectors( c, a );\n\t\t_vap.subVectors( p, a );\n\t\tconst d1 = _vab.dot( _vap );\n\t\tconst d2 = _vac.dot( _vap );\n\t\tif ( d1 <= 0 && d2 <= 0 ) {\n\n\t\t\t// vertex region of A; barycentric coords (1, 0, 0)\n\t\t\treturn target.copy( a );\n\n\t\t}\n\n\t\t_vbp.subVectors( p, b );\n\t\tconst d3 = _vab.dot( _vbp );\n\t\tconst d4 = _vac.dot( _vbp );\n\t\tif ( d3 >= 0 && d4 <= d3 ) {\n\n\t\t\t// vertex region of B; barycentric coords (0, 1, 0)\n\t\t\treturn target.copy( b );\n\n\t\t}\n\n\t\tconst vc = d1 * d4 - d3 * d2;\n\t\tif ( vc <= 0 && d1 >= 0 && d3 <= 0 ) {\n\n\t\t\tv = d1 / ( d1 - d3 );\n\t\t\t// edge region of AB; barycentric coords (1-v, v, 0)\n\t\t\treturn target.copy( a ).addScaledVector( _vab, v );\n\n\t\t}\n\n\t\t_vcp.subVectors( p, c );\n\t\tconst d5 = _vab.dot( _vcp );\n\t\tconst d6 = _vac.dot( _vcp );\n\t\tif ( d6 >= 0 && d5 <= d6 ) {\n\n\t\t\t// vertex region of C; barycentric coords (0, 0, 1)\n\t\t\treturn target.copy( c );\n\n\t\t}\n\n\t\tconst vb = d5 * d2 - d1 * d6;\n\t\tif ( vb <= 0 && d2 >= 0 && d6 <= 0 ) {\n\n\t\t\tw = d2 / ( d2 - d6 );\n\t\t\t// edge region of AC; barycentric coords (1-w, 0, w)\n\t\t\treturn target.copy( a ).addScaledVector( _vac, w );\n\n\t\t}\n\n\t\tconst va = d3 * d6 - d5 * d4;\n\t\tif ( va <= 0 && ( d4 - d3 ) >= 0 && ( d5 - d6 ) >= 0 ) {\n\n\t\t\t_vbc.subVectors( c, b );\n\t\t\tw = ( d4 - d3 ) / ( ( d4 - d3 ) + ( d5 - d6 ) );\n\t\t\t// edge region of BC; barycentric coords (0, 1-w, w)\n\t\t\treturn target.copy( b ).addScaledVector( _vbc, w ); // edge region of BC\n\n\t\t}\n\n\t\t// face region\n\t\tconst denom = 1 / ( va + vb + vc );\n\t\t// u = va * denom\n\t\tv = vb * denom;\n\t\tw = vc * denom;\n\n\t\treturn target.copy( a ).addScaledVector( _vab, v ).addScaledVector( _vac, w );\n\n\t}\n\n\tequals( triangle ) {\n\n\t\treturn triangle.a.equals( this.a ) && triangle.b.equals( this.b ) && triangle.c.equals( this.c );\n\n\t}\n\n}\n\nexport { Triangle };\n","import { Material } from './Material.js';\nimport { MultiplyOperation } from '../constants.js';\nimport { Color } from '../math/Color.js';\n\n/**\n * parameters = {\n *  color: <hex>,\n *  opacity: <float>,\n *  map: new THREE.Texture( <Image> ),\n *\n *  lightMap: new THREE.Texture( <Image> ),\n *  lightMapIntensity: <float>\n *\n *  aoMap: new THREE.Texture( <Image> ),\n *  aoMapIntensity: <float>\n *\n *  specularMap: new THREE.Texture( <Image> ),\n *\n *  alphaMap: new THREE.Texture( <Image> ),\n *\n *  envMap: new THREE.CubeTexture( [posx, negx, posy, negy, posz, negz] ),\n *  combine: THREE.Multiply,\n *  reflectivity: <float>,\n *  refractionRatio: <float>,\n *\n *  depthTest: <bool>,\n *  depthWrite: <bool>,\n *\n *  wireframe: <boolean>,\n *  wireframeLinewidth: <float>,\n *\n *  skinning: <bool>,\n *  morphTargets: <bool>\n * }\n */\n\nclass MeshBasicMaterial extends Material {\n\n\tconstructor( parameters ) {\n\n\t\tsuper();\n\n\t\tthis.type = 'MeshBasicMaterial';\n\n\t\tthis.color = new Color( 0xffffff ); // emissive\n\n\t\tthis.map = null;\n\n\t\tthis.lightMap = null;\n\t\tthis.lightMapIntensity = 1.0;\n\n\t\tthis.aoMap = null;\n\t\tthis.aoMapIntensity = 1.0;\n\n\t\tthis.specularMap = null;\n\n\t\tthis.alphaMap = null;\n\n\t\tthis.envMap = null;\n\t\tthis.combine = MultiplyOperation;\n\t\tthis.reflectivity = 1;\n\t\tthis.refractionRatio = 0.98;\n\n\t\tthis.wireframe = false;\n\t\tthis.wireframeLinewidth = 1;\n\t\tthis.wireframeLinecap = 'round';\n\t\tthis.wireframeLinejoin = 'round';\n\n\t\tthis.skinning = false;\n\t\tthis.morphTargets = false;\n\n\t\tthis.setValues( parameters );\n\n\t}\n\n\tcopy( source ) {\n\n\t\tsuper.copy( source );\n\n\t\tthis.color.copy( source.color );\n\n\t\tthis.map = source.map;\n\n\t\tthis.lightMap = source.lightMap;\n\t\tthis.lightMapIntensity = source.lightMapIntensity;\n\n\t\tthis.aoMap = source.aoMap;\n\t\tthis.aoMapIntensity = source.aoMapIntensity;\n\n\t\tthis.specularMap = source.specularMap;\n\n\t\tthis.alphaMap = source.alphaMap;\n\n\t\tthis.envMap = source.envMap;\n\t\tthis.combine = source.combine;\n\t\tthis.reflectivity = source.reflectivity;\n\t\tthis.refractionRatio = source.refractionRatio;\n\n\t\tthis.wireframe = source.wireframe;\n\t\tthis.wireframeLinewidth = source.wireframeLinewidth;\n\t\tthis.wireframeLinecap = source.wireframeLinecap;\n\t\tthis.wireframeLinejoin = source.wireframeLinejoin;\n\n\t\tthis.skinning = source.skinning;\n\t\tthis.morphTargets = source.morphTargets;\n\n\t\treturn this;\n\n\t}\n\n}\n\nMeshBasicMaterial.prototype.isMeshBasicMaterial = true;\n\nexport { MeshBasicMaterial };\n","import { Vector3 } from '../math/Vector3.js';\nimport { Vector2 } from '../math/Vector2.js';\nimport { Sphere } from '../math/Sphere.js';\nimport { Ray } from '../math/Ray.js';\nimport { Matrix4 } from '../math/Matrix4.js';\nimport { Object3D } from '../core/Object3D.js';\nimport { Triangle } from '../math/Triangle.js';\nimport { DoubleSide, BackSide } from '../constants.js';\nimport { MeshBasicMaterial } from '../materials/MeshBasicMaterial.js';\nimport { BufferGeometry } from '../core/BufferGeometry.js';\n\nconst _inverseMatrix = new Matrix4();\nconst _ray = new Ray();\nconst _sphere = new Sphere();\n\nconst _vA = new Vector3();\nconst _vB = new Vector3();\nconst _vC = new Vector3();\n\nconst _tempA = new Vector3();\nconst _tempB = new Vector3();\nconst _tempC = new Vector3();\n\nconst _morphA = new Vector3();\nconst _morphB = new Vector3();\nconst _morphC = new Vector3();\n\nconst _uvA = new Vector2();\nconst _uvB = new Vector2();\nconst _uvC = new Vector2();\n\nconst _intersectionPoint = new Vector3();\nconst _intersectionPointWorld = new Vector3();\n\nfunction Mesh( geometry = new BufferGeometry(), material = new MeshBasicMaterial() ) {\n\n\tObject3D.call( this );\n\n\tthis.type = 'Mesh';\n\n\tthis.geometry = geometry;\n\tthis.material = material;\n\n\tthis.updateMorphTargets();\n\n}\n\nMesh.prototype = Object.assign( Object.create( Object3D.prototype ), {\n\n\tconstructor: Mesh,\n\n\tisMesh: true,\n\n\tcopy: function ( source ) {\n\n\t\tObject3D.prototype.copy.call( this, source );\n\n\t\tif ( source.morphTargetInfluences !== undefined ) {\n\n\t\t\tthis.morphTargetInfluences = source.morphTargetInfluences.slice();\n\n\t\t}\n\n\t\tif ( source.morphTargetDictionary !== undefined ) {\n\n\t\t\tthis.morphTargetDictionary = Object.assign( {}, source.morphTargetDictionary );\n\n\t\t}\n\n\t\tthis.material = source.material;\n\t\tthis.geometry = source.geometry;\n\n\t\treturn this;\n\n\t},\n\n\tupdateMorphTargets: function () {\n\n\t\tconst geometry = this.geometry;\n\n\t\tif ( geometry.isBufferGeometry ) {\n\n\t\t\tconst morphAttributes = geometry.morphAttributes;\n\t\t\tconst keys = Object.keys( morphAttributes );\n\n\t\t\tif ( keys.length > 0 ) {\n\n\t\t\t\tconst morphAttribute = morphAttributes[ keys[ 0 ] ];\n\n\t\t\t\tif ( morphAttribute !== undefined ) {\n\n\t\t\t\t\tthis.morphTargetInfluences = [];\n\t\t\t\t\tthis.morphTargetDictionary = {};\n\n\t\t\t\t\tfor ( let m = 0, ml = morphAttribute.length; m < ml; m ++ ) {\n\n\t\t\t\t\t\tconst name = morphAttribute[ m ].name || String( m );\n\n\t\t\t\t\t\tthis.morphTargetInfluences.push( 0 );\n\t\t\t\t\t\tthis.morphTargetDictionary[ name ] = m;\n\n\t\t\t\t\t}\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t} else {\n\n\t\t\tconst morphTargets = geometry.morphTargets;\n\n\t\t\tif ( morphTargets !== undefined && morphTargets.length > 0 ) {\n\n\t\t\t\tconsole.error( 'THREE.Mesh.updateMorphTargets() no longer supports THREE.Geometry. Use THREE.BufferGeometry instead.' );\n\n\t\t\t}\n\n\t\t}\n\n\t},\n\n\traycast: function ( raycaster, intersects ) {\n\n\t\tconst geometry = this.geometry;\n\t\tconst material = this.material;\n\t\tconst matrixWorld = this.matrixWorld;\n\n\t\tif ( material === undefined ) return;\n\n\t\t// Checking boundingSphere distance to ray\n\n\t\tif ( geometry.boundingSphere === null ) geometry.computeBoundingSphere();\n\n\t\t_sphere.copy( geometry.boundingSphere );\n\t\t_sphere.applyMatrix4( matrixWorld );\n\n\t\tif ( raycaster.ray.intersectsSphere( _sphere ) === false ) return;\n\n\t\t//\n\n\t\t_inverseMatrix.copy( matrixWorld ).invert();\n\t\t_ray.copy( raycaster.ray ).applyMatrix4( _inverseMatrix );\n\n\t\t// Check boundingBox before continuing\n\n\t\tif ( geometry.boundingBox !== null ) {\n\n\t\t\tif ( _ray.intersectsBox( geometry.boundingBox ) === false ) return;\n\n\t\t}\n\n\t\tlet intersection;\n\n\t\tif ( geometry.isBufferGeometry ) {\n\n\t\t\tconst index = geometry.index;\n\t\t\tconst position = geometry.attributes.position;\n\t\t\tconst morphPosition = geometry.morphAttributes.position;\n\t\t\tconst morphTargetsRelative = geometry.morphTargetsRelative;\n\t\t\tconst uv = geometry.attributes.uv;\n\t\t\tconst uv2 = geometry.attributes.uv2;\n\t\t\tconst groups = geometry.groups;\n\t\t\tconst drawRange = geometry.drawRange;\n\n\t\t\tif ( index !== null ) {\n\n\t\t\t\t// indexed buffer geometry\n\n\t\t\t\tif ( Array.isArray( material ) ) {\n\n\t\t\t\t\tfor ( let i = 0, il = groups.length; i < il; i ++ ) {\n\n\t\t\t\t\t\tconst group = groups[ i ];\n\t\t\t\t\t\tconst groupMaterial = material[ group.materialIndex ];\n\n\t\t\t\t\t\tconst start = Math.max( group.start, drawRange.start );\n\t\t\t\t\t\tconst end = Math.min( ( group.start + group.count ), ( drawRange.start + drawRange.count ) );\n\n\t\t\t\t\t\tfor ( let j = start, jl = end; j < jl; j += 3 ) {\n\n\t\t\t\t\t\t\tconst a = index.getX( j );\n\t\t\t\t\t\t\tconst b = index.getX( j + 1 );\n\t\t\t\t\t\t\tconst c = index.getX( j + 2 );\n\n\t\t\t\t\t\t\tintersection = checkBufferGeometryIntersection( this, groupMaterial, raycaster, _ray, position, morphPosition, morphTargetsRelative, uv, uv2, a, b, c );\n\n\t\t\t\t\t\t\tif ( intersection ) {\n\n\t\t\t\t\t\t\t\tintersection.faceIndex = Math.floor( j / 3 ); // triangle number in indexed buffer semantics\n\t\t\t\t\t\t\t\tintersection.face.materialIndex = group.materialIndex;\n\t\t\t\t\t\t\t\tintersects.push( intersection );\n\n\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t}\n\n\t\t\t\t\t}\n\n\t\t\t\t} else {\n\n\t\t\t\t\tconst start = Math.max( 0, drawRange.start );\n\t\t\t\t\tconst end = Math.min( index.count, ( drawRange.start + drawRange.count ) );\n\n\t\t\t\t\tfor ( let i = start, il = end; i < il; i += 3 ) {\n\n\t\t\t\t\t\tconst a = index.getX( i );\n\t\t\t\t\t\tconst b = index.getX( i + 1 );\n\t\t\t\t\t\tconst c = index.getX( i + 2 );\n\n\t\t\t\t\t\tintersection = checkBufferGeometryIntersection( this, material, raycaster, _ray, position, morphPosition, morphTargetsRelative, uv, uv2, a, b, c );\n\n\t\t\t\t\t\tif ( intersection ) {\n\n\t\t\t\t\t\t\tintersection.faceIndex = Math.floor( i / 3 ); // triangle number in indexed buffer semantics\n\t\t\t\t\t\t\tintersects.push( intersection );\n\n\t\t\t\t\t\t}\n\n\t\t\t\t\t}\n\n\t\t\t\t}\n\n\t\t\t} else if ( position !== undefined ) {\n\n\t\t\t\t// non-indexed buffer geometry\n\n\t\t\t\tif ( Array.isArray( material ) ) {\n\n\t\t\t\t\tfor ( let i = 0, il = groups.length; i < il; i ++ ) {\n\n\t\t\t\t\t\tconst group = groups[ i ];\n\t\t\t\t\t\tconst groupMaterial = material[ group.materialIndex ];\n\n\t\t\t\t\t\tconst start = Math.max( group.start, drawRange.start );\n\t\t\t\t\t\tconst end = Math.min( ( group.start + group.count ), ( drawRange.start + drawRange.count ) );\n\n\t\t\t\t\t\tfor ( let j = start, jl = end; j < jl; j += 3 ) {\n\n\t\t\t\t\t\t\tconst a = j;\n\t\t\t\t\t\t\tconst b = j + 1;\n\t\t\t\t\t\t\tconst c = j + 2;\n\n\t\t\t\t\t\t\tintersection = checkBufferGeometryIntersection( this, groupMaterial, raycaster, _ray, position, morphPosition, morphTargetsRelative, uv, uv2, a, b, c );\n\n\t\t\t\t\t\t\tif ( intersection ) {\n\n\t\t\t\t\t\t\t\tintersection.faceIndex = Math.floor( j / 3 ); // triangle number in non-indexed buffer semantics\n\t\t\t\t\t\t\t\tintersection.face.materialIndex = group.materialIndex;\n\t\t\t\t\t\t\t\tintersects.push( intersection );\n\n\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t}\n\n\t\t\t\t\t}\n\n\t\t\t\t} else {\n\n\t\t\t\t\tconst start = Math.max( 0, drawRange.start );\n\t\t\t\t\tconst end = Math.min( position.count, ( drawRange.start + drawRange.count ) );\n\n\t\t\t\t\tfor ( let i = start, il = end; i < il; i += 3 ) {\n\n\t\t\t\t\t\tconst a = i;\n\t\t\t\t\t\tconst b = i + 1;\n\t\t\t\t\t\tconst c = i + 2;\n\n\t\t\t\t\t\tintersection = checkBufferGeometryIntersection( this, material, raycaster, _ray, position, morphPosition, morphTargetsRelative, uv, uv2, a, b, c );\n\n\t\t\t\t\t\tif ( intersection ) {\n\n\t\t\t\t\t\t\tintersection.faceIndex = Math.floor( i / 3 ); // triangle number in non-indexed buffer semantics\n\t\t\t\t\t\t\tintersects.push( intersection );\n\n\t\t\t\t\t\t}\n\n\t\t\t\t\t}\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t} else if ( geometry.isGeometry ) {\n\n\t\t\tconsole.error( 'THREE.Mesh.raycast() no longer supports THREE.Geometry. Use THREE.BufferGeometry instead.' );\n\n\t\t}\n\n\t}\n\n} );\n\nfunction checkIntersection( object, material, raycaster, ray, pA, pB, pC, point ) {\n\n\tlet intersect;\n\n\tif ( material.side === BackSide ) {\n\n\t\tintersect = ray.intersectTriangle( pC, pB, pA, true, point );\n\n\t} else {\n\n\t\tintersect = ray.intersectTriangle( pA, pB, pC, material.side !== DoubleSide, point );\n\n\t}\n\n\tif ( intersect === null ) return null;\n\n\t_intersectionPointWorld.copy( point );\n\t_intersectionPointWorld.applyMatrix4( object.matrixWorld );\n\n\tconst distance = raycaster.ray.origin.distanceTo( _intersectionPointWorld );\n\n\tif ( distance < raycaster.near || distance > raycaster.far ) return null;\n\n\treturn {\n\t\tdistance: distance,\n\t\tpoint: _intersectionPointWorld.clone(),\n\t\tobject: object\n\t};\n\n}\n\nfunction checkBufferGeometryIntersection( object, material, raycaster, ray, position, morphPosition, morphTargetsRelative, uv, uv2, a, b, c ) {\n\n\t_vA.fromBufferAttribute( position, a );\n\t_vB.fromBufferAttribute( position, b );\n\t_vC.fromBufferAttribute( position, c );\n\n\tconst morphInfluences = object.morphTargetInfluences;\n\n\tif ( material.morphTargets && morphPosition && morphInfluences ) {\n\n\t\t_morphA.set( 0, 0, 0 );\n\t\t_morphB.set( 0, 0, 0 );\n\t\t_morphC.set( 0, 0, 0 );\n\n\t\tfor ( let i = 0, il = morphPosition.length; i < il; i ++ ) {\n\n\t\t\tconst influence = morphInfluences[ i ];\n\t\t\tconst morphAttribute = morphPosition[ i ];\n\n\t\t\tif ( influence === 0 ) continue;\n\n\t\t\t_tempA.fromBufferAttribute( morphAttribute, a );\n\t\t\t_tempB.fromBufferAttribute( morphAttribute, b );\n\t\t\t_tempC.fromBufferAttribute( morphAttribute, c );\n\n\t\t\tif ( morphTargetsRelative ) {\n\n\t\t\t\t_morphA.addScaledVector( _tempA, influence );\n\t\t\t\t_morphB.addScaledVector( _tempB, influence );\n\t\t\t\t_morphC.addScaledVector( _tempC, influence );\n\n\t\t\t} else {\n\n\t\t\t\t_morphA.addScaledVector( _tempA.sub( _vA ), influence );\n\t\t\t\t_morphB.addScaledVector( _tempB.sub( _vB ), influence );\n\t\t\t\t_morphC.addScaledVector( _tempC.sub( _vC ), influence );\n\n\t\t\t}\n\n\t\t}\n\n\t\t_vA.add( _morphA );\n\t\t_vB.add( _morphB );\n\t\t_vC.add( _morphC );\n\n\t}\n\n\tif ( object.isSkinnedMesh && material.skinning ) {\n\n\t\tobject.boneTransform( a, _vA );\n\t\tobject.boneTransform( b, _vB );\n\t\tobject.boneTransform( c, _vC );\n\n\t}\n\n\tconst intersection = checkIntersection( object, material, raycaster, ray, _vA, _vB, _vC, _intersectionPoint );\n\n\tif ( intersection ) {\n\n\t\tif ( uv ) {\n\n\t\t\t_uvA.fromBufferAttribute( uv, a );\n\t\t\t_uvB.fromBufferAttribute( uv, b );\n\t\t\t_uvC.fromBufferAttribute( uv, c );\n\n\t\t\tintersection.uv = Triangle.getUV( _intersectionPoint, _vA, _vB, _vC, _uvA, _uvB, _uvC, new Vector2() );\n\n\t\t}\n\n\t\tif ( uv2 ) {\n\n\t\t\t_uvA.fromBufferAttribute( uv2, a );\n\t\t\t_uvB.fromBufferAttribute( uv2, b );\n\t\t\t_uvC.fromBufferAttribute( uv2, c );\n\n\t\t\tintersection.uv2 = Triangle.getUV( _intersectionPoint, _vA, _vB, _vC, _uvA, _uvB, _uvC, new Vector2() );\n\n\t\t}\n\n\t\tconst face = {\n\t\t\ta: a,\n\t\t\tb: a,\n\t\t\tc: c,\n\t\t\tnormal: new Vector3(),\n\t\t\tmaterialIndex: 0\n\t\t};\n\n\t\tTriangle.getNormal( _vA, _vB, _vC, face.normal );\n\n\t\tintersection.face = face;\n\n\t}\n\n\treturn intersection;\n\n}\n\nexport { Mesh };\n","export default /* glsl */`\n#ifdef USE_ALPHAMAP\n\n\tdiffuseColor.a *= texture2D( alphaMap, vUv ).g;\n\n#endif\n`;\n","import alphamap_fragment from './ShaderChunk/alphamap_fragment.glsl.js';\nimport alphamap_pars_fragment from './ShaderChunk/alphamap_pars_fragment.glsl.js';\nimport alphatest_fragment from './ShaderChunk/alphatest_fragment.glsl.js';\nimport aomap_fragment from './ShaderChunk/aomap_fragment.glsl.js';\nimport aomap_pars_fragment from './ShaderChunk/aomap_pars_fragment.glsl.js';\nimport begin_vertex from './ShaderChunk/begin_vertex.glsl.js';\nimport beginnormal_vertex from './ShaderChunk/beginnormal_vertex.glsl.js';\nimport bsdfs from './ShaderChunk/bsdfs.glsl.js';\nimport bumpmap_pars_fragment from './ShaderChunk/bumpmap_pars_fragment.glsl.js';\nimport clipping_planes_fragment from './ShaderChunk/clipping_planes_fragment.glsl.js';\nimport clipping_planes_pars_fragment from './ShaderChunk/clipping_planes_pars_fragment.glsl.js';\nimport clipping_planes_pars_vertex from './ShaderChunk/clipping_planes_pars_vertex.glsl.js';\nimport clipping_planes_vertex from './ShaderChunk/clipping_planes_vertex.glsl.js';\nimport color_fragment from './ShaderChunk/color_fragment.glsl.js';\nimport color_pars_fragment from './ShaderChunk/color_pars_fragment.glsl.js';\nimport color_pars_vertex from './ShaderChunk/color_pars_vertex.glsl.js';\nimport color_vertex from './ShaderChunk/color_vertex.glsl.js';\nimport common from './ShaderChunk/common.glsl.js';\nimport cube_uv_reflection_fragment from './ShaderChunk/cube_uv_reflection_fragment.glsl.js';\nimport defaultnormal_vertex from './ShaderChunk/defaultnormal_vertex.glsl.js';\nimport displacementmap_pars_vertex from './ShaderChunk/displacementmap_pars_vertex.glsl.js';\nimport displacementmap_vertex from './ShaderChunk/displacementmap_vertex.glsl.js';\nimport emissivemap_fragment from './ShaderChunk/emissivemap_fragment.glsl.js';\nimport emissivemap_pars_fragment from './ShaderChunk/emissivemap_pars_fragment.glsl.js';\nimport encodings_fragment from './ShaderChunk/encodings_fragment.glsl.js';\nimport encodings_pars_fragment from './ShaderChunk/encodings_pars_fragment.glsl.js';\nimport envmap_fragment from './ShaderChunk/envmap_fragment.glsl.js';\nimport envmap_common_pars_fragment from './ShaderChunk/envmap_common_pars_fragment.glsl.js';\nimport envmap_pars_fragment from './ShaderChunk/envmap_pars_fragment.glsl.js';\nimport envmap_pars_vertex from './ShaderChunk/envmap_pars_vertex.glsl.js';\nimport envmap_vertex from './ShaderChunk/envmap_vertex.glsl.js';\nimport fog_vertex from './ShaderChunk/fog_vertex.glsl.js';\nimport fog_pars_vertex from './ShaderChunk/fog_pars_vertex.glsl.js';\nimport fog_fragment from './ShaderChunk/fog_fragment.glsl.js';\nimport fog_pars_fragment from './ShaderChunk/fog_pars_fragment.glsl.js';\nimport gradientmap_pars_fragment from './ShaderChunk/gradientmap_pars_fragment.glsl.js';\nimport lightmap_fragment from './ShaderChunk/lightmap_fragment.glsl.js';\nimport lightmap_pars_fragment from './ShaderChunk/lightmap_pars_fragment.glsl.js';\nimport lights_lambert_vertex from './ShaderChunk/lights_lambert_vertex.glsl.js';\nimport lights_pars_begin from './ShaderChunk/lights_pars_begin.glsl.js';\nimport envmap_physical_pars_fragment from './ShaderChunk/envmap_physical_pars_fragment.glsl.js';\nimport lights_toon_fragment from './ShaderChunk/lights_toon_fragment.glsl.js';\nimport lights_toon_pars_fragment from './ShaderChunk/lights_toon_pars_fragment.glsl.js';\nimport lights_phong_fragment from './ShaderChunk/lights_phong_fragment.glsl.js';\nimport lights_phong_pars_fragment from './ShaderChunk/lights_phong_pars_fragment.glsl.js';\nimport lights_physical_fragment from './ShaderChunk/lights_physical_fragment.glsl.js';\nimport lights_physical_pars_fragment from './ShaderChunk/lights_physical_pars_fragment.glsl.js';\nimport lights_fragment_begin from './ShaderChunk/lights_fragment_begin.glsl.js';\nimport lights_fragment_maps from './ShaderChunk/lights_fragment_maps.glsl.js';\nimport lights_fragment_end from './ShaderChunk/lights_fragment_end.glsl.js';\nimport logdepthbuf_fragment from './ShaderChunk/logdepthbuf_fragment.glsl.js';\nimport logdepthbuf_pars_fragment from './ShaderChunk/logdepthbuf_pars_fragment.glsl.js';\nimport logdepthbuf_pars_vertex from './ShaderChunk/logdepthbuf_pars_vertex.glsl.js';\nimport logdepthbuf_vertex from './ShaderChunk/logdepthbuf_vertex.glsl.js';\nimport map_fragment from './ShaderChunk/map_fragment.glsl.js';\nimport map_pars_fragment from './ShaderChunk/map_pars_fragment.glsl.js';\nimport map_particle_fragment from './ShaderChunk/map_particle_fragment.glsl.js';\nimport map_particle_pars_fragment from './ShaderChunk/map_particle_pars_fragment.glsl.js';\nimport metalnessmap_fragment from './ShaderChunk/metalnessmap_fragment.glsl.js';\nimport metalnessmap_pars_fragment from './ShaderChunk/metalnessmap_pars_fragment.glsl.js';\nimport morphnormal_vertex from './ShaderChunk/morphnormal_vertex.glsl.js';\nimport morphtarget_pars_vertex from './ShaderChunk/morphtarget_pars_vertex.glsl.js';\nimport morphtarget_vertex from './ShaderChunk/morphtarget_vertex.glsl.js';\nimport normal_fragment_begin from './ShaderChunk/normal_fragment_begin.glsl.js';\nimport normal_fragment_maps from './ShaderChunk/normal_fragment_maps.glsl.js';\nimport normalmap_pars_fragment from './ShaderChunk/normalmap_pars_fragment.glsl.js';\nimport clearcoat_normal_fragment_begin from './ShaderChunk/clearcoat_normal_fragment_begin.glsl.js';\nimport clearcoat_normal_fragment_maps from './ShaderChunk/clearcoat_normal_fragment_maps.glsl.js';\nimport clearcoat_pars_fragment from './ShaderChunk/clearcoat_pars_fragment.glsl.js';\nimport packing from './ShaderChunk/packing.glsl.js';\nimport premultiplied_alpha_fragment from './ShaderChunk/premultiplied_alpha_fragment.glsl.js';\nimport project_vertex from './ShaderChunk/project_vertex.glsl.js';\nimport dithering_fragment from './ShaderChunk/dithering_fragment.glsl.js';\nimport dithering_pars_fragment from './ShaderChunk/dithering_pars_fragment.glsl.js';\nimport roughnessmap_fragment from './ShaderChunk/roughnessmap_fragment.glsl.js';\nimport roughnessmap_pars_fragment from './ShaderChunk/roughnessmap_pars_fragment.glsl.js';\nimport shadowmap_pars_fragment from './ShaderChunk/shadowmap_pars_fragment.glsl.js';\nimport shadowmap_pars_vertex from './ShaderChunk/shadowmap_pars_vertex.glsl.js';\nimport shadowmap_vertex from './ShaderChunk/shadowmap_vertex.glsl.js';\nimport shadowmask_pars_fragment from './ShaderChunk/shadowmask_pars_fragment.glsl.js';\nimport skinbase_vertex from './ShaderChunk/skinbase_vertex.glsl.js';\nimport skinning_pars_vertex from './ShaderChunk/skinning_pars_vertex.glsl.js';\nimport skinning_vertex from './ShaderChunk/skinning_vertex.glsl.js';\nimport skinnormal_vertex from './ShaderChunk/skinnormal_vertex.glsl.js';\nimport specularmap_fragment from './ShaderChunk/specularmap_fragment.glsl.js';\nimport specularmap_pars_fragment from './ShaderChunk/specularmap_pars_fragment.glsl.js';\nimport tonemapping_fragment from './ShaderChunk/tonemapping_fragment.glsl.js';\nimport tonemapping_pars_fragment from './ShaderChunk/tonemapping_pars_fragment.glsl.js';\nimport transmissionmap_fragment from './ShaderChunk/transmissionmap_fragment.glsl.js';\nimport transmissionmap_pars_fragment from './ShaderChunk/transmissionmap_pars_fragment.glsl.js';\nimport uv_pars_fragment from './ShaderChunk/uv_pars_fragment.glsl.js';\nimport uv_pars_vertex from './ShaderChunk/uv_pars_vertex.glsl.js';\nimport uv_vertex from './ShaderChunk/uv_vertex.glsl.js';\nimport uv2_pars_fragment from './ShaderChunk/uv2_pars_fragment.glsl.js';\nimport uv2_pars_vertex from './ShaderChunk/uv2_pars_vertex.glsl.js';\nimport uv2_vertex from './ShaderChunk/uv2_vertex.glsl.js';\nimport worldpos_vertex from './ShaderChunk/worldpos_vertex.glsl.js';\n\nimport background_frag from './ShaderLib/background_frag.glsl.js';\nimport background_vert from './ShaderLib/background_vert.glsl.js';\nimport cube_frag from './ShaderLib/cube_frag.glsl.js';\nimport cube_vert from './ShaderLib/cube_vert.glsl.js';\nimport depth_frag from './ShaderLib/depth_frag.glsl.js';\nimport depth_vert from './ShaderLib/depth_vert.glsl.js';\nimport distanceRGBA_frag from './ShaderLib/distanceRGBA_frag.glsl.js';\nimport distanceRGBA_vert from './ShaderLib/distanceRGBA_vert.glsl.js';\nimport equirect_frag from './ShaderLib/equirect_frag.glsl.js';\nimport equirect_vert from './ShaderLib/equirect_vert.glsl.js';\nimport linedashed_frag from './ShaderLib/linedashed_frag.glsl.js';\nimport linedashed_vert from './ShaderLib/linedashed_vert.glsl.js';\nimport meshbasic_frag from './ShaderLib/meshbasic_frag.glsl.js';\nimport meshbasic_vert from './ShaderLib/meshbasic_vert.glsl.js';\nimport meshlambert_frag from './ShaderLib/meshlambert_frag.glsl.js';\nimport meshlambert_vert from './ShaderLib/meshlambert_vert.glsl.js';\nimport meshmatcap_frag from './ShaderLib/meshmatcap_frag.glsl.js';\nimport meshmatcap_vert from './ShaderLib/meshmatcap_vert.glsl.js';\nimport meshtoon_frag from './ShaderLib/meshtoon_frag.glsl.js';\nimport meshtoon_vert from './ShaderLib/meshtoon_vert.glsl.js';\nimport meshphong_frag from './ShaderLib/meshphong_frag.glsl.js';\nimport meshphong_vert from './ShaderLib/meshphong_vert.glsl.js';\nimport meshphysical_frag from './ShaderLib/meshphysical_frag.glsl.js';\nimport meshphysical_vert from './ShaderLib/meshphysical_vert.glsl.js';\nimport normal_frag from './ShaderLib/normal_frag.glsl.js';\nimport normal_vert from './ShaderLib/normal_vert.glsl.js';\nimport points_frag from './ShaderLib/points_frag.glsl.js';\nimport points_vert from './ShaderLib/points_vert.glsl.js';\nimport shadow_frag from './ShaderLib/shadow_frag.glsl.js';\nimport shadow_vert from './ShaderLib/shadow_vert.glsl.js';\nimport sprite_frag from './ShaderLib/sprite_frag.glsl.js';\nimport sprite_vert from './ShaderLib/sprite_vert.glsl.js';\n\nexport const ShaderChunk = {\n\talphamap_fragment: alphamap_fragment,\n\talphamap_pars_fragment: alphamap_pars_fragment,\n\talphatest_fragment: alphatest_fragment,\n\taomap_fragment: aomap_fragment,\n\taomap_pars_fragment: aomap_pars_fragment,\n\tbegin_vertex: begin_vertex,\n\tbeginnormal_vertex: beginnormal_vertex,\n\tbsdfs: bsdfs,\n\tbumpmap_pars_fragment: bumpmap_pars_fragment,\n\tclipping_planes_fragment: clipping_planes_fragment,\n\tclipping_planes_pars_fragment: clipping_planes_pars_fragment,\n\tclipping_planes_pars_vertex: clipping_planes_pars_vertex,\n\tclipping_planes_vertex: clipping_planes_vertex,\n\tcolor_fragment: color_fragment,\n\tcolor_pars_fragment: color_pars_fragment,\n\tcolor_pars_vertex: color_pars_vertex,\n\tcolor_vertex: color_vertex,\n\tcommon: common,\n\tcube_uv_reflection_fragment: cube_uv_reflection_fragment,\n\tdefaultnormal_vertex: defaultnormal_vertex,\n\tdisplacementmap_pars_vertex: displacementmap_pars_vertex,\n\tdisplacementmap_vertex: displacementmap_vertex,\n\temissivemap_fragment: emissivemap_fragment,\n\temissivemap_pars_fragment: emissivemap_pars_fragment,\n\tencodings_fragment: encodings_fragment,\n\tencodings_pars_fragment: encodings_pars_fragment,\n\tenvmap_fragment: envmap_fragment,\n\tenvmap_common_pars_fragment: envmap_common_pars_fragment,\n\tenvmap_pars_fragment: envmap_pars_fragment,\n\tenvmap_pars_vertex: envmap_pars_vertex,\n\tenvmap_physical_pars_fragment: envmap_physical_pars_fragment,\n\tenvmap_vertex: envmap_vertex,\n\tfog_vertex: fog_vertex,\n\tfog_pars_vertex: fog_pars_vertex,\n\tfog_fragment: fog_fragment,\n\tfog_pars_fragment: fog_pars_fragment,\n\tgradientmap_pars_fragment: gradientmap_pars_fragment,\n\tlightmap_fragment: lightmap_fragment,\n\tlightmap_pars_fragment: lightmap_pars_fragment,\n\tlights_lambert_vertex: lights_lambert_vertex,\n\tlights_pars_begin: lights_pars_begin,\n\tlights_toon_fragment: lights_toon_fragment,\n\tlights_toon_pars_fragment: lights_toon_pars_fragment,\n\tlights_phong_fragment: lights_phong_fragment,\n\tlights_phong_pars_fragment: lights_phong_pars_fragment,\n\tlights_physical_fragment: lights_physical_fragment,\n\tlights_physical_pars_fragment: lights_physical_pars_fragment,\n\tlights_fragment_begin: lights_fragment_begin,\n\tlights_fragment_maps: lights_fragment_maps,\n\tlights_fragment_end: lights_fragment_end,\n\tlogdepthbuf_fragment: logdepthbuf_fragment,\n\tlogdepthbuf_pars_fragment: logdepthbuf_pars_fragment,\n\tlogdepthbuf_pars_vertex: logdepthbuf_pars_vertex,\n\tlogdepthbuf_vertex: logdepthbuf_vertex,\n\tmap_fragment: map_fragment,\n\tmap_pars_fragment: map_pars_fragment,\n\tmap_particle_fragment: map_particle_fragment,\n\tmap_particle_pars_fragment: map_particle_pars_fragment,\n\tmetalnessmap_fragment: metalnessmap_fragment,\n\tmetalnessmap_pars_fragment: metalnessmap_pars_fragment,\n\tmorphnormal_vertex: morphnormal_vertex,\n\tmorphtarget_pars_vertex: morphtarget_pars_vertex,\n\tmorphtarget_vertex: morphtarget_vertex,\n\tnormal_fragment_begin: normal_fragment_begin,\n\tnormal_fragment_maps: normal_fragment_maps,\n\tnormalmap_pars_fragment: normalmap_pars_fragment,\n\tclearcoat_normal_fragment_begin: clearcoat_normal_fragment_begin,\n\tclearcoat_normal_fragment_maps: clearcoat_normal_fragment_maps,\n\tclearcoat_pars_fragment: clearcoat_pars_fragment,\n\tpacking: packing,\n\tpremultiplied_alpha_fragment: premultiplied_alpha_fragment,\n\tproject_vertex: project_vertex,\n\tdithering_fragment: dithering_fragment,\n\tdithering_pars_fragment: dithering_pars_fragment,\n\troughnessmap_fragment: roughnessmap_fragment,\n\troughnessmap_pars_fragment: roughnessmap_pars_fragment,\n\tshadowmap_pars_fragment: shadowmap_pars_fragment,\n\tshadowmap_pars_vertex: shadowmap_pars_vertex,\n\tshadowmap_vertex: shadowmap_vertex,\n\tshadowmask_pars_fragment: shadowmask_pars_fragment,\n\tskinbase_vertex: skinbase_vertex,\n\tskinning_pars_vertex: skinning_pars_vertex,\n\tskinning_vertex: skinning_vertex,\n\tskinnormal_vertex: skinnormal_vertex,\n\tspecularmap_fragment: specularmap_fragment,\n\tspecularmap_pars_fragment: specularmap_pars_fragment,\n\ttonemapping_fragment: tonemapping_fragment,\n\ttonemapping_pars_fragment: tonemapping_pars_fragment,\n\ttransmissionmap_fragment: transmissionmap_fragment,\n\ttransmissionmap_pars_fragment: transmissionmap_pars_fragment,\n\tuv_pars_fragment: uv_pars_fragment,\n\tuv_pars_vertex: uv_pars_vertex,\n\tuv_vertex: uv_vertex,\n\tuv2_pars_fragment: uv2_pars_fragment,\n\tuv2_pars_vertex: uv2_pars_vertex,\n\tuv2_vertex: uv2_vertex,\n\tworldpos_vertex: worldpos_vertex,\n\n\tbackground_frag: background_frag,\n\tbackground_vert: background_vert,\n\tcube_frag: cube_frag,\n\tcube_vert: cube_vert,\n\tdepth_frag: depth_frag,\n\tdepth_vert: depth_vert,\n\tdistanceRGBA_frag: distanceRGBA_frag,\n\tdistanceRGBA_vert: distanceRGBA_vert,\n\tequirect_frag: equirect_frag,\n\tequirect_vert: equirect_vert,\n\tlinedashed_frag: linedashed_frag,\n\tlinedashed_vert: linedashed_vert,\n\tmeshbasic_frag: meshbasic_frag,\n\tmeshbasic_vert: meshbasic_vert,\n\tmeshlambert_frag: meshlambert_frag,\n\tmeshlambert_vert: meshlambert_vert,\n\tmeshmatcap_frag: meshmatcap_frag,\n\tmeshmatcap_vert: meshmatcap_vert,\n\tmeshtoon_frag: meshtoon_frag,\n\tmeshtoon_vert: meshtoon_vert,\n\tmeshphong_frag: meshphong_frag,\n\tmeshphong_vert: meshphong_vert,\n\tmeshphysical_frag: meshphysical_frag,\n\tmeshphysical_vert: meshphysical_vert,\n\tnormal_frag: normal_frag,\n\tnormal_vert: normal_vert,\n\tpoints_frag: points_frag,\n\tpoints_vert: points_vert,\n\tshadow_frag: shadow_frag,\n\tshadow_vert: shadow_vert,\n\tsprite_frag: sprite_frag,\n\tsprite_vert: sprite_vert\n};\n","export default /* glsl */`\n#ifdef USE_ALPHAMAP\n\n\tuniform sampler2D alphaMap;\n\n#endif\n`;\n","export default /* glsl */`\n#ifdef ALPHATEST\n\n\tif ( diffuseColor.a < ALPHATEST ) discard;\n\n#endif\n`;\n","export default /* glsl */`\n#ifdef USE_AOMAP\n\n\t// reads channel R, compatible with a combined OcclusionRoughnessMetallic (RGB) texture\n\tfloat ambientOcclusion = ( texture2D( aoMap, vUv2 ).r - 1.0 ) * aoMapIntensity + 1.0;\n\n\treflectedLight.indirectDiffuse *= ambientOcclusion;\n\n\t#if defined( USE_ENVMAP ) && defined( STANDARD )\n\n\t\tfloat dotNV = saturate( dot( geometry.normal, geometry.viewDir ) );\n\n\t\treflectedLight.indirectSpecular *= computeSpecularOcclusion( dotNV, ambientOcclusion, material.specularRoughness );\n\n\t#endif\n\n#endif\n`;\n","export default /* glsl */`\n#ifdef USE_AOMAP\n\n\tuniform sampler2D aoMap;\n\tuniform float aoMapIntensity;\n\n#endif\n`;\n","export default /* glsl */`\nvec3 transformed = vec3( position );\n`;\n","export default /* glsl */`\nvec3 objectNormal = vec3( normal );\n\n#ifdef USE_TANGENT\n\n\tvec3 objectTangent = vec3( tangent.xyz );\n\n#endif\n`;\n","export default /* glsl */`\n\n// Analytical approximation of the DFG LUT, one half of the\n// split-sum approximation used in indirect specular lighting.\n// via 'environmentBRDF' from \"Physically Based Shading on Mobile\"\n// https://www.unrealengine.com/blog/physically-based-shading-on-mobile - environmentBRDF for GGX on mobile\nvec2 integrateSpecularBRDF( const in float dotNV, const in float roughness ) {\n\tconst vec4 c0 = vec4( - 1, - 0.0275, - 0.572, 0.022 );\n\n\tconst vec4 c1 = vec4( 1, 0.0425, 1.04, - 0.04 );\n\n\tvec4 r = roughness * c0 + c1;\n\n\tfloat a004 = min( r.x * r.x, exp2( - 9.28 * dotNV ) ) * r.x + r.y;\n\n\treturn vec2( -1.04, 1.04 ) * a004 + r.zw;\n\n}\n\nfloat punctualLightIntensityToIrradianceFactor( const in float lightDistance, const in float cutoffDistance, const in float decayExponent ) {\n\n#if defined ( PHYSICALLY_CORRECT_LIGHTS )\n\n\t// based upon Frostbite 3 Moving to Physically-based Rendering\n\t// page 32, equation 26: E[window1]\n\t// https://seblagarde.files.wordpress.com/2015/07/course_notes_moving_frostbite_to_pbr_v32.pdf\n\t// this is intended to be used on spot and point lights who are represented as luminous intensity\n\t// but who must be converted to luminous irradiance for surface lighting calculation\n\tfloat distanceFalloff = 1.0 / max( pow( lightDistance, decayExponent ), 0.01 );\n\n\tif( cutoffDistance > 0.0 ) {\n\n\t\tdistanceFalloff *= pow2( saturate( 1.0 - pow4( lightDistance / cutoffDistance ) ) );\n\n\t}\n\n\treturn distanceFalloff;\n\n#else\n\n\tif( cutoffDistance > 0.0 && decayExponent > 0.0 ) {\n\n\t\treturn pow( saturate( -lightDistance / cutoffDistance + 1.0 ), decayExponent );\n\n\t}\n\n\treturn 1.0;\n\n#endif\n\n}\n\nvec3 BRDF_Diffuse_Lambert( const in vec3 diffuseColor ) {\n\n\treturn RECIPROCAL_PI * diffuseColor;\n\n} // validated\n\nvec3 F_Schlick( const in vec3 specularColor, const in float dotLH ) {\n\n\t// Original approximation by Christophe Schlick '94\n\t// float fresnel = pow( 1.0 - dotLH, 5.0 );\n\n\t// Optimized variant (presented by Epic at SIGGRAPH '13)\n\t// https://cdn2.unrealengine.com/Resources/files/2013SiggraphPresentationsNotes-26915738.pdf\n\tfloat fresnel = exp2( ( -5.55473 * dotLH - 6.98316 ) * dotLH );\n\n\treturn ( 1.0 - specularColor ) * fresnel + specularColor;\n\n} // validated\n\nvec3 F_Schlick_RoughnessDependent( const in vec3 F0, const in float dotNV, const in float roughness ) {\n\n\t// See F_Schlick\n\tfloat fresnel = exp2( ( -5.55473 * dotNV - 6.98316 ) * dotNV );\n\tvec3 Fr = max( vec3( 1.0 - roughness ), F0 ) - F0;\n\n\treturn Fr * fresnel + F0;\n\n}\n\n\n// Microfacet Models for Refraction through Rough Surfaces - equation (34)\n// http://graphicrants.blogspot.com/2013/08/specular-brdf-reference.html\n// alpha is \"roughness squared\" in Disneys reparameterization\nfloat G_GGX_Smith( const in float alpha, const in float dotNL, const in float dotNV ) {\n\n\t// geometry term (normalized) = G(l)G(v) / 4(nl)(nv)\n\t// also see #12151\n\n\tfloat a2 = pow2( alpha );\n\n\tfloat gl = dotNL + sqrt( a2 + ( 1.0 - a2 ) * pow2( dotNL ) );\n\tfloat gv = dotNV + sqrt( a2 + ( 1.0 - a2 ) * pow2( dotNV ) );\n\n\treturn 1.0 / ( gl * gv );\n\n} // validated\n\n// Moving Frostbite to Physically Based Rendering 3.0 - page 12, listing 2\n// https://seblagarde.files.wordpress.com/2015/07/course_notes_moving_frostbite_to_pbr_v32.pdf\nfloat G_GGX_SmithCorrelated( const in float alpha, const in float dotNL, const in float dotNV ) {\n\n\tfloat a2 = pow2( alpha );\n\n\t// dotNL and dotNV are explicitly swapped. This is not a mistake.\n\tfloat gv = dotNL * sqrt( a2 + ( 1.0 - a2 ) * pow2( dotNV ) );\n\tfloat gl = dotNV * sqrt( a2 + ( 1.0 - a2 ) * pow2( dotNL ) );\n\n\treturn 0.5 / max( gv + gl, EPSILON );\n\n}\n\n// Microfacet Models for Refraction through Rough Surfaces - equation (33)\n// http://graphicrants.blogspot.com/2013/08/specular-brdf-reference.html\n// alpha is \"roughness squared\" in Disneys reparameterization\nfloat D_GGX( const in float alpha, const in float dotNH ) {\n\n\tfloat a2 = pow2( alpha );\n\n\tfloat denom = pow2( dotNH ) * ( a2 - 1.0 ) + 1.0; // avoid alpha = 0 with dotNH = 1\n\n\treturn RECIPROCAL_PI * a2 / pow2( denom );\n\n}\n\n// GGX Distribution, Schlick Fresnel, GGX-Smith Visibility\nvec3 BRDF_Specular_GGX( const in IncidentLight incidentLight, const in vec3 viewDir, const in vec3 normal, const in vec3 specularColor, const in float roughness ) {\n\n\tfloat alpha = pow2( roughness ); // UE4's roughness\n\n\tvec3 halfDir = normalize( incidentLight.direction + viewDir );\n\n\tfloat dotNL = saturate( dot( normal, incidentLight.direction ) );\n\tfloat dotNV = saturate( dot( normal, viewDir ) );\n\tfloat dotNH = saturate( dot( normal, halfDir ) );\n\tfloat dotLH = saturate( dot( incidentLight.direction, halfDir ) );\n\n\tvec3 F = F_Schlick( specularColor, dotLH );\n\n\tfloat G = G_GGX_SmithCorrelated( alpha, dotNL, dotNV );\n\n\tfloat D = D_GGX( alpha, dotNH );\n\n\treturn F * ( G * D );\n\n} // validated\n\n// Rect Area Light\n\n// Real-Time Polygonal-Light Shading with Linearly Transformed Cosines\n// by Eric Heitz, Jonathan Dupuy, Stephen Hill and David Neubelt\n// code: https://github.com/selfshadow/ltc_code/\n\nvec2 LTC_Uv( const in vec3 N, const in vec3 V, const in float roughness ) {\n\n\tconst float LUT_SIZE = 64.0;\n\tconst float LUT_SCALE = ( LUT_SIZE - 1.0 ) / LUT_SIZE;\n\tconst float LUT_BIAS = 0.5 / LUT_SIZE;\n\n\tfloat dotNV = saturate( dot( N, V ) );\n\n\t// texture parameterized by sqrt( GGX alpha ) and sqrt( 1 - cos( theta ) )\n\tvec2 uv = vec2( roughness, sqrt( 1.0 - dotNV ) );\n\n\tuv = uv * LUT_SCALE + LUT_BIAS;\n\n\treturn uv;\n\n}\n\nfloat LTC_ClippedSphereFormFactor( const in vec3 f ) {\n\n\t// Real-Time Area Lighting: a Journey from Research to Production (p.102)\n\t// An approximation of the form factor of a horizon-clipped rectangle.\n\n\tfloat l = length( f );\n\n\treturn max( ( l * l + f.z ) / ( l + 1.0 ), 0.0 );\n\n}\n\nvec3 LTC_EdgeVectorFormFactor( const in vec3 v1, const in vec3 v2 ) {\n\n\tfloat x = dot( v1, v2 );\n\n\tfloat y = abs( x );\n\n\t// rational polynomial approximation to theta / sin( theta ) / 2PI\n\tfloat a = 0.8543985 + ( 0.4965155 + 0.0145206 * y ) * y;\n\tfloat b = 3.4175940 + ( 4.1616724 + y ) * y;\n\tfloat v = a / b;\n\n\tfloat theta_sintheta = ( x > 0.0 ) ? v : 0.5 * inversesqrt( max( 1.0 - x * x, 1e-7 ) ) - v;\n\n\treturn cross( v1, v2 ) * theta_sintheta;\n\n}\n\nvec3 LTC_Evaluate( const in vec3 N, const in vec3 V, const in vec3 P, const in mat3 mInv, const in vec3 rectCoords[ 4 ] ) {\n\n\t// bail if point is on back side of plane of light\n\t// assumes ccw winding order of light vertices\n\tvec3 v1 = rectCoords[ 1 ] - rectCoords[ 0 ];\n\tvec3 v2 = rectCoords[ 3 ] - rectCoords[ 0 ];\n\tvec3 lightNormal = cross( v1, v2 );\n\n\tif( dot( lightNormal, P - rectCoords[ 0 ] ) < 0.0 ) return vec3( 0.0 );\n\n\t// construct orthonormal basis around N\n\tvec3 T1, T2;\n\tT1 = normalize( V - N * dot( V, N ) );\n\tT2 = - cross( N, T1 ); // negated from paper; possibly due to a different handedness of world coordinate system\n\n\t// compute transform\n\tmat3 mat = mInv * transposeMat3( mat3( T1, T2, N ) );\n\n\t// transform rect\n\tvec3 coords[ 4 ];\n\tcoords[ 0 ] = mat * ( rectCoords[ 0 ] - P );\n\tcoords[ 1 ] = mat * ( rectCoords[ 1 ] - P );\n\tcoords[ 2 ] = mat * ( rectCoords[ 2 ] - P );\n\tcoords[ 3 ] = mat * ( rectCoords[ 3 ] - P );\n\n\t// project rect onto sphere\n\tcoords[ 0 ] = normalize( coords[ 0 ] );\n\tcoords[ 1 ] = normalize( coords[ 1 ] );\n\tcoords[ 2 ] = normalize( coords[ 2 ] );\n\tcoords[ 3 ] = normalize( coords[ 3 ] );\n\n\t// calculate vector form factor\n\tvec3 vectorFormFactor = vec3( 0.0 );\n\tvectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 0 ], coords[ 1 ] );\n\tvectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 1 ], coords[ 2 ] );\n\tvectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 2 ], coords[ 3 ] );\n\tvectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 3 ], coords[ 0 ] );\n\n\t// adjust for horizon clipping\n\tfloat result = LTC_ClippedSphereFormFactor( vectorFormFactor );\n\n/*\n\t// alternate method of adjusting for horizon clipping (see referece)\n\t// refactoring required\n\tfloat len = length( vectorFormFactor );\n\tfloat z = vectorFormFactor.z / len;\n\n\tconst float LUT_SIZE = 64.0;\n\tconst float LUT_SCALE = ( LUT_SIZE - 1.0 ) / LUT_SIZE;\n\tconst float LUT_BIAS = 0.5 / LUT_SIZE;\n\n\t// tabulated horizon-clipped sphere, apparently...\n\tvec2 uv = vec2( z * 0.5 + 0.5, len );\n\tuv = uv * LUT_SCALE + LUT_BIAS;\n\n\tfloat scale = texture2D( ltc_2, uv ).w;\n\n\tfloat result = len * scale;\n*/\n\n\treturn vec3( result );\n\n}\n\n// End Rect Area Light\n\n// ref: https://www.unrealengine.com/blog/physically-based-shading-on-mobile - environmentBRDF for GGX on mobile\nvec3 BRDF_Specular_GGX_Environment( const in vec3 viewDir, const in vec3 normal, const in vec3 specularColor, const in float roughness ) {\n\n\tfloat dotNV = saturate( dot( normal, viewDir ) );\n\n\tvec2 brdf = integrateSpecularBRDF( dotNV, roughness );\n\n\treturn specularColor * brdf.x + brdf.y;\n\n} // validated\n\n// Fdez-Agera's \"Multiple-Scattering Microfacet Model for Real-Time Image Based Lighting\"\n// Approximates multiscattering in order to preserve energy.\n// http://www.jcgt.org/published/0008/01/03/\nvoid BRDF_Specular_Multiscattering_Environment( const in GeometricContext geometry, const in vec3 specularColor, const in float roughness, inout vec3 singleScatter, inout vec3 multiScatter ) {\n\n\tfloat dotNV = saturate( dot( geometry.normal, geometry.viewDir ) );\n\n\tvec3 F = F_Schlick_RoughnessDependent( specularColor, dotNV, roughness );\n\tvec2 brdf = integrateSpecularBRDF( dotNV, roughness );\n\tvec3 FssEss = F * brdf.x + brdf.y;\n\n\tfloat Ess = brdf.x + brdf.y;\n\tfloat Ems = 1.0 - Ess;\n\n\tvec3 Favg = specularColor + ( 1.0 - specularColor ) * 0.047619; // 1/21\n\tvec3 Fms = FssEss * Favg / ( 1.0 - Ems * Favg );\n\n\tsingleScatter += FssEss;\n\tmultiScatter += Fms * Ems;\n\n}\n\nfloat G_BlinnPhong_Implicit( /* const in float dotNL, const in float dotNV */ ) {\n\n\t// geometry term is (n dot l)(n dot v) / 4(n dot l)(n dot v)\n\treturn 0.25;\n\n}\n\nfloat D_BlinnPhong( const in float shininess, const in float dotNH ) {\n\n\treturn RECIPROCAL_PI * ( shininess * 0.5 + 1.0 ) * pow( dotNH, shininess );\n\n}\n\nvec3 BRDF_Specular_BlinnPhong( const in IncidentLight incidentLight, const in GeometricContext geometry, const in vec3 specularColor, const in float shininess ) {\n\n\tvec3 halfDir = normalize( incidentLight.direction + geometry.viewDir );\n\n\t//float dotNL = saturate( dot( geometry.normal, incidentLight.direction ) );\n\t//float dotNV = saturate( dot( geometry.normal, geometry.viewDir ) );\n\tfloat dotNH = saturate( dot( geometry.normal, halfDir ) );\n\tfloat dotLH = saturate( dot( incidentLight.direction, halfDir ) );\n\n\tvec3 F = F_Schlick( specularColor, dotLH );\n\n\tfloat G = G_BlinnPhong_Implicit( /* dotNL, dotNV */ );\n\n\tfloat D = D_BlinnPhong( shininess, dotNH );\n\n\treturn F * ( G * D );\n\n} // validated\n\n// source: http://simonstechblog.blogspot.ca/2011/12/microfacet-brdf.html\nfloat GGXRoughnessToBlinnExponent( const in float ggxRoughness ) {\n\treturn ( 2.0 / pow2( ggxRoughness + 0.0001 ) - 2.0 );\n}\n\nfloat BlinnExponentToGGXRoughness( const in float blinnExponent ) {\n\treturn sqrt( 2.0 / ( blinnExponent + 2.0 ) );\n}\n\n#if defined( USE_SHEEN )\n\n// https://github.com/google/filament/blob/master/shaders/src/brdf.fs#L94\nfloat D_Charlie(float roughness, float NoH) {\n\t// Estevez and Kulla 2017, \"Production Friendly Microfacet Sheen BRDF\"\n\tfloat invAlpha = 1.0 / roughness;\n\tfloat cos2h = NoH * NoH;\n\tfloat sin2h = max(1.0 - cos2h, 0.0078125); // 2^(-14/2), so sin2h^2 > 0 in fp16\n\treturn (2.0 + invAlpha) * pow(sin2h, invAlpha * 0.5) / (2.0 * PI);\n}\n\n// https://github.com/google/filament/blob/master/shaders/src/brdf.fs#L136\nfloat V_Neubelt(float NoV, float NoL) {\n\t// Neubelt and Pettineo 2013, \"Crafting a Next-gen Material Pipeline for The Order: 1886\"\n\treturn saturate(1.0 / (4.0 * (NoL + NoV - NoL * NoV)));\n}\n\nvec3 BRDF_Specular_Sheen( const in float roughness, const in vec3 L, const in GeometricContext geometry, vec3 specularColor ) {\n\n\tvec3 N = geometry.normal;\n\tvec3 V = geometry.viewDir;\n\n\tvec3 H = normalize( V + L );\n\tfloat dotNH = saturate( dot( N, H ) );\n\n\treturn specularColor * D_Charlie( roughness, dotNH ) * V_Neubelt( dot(N, V), dot(N, L) );\n\n}\n\n#endif\n`;\n","export default /* glsl */`\n#ifdef USE_BUMPMAP\n\n\tuniform sampler2D bumpMap;\n\tuniform float bumpScale;\n\n\t// Bump Mapping Unparametrized Surfaces on the GPU by Morten S. Mikkelsen\n\t// http://api.unrealengine.com/attachments/Engine/Rendering/LightingAndShadows/BumpMappingWithoutTangentSpace/mm_sfgrad_bump.pdf\n\n\t// Evaluate the derivative of the height w.r.t. screen-space using forward differencing (listing 2)\n\n\tvec2 dHdxy_fwd() {\n\n\t\tvec2 dSTdx = dFdx( vUv );\n\t\tvec2 dSTdy = dFdy( vUv );\n\n\t\tfloat Hll = bumpScale * texture2D( bumpMap, vUv ).x;\n\t\tfloat dBx = bumpScale * texture2D( bumpMap, vUv + dSTdx ).x - Hll;\n\t\tfloat dBy = bumpScale * texture2D( bumpMap, vUv + dSTdy ).x - Hll;\n\n\t\treturn vec2( dBx, dBy );\n\n\t}\n\n\tvec3 perturbNormalArb( vec3 surf_pos, vec3 surf_norm, vec2 dHdxy, float faceDirection ) {\n\n\t\t// Workaround for Adreno 3XX dFd*( vec3 ) bug. See #9988\n\n\t\tvec3 vSigmaX = vec3( dFdx( surf_pos.x ), dFdx( surf_pos.y ), dFdx( surf_pos.z ) );\n\t\tvec3 vSigmaY = vec3( dFdy( surf_pos.x ), dFdy( surf_pos.y ), dFdy( surf_pos.z ) );\n\t\tvec3 vN = surf_norm;\t\t// normalized\n\n\t\tvec3 R1 = cross( vSigmaY, vN );\n\t\tvec3 R2 = cross( vN, vSigmaX );\n\n\t\tfloat fDet = dot( vSigmaX, R1 ) * faceDirection;\n\n\t\tvec3 vGrad = sign( fDet ) * ( dHdxy.x * R1 + dHdxy.y * R2 );\n\t\treturn normalize( abs( fDet ) * surf_norm - vGrad );\n\n\t}\n\n#endif\n`;\n","export default /* glsl */`\n#if NUM_CLIPPING_PLANES > 0\n\n\tvec4 plane;\n\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < UNION_CLIPPING_PLANES; i ++ ) {\n\n\t\tplane = clippingPlanes[ i ];\n\t\tif ( dot( vClipPosition, plane.xyz ) > plane.w ) discard;\n\n\t}\n\t#pragma unroll_loop_end\n\n\t#if UNION_CLIPPING_PLANES < NUM_CLIPPING_PLANES\n\n\t\tbool clipped = true;\n\n\t\t#pragma unroll_loop_start\n\t\tfor ( int i = UNION_CLIPPING_PLANES; i < NUM_CLIPPING_PLANES; i ++ ) {\n\n\t\t\tplane = clippingPlanes[ i ];\n\t\t\tclipped = ( dot( vClipPosition, plane.xyz ) > plane.w ) && clipped;\n\n\t\t}\n\t\t#pragma unroll_loop_end\n\n\t\tif ( clipped ) discard;\n\n\t#endif\n\n#endif\n`;\n","export default /* glsl */`\n#if NUM_CLIPPING_PLANES > 0\n\n\tvarying vec3 vClipPosition;\n\n\tuniform vec4 clippingPlanes[ NUM_CLIPPING_PLANES ];\n\n#endif\n`;\n","export default /* glsl */`\n#if NUM_CLIPPING_PLANES > 0\n\n\tvarying vec3 vClipPosition;\n\n#endif\n`;\n","export default /* glsl */`\n#if NUM_CLIPPING_PLANES > 0\n\n\tvClipPosition = - mvPosition.xyz;\n\n#endif\n`;\n","export default /* glsl */`\n#ifdef USE_COLOR\n\n\tdiffuseColor.rgb *= vColor;\n\n#endif\n`;\n","export default /* glsl */`\n#ifdef USE_COLOR\n\n\tvarying vec3 vColor;\n\n#endif\n`;\n","export default /* glsl */`\n#if defined( USE_COLOR ) || defined( USE_INSTANCING_COLOR )\n\n\tvarying vec3 vColor;\n\n#endif\n`;\n","export default /* glsl */`\n#if defined( USE_COLOR ) || defined( USE_INSTANCING_COLOR )\n\n\tvColor = vec3( 1.0 );\n\n#endif\n\n#ifdef USE_COLOR\n\n\tvColor.xyz *= color.xyz;\n\n#endif\n\n#ifdef USE_INSTANCING_COLOR\n\n\tvColor.xyz *= instanceColor.xyz;\n\n#endif\n`;\n","export default /* glsl */`\n#define PI 3.141592653589793\n#define PI2 6.283185307179586\n#define PI_HALF 1.5707963267948966\n#define RECIPROCAL_PI 0.3183098861837907\n#define RECIPROCAL_PI2 0.15915494309189535\n#define EPSILON 1e-6\n\n#ifndef saturate\n// <tonemapping_pars_fragment> may have defined saturate() already\n#define saturate(a) clamp( a, 0.0, 1.0 )\n#endif\n#define whiteComplement(a) ( 1.0 - saturate( a ) )\n\nfloat pow2( const in float x ) { return x*x; }\nfloat pow3( const in float x ) { return x*x*x; }\nfloat pow4( const in float x ) { float x2 = x*x; return x2*x2; }\nfloat average( const in vec3 color ) { return dot( color, vec3( 0.3333 ) ); }\n// expects values in the range of [0,1]x[0,1], returns values in the [0,1] range.\n// do not collapse into a single function per: http://byteblacksmith.com/improvements-to-the-canonical-one-liner-glsl-rand-for-opengl-es-2-0/\nhighp float rand( const in vec2 uv ) {\n\tconst highp float a = 12.9898, b = 78.233, c = 43758.5453;\n\thighp float dt = dot( uv.xy, vec2( a,b ) ), sn = mod( dt, PI );\n\treturn fract(sin(sn) * c);\n}\n\n#ifdef HIGH_PRECISION\n\tfloat precisionSafeLength( vec3 v ) { return length( v ); }\n#else\n\tfloat max3( vec3 v ) { return max( max( v.x, v.y ), v.z ); }\n\tfloat precisionSafeLength( vec3 v ) {\n\t\tfloat maxComponent = max3( abs( v ) );\n\t\treturn length( v / maxComponent ) * maxComponent;\n\t}\n#endif\n\nstruct IncidentLight {\n\tvec3 color;\n\tvec3 direction;\n\tbool visible;\n};\n\nstruct ReflectedLight {\n\tvec3 directDiffuse;\n\tvec3 directSpecular;\n\tvec3 indirectDiffuse;\n\tvec3 indirectSpecular;\n};\n\nstruct GeometricContext {\n\tvec3 position;\n\tvec3 normal;\n\tvec3 viewDir;\n#ifdef CLEARCOAT\n\tvec3 clearcoatNormal;\n#endif\n};\n\nvec3 transformDirection( in vec3 dir, in mat4 matrix ) {\n\n\treturn normalize( ( matrix * vec4( dir, 0.0 ) ).xyz );\n\n}\n\nvec3 inverseTransformDirection( in vec3 dir, in mat4 matrix ) {\n\n\t// dir can be either a direction vector or a normal vector\n\t// upper-left 3x3 of matrix is assumed to be orthogonal\n\n\treturn normalize( ( vec4( dir, 0.0 ) * matrix ).xyz );\n\n}\n\nvec3 projectOnPlane(in vec3 point, in vec3 pointOnPlane, in vec3 planeNormal ) {\n\n\tfloat distance = dot( planeNormal, point - pointOnPlane );\n\n\treturn - distance * planeNormal + point;\n\n}\n\nfloat sideOfPlane( in vec3 point, in vec3 pointOnPlane, in vec3 planeNormal ) {\n\n\treturn sign( dot( point - pointOnPlane, planeNormal ) );\n\n}\n\nvec3 linePlaneIntersect( in vec3 pointOnLine, in vec3 lineDirection, in vec3 pointOnPlane, in vec3 planeNormal ) {\n\n\treturn lineDirection * ( dot( planeNormal, pointOnPlane - pointOnLine ) / dot( planeNormal, lineDirection ) ) + pointOnLine;\n\n}\n\nmat3 transposeMat3( const in mat3 m ) {\n\n\tmat3 tmp;\n\n\ttmp[ 0 ] = vec3( m[ 0 ].x, m[ 1 ].x, m[ 2 ].x );\n\ttmp[ 1 ] = vec3( m[ 0 ].y, m[ 1 ].y, m[ 2 ].y );\n\ttmp[ 2 ] = vec3( m[ 0 ].z, m[ 1 ].z, m[ 2 ].z );\n\n\treturn tmp;\n\n}\n\n// https://en.wikipedia.org/wiki/Relative_luminance\nfloat linearToRelativeLuminance( const in vec3 color ) {\n\n\tvec3 weights = vec3( 0.2126, 0.7152, 0.0722 );\n\n\treturn dot( weights, color.rgb );\n\n}\n\nbool isPerspectiveMatrix( mat4 m ) {\n\n\treturn m[ 2 ][ 3 ] == - 1.0;\n\n}\n\nvec2 equirectUv( in vec3 dir ) {\n\n\t// dir is assumed to be unit length\n\n\tfloat u = atan( dir.z, dir.x ) * RECIPROCAL_PI2 + 0.5;\n\n\tfloat v = asin( clamp( dir.y, - 1.0, 1.0 ) ) * RECIPROCAL_PI + 0.5;\n\n\treturn vec2( u, v );\n\n}\n`;\n","export default /* glsl */`\n#ifdef ENVMAP_TYPE_CUBE_UV\n\n\t#define cubeUV_maxMipLevel 8.0\n\t#define cubeUV_minMipLevel 4.0\n\t#define cubeUV_maxTileSize 256.0\n\t#define cubeUV_minTileSize 16.0\n\n\t// These shader functions convert between the UV coordinates of a single face of\n\t// a cubemap, the 0-5 integer index of a cube face, and the direction vector for\n\t// sampling a textureCube (not generally normalized ).\n\n\tfloat getFace( vec3 direction ) {\n\n\t\tvec3 absDirection = abs( direction );\n\n\t\tfloat face = - 1.0;\n\n\t\tif ( absDirection.x > absDirection.z ) {\n\n\t\t\tif ( absDirection.x > absDirection.y )\n\n\t\t\t\tface = direction.x > 0.0 ? 0.0 : 3.0;\n\n\t\t\telse\n\n\t\t\t\tface = direction.y > 0.0 ? 1.0 : 4.0;\n\n\t\t} else {\n\n\t\t\tif ( absDirection.z > absDirection.y )\n\n\t\t\t\tface = direction.z > 0.0 ? 2.0 : 5.0;\n\n\t\t\telse\n\n\t\t\t\tface = direction.y > 0.0 ? 1.0 : 4.0;\n\n\t\t}\n\n\t\treturn face;\n\n\t}\n\n\t// RH coordinate system; PMREM face-indexing convention\n\tvec2 getUV( vec3 direction, float face ) {\n\n\t\tvec2 uv;\n\n\t\tif ( face == 0.0 ) {\n\n\t\t\tuv = vec2( direction.z, direction.y ) / abs( direction.x ); // pos x\n\n\t\t} else if ( face == 1.0 ) {\n\n\t\t\tuv = vec2( - direction.x, - direction.z ) / abs( direction.y ); // pos y\n\n\t\t} else if ( face == 2.0 ) {\n\n\t\t\tuv = vec2( - direction.x, direction.y ) / abs( direction.z ); // pos z\n\n\t\t} else if ( face == 3.0 ) {\n\n\t\t\tuv = vec2( - direction.z, direction.y ) / abs( direction.x ); // neg x\n\n\t\t} else if ( face == 4.0 ) {\n\n\t\t\tuv = vec2( - direction.x, direction.z ) / abs( direction.y ); // neg y\n\n\t\t} else {\n\n\t\t\tuv = vec2( direction.x, direction.y ) / abs( direction.z ); // neg z\n\n\t\t}\n\n\t\treturn 0.5 * ( uv + 1.0 );\n\n\t}\n\n\tvec3 bilinearCubeUV( sampler2D envMap, vec3 direction, float mipInt ) {\n\n\t\tfloat face = getFace( direction );\n\n\t\tfloat filterInt = max( cubeUV_minMipLevel - mipInt, 0.0 );\n\n\t\tmipInt = max( mipInt, cubeUV_minMipLevel );\n\n\t\tfloat faceSize = exp2( mipInt );\n\n\t\tfloat texelSize = 1.0 / ( 3.0 * cubeUV_maxTileSize );\n\n\t\tvec2 uv = getUV( direction, face ) * ( faceSize - 1.0 );\n\n\t\tvec2 f = fract( uv );\n\n\t\tuv += 0.5 - f;\n\n\t\tif ( face > 2.0 ) {\n\n\t\t\tuv.y += faceSize;\n\n\t\t\tface -= 3.0;\n\n\t\t}\n\n\t\tuv.x += face * faceSize;\n\n\t\tif ( mipInt < cubeUV_maxMipLevel ) {\n\n\t\t\tuv.y += 2.0 * cubeUV_maxTileSize;\n\n\t\t}\n\n\t\tuv.y += filterInt * 2.0 * cubeUV_minTileSize;\n\n\t\tuv.x += 3.0 * max( 0.0, cubeUV_maxTileSize - 2.0 * faceSize );\n\n\t\tuv *= texelSize;\n\n\t\tvec3 tl = envMapTexelToLinear( texture2D( envMap, uv ) ).rgb;\n\n\t\tuv.x += texelSize;\n\n\t\tvec3 tr = envMapTexelToLinear( texture2D( envMap, uv ) ).rgb;\n\n\t\tuv.y += texelSize;\n\n\t\tvec3 br = envMapTexelToLinear( texture2D( envMap, uv ) ).rgb;\n\n\t\tuv.x -= texelSize;\n\n\t\tvec3 bl = envMapTexelToLinear( texture2D( envMap, uv ) ).rgb;\n\n\t\tvec3 tm = mix( tl, tr, f.x );\n\n\t\tvec3 bm = mix( bl, br, f.x );\n\n\t\treturn mix( tm, bm, f.y );\n\n\t}\n\n\t// These defines must match with PMREMGenerator\n\n\t#define r0 1.0\n\t#define v0 0.339\n\t#define m0 - 2.0\n\t#define r1 0.8\n\t#define v1 0.276\n\t#define m1 - 1.0\n\t#define r4 0.4\n\t#define v4 0.046\n\t#define m4 2.0\n\t#define r5 0.305\n\t#define v5 0.016\n\t#define m5 3.0\n\t#define r6 0.21\n\t#define v6 0.0038\n\t#define m6 4.0\n\n\tfloat roughnessToMip( float roughness ) {\n\n\t\tfloat mip = 0.0;\n\n\t\tif ( roughness >= r1 ) {\n\n\t\t\tmip = ( r0 - roughness ) * ( m1 - m0 ) / ( r0 - r1 ) + m0;\n\n\t\t} else if ( roughness >= r4 ) {\n\n\t\t\tmip = ( r1 - roughness ) * ( m4 - m1 ) / ( r1 - r4 ) + m1;\n\n\t\t} else if ( roughness >= r5 ) {\n\n\t\t\tmip = ( r4 - roughness ) * ( m5 - m4 ) / ( r4 - r5 ) + m4;\n\n\t\t} else if ( roughness >= r6 ) {\n\n\t\t\tmip = ( r5 - roughness ) * ( m6 - m5 ) / ( r5 - r6 ) + m5;\n\n\t\t} else {\n\n\t\t\tmip = - 2.0 * log2( 1.16 * roughness ); // 1.16 = 1.79^0.25\n\t\t}\n\n\t\treturn mip;\n\n\t}\n\n\tvec4 textureCubeUV( sampler2D envMap, vec3 sampleDir, float roughness ) {\n\n\t\tfloat mip = clamp( roughnessToMip( roughness ), m0, cubeUV_maxMipLevel );\n\n\t\tfloat mipF = fract( mip );\n\n\t\tfloat mipInt = floor( mip );\n\n\t\tvec3 color0 = bilinearCubeUV( envMap, sampleDir, mipInt );\n\n\t\tif ( mipF == 0.0 ) {\n\n\t\t\treturn vec4( color0, 1.0 );\n\n\t\t} else {\n\n\t\t\tvec3 color1 = bilinearCubeUV( envMap, sampleDir, mipInt + 1.0 );\n\n\t\t\treturn vec4( mix( color0, color1, mipF ), 1.0 );\n\n\t\t}\n\n\t}\n\n#endif\n`;\n","export default /* glsl */`\nvec3 transformedNormal = objectNormal;\n\n#ifdef USE_INSTANCING\n\n\t// this is in lieu of a per-instance normal-matrix\n\t// shear transforms in the instance matrix are not supported\n\n\tmat3 m = mat3( instanceMatrix );\n\n\ttransformedNormal /= vec3( dot( m[ 0 ], m[ 0 ] ), dot( m[ 1 ], m[ 1 ] ), dot( m[ 2 ], m[ 2 ] ) );\n\n\ttransformedNormal = m * transformedNormal;\n\n#endif\n\ntransformedNormal = normalMatrix * transformedNormal;\n\n#ifdef FLIP_SIDED\n\n\ttransformedNormal = - transformedNormal;\n\n#endif\n\n#ifdef USE_TANGENT\n\n\tvec3 transformedTangent = ( modelViewMatrix * vec4( objectTangent, 0.0 ) ).xyz;\n\n\t#ifdef FLIP_SIDED\n\n\t\ttransformedTangent = - transformedTangent;\n\n\t#endif\n\n#endif\n`;\n","export default /* glsl */`\n#ifdef USE_DISPLACEMENTMAP\n\n\tuniform sampler2D displacementMap;\n\tuniform float displacementScale;\n\tuniform float displacementBias;\n\n#endif\n`;\n","export default /* glsl */`\n#ifdef USE_DISPLACEMENTMAP\n\n\ttransformed += normalize( objectNormal ) * ( texture2D( displacementMap, vUv ).x * displacementScale + displacementBias );\n\n#endif\n`;\n","export default /* glsl */`\n#ifdef USE_EMISSIVEMAP\n\n\tvec4 emissiveColor = texture2D( emissiveMap, vUv );\n\n\temissiveColor.rgb = emissiveMapTexelToLinear( emissiveColor ).rgb;\n\n\ttotalEmissiveRadiance *= emissiveColor.rgb;\n\n#endif\n`;\n","export default /* glsl */`\n#ifdef USE_EMISSIVEMAP\n\n\tuniform sampler2D emissiveMap;\n\n#endif\n`;\n","export default /* glsl */`\ngl_FragColor = linearToOutputTexel( gl_FragColor );\n`;\n","export default /* glsl */`\n// For a discussion of what this is, please read this: http://lousodrome.net/blog/light/2013/05/26/gamma-correct-and-hdr-rendering-in-a-32-bits-buffer/\n\nvec4 LinearToLinear( in vec4 value ) {\n\treturn value;\n}\n\nvec4 GammaToLinear( in vec4 value, in float gammaFactor ) {\n\treturn vec4( pow( value.rgb, vec3( gammaFactor ) ), value.a );\n}\n\nvec4 LinearToGamma( in vec4 value, in float gammaFactor ) {\n\treturn vec4( pow( value.rgb, vec3( 1.0 / gammaFactor ) ), value.a );\n}\n\nvec4 sRGBToLinear( in vec4 value ) {\n\treturn vec4( mix( pow( value.rgb * 0.9478672986 + vec3( 0.0521327014 ), vec3( 2.4 ) ), value.rgb * 0.0773993808, vec3( lessThanEqual( value.rgb, vec3( 0.04045 ) ) ) ), value.a );\n}\n\nvec4 LinearTosRGB( in vec4 value ) {\n\treturn vec4( mix( pow( value.rgb, vec3( 0.41666 ) ) * 1.055 - vec3( 0.055 ), value.rgb * 12.92, vec3( lessThanEqual( value.rgb, vec3( 0.0031308 ) ) ) ), value.a );\n}\n\nvec4 RGBEToLinear( in vec4 value ) {\n\treturn vec4( value.rgb * exp2( value.a * 255.0 - 128.0 ), 1.0 );\n}\n\nvec4 LinearToRGBE( in vec4 value ) {\n\tfloat maxComponent = max( max( value.r, value.g ), value.b );\n\tfloat fExp = clamp( ceil( log2( maxComponent ) ), -128.0, 127.0 );\n\treturn vec4( value.rgb / exp2( fExp ), ( fExp + 128.0 ) / 255.0 );\n\t// return vec4( value.brg, ( 3.0 + 128.0 ) / 256.0 );\n}\n\n// reference: http://iwasbeingirony.blogspot.ca/2010/06/difference-between-rgbm-and-rgbd.html\nvec4 RGBMToLinear( in vec4 value, in float maxRange ) {\n\treturn vec4( value.rgb * value.a * maxRange, 1.0 );\n}\n\nvec4 LinearToRGBM( in vec4 value, in float maxRange ) {\n\tfloat maxRGB = max( value.r, max( value.g, value.b ) );\n\tfloat M = clamp( maxRGB / maxRange, 0.0, 1.0 );\n\tM = ceil( M * 255.0 ) / 255.0;\n\treturn vec4( value.rgb / ( M * maxRange ), M );\n}\n\n// reference: http://iwasbeingirony.blogspot.ca/2010/06/difference-between-rgbm-and-rgbd.html\nvec4 RGBDToLinear( in vec4 value, in float maxRange ) {\n\treturn vec4( value.rgb * ( ( maxRange / 255.0 ) / value.a ), 1.0 );\n}\n\nvec4 LinearToRGBD( in vec4 value, in float maxRange ) {\n\tfloat maxRGB = max( value.r, max( value.g, value.b ) );\n\tfloat D = max( maxRange / maxRGB, 1.0 );\n\t// NOTE: The implementation with min causes the shader to not compile on\n\t// a common Alcatel A502DL in Chrome 78/Android 8.1. Some research suggests \n\t// that the chipset is Mediatek MT6739 w/ IMG PowerVR GE8100 GPU.\n\t// D = min( floor( D ) / 255.0, 1.0 );\n\tD = clamp( floor( D ) / 255.0, 0.0, 1.0 );\n\treturn vec4( value.rgb * ( D * ( 255.0 / maxRange ) ), D );\n}\n\n// LogLuv reference: http://graphicrants.blogspot.ca/2009/04/rgbm-color-encoding.html\n\n// M matrix, for encoding\nconst mat3 cLogLuvM = mat3( 0.2209, 0.3390, 0.4184, 0.1138, 0.6780, 0.7319, 0.0102, 0.1130, 0.2969 );\nvec4 LinearToLogLuv( in vec4 value ) {\n\tvec3 Xp_Y_XYZp = cLogLuvM * value.rgb;\n\tXp_Y_XYZp = max( Xp_Y_XYZp, vec3( 1e-6, 1e-6, 1e-6 ) );\n\tvec4 vResult;\n\tvResult.xy = Xp_Y_XYZp.xy / Xp_Y_XYZp.z;\n\tfloat Le = 2.0 * log2(Xp_Y_XYZp.y) + 127.0;\n\tvResult.w = fract( Le );\n\tvResult.z = ( Le - ( floor( vResult.w * 255.0 ) ) / 255.0 ) / 255.0;\n\treturn vResult;\n}\n\n// Inverse M matrix, for decoding\nconst mat3 cLogLuvInverseM = mat3( 6.0014, -2.7008, -1.7996, -1.3320, 3.1029, -5.7721, 0.3008, -1.0882, 5.6268 );\nvec4 LogLuvToLinear( in vec4 value ) {\n\tfloat Le = value.z * 255.0 + value.w;\n\tvec3 Xp_Y_XYZp;\n\tXp_Y_XYZp.y = exp2( ( Le - 127.0 ) / 2.0 );\n\tXp_Y_XYZp.z = Xp_Y_XYZp.y / value.y;\n\tXp_Y_XYZp.x = value.x * Xp_Y_XYZp.z;\n\tvec3 vRGB = cLogLuvInverseM * Xp_Y_XYZp.rgb;\n\treturn vec4( max( vRGB, 0.0 ), 1.0 );\n}\n`;\n","export default /* glsl */`\n#ifdef USE_ENVMAP\n\n\t#ifdef ENV_WORLDPOS\n\n\t\tvec3 cameraToFrag;\n\n\t\tif ( isOrthographic ) {\n\n\t\t\tcameraToFrag = normalize( vec3( - viewMatrix[ 0 ][ 2 ], - viewMatrix[ 1 ][ 2 ], - viewMatrix[ 2 ][ 2 ] ) );\n\n\t\t} else {\n\n\t\t\tcameraToFrag = normalize( vWorldPosition - cameraPosition );\n\n\t\t}\n\n\t\t// Transforming Normal Vectors with the Inverse Transformation\n\t\tvec3 worldNormal = inverseTransformDirection( normal, viewMatrix );\n\n\t\t#ifdef ENVMAP_MODE_REFLECTION\n\n\t\t\tvec3 reflectVec = reflect( cameraToFrag, worldNormal );\n\n\t\t#else\n\n\t\t\tvec3 reflectVec = refract( cameraToFrag, worldNormal, refractionRatio );\n\n\t\t#endif\n\n\t#else\n\n\t\tvec3 reflectVec = vReflect;\n\n\t#endif\n\n\t#ifdef ENVMAP_TYPE_CUBE\n\n\t\tvec4 envColor = textureCube( envMap, vec3( flipEnvMap * reflectVec.x, reflectVec.yz ) );\n\n\t#elif defined( ENVMAP_TYPE_CUBE_UV )\n\n\t\tvec4 envColor = textureCubeUV( envMap, reflectVec, 0.0 );\n\n\t#else\n\n\t\tvec4 envColor = vec4( 0.0 );\n\n\t#endif\n\n\t#ifndef ENVMAP_TYPE_CUBE_UV\n\n\t\tenvColor = envMapTexelToLinear( envColor );\n\n\t#endif\n\n\t#ifdef ENVMAP_BLENDING_MULTIPLY\n\n\t\toutgoingLight = mix( outgoingLight, outgoingLight * envColor.xyz, specularStrength * reflectivity );\n\n\t#elif defined( ENVMAP_BLENDING_MIX )\n\n\t\toutgoingLight = mix( outgoingLight, envColor.xyz, specularStrength * reflectivity );\n\n\t#elif defined( ENVMAP_BLENDING_ADD )\n\n\t\toutgoingLight += envColor.xyz * specularStrength * reflectivity;\n\n\t#endif\n\n#endif\n`;\n","export default /* glsl */`\n#ifdef USE_ENVMAP\n\n\tuniform float envMapIntensity;\n\tuniform float flipEnvMap;\n\tuniform int maxMipLevel;\n\n\t#ifdef ENVMAP_TYPE_CUBE\n\t\tuniform samplerCube envMap;\n\t#else\n\t\tuniform sampler2D envMap;\n\t#endif\n\t\n#endif\n`;\n","export default /* glsl */`\n#ifdef USE_ENVMAP\n\n\tuniform float reflectivity;\n\n\t#if defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( PHONG )\n\n\t\t#define ENV_WORLDPOS\n\n\t#endif\n\n\t#ifdef ENV_WORLDPOS\n\n\t\tvarying vec3 vWorldPosition;\n\t\tuniform float refractionRatio;\n\t#else\n\t\tvarying vec3 vReflect;\n\t#endif\n\n#endif\n`;\n","export default /* glsl */`\n#ifdef USE_ENVMAP\n\n\t#if defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) ||defined( PHONG )\n\n\t\t#define ENV_WORLDPOS\n\n\t#endif\n\n\t#ifdef ENV_WORLDPOS\n\t\t\n\t\tvarying vec3 vWorldPosition;\n\n\t#else\n\n\t\tvarying vec3 vReflect;\n\t\tuniform float refractionRatio;\n\n\t#endif\n\n#endif\n`;\n","export default /* glsl */`\n#if defined( USE_ENVMAP )\n\n\t#ifdef ENVMAP_MODE_REFRACTION\n\t\tuniform float refractionRatio;\n\t#endif\n\n\tvec3 getLightProbeIndirectIrradiance( /*const in SpecularLightProbe specularLightProbe,*/ const in GeometricContext geometry, const in int maxMIPLevel ) {\n\n\t\tvec3 worldNormal = inverseTransformDirection( geometry.normal, viewMatrix );\n\n\t\t#ifdef ENVMAP_TYPE_CUBE\n\n\t\t\tvec3 queryVec = vec3( flipEnvMap * worldNormal.x, worldNormal.yz );\n\n\t\t\t// TODO: replace with properly filtered cubemaps and access the irradiance LOD level, be it the last LOD level\n\t\t\t// of a specular cubemap, or just the default level of a specially created irradiance cubemap.\n\n\t\t\t#ifdef TEXTURE_LOD_EXT\n\n\t\t\t\tvec4 envMapColor = textureCubeLodEXT( envMap, queryVec, float( maxMIPLevel ) );\n\n\t\t\t#else\n\n\t\t\t\t// force the bias high to get the last LOD level as it is the most blurred.\n\t\t\t\tvec4 envMapColor = textureCube( envMap, queryVec, float( maxMIPLevel ) );\n\n\t\t\t#endif\n\n\t\t\tenvMapColor.rgb = envMapTexelToLinear( envMapColor ).rgb;\n\n\t\t#elif defined( ENVMAP_TYPE_CUBE_UV )\n\n\t\t\tvec4 envMapColor = textureCubeUV( envMap, worldNormal, 1.0 );\n\n\t\t#else\n\n\t\t\tvec4 envMapColor = vec4( 0.0 );\n\n\t\t#endif\n\n\t\treturn PI * envMapColor.rgb * envMapIntensity;\n\n\t}\n\n\t// Trowbridge-Reitz distribution to Mip level, following the logic of http://casual-effects.blogspot.ca/2011/08/plausible-environment-lighting-in-two.html\n\tfloat getSpecularMIPLevel( const in float roughness, const in int maxMIPLevel ) {\n\n\t\tfloat maxMIPLevelScalar = float( maxMIPLevel );\n\n\t\tfloat sigma = PI * roughness * roughness / ( 1.0 + roughness );\n\t\tfloat desiredMIPLevel = maxMIPLevelScalar + log2( sigma );\n\n\t\t// clamp to allowable LOD ranges.\n\t\treturn clamp( desiredMIPLevel, 0.0, maxMIPLevelScalar );\n\n\t}\n\n\tvec3 getLightProbeIndirectRadiance( /*const in SpecularLightProbe specularLightProbe,*/ const in vec3 viewDir, const in vec3 normal, const in float roughness, const in int maxMIPLevel ) {\n\n\t\t#ifdef ENVMAP_MODE_REFLECTION\n\n\t\t\tvec3 reflectVec = reflect( -viewDir, normal );\n\n\t\t\t// Mixing the reflection with the normal is more accurate and keeps rough objects from gathering light from behind their tangent plane.\n\t\t\treflectVec = normalize( mix( reflectVec, normal, roughness * roughness) );\n\n\t\t#else\n\n\t\t\tvec3 reflectVec = refract( -viewDir, normal, refractionRatio );\n\n\t\t#endif\n\n\t\treflectVec = inverseTransformDirection( reflectVec, viewMatrix );\n\n\t\tfloat specularMIPLevel = getSpecularMIPLevel( roughness, maxMIPLevel );\n\n\t\t#ifdef ENVMAP_TYPE_CUBE\n\n\t\t\tvec3 queryReflectVec = vec3( flipEnvMap * reflectVec.x, reflectVec.yz );\n\n\t\t\t#ifdef TEXTURE_LOD_EXT\n\n\t\t\t\tvec4 envMapColor = textureCubeLodEXT( envMap, queryReflectVec, specularMIPLevel );\n\n\t\t\t#else\n\n\t\t\t\tvec4 envMapColor = textureCube( envMap, queryReflectVec, specularMIPLevel );\n\n\t\t\t#endif\n\n\t\t\tenvMapColor.rgb = envMapTexelToLinear( envMapColor ).rgb;\n\n\t\t#elif defined( ENVMAP_TYPE_CUBE_UV )\n\n\t\t\tvec4 envMapColor = textureCubeUV( envMap, reflectVec, roughness );\n\n\t\t#endif\n\n\t\treturn envMapColor.rgb * envMapIntensity;\n\n\t}\n\n#endif\n`;\n","export default /* glsl */`\n#ifdef USE_ENVMAP\n\n\t#ifdef ENV_WORLDPOS\n\n\t\tvWorldPosition = worldPosition.xyz;\n\n\t#else\n\n\t\tvec3 cameraToVertex;\n\n\t\tif ( isOrthographic ) {\n\n\t\t\tcameraToVertex = normalize( vec3( - viewMatrix[ 0 ][ 2 ], - viewMatrix[ 1 ][ 2 ], - viewMatrix[ 2 ][ 2 ] ) );\n\n\t\t} else {\n\n\t\t\tcameraToVertex = normalize( worldPosition.xyz - cameraPosition );\n\n\t\t}\n\n\t\tvec3 worldNormal = inverseTransformDirection( transformedNormal, viewMatrix );\n\n\t\t#ifdef ENVMAP_MODE_REFLECTION\n\n\t\t\tvReflect = reflect( cameraToVertex, worldNormal );\n\n\t\t#else\n\n\t\t\tvReflect = refract( cameraToVertex, worldNormal, refractionRatio );\n\n\t\t#endif\n\n\t#endif\n\n#endif\n`;\n","export default /* glsl */`\n#ifdef USE_FOG\n\n\tfogDepth = - mvPosition.z;\n\n#endif\n`;\n","export default /* glsl */`\n#ifdef USE_FOG\n\n\tvarying float fogDepth;\n\n#endif\n`;\n","export default /* glsl */`\n#ifdef USE_FOG\n\n\t#ifdef FOG_EXP2\n\n\t\tfloat fogFactor = 1.0 - exp( - fogDensity * fogDensity * fogDepth * fogDepth );\n\n\t#else\n\n\t\tfloat fogFactor = smoothstep( fogNear, fogFar, fogDepth );\n\n\t#endif\n\n\tgl_FragColor.rgb = mix( gl_FragColor.rgb, fogColor, fogFactor );\n\n#endif\n`;\n","export default /* glsl */`\n#ifdef USE_FOG\n\n\tuniform vec3 fogColor;\n\tvarying float fogDepth;\n\n\t#ifdef FOG_EXP2\n\n\t\tuniform float fogDensity;\n\n\t#else\n\n\t\tuniform float fogNear;\n\t\tuniform float fogFar;\n\n\t#endif\n\n#endif\n`;\n","export default /* glsl */`\n\n#ifdef USE_GRADIENTMAP\n\n\tuniform sampler2D gradientMap;\n\n#endif\n\nvec3 getGradientIrradiance( vec3 normal, vec3 lightDirection ) {\n\n\t// dotNL will be from -1.0 to 1.0\n\tfloat dotNL = dot( normal, lightDirection );\n\tvec2 coord = vec2( dotNL * 0.5 + 0.5, 0.0 );\n\n\t#ifdef USE_GRADIENTMAP\n\n\t\treturn texture2D( gradientMap, coord ).rgb;\n\n\t#else\n\n\t\treturn ( coord.x < 0.7 ) ? vec3( 0.7 ) : vec3( 1.0 );\n\n\t#endif\n\n}\n`;\n","export default /* glsl */`\n#ifdef USE_LIGHTMAP\n\n\tvec4 lightMapTexel= texture2D( lightMap, vUv2 );\n\treflectedLight.indirectDiffuse += PI * lightMapTexelToLinear( lightMapTexel ).rgb * lightMapIntensity; // factor of PI should not be present; included here to prevent breakage\n\n#endif\n`;\n","export default /* glsl */`\n#ifdef USE_LIGHTMAP\n\n\tuniform sampler2D lightMap;\n\tuniform float lightMapIntensity;\n\n#endif\n`;\n","export default /* glsl */`\nvec3 diffuse = vec3( 1.0 );\n\nGeometricContext geometry;\ngeometry.position = mvPosition.xyz;\ngeometry.normal = normalize( transformedNormal );\ngeometry.viewDir = ( isOrthographic ) ? vec3( 0, 0, 1 ) : normalize( -mvPosition.xyz );\n\nGeometricContext backGeometry;\nbackGeometry.position = geometry.position;\nbackGeometry.normal = -geometry.normal;\nbackGeometry.viewDir = geometry.viewDir;\n\nvLightFront = vec3( 0.0 );\nvIndirectFront = vec3( 0.0 );\n#ifdef DOUBLE_SIDED\n\tvLightBack = vec3( 0.0 );\n\tvIndirectBack = vec3( 0.0 );\n#endif\n\nIncidentLight directLight;\nfloat dotNL;\nvec3 directLightColor_Diffuse;\n\nvIndirectFront += getAmbientLightIrradiance( ambientLightColor );\n\nvIndirectFront += getLightProbeIrradiance( lightProbe, geometry );\n\n#ifdef DOUBLE_SIDED\n\n\tvIndirectBack += getAmbientLightIrradiance( ambientLightColor );\n\n\tvIndirectBack += getLightProbeIrradiance( lightProbe, backGeometry );\n\n#endif\n\n#if NUM_POINT_LIGHTS > 0\n\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_POINT_LIGHTS; i ++ ) {\n\n\t\tgetPointDirectLightIrradiance( pointLights[ i ], geometry, directLight );\n\n\t\tdotNL = dot( geometry.normal, directLight.direction );\n\t\tdirectLightColor_Diffuse = PI * directLight.color;\n\n\t\tvLightFront += saturate( dotNL ) * directLightColor_Diffuse;\n\n\t\t#ifdef DOUBLE_SIDED\n\n\t\t\tvLightBack += saturate( -dotNL ) * directLightColor_Diffuse;\n\n\t\t#endif\n\n\t}\n\t#pragma unroll_loop_end\n\n#endif\n\n#if NUM_SPOT_LIGHTS > 0\n\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_SPOT_LIGHTS; i ++ ) {\n\n\t\tgetSpotDirectLightIrradiance( spotLights[ i ], geometry, directLight );\n\n\t\tdotNL = dot( geometry.normal, directLight.direction );\n\t\tdirectLightColor_Diffuse = PI * directLight.color;\n\n\t\tvLightFront += saturate( dotNL ) * directLightColor_Diffuse;\n\n\t\t#ifdef DOUBLE_SIDED\n\n\t\t\tvLightBack += saturate( -dotNL ) * directLightColor_Diffuse;\n\n\t\t#endif\n\t}\n\t#pragma unroll_loop_end\n\n#endif\n\n/*\n#if NUM_RECT_AREA_LIGHTS > 0\n\n\tfor ( int i = 0; i < NUM_RECT_AREA_LIGHTS; i ++ ) {\n\n\t\t// TODO (abelnation): implement\n\n\t}\n\n#endif\n*/\n\n#if NUM_DIR_LIGHTS > 0\n\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_DIR_LIGHTS; i ++ ) {\n\n\t\tgetDirectionalDirectLightIrradiance( directionalLights[ i ], geometry, directLight );\n\n\t\tdotNL = dot( geometry.normal, directLight.direction );\n\t\tdirectLightColor_Diffuse = PI * directLight.color;\n\n\t\tvLightFront += saturate( dotNL ) * directLightColor_Diffuse;\n\n\t\t#ifdef DOUBLE_SIDED\n\n\t\t\tvLightBack += saturate( -dotNL ) * directLightColor_Diffuse;\n\n\t\t#endif\n\n\t}\n\t#pragma unroll_loop_end\n\n#endif\n\n#if NUM_HEMI_LIGHTS > 0\n\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_HEMI_LIGHTS; i ++ ) {\n\n\t\tvIndirectFront += getHemisphereLightIrradiance( hemisphereLights[ i ], geometry );\n\n\t\t#ifdef DOUBLE_SIDED\n\n\t\t\tvIndirectBack += getHemisphereLightIrradiance( hemisphereLights[ i ], backGeometry );\n\n\t\t#endif\n\n\t}\n\t#pragma unroll_loop_end\n\n#endif\n`;\n","export default /* glsl */`\nuniform bool receiveShadow;\nuniform vec3 ambientLightColor;\nuniform vec3 lightProbe[ 9 ];\n\n// get the irradiance (radiance convolved with cosine lobe) at the point 'normal' on the unit sphere\n// source: https://graphics.stanford.edu/papers/envmap/envmap.pdf\nvec3 shGetIrradianceAt( in vec3 normal, in vec3 shCoefficients[ 9 ] ) {\n\n\t// normal is assumed to have unit length\n\n\tfloat x = normal.x, y = normal.y, z = normal.z;\n\n\t// band 0\n\tvec3 result = shCoefficients[ 0 ] * 0.886227;\n\n\t// band 1\n\tresult += shCoefficients[ 1 ] * 2.0 * 0.511664 * y;\n\tresult += shCoefficients[ 2 ] * 2.0 * 0.511664 * z;\n\tresult += shCoefficients[ 3 ] * 2.0 * 0.511664 * x;\n\n\t// band 2\n\tresult += shCoefficients[ 4 ] * 2.0 * 0.429043 * x * y;\n\tresult += shCoefficients[ 5 ] * 2.0 * 0.429043 * y * z;\n\tresult += shCoefficients[ 6 ] * ( 0.743125 * z * z - 0.247708 );\n\tresult += shCoefficients[ 7 ] * 2.0 * 0.429043 * x * z;\n\tresult += shCoefficients[ 8 ] * 0.429043 * ( x * x - y * y );\n\n\treturn result;\n\n}\n\nvec3 getLightProbeIrradiance( const in vec3 lightProbe[ 9 ], const in GeometricContext geometry ) {\n\n\tvec3 worldNormal = inverseTransformDirection( geometry.normal, viewMatrix );\n\n\tvec3 irradiance = shGetIrradianceAt( worldNormal, lightProbe );\n\n\treturn irradiance;\n\n}\n\nvec3 getAmbientLightIrradiance( const in vec3 ambientLightColor ) {\n\n\tvec3 irradiance = ambientLightColor;\n\n\t#ifndef PHYSICALLY_CORRECT_LIGHTS\n\n\t\tirradiance *= PI;\n\n\t#endif\n\n\treturn irradiance;\n\n}\n\n#if NUM_DIR_LIGHTS > 0\n\n\tstruct DirectionalLight {\n\t\tvec3 direction;\n\t\tvec3 color;\n\t};\n\n\tuniform DirectionalLight directionalLights[ NUM_DIR_LIGHTS ];\n\n\tvoid getDirectionalDirectLightIrradiance( const in DirectionalLight directionalLight, const in GeometricContext geometry, out IncidentLight directLight ) {\n\n\t\tdirectLight.color = directionalLight.color;\n\t\tdirectLight.direction = directionalLight.direction;\n\t\tdirectLight.visible = true;\n\n\t}\n\n#endif\n\n\n#if NUM_POINT_LIGHTS > 0\n\n\tstruct PointLight {\n\t\tvec3 position;\n\t\tvec3 color;\n\t\tfloat distance;\n\t\tfloat decay;\n\t};\n\n\tuniform PointLight pointLights[ NUM_POINT_LIGHTS ];\n\n\t// directLight is an out parameter as having it as a return value caused compiler errors on some devices\n\tvoid getPointDirectLightIrradiance( const in PointLight pointLight, const in GeometricContext geometry, out IncidentLight directLight ) {\n\n\t\tvec3 lVector = pointLight.position - geometry.position;\n\t\tdirectLight.direction = normalize( lVector );\n\n\t\tfloat lightDistance = length( lVector );\n\n\t\tdirectLight.color = pointLight.color;\n\t\tdirectLight.color *= punctualLightIntensityToIrradianceFactor( lightDistance, pointLight.distance, pointLight.decay );\n\t\tdirectLight.visible = ( directLight.color != vec3( 0.0 ) );\n\n\t}\n\n#endif\n\n\n#if NUM_SPOT_LIGHTS > 0\n\n\tstruct SpotLight {\n\t\tvec3 position;\n\t\tvec3 direction;\n\t\tvec3 color;\n\t\tfloat distance;\n\t\tfloat decay;\n\t\tfloat coneCos;\n\t\tfloat penumbraCos;\n\t};\n\n\tuniform SpotLight spotLights[ NUM_SPOT_LIGHTS ];\n\n\t// directLight is an out parameter as having it as a return value caused compiler errors on some devices\n\tvoid getSpotDirectLightIrradiance( const in SpotLight spotLight, const in GeometricContext geometry, out IncidentLight directLight ) {\n\n\t\tvec3 lVector = spotLight.position - geometry.position;\n\t\tdirectLight.direction = normalize( lVector );\n\n\t\tfloat lightDistance = length( lVector );\n\t\tfloat angleCos = dot( directLight.direction, spotLight.direction );\n\n\t\tif ( angleCos > spotLight.coneCos ) {\n\n\t\t\tfloat spotEffect = smoothstep( spotLight.coneCos, spotLight.penumbraCos, angleCos );\n\n\t\t\tdirectLight.color = spotLight.color;\n\t\t\tdirectLight.color *= spotEffect * punctualLightIntensityToIrradianceFactor( lightDistance, spotLight.distance, spotLight.decay );\n\t\t\tdirectLight.visible = true;\n\n\t\t} else {\n\n\t\t\tdirectLight.color = vec3( 0.0 );\n\t\t\tdirectLight.visible = false;\n\n\t\t}\n\t}\n\n#endif\n\n\n#if NUM_RECT_AREA_LIGHTS > 0\n\n\tstruct RectAreaLight {\n\t\tvec3 color;\n\t\tvec3 position;\n\t\tvec3 halfWidth;\n\t\tvec3 halfHeight;\n\t};\n\n\t// Pre-computed values of LinearTransformedCosine approximation of BRDF\n\t// BRDF approximation Texture is 64x64\n\tuniform sampler2D ltc_1; // RGBA Float\n\tuniform sampler2D ltc_2; // RGBA Float\n\n\tuniform RectAreaLight rectAreaLights[ NUM_RECT_AREA_LIGHTS ];\n\n#endif\n\n\n#if NUM_HEMI_LIGHTS > 0\n\n\tstruct HemisphereLight {\n\t\tvec3 direction;\n\t\tvec3 skyColor;\n\t\tvec3 groundColor;\n\t};\n\n\tuniform HemisphereLight hemisphereLights[ NUM_HEMI_LIGHTS ];\n\n\tvec3 getHemisphereLightIrradiance( const in HemisphereLight hemiLight, const in GeometricContext geometry ) {\n\n\t\tfloat dotNL = dot( geometry.normal, hemiLight.direction );\n\t\tfloat hemiDiffuseWeight = 0.5 * dotNL + 0.5;\n\n\t\tvec3 irradiance = mix( hemiLight.groundColor, hemiLight.skyColor, hemiDiffuseWeight );\n\n\t\t#ifndef PHYSICALLY_CORRECT_LIGHTS\n\n\t\t\tirradiance *= PI;\n\n\t\t#endif\n\n\t\treturn irradiance;\n\n\t}\n\n#endif\n`;\n","export default /* glsl */`\nToonMaterial material;\nmaterial.diffuseColor = diffuseColor.rgb;\n`;\n","export default /* glsl */`\nvarying vec3 vViewPosition;\n\n#ifndef FLAT_SHADED\n\n\tvarying vec3 vNormal;\n\n#endif\n\n\nstruct ToonMaterial {\n\n\tvec3 diffuseColor;\n\n};\n\nvoid RE_Direct_Toon( const in IncidentLight directLight, const in GeometricContext geometry, const in ToonMaterial material, inout ReflectedLight reflectedLight ) {\n\n\tvec3 irradiance = getGradientIrradiance( geometry.normal, directLight.direction ) * directLight.color;\n\n\t#ifndef PHYSICALLY_CORRECT_LIGHTS\n\n\t\tirradiance *= PI; // punctual light\n\n\t#endif\n\n\treflectedLight.directDiffuse += irradiance * BRDF_Diffuse_Lambert( material.diffuseColor );\n\n}\n\nvoid RE_IndirectDiffuse_Toon( const in vec3 irradiance, const in GeometricContext geometry, const in ToonMaterial material, inout ReflectedLight reflectedLight ) {\n\n\treflectedLight.indirectDiffuse += irradiance * BRDF_Diffuse_Lambert( material.diffuseColor );\n\n}\n\n#define RE_Direct\t\t\t\tRE_Direct_Toon\n#define RE_IndirectDiffuse\t\tRE_IndirectDiffuse_Toon\n\n#define Material_LightProbeLOD( material )\t(0)\n`;\n","export default /* glsl */`\nBlinnPhongMaterial material;\nmaterial.diffuseColor = diffuseColor.rgb;\nmaterial.specularColor = specular;\nmaterial.specularShininess = shininess;\nmaterial.specularStrength = specularStrength;\n`;\n","export default /* glsl */`\nvarying vec3 vViewPosition;\n\n#ifndef FLAT_SHADED\n\n\tvarying vec3 vNormal;\n\n#endif\n\n\nstruct BlinnPhongMaterial {\n\n\tvec3 diffuseColor;\n\tvec3 specularColor;\n\tfloat specularShininess;\n\tfloat specularStrength;\n\n};\n\nvoid RE_Direct_BlinnPhong( const in IncidentLight directLight, const in GeometricContext geometry, const in BlinnPhongMaterial material, inout ReflectedLight reflectedLight ) {\n\n\tfloat dotNL = saturate( dot( geometry.normal, directLight.direction ) );\n\tvec3 irradiance = dotNL * directLight.color;\n\n\t#ifndef PHYSICALLY_CORRECT_LIGHTS\n\n\t\tirradiance *= PI; // punctual light\n\n\t#endif\n\n\treflectedLight.directDiffuse += irradiance * BRDF_Diffuse_Lambert( material.diffuseColor );\n\n\treflectedLight.directSpecular += irradiance * BRDF_Specular_BlinnPhong( directLight, geometry, material.specularColor, material.specularShininess ) * material.specularStrength;\n\n}\n\nvoid RE_IndirectDiffuse_BlinnPhong( const in vec3 irradiance, const in GeometricContext geometry, const in BlinnPhongMaterial material, inout ReflectedLight reflectedLight ) {\n\n\treflectedLight.indirectDiffuse += irradiance * BRDF_Diffuse_Lambert( material.diffuseColor );\n\n}\n\n#define RE_Direct\t\t\t\tRE_Direct_BlinnPhong\n#define RE_IndirectDiffuse\t\tRE_IndirectDiffuse_BlinnPhong\n\n#define Material_LightProbeLOD( material )\t(0)\n`;\n","export default /* glsl */`\nPhysicalMaterial material;\nmaterial.diffuseColor = diffuseColor.rgb * ( 1.0 - metalnessFactor );\n\nvec3 dxy = max( abs( dFdx( geometryNormal ) ), abs( dFdy( geometryNormal ) ) );\nfloat geometryRoughness = max( max( dxy.x, dxy.y ), dxy.z );\n\nmaterial.specularRoughness = max( roughnessFactor, 0.0525 );// 0.0525 corresponds to the base mip of a 256 cubemap.\nmaterial.specularRoughness += geometryRoughness;\nmaterial.specularRoughness = min( material.specularRoughness, 1.0 );\n\n#ifdef REFLECTIVITY\n\n\tmaterial.specularColor = mix( vec3( MAXIMUM_SPECULAR_COEFFICIENT * pow2( reflectivity ) ), diffuseColor.rgb, metalnessFactor );\n\n#else\n\n\tmaterial.specularColor = mix( vec3( DEFAULT_SPECULAR_COEFFICIENT ), diffuseColor.rgb, metalnessFactor );\n\n#endif\n\n#ifdef CLEARCOAT\n\n\tmaterial.clearcoat = clearcoat;\n\tmaterial.clearcoatRoughness = clearcoatRoughness;\n\n\t#ifdef USE_CLEARCOATMAP\n\n\t\tmaterial.clearcoat *= texture2D( clearcoatMap, vUv ).x;\n\n\t#endif\n\n\t#ifdef USE_CLEARCOAT_ROUGHNESSMAP\n\n\t\tmaterial.clearcoatRoughness *= texture2D( clearcoatRoughnessMap, vUv ).y;\n\n\t#endif\n\n\tmaterial.clearcoat = saturate( material.clearcoat ); // Burley clearcoat model\n\tmaterial.clearcoatRoughness = max( material.clearcoatRoughness, 0.0525 );\n\tmaterial.clearcoatRoughness += geometryRoughness;\n\tmaterial.clearcoatRoughness = min( material.clearcoatRoughness, 1.0 );\n\n#endif\n\n#ifdef USE_SHEEN\n\n\tmaterial.sheenColor = sheen;\n\n#endif\n`;\n","export default /* glsl */`\nstruct PhysicalMaterial {\n\n\tvec3 diffuseColor;\n\tfloat specularRoughness;\n\tvec3 specularColor;\n\n#ifdef CLEARCOAT\n\tfloat clearcoat;\n\tfloat clearcoatRoughness;\n#endif\n#ifdef USE_SHEEN\n\tvec3 sheenColor;\n#endif\n\n};\n\n#define MAXIMUM_SPECULAR_COEFFICIENT 0.16\n#define DEFAULT_SPECULAR_COEFFICIENT 0.04\n\n// Clear coat directional hemishperical reflectance (this approximation should be improved)\nfloat clearcoatDHRApprox( const in float roughness, const in float dotNL ) {\n\n\treturn DEFAULT_SPECULAR_COEFFICIENT + ( 1.0 - DEFAULT_SPECULAR_COEFFICIENT ) * ( pow( 1.0 - dotNL, 5.0 ) * pow( 1.0 - roughness, 2.0 ) );\n\n}\n\n#if NUM_RECT_AREA_LIGHTS > 0\n\n\tvoid RE_Direct_RectArea_Physical( const in RectAreaLight rectAreaLight, const in GeometricContext geometry, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {\n\n\t\tvec3 normal = geometry.normal;\n\t\tvec3 viewDir = geometry.viewDir;\n\t\tvec3 position = geometry.position;\n\t\tvec3 lightPos = rectAreaLight.position;\n\t\tvec3 halfWidth = rectAreaLight.halfWidth;\n\t\tvec3 halfHeight = rectAreaLight.halfHeight;\n\t\tvec3 lightColor = rectAreaLight.color;\n\t\tfloat roughness = material.specularRoughness;\n\n\t\tvec3 rectCoords[ 4 ];\n\t\trectCoords[ 0 ] = lightPos + halfWidth - halfHeight; // counterclockwise; light shines in local neg z direction\n\t\trectCoords[ 1 ] = lightPos - halfWidth - halfHeight;\n\t\trectCoords[ 2 ] = lightPos - halfWidth + halfHeight;\n\t\trectCoords[ 3 ] = lightPos + halfWidth + halfHeight;\n\n\t\tvec2 uv = LTC_Uv( normal, viewDir, roughness );\n\n\t\tvec4 t1 = texture2D( ltc_1, uv );\n\t\tvec4 t2 = texture2D( ltc_2, uv );\n\n\t\tmat3 mInv = mat3(\n\t\t\tvec3( t1.x, 0, t1.y ),\n\t\t\tvec3(    0, 1,    0 ),\n\t\t\tvec3( t1.z, 0, t1.w )\n\t\t);\n\n\t\t// LTC Fresnel Approximation by Stephen Hill\n\t\t// http://blog.selfshadow.com/publications/s2016-advances/s2016_ltc_fresnel.pdf\n\t\tvec3 fresnel = ( material.specularColor * t2.x + ( vec3( 1.0 ) - material.specularColor ) * t2.y );\n\n\t\treflectedLight.directSpecular += lightColor * fresnel * LTC_Evaluate( normal, viewDir, position, mInv, rectCoords );\n\n\t\treflectedLight.directDiffuse += lightColor * material.diffuseColor * LTC_Evaluate( normal, viewDir, position, mat3( 1.0 ), rectCoords );\n\n\t}\n\n#endif\n\nvoid RE_Direct_Physical( const in IncidentLight directLight, const in GeometricContext geometry, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {\n\n\tfloat dotNL = saturate( dot( geometry.normal, directLight.direction ) );\n\n\tvec3 irradiance = dotNL * directLight.color;\n\n\t#ifndef PHYSICALLY_CORRECT_LIGHTS\n\n\t\tirradiance *= PI; // punctual light\n\n\t#endif\n\n\t#ifdef CLEARCOAT\n\n\t\tfloat ccDotNL = saturate( dot( geometry.clearcoatNormal, directLight.direction ) );\n\n\t\tvec3 ccIrradiance = ccDotNL * directLight.color;\n\n\t\t#ifndef PHYSICALLY_CORRECT_LIGHTS\n\n\t\t\tccIrradiance *= PI; // punctual light\n\n\t\t#endif\n\n\t\tfloat clearcoatDHR = material.clearcoat * clearcoatDHRApprox( material.clearcoatRoughness, ccDotNL );\n\n\t\treflectedLight.directSpecular += ccIrradiance * material.clearcoat * BRDF_Specular_GGX( directLight, geometry.viewDir, geometry.clearcoatNormal, vec3( DEFAULT_SPECULAR_COEFFICIENT ), material.clearcoatRoughness );\n\n\t#else\n\n\t\tfloat clearcoatDHR = 0.0;\n\n\t#endif\n\n\t#ifdef USE_SHEEN\n\t\treflectedLight.directSpecular += ( 1.0 - clearcoatDHR ) * irradiance * BRDF_Specular_Sheen(\n\t\t\tmaterial.specularRoughness,\n\t\t\tdirectLight.direction,\n\t\t\tgeometry,\n\t\t\tmaterial.sheenColor\n\t\t);\n\t#else\n\t\treflectedLight.directSpecular += ( 1.0 - clearcoatDHR ) * irradiance * BRDF_Specular_GGX( directLight, geometry.viewDir, geometry.normal, material.specularColor, material.specularRoughness);\n\t#endif\n\n\treflectedLight.directDiffuse += ( 1.0 - clearcoatDHR ) * irradiance * BRDF_Diffuse_Lambert( material.diffuseColor );\n}\n\nvoid RE_IndirectDiffuse_Physical( const in vec3 irradiance, const in GeometricContext geometry, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {\n\n\treflectedLight.indirectDiffuse += irradiance * BRDF_Diffuse_Lambert( material.diffuseColor );\n\n}\n\nvoid RE_IndirectSpecular_Physical( const in vec3 radiance, const in vec3 irradiance, const in vec3 clearcoatRadiance, const in GeometricContext geometry, const in PhysicalMaterial material, inout ReflectedLight reflectedLight) {\n\n\t#ifdef CLEARCOAT\n\n\t\tfloat ccDotNV = saturate( dot( geometry.clearcoatNormal, geometry.viewDir ) );\n\n\t\treflectedLight.indirectSpecular += clearcoatRadiance * material.clearcoat * BRDF_Specular_GGX_Environment( geometry.viewDir, geometry.clearcoatNormal, vec3( DEFAULT_SPECULAR_COEFFICIENT ), material.clearcoatRoughness );\n\n\t\tfloat ccDotNL = ccDotNV;\n\t\tfloat clearcoatDHR = material.clearcoat * clearcoatDHRApprox( material.clearcoatRoughness, ccDotNL );\n\n\t#else\n\n\t\tfloat clearcoatDHR = 0.0;\n\n\t#endif\n\n\tfloat clearcoatInv = 1.0 - clearcoatDHR;\n\n\t// Both indirect specular and indirect diffuse light accumulate here\n\n\tvec3 singleScattering = vec3( 0.0 );\n\tvec3 multiScattering = vec3( 0.0 );\n\tvec3 cosineWeightedIrradiance = irradiance * RECIPROCAL_PI;\n\n\tBRDF_Specular_Multiscattering_Environment( geometry, material.specularColor, material.specularRoughness, singleScattering, multiScattering );\n\n\tvec3 diffuse = material.diffuseColor * ( 1.0 - ( singleScattering + multiScattering ) );\n\n\treflectedLight.indirectSpecular += clearcoatInv * radiance * singleScattering;\n\treflectedLight.indirectSpecular += multiScattering * cosineWeightedIrradiance;\n\n\treflectedLight.indirectDiffuse += diffuse * cosineWeightedIrradiance;\n\n}\n\n#define RE_Direct\t\t\t\tRE_Direct_Physical\n#define RE_Direct_RectArea\t\tRE_Direct_RectArea_Physical\n#define RE_IndirectDiffuse\t\tRE_IndirectDiffuse_Physical\n#define RE_IndirectSpecular\t\tRE_IndirectSpecular_Physical\n\n// ref: https://seblagarde.files.wordpress.com/2015/07/course_notes_moving_frostbite_to_pbr_v32.pdf\nfloat computeSpecularOcclusion( const in float dotNV, const in float ambientOcclusion, const in float roughness ) {\n\n\treturn saturate( pow( dotNV + ambientOcclusion, exp2( - 16.0 * roughness - 1.0 ) ) - 1.0 + ambientOcclusion );\n\n}\n`;\n","export default /* glsl */`\n/**\n * This is a template that can be used to light a material, it uses pluggable\n * RenderEquations (RE)for specific lighting scenarios.\n *\n * Instructions for use:\n * - Ensure that both RE_Direct, RE_IndirectDiffuse and RE_IndirectSpecular are defined\n * - If you have defined an RE_IndirectSpecular, you need to also provide a Material_LightProbeLOD. <---- ???\n * - Create a material parameter that is to be passed as the third parameter to your lighting functions.\n *\n * TODO:\n * - Add area light support.\n * - Add sphere light support.\n * - Add diffuse light probe (irradiance cubemap) support.\n */\n\nGeometricContext geometry;\n\ngeometry.position = - vViewPosition;\ngeometry.normal = normal;\ngeometry.viewDir = ( isOrthographic ) ? vec3( 0, 0, 1 ) : normalize( vViewPosition );\n\n#ifdef CLEARCOAT\n\n\tgeometry.clearcoatNormal = clearcoatNormal;\n\n#endif\n\nIncidentLight directLight;\n\n#if ( NUM_POINT_LIGHTS > 0 ) && defined( RE_Direct )\n\n\tPointLight pointLight;\n\t#if defined( USE_SHADOWMAP ) && NUM_POINT_LIGHT_SHADOWS > 0\n\tPointLightShadow pointLightShadow;\n\t#endif\n\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_POINT_LIGHTS; i ++ ) {\n\n\t\tpointLight = pointLights[ i ];\n\n\t\tgetPointDirectLightIrradiance( pointLight, geometry, directLight );\n\n\t\t#if defined( USE_SHADOWMAP ) && ( UNROLLED_LOOP_INDEX < NUM_POINT_LIGHT_SHADOWS )\n\t\tpointLightShadow = pointLightShadows[ i ];\n\t\tdirectLight.color *= all( bvec2( directLight.visible, receiveShadow ) ) ? getPointShadow( pointShadowMap[ i ], pointLightShadow.shadowMapSize, pointLightShadow.shadowBias, pointLightShadow.shadowRadius, vPointShadowCoord[ i ], pointLightShadow.shadowCameraNear, pointLightShadow.shadowCameraFar ) : 1.0;\n\t\t#endif\n\n\t\tRE_Direct( directLight, geometry, material, reflectedLight );\n\n\t}\n\t#pragma unroll_loop_end\n\n#endif\n\n#if ( NUM_SPOT_LIGHTS > 0 ) && defined( RE_Direct )\n\n\tSpotLight spotLight;\n\t#if defined( USE_SHADOWMAP ) && NUM_SPOT_LIGHT_SHADOWS > 0\n\tSpotLightShadow spotLightShadow;\n\t#endif\n\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_SPOT_LIGHTS; i ++ ) {\n\n\t\tspotLight = spotLights[ i ];\n\n\t\tgetSpotDirectLightIrradiance( spotLight, geometry, directLight );\n\n\t\t#if defined( USE_SHADOWMAP ) && ( UNROLLED_LOOP_INDEX < NUM_SPOT_LIGHT_SHADOWS )\n\t\tspotLightShadow = spotLightShadows[ i ];\n\t\tdirectLight.color *= all( bvec2( directLight.visible, receiveShadow ) ) ? getShadow( spotShadowMap[ i ], spotLightShadow.shadowMapSize, spotLightShadow.shadowBias, spotLightShadow.shadowRadius, vSpotShadowCoord[ i ] ) : 1.0;\n\t\t#endif\n\n\t\tRE_Direct( directLight, geometry, material, reflectedLight );\n\n\t}\n\t#pragma unroll_loop_end\n\n#endif\n\n#if ( NUM_DIR_LIGHTS > 0 ) && defined( RE_Direct )\n\n\tDirectionalLight directionalLight;\n\t#if defined( USE_SHADOWMAP ) && NUM_DIR_LIGHT_SHADOWS > 0\n\tDirectionalLightShadow directionalLightShadow;\n\t#endif\n\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_DIR_LIGHTS; i ++ ) {\n\n\t\tdirectionalLight = directionalLights[ i ];\n\n\t\tgetDirectionalDirectLightIrradiance( directionalLight, geometry, directLight );\n\n\t\t#if defined( USE_SHADOWMAP ) && ( UNROLLED_LOOP_INDEX < NUM_DIR_LIGHT_SHADOWS )\n\t\tdirectionalLightShadow = directionalLightShadows[ i ];\n\t\tdirectLight.color *= all( bvec2( directLight.visible, receiveShadow ) ) ? getShadow( directionalShadowMap[ i ], directionalLightShadow.shadowMapSize, directionalLightShadow.shadowBias, directionalLightShadow.shadowRadius, vDirectionalShadowCoord[ i ] ) : 1.0;\n\t\t#endif\n\n\t\tRE_Direct( directLight, geometry, material, reflectedLight );\n\n\t}\n\t#pragma unroll_loop_end\n\n#endif\n\n#if ( NUM_RECT_AREA_LIGHTS > 0 ) && defined( RE_Direct_RectArea )\n\n\tRectAreaLight rectAreaLight;\n\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_RECT_AREA_LIGHTS; i ++ ) {\n\n\t\trectAreaLight = rectAreaLights[ i ];\n\t\tRE_Direct_RectArea( rectAreaLight, geometry, material, reflectedLight );\n\n\t}\n\t#pragma unroll_loop_end\n\n#endif\n\n#if defined( RE_IndirectDiffuse )\n\n\tvec3 iblIrradiance = vec3( 0.0 );\n\n\tvec3 irradiance = getAmbientLightIrradiance( ambientLightColor );\n\n\tirradiance += getLightProbeIrradiance( lightProbe, geometry );\n\n\t#if ( NUM_HEMI_LIGHTS > 0 )\n\n\t\t#pragma unroll_loop_start\n\t\tfor ( int i = 0; i < NUM_HEMI_LIGHTS; i ++ ) {\n\n\t\t\tirradiance += getHemisphereLightIrradiance( hemisphereLights[ i ], geometry );\n\n\t\t}\n\t\t#pragma unroll_loop_end\n\n\t#endif\n\n#endif\n\n#if defined( RE_IndirectSpecular )\n\n\tvec3 radiance = vec3( 0.0 );\n\tvec3 clearcoatRadiance = vec3( 0.0 );\n\n#endif\n`;\n","export default /* glsl */`\n#if defined( RE_IndirectDiffuse )\n\n\t#ifdef USE_LIGHTMAP\n\n\t\tvec4 lightMapTexel= texture2D( lightMap, vUv2 );\n\t\tvec3 lightMapIrradiance = lightMapTexelToLinear( lightMapTexel ).rgb * lightMapIntensity;\n\n\t\t#ifndef PHYSICALLY_CORRECT_LIGHTS\n\n\t\t\tlightMapIrradiance *= PI; // factor of PI should not be present; included here to prevent breakage\n\n\t\t#endif\n\n\t\tirradiance += lightMapIrradiance;\n\n\t#endif\n\n\t#if defined( USE_ENVMAP ) && defined( STANDARD ) && defined( ENVMAP_TYPE_CUBE_UV )\n\n\t\tiblIrradiance += getLightProbeIndirectIrradiance( /*lightProbe,*/ geometry, maxMipLevel );\n\n\t#endif\n\n#endif\n\n#if defined( USE_ENVMAP ) && defined( RE_IndirectSpecular )\n\n\tradiance += getLightProbeIndirectRadiance( /*specularLightProbe,*/ geometry.viewDir, geometry.normal, material.specularRoughness, maxMipLevel );\n\n\t#ifdef CLEARCOAT\n\n\t\tclearcoatRadiance += getLightProbeIndirectRadiance( /*specularLightProbe,*/ geometry.viewDir, geometry.clearcoatNormal, material.clearcoatRoughness, maxMipLevel );\n\n\t#endif\n\n#endif\n`;\n","export default /* glsl */`\n#if defined( RE_IndirectDiffuse )\n\n\tRE_IndirectDiffuse( irradiance, geometry, material, reflectedLight );\n\n#endif\n\n#if defined( RE_IndirectSpecular )\n\n\tRE_IndirectSpecular( radiance, iblIrradiance, clearcoatRadiance, geometry, material, reflectedLight );\n\n#endif\n`;\n","export default /* glsl */`\n#if defined( USE_LOGDEPTHBUF ) && defined( USE_LOGDEPTHBUF_EXT )\n\n\t// Doing a strict comparison with == 1.0 can cause noise artifacts\n\t// on some platforms. See issue #17623.\n\tgl_FragDepthEXT = vIsPerspective == 0.0 ? gl_FragCoord.z : log2( vFragDepth ) * logDepthBufFC * 0.5;\n\n#endif\n`;\n","export default /* glsl */`\n#if defined( USE_LOGDEPTHBUF ) && defined( USE_LOGDEPTHBUF_EXT )\n\n\tuniform float logDepthBufFC;\n\tvarying float vFragDepth;\n\tvarying float vIsPerspective;\n\n#endif\n`;\n","export default /* glsl */`\n#ifdef USE_LOGDEPTHBUF\n\n\t#ifdef USE_LOGDEPTHBUF_EXT\n\n\t\tvarying float vFragDepth;\n\t\tvarying float vIsPerspective;\n\n\t#else\n\n\t\tuniform float logDepthBufFC;\n\n\t#endif\n\n#endif\n`;\n","export default /* glsl */`\n#ifdef USE_LOGDEPTHBUF\n\n\t#ifdef USE_LOGDEPTHBUF_EXT\n\n\t\tvFragDepth = 1.0 + gl_Position.w;\n\t\tvIsPerspective = float( isPerspectiveMatrix( projectionMatrix ) );\n\n\t#else\n\n\t\tif ( isPerspectiveMatrix( projectionMatrix ) ) {\n\n\t\t\tgl_Position.z = log2( max( EPSILON, gl_Position.w + 1.0 ) ) * logDepthBufFC - 1.0;\n\n\t\t\tgl_Position.z *= gl_Position.w;\n\n\t\t}\n\n\t#endif\n\n#endif\n`;\n","export default /* glsl */`\n#ifdef USE_MAP\n\n\tvec4 texelColor = texture2D( map, vUv );\n\n\ttexelColor = mapTexelToLinear( texelColor );\n\tdiffuseColor *= texelColor;\n\n#endif\n`;\n","export default /* glsl */`\n#ifdef USE_MAP\n\n\tuniform sampler2D map;\n\n#endif\n`;\n","export default /* glsl */`\n#if defined( USE_MAP ) || defined( USE_ALPHAMAP )\n\n\tvec2 uv = ( uvTransform * vec3( gl_PointCoord.x, 1.0 - gl_PointCoord.y, 1 ) ).xy;\n\n#endif\n\n#ifdef USE_MAP\n\n\tvec4 mapTexel = texture2D( map, uv );\n\tdiffuseColor *= mapTexelToLinear( mapTexel );\n\n#endif\n\n#ifdef USE_ALPHAMAP\n\n\tdiffuseColor.a *= texture2D( alphaMap, uv ).g;\n\n#endif\n`;\n","export default /* glsl */`\n#if defined( USE_MAP ) || defined( USE_ALPHAMAP )\n\n\tuniform mat3 uvTransform;\n\n#endif\n\n#ifdef USE_MAP\n\n\tuniform sampler2D map;\n\n#endif\n\n#ifdef USE_ALPHAMAP\n\n\tuniform sampler2D alphaMap;\n\n#endif\n`;\n","export default /* glsl */`\nfloat metalnessFactor = metalness;\n\n#ifdef USE_METALNESSMAP\n\n\tvec4 texelMetalness = texture2D( metalnessMap, vUv );\n\n\t// reads channel B, compatible with a combined OcclusionRoughnessMetallic (RGB) texture\n\tmetalnessFactor *= texelMetalness.b;\n\n#endif\n`;\n","export default /* glsl */`\n#ifdef USE_METALNESSMAP\n\n\tuniform sampler2D metalnessMap;\n\n#endif\n`;\n","export default /* glsl */`\n#ifdef USE_MORPHNORMALS\n\n\t// morphTargetBaseInfluence is set based on BufferGeometry.morphTargetsRelative value:\n\t// When morphTargetsRelative is false, this is set to 1 - sum(influences); this results in normal = sum((target - base) * influence)\n\t// When morphTargetsRelative is true, this is set to 1; as a result, all morph targets are simply added to the base after weighting\n\tobjectNormal *= morphTargetBaseInfluence;\n\tobjectNormal += morphNormal0 * morphTargetInfluences[ 0 ];\n\tobjectNormal += morphNormal1 * morphTargetInfluences[ 1 ];\n\tobjectNormal += morphNormal2 * morphTargetInfluences[ 2 ];\n\tobjectNormal += morphNormal3 * morphTargetInfluences[ 3 ];\n\n#endif\n`;\n","export default /* glsl */`\n#ifdef USE_MORPHTARGETS\n\n\tuniform float morphTargetBaseInfluence;\n\n\t#ifndef USE_MORPHNORMALS\n\n\t\tuniform float morphTargetInfluences[ 8 ];\n\n\t#else\n\n\t\tuniform float morphTargetInfluences[ 4 ];\n\n\t#endif\n\n#endif\n`;\n","export default /* glsl */`\n#ifdef USE_MORPHTARGETS\n\n\t// morphTargetBaseInfluence is set based on BufferGeometry.morphTargetsRelative value:\n\t// When morphTargetsRelative is false, this is set to 1 - sum(influences); this results in position = sum((target - base) * influence)\n\t// When morphTargetsRelative is true, this is set to 1; as a result, all morph targets are simply added to the base after weighting\n\ttransformed *= morphTargetBaseInfluence;\n\ttransformed += morphTarget0 * morphTargetInfluences[ 0 ];\n\ttransformed += morphTarget1 * morphTargetInfluences[ 1 ];\n\ttransformed += morphTarget2 * morphTargetInfluences[ 2 ];\n\ttransformed += morphTarget3 * morphTargetInfluences[ 3 ];\n\n\t#ifndef USE_MORPHNORMALS\n\n\t\ttransformed += morphTarget4 * morphTargetInfluences[ 4 ];\n\t\ttransformed += morphTarget5 * morphTargetInfluences[ 5 ];\n\t\ttransformed += morphTarget6 * morphTargetInfluences[ 6 ];\n\t\ttransformed += morphTarget7 * morphTargetInfluences[ 7 ];\n\n\t#endif\n\n#endif\n`;\n","export default /* glsl */`\nfloat faceDirection = gl_FrontFacing ? 1.0 : - 1.0;\n\n#ifdef FLAT_SHADED\n\n\t// Workaround for Adreno GPUs not able to do dFdx( vViewPosition )\n\n\tvec3 fdx = vec3( dFdx( vViewPosition.x ), dFdx( vViewPosition.y ), dFdx( vViewPosition.z ) );\n\tvec3 fdy = vec3( dFdy( vViewPosition.x ), dFdy( vViewPosition.y ), dFdy( vViewPosition.z ) );\n\tvec3 normal = normalize( cross( fdx, fdy ) );\n\n#else\n\n\tvec3 normal = normalize( vNormal );\n\n\t#ifdef DOUBLE_SIDED\n\n\t\tnormal = normal * faceDirection;\n\n\t#endif\n\n\t#ifdef USE_TANGENT\n\n\t\tvec3 tangent = normalize( vTangent );\n\t\tvec3 bitangent = normalize( vBitangent );\n\n\t\t#ifdef DOUBLE_SIDED\n\n\t\t\ttangent = tangent * faceDirection;\n\t\t\tbitangent = bitangent * faceDirection;\n\n\t\t#endif\n\n\t\t#if defined( TANGENTSPACE_NORMALMAP ) || defined( USE_CLEARCOAT_NORMALMAP )\n\n\t\t\tmat3 vTBN = mat3( tangent, bitangent, normal );\n\n\t\t#endif\n\n\t#endif\n\n#endif\n\n// non perturbed normal for clearcoat among others\n\nvec3 geometryNormal = normal;\n\n`;\n","export default /* glsl */`\n\n#ifdef OBJECTSPACE_NORMALMAP\n\n\tnormal = texture2D( normalMap, vUv ).xyz * 2.0 - 1.0; // overrides both flatShading and attribute normals\n\n\t#ifdef FLIP_SIDED\n\n\t\tnormal = - normal;\n\n\t#endif\n\n\t#ifdef DOUBLE_SIDED\n\n\t\tnormal = normal * faceDirection;\n\n\t#endif\n\n\tnormal = normalize( normalMatrix * normal );\n\n#elif defined( TANGENTSPACE_NORMALMAP )\n\n\tvec3 mapN = texture2D( normalMap, vUv ).xyz * 2.0 - 1.0;\n\tmapN.xy *= normalScale;\n\n\t#ifdef USE_TANGENT\n\n\t\tnormal = normalize( vTBN * mapN );\n\n\t#else\n\n\t\tnormal = perturbNormal2Arb( -vViewPosition, normal, mapN, faceDirection );\n\n\t#endif\n\n#elif defined( USE_BUMPMAP )\n\n\tnormal = perturbNormalArb( -vViewPosition, normal, dHdxy_fwd(), faceDirection );\n\n#endif\n`;\n","export default /* glsl */`\n#ifdef USE_NORMALMAP\n\n\tuniform sampler2D normalMap;\n\tuniform vec2 normalScale;\n\n#endif\n\n#ifdef OBJECTSPACE_NORMALMAP\n\n\tuniform mat3 normalMatrix;\n\n#endif\n\n#if ! defined ( USE_TANGENT ) && ( defined ( TANGENTSPACE_NORMALMAP ) || defined ( USE_CLEARCOAT_NORMALMAP ) )\n\n\t// Normal Mapping Without Precomputed Tangents\n\t// http://www.thetenthplanet.de/archives/1180\n\n\tvec3 perturbNormal2Arb( vec3 eye_pos, vec3 surf_norm, vec3 mapN, float faceDirection ) {\n\n\t\t// Workaround for Adreno 3XX dFd*( vec3 ) bug. See #9988\n\n\t\tvec3 q0 = vec3( dFdx( eye_pos.x ), dFdx( eye_pos.y ), dFdx( eye_pos.z ) );\n\t\tvec3 q1 = vec3( dFdy( eye_pos.x ), dFdy( eye_pos.y ), dFdy( eye_pos.z ) );\n\t\tvec2 st0 = dFdx( vUv.st );\n\t\tvec2 st1 = dFdy( vUv.st );\n\n\t\tvec3 N = surf_norm; // normalized\n\n\t\tvec3 q1perp = cross( q1, N );\n\t\tvec3 q0perp = cross( N, q0 );\n\n\t\tvec3 T = q1perp * st0.x + q0perp * st1.x;\n\t\tvec3 B = q1perp * st0.y + q0perp * st1.y;\n\n\t\tfloat det = max( dot( T, T ), dot( B, B ) );\n\t\tfloat scale = ( det == 0.0 ) ? 0.0 : faceDirection * inversesqrt( det );\n\n\t\treturn normalize( T * ( mapN.x * scale ) + B * ( mapN.y * scale ) + N * mapN.z );\n\n\t}\n\n#endif\n`;\n","export default /* glsl */`\n#ifdef CLEARCOAT\n\n\tvec3 clearcoatNormal = geometryNormal;\n\n#endif\n`;\n","export default /* glsl */`\n#ifdef USE_CLEARCOAT_NORMALMAP\n\n\tvec3 clearcoatMapN = texture2D( clearcoatNormalMap, vUv ).xyz * 2.0 - 1.0;\n\tclearcoatMapN.xy *= clearcoatNormalScale;\n\n\t#ifdef USE_TANGENT\n\n\t\tclearcoatNormal = normalize( vTBN * clearcoatMapN );\n\n\t#else\n\n\t\tclearcoatNormal = perturbNormal2Arb( - vViewPosition, clearcoatNormal, clearcoatMapN, faceDirection );\n\n\t#endif\n\n#endif\n`;\n","export default /* glsl */`\n\n#ifdef USE_CLEARCOATMAP\n\n\tuniform sampler2D clearcoatMap;\n\n#endif\n\n#ifdef USE_CLEARCOAT_ROUGHNESSMAP\n\n\tuniform sampler2D clearcoatRoughnessMap;\n\n#endif\n\n#ifdef USE_CLEARCOAT_NORMALMAP\n\n\tuniform sampler2D clearcoatNormalMap;\n\tuniform vec2 clearcoatNormalScale;\n\n#endif\n`;\n","export default /* glsl */`\nvec3 packNormalToRGB( const in vec3 normal ) {\n\treturn normalize( normal ) * 0.5 + 0.5;\n}\n\nvec3 unpackRGBToNormal( const in vec3 rgb ) {\n\treturn 2.0 * rgb.xyz - 1.0;\n}\n\nconst float PackUpscale = 256. / 255.; // fraction -> 0..1 (including 1)\nconst float UnpackDownscale = 255. / 256.; // 0..1 -> fraction (excluding 1)\n\nconst vec3 PackFactors = vec3( 256. * 256. * 256., 256. * 256., 256. );\nconst vec4 UnpackFactors = UnpackDownscale / vec4( PackFactors, 1. );\n\nconst float ShiftRight8 = 1. / 256.;\n\nvec4 packDepthToRGBA( const in float v ) {\n\tvec4 r = vec4( fract( v * PackFactors ), v );\n\tr.yzw -= r.xyz * ShiftRight8; // tidy overflow\n\treturn r * PackUpscale;\n}\n\nfloat unpackRGBAToDepth( const in vec4 v ) {\n\treturn dot( v, UnpackFactors );\n}\n\nvec4 pack2HalfToRGBA( vec2 v ) {\n\tvec4 r = vec4( v.x, fract( v.x * 255.0 ), v.y, fract( v.y * 255.0 ));\n\treturn vec4( r.x - r.y / 255.0, r.y, r.z - r.w / 255.0, r.w);\n}\nvec2 unpackRGBATo2Half( vec4 v ) {\n\treturn vec2( v.x + ( v.y / 255.0 ), v.z + ( v.w / 255.0 ) );\n}\n\n// NOTE: viewZ/eyeZ is < 0 when in front of the camera per OpenGL conventions\n\nfloat viewZToOrthographicDepth( const in float viewZ, const in float near, const in float far ) {\n\treturn ( viewZ + near ) / ( near - far );\n}\nfloat orthographicDepthToViewZ( const in float linearClipZ, const in float near, const in float far ) {\n\treturn linearClipZ * ( near - far ) - near;\n}\n\nfloat viewZToPerspectiveDepth( const in float viewZ, const in float near, const in float far ) {\n\treturn (( near + viewZ ) * far ) / (( far - near ) * viewZ );\n}\nfloat perspectiveDepthToViewZ( const in float invClipZ, const in float near, const in float far ) {\n\treturn ( near * far ) / ( ( far - near ) * invClipZ - far );\n}\n`;\n","export default /* glsl */`\n#ifdef PREMULTIPLIED_ALPHA\n\n\t// Get get normal blending with premultipled, use with CustomBlending, OneFactor, OneMinusSrcAlphaFactor, AddEquation.\n\tgl_FragColor.rgb *= gl_FragColor.a;\n\n#endif\n`;\n","export default /* glsl */`\nvec4 mvPosition = vec4( transformed, 1.0 );\n\n#ifdef USE_INSTANCING\n\n\tmvPosition = instanceMatrix * mvPosition;\n\n#endif\n\nmvPosition = modelViewMatrix * mvPosition;\n\ngl_Position = projectionMatrix * mvPosition;\n`;\n","export default /* glsl */`\n#ifdef DITHERING\n\n\tgl_FragColor.rgb = dithering( gl_FragColor.rgb );\n\n#endif\n`;\n","export default /* glsl */`\n#ifdef DITHERING\n\n\t// based on https://www.shadertoy.com/view/MslGR8\n\tvec3 dithering( vec3 color ) {\n\t\t//Calculate grid position\n\t\tfloat grid_position = rand( gl_FragCoord.xy );\n\n\t\t//Shift the individual colors differently, thus making it even harder to see the dithering pattern\n\t\tvec3 dither_shift_RGB = vec3( 0.25 / 255.0, -0.25 / 255.0, 0.25 / 255.0 );\n\n\t\t//modify shift acording to grid position.\n\t\tdither_shift_RGB = mix( 2.0 * dither_shift_RGB, -2.0 * dither_shift_RGB, grid_position );\n\n\t\t//shift the color by dither_shift\n\t\treturn color + dither_shift_RGB;\n\t}\n\n#endif\n`;\n","export default /* glsl */`\nfloat roughnessFactor = roughness;\n\n#ifdef USE_ROUGHNESSMAP\n\n\tvec4 texelRoughness = texture2D( roughnessMap, vUv );\n\n\t// reads channel G, compatible with a combined OcclusionRoughnessMetallic (RGB) texture\n\troughnessFactor *= texelRoughness.g;\n\n#endif\n`;\n","export default /* glsl */`\n#ifdef USE_ROUGHNESSMAP\n\n\tuniform sampler2D roughnessMap;\n\n#endif\n`;\n","export default /* glsl */`\n#ifdef USE_SHADOWMAP\n\n\t#if NUM_DIR_LIGHT_SHADOWS > 0\n\n\t\tuniform sampler2D directionalShadowMap[ NUM_DIR_LIGHT_SHADOWS ];\n\t\tvarying vec4 vDirectionalShadowCoord[ NUM_DIR_LIGHT_SHADOWS ];\n\n\t\tstruct DirectionalLightShadow {\n\t\t\tfloat shadowBias;\n\t\t\tfloat shadowNormalBias;\n\t\t\tfloat shadowRadius;\n\t\t\tvec2 shadowMapSize;\n\t\t};\n\n\t\tuniform DirectionalLightShadow directionalLightShadows[ NUM_DIR_LIGHT_SHADOWS ];\n\n\t#endif\n\n\t#if NUM_SPOT_LIGHT_SHADOWS > 0\n\n\t\tuniform sampler2D spotShadowMap[ NUM_SPOT_LIGHT_SHADOWS ];\n\t\tvarying vec4 vSpotShadowCoord[ NUM_SPOT_LIGHT_SHADOWS ];\n\n\t\tstruct SpotLightShadow {\n\t\t\tfloat shadowBias;\n\t\t\tfloat shadowNormalBias;\n\t\t\tfloat shadowRadius;\n\t\t\tvec2 shadowMapSize;\n\t\t};\n\n\t\tuniform SpotLightShadow spotLightShadows[ NUM_SPOT_LIGHT_SHADOWS ];\n\n\t#endif\n\n\t#if NUM_POINT_LIGHT_SHADOWS > 0\n\n\t\tuniform sampler2D pointShadowMap[ NUM_POINT_LIGHT_SHADOWS ];\n\t\tvarying vec4 vPointShadowCoord[ NUM_POINT_LIGHT_SHADOWS ];\n\n\t\tstruct PointLightShadow {\n\t\t\tfloat shadowBias;\n\t\t\tfloat shadowNormalBias;\n\t\t\tfloat shadowRadius;\n\t\t\tvec2 shadowMapSize;\n\t\t\tfloat shadowCameraNear;\n\t\t\tfloat shadowCameraFar;\n\t\t};\n\n\t\tuniform PointLightShadow pointLightShadows[ NUM_POINT_LIGHT_SHADOWS ];\n\n\t#endif\n\n\t/*\n\t#if NUM_RECT_AREA_LIGHTS > 0\n\n\t\t// TODO (abelnation): create uniforms for area light shadows\n\n\t#endif\n\t*/\n\n\tfloat texture2DCompare( sampler2D depths, vec2 uv, float compare ) {\n\n\t\treturn step( compare, unpackRGBAToDepth( texture2D( depths, uv ) ) );\n\n\t}\n\n\tvec2 texture2DDistribution( sampler2D shadow, vec2 uv ) {\n\n\t\treturn unpackRGBATo2Half( texture2D( shadow, uv ) );\n\n\t}\n\n\tfloat VSMShadow (sampler2D shadow, vec2 uv, float compare ){\n\n\t\tfloat occlusion = 1.0;\n\n\t\tvec2 distribution = texture2DDistribution( shadow, uv );\n\n\t\tfloat hard_shadow = step( compare , distribution.x ); // Hard Shadow\n\n\t\tif (hard_shadow != 1.0 ) {\n\n\t\t\tfloat distance = compare - distribution.x ;\n\t\t\tfloat variance = max( 0.00000, distribution.y * distribution.y );\n\t\t\tfloat softness_probability = variance / (variance + distance * distance ); // Chebeyshevs inequality\n\t\t\tsoftness_probability = clamp( ( softness_probability - 0.3 ) / ( 0.95 - 0.3 ), 0.0, 1.0 ); // 0.3 reduces light bleed\n\t\t\tocclusion = clamp( max( hard_shadow, softness_probability ), 0.0, 1.0 );\n\n\t\t}\n\t\treturn occlusion;\n\n\t}\n\n\tfloat getShadow( sampler2D shadowMap, vec2 shadowMapSize, float shadowBias, float shadowRadius, vec4 shadowCoord ) {\n\n\t\tfloat shadow = 1.0;\n\n\t\tshadowCoord.xyz /= shadowCoord.w;\n\t\tshadowCoord.z += shadowBias;\n\n\t\t// if ( something && something ) breaks ATI OpenGL shader compiler\n\t\t// if ( all( something, something ) ) using this instead\n\n\t\tbvec4 inFrustumVec = bvec4 ( shadowCoord.x >= 0.0, shadowCoord.x <= 1.0, shadowCoord.y >= 0.0, shadowCoord.y <= 1.0 );\n\t\tbool inFrustum = all( inFrustumVec );\n\n\t\tbvec2 frustumTestVec = bvec2( inFrustum, shadowCoord.z <= 1.0 );\n\n\t\tbool frustumTest = all( frustumTestVec );\n\n\t\tif ( frustumTest ) {\n\n\t\t#if defined( SHADOWMAP_TYPE_PCF )\n\n\t\t\tvec2 texelSize = vec2( 1.0 ) / shadowMapSize;\n\n\t\t\tfloat dx0 = - texelSize.x * shadowRadius;\n\t\t\tfloat dy0 = - texelSize.y * shadowRadius;\n\t\t\tfloat dx1 = + texelSize.x * shadowRadius;\n\t\t\tfloat dy1 = + texelSize.y * shadowRadius;\n\t\t\tfloat dx2 = dx0 / 2.0;\n\t\t\tfloat dy2 = dy0 / 2.0;\n\t\t\tfloat dx3 = dx1 / 2.0;\n\t\t\tfloat dy3 = dy1 / 2.0;\n\n\t\t\tshadow = (\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, dy0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, dy0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx2, dy2 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy2 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx3, dy2 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, 0.0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx2, 0.0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy, shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx3, 0.0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, 0.0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx2, dy3 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy3 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx3, dy3 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, dy1 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy1 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, dy1 ), shadowCoord.z )\n\t\t\t) * ( 1.0 / 17.0 );\n\n\t\t#elif defined( SHADOWMAP_TYPE_PCF_SOFT )\n\n\t\t\tvec2 texelSize = vec2( 1.0 ) / shadowMapSize;\n\t\t\tfloat dx = texelSize.x;\n\t\t\tfloat dy = texelSize.y;\n\n\t\t\tvec2 uv = shadowCoord.xy;\n\t\t\tvec2 f = fract( uv * shadowMapSize + 0.5 );\n\t\t\tuv -= f * texelSize;\n\n\t\t\tshadow = (\n\t\t\t\ttexture2DCompare( shadowMap, uv, shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, uv + vec2( dx, 0.0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, uv + vec2( 0.0, dy ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, uv + texelSize, shadowCoord.z ) +\n\t\t\t\tmix( texture2DCompare( shadowMap, uv + vec2( -dx, 0.0 ), shadowCoord.z ), \n\t\t\t\t\t texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, 0.0 ), shadowCoord.z ),\n\t\t\t\t\t f.x ) +\n\t\t\t\tmix( texture2DCompare( shadowMap, uv + vec2( -dx, dy ), shadowCoord.z ), \n\t\t\t\t\t texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, dy ), shadowCoord.z ),\n\t\t\t\t\t f.x ) +\n\t\t\t\tmix( texture2DCompare( shadowMap, uv + vec2( 0.0, -dy ), shadowCoord.z ), \n\t\t\t\t\t texture2DCompare( shadowMap, uv + vec2( 0.0, 2.0 * dy ), shadowCoord.z ),\n\t\t\t\t\t f.y ) +\n\t\t\t\tmix( texture2DCompare( shadowMap, uv + vec2( dx, -dy ), shadowCoord.z ), \n\t\t\t\t\t texture2DCompare( shadowMap, uv + vec2( dx, 2.0 * dy ), shadowCoord.z ),\n\t\t\t\t\t f.y ) +\n\t\t\t\tmix( mix( texture2DCompare( shadowMap, uv + vec2( -dx, -dy ), shadowCoord.z ), \n\t\t\t\t\t\t  texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, -dy ), shadowCoord.z ),\n\t\t\t\t\t\t  f.x ),\n\t\t\t\t\t mix( texture2DCompare( shadowMap, uv + vec2( -dx, 2.0 * dy ), shadowCoord.z ), \n\t\t\t\t\t\t  texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, 2.0 * dy ), shadowCoord.z ),\n\t\t\t\t\t\t  f.x ),\n\t\t\t\t\t f.y )\n\t\t\t) * ( 1.0 / 9.0 );\n\n\t\t#elif defined( SHADOWMAP_TYPE_VSM )\n\n\t\t\tshadow = VSMShadow( shadowMap, shadowCoord.xy, shadowCoord.z );\n\n\t\t#else // no percentage-closer filtering:\n\n\t\t\tshadow = texture2DCompare( shadowMap, shadowCoord.xy, shadowCoord.z );\n\n\t\t#endif\n\n\t\t}\n\n\t\treturn shadow;\n\n\t}\n\n\t// cubeToUV() maps a 3D direction vector suitable for cube texture mapping to a 2D\n\t// vector suitable for 2D texture mapping. This code uses the following layout for the\n\t// 2D texture:\n\t//\n\t// xzXZ\n\t//  y Y\n\t//\n\t// Y - Positive y direction\n\t// y - Negative y direction\n\t// X - Positive x direction\n\t// x - Negative x direction\n\t// Z - Positive z direction\n\t// z - Negative z direction\n\t//\n\t// Source and test bed:\n\t// https://gist.github.com/tschw/da10c43c467ce8afd0c4\n\n\tvec2 cubeToUV( vec3 v, float texelSizeY ) {\n\n\t\t// Number of texels to avoid at the edge of each square\n\n\t\tvec3 absV = abs( v );\n\n\t\t// Intersect unit cube\n\n\t\tfloat scaleToCube = 1.0 / max( absV.x, max( absV.y, absV.z ) );\n\t\tabsV *= scaleToCube;\n\n\t\t// Apply scale to avoid seams\n\n\t\t// two texels less per square (one texel will do for NEAREST)\n\t\tv *= scaleToCube * ( 1.0 - 2.0 * texelSizeY );\n\n\t\t// Unwrap\n\n\t\t// space: -1 ... 1 range for each square\n\t\t//\n\t\t// #X##\t\tdim    := ( 4 , 2 )\n\t\t//  # #\t\tcenter := ( 1 , 1 )\n\n\t\tvec2 planar = v.xy;\n\n\t\tfloat almostATexel = 1.5 * texelSizeY;\n\t\tfloat almostOne = 1.0 - almostATexel;\n\n\t\tif ( absV.z >= almostOne ) {\n\n\t\t\tif ( v.z > 0.0 )\n\t\t\t\tplanar.x = 4.0 - v.x;\n\n\t\t} else if ( absV.x >= almostOne ) {\n\n\t\t\tfloat signX = sign( v.x );\n\t\t\tplanar.x = v.z * signX + 2.0 * signX;\n\n\t\t} else if ( absV.y >= almostOne ) {\n\n\t\t\tfloat signY = sign( v.y );\n\t\t\tplanar.x = v.x + 2.0 * signY + 2.0;\n\t\t\tplanar.y = v.z * signY - 2.0;\n\n\t\t}\n\n\t\t// Transform to UV space\n\n\t\t// scale := 0.5 / dim\n\t\t// translate := ( center + 0.5 ) / dim\n\t\treturn vec2( 0.125, 0.25 ) * planar + vec2( 0.375, 0.75 );\n\n\t}\n\n\tfloat getPointShadow( sampler2D shadowMap, vec2 shadowMapSize, float shadowBias, float shadowRadius, vec4 shadowCoord, float shadowCameraNear, float shadowCameraFar ) {\n\n\t\tvec2 texelSize = vec2( 1.0 ) / ( shadowMapSize * vec2( 4.0, 2.0 ) );\n\n\t\t// for point lights, the uniform @vShadowCoord is re-purposed to hold\n\t\t// the vector from the light to the world-space position of the fragment.\n\t\tvec3 lightToPosition = shadowCoord.xyz;\n\n\t\t// dp = normalized distance from light to fragment position\n\t\tfloat dp = ( length( lightToPosition ) - shadowCameraNear ) / ( shadowCameraFar - shadowCameraNear ); // need to clamp?\n\t\tdp += shadowBias;\n\n\t\t// bd3D = base direction 3D\n\t\tvec3 bd3D = normalize( lightToPosition );\n\n\t\t#if defined( SHADOWMAP_TYPE_PCF ) || defined( SHADOWMAP_TYPE_PCF_SOFT ) || defined( SHADOWMAP_TYPE_VSM )\n\n\t\t\tvec2 offset = vec2( - 1, 1 ) * shadowRadius * texelSize.y;\n\n\t\t\treturn (\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.xyy, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.yyy, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.xyx, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.yyx, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.xxy, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.yxy, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.xxx, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.yxx, texelSize.y ), dp )\n\t\t\t) * ( 1.0 / 9.0 );\n\n\t\t#else // no percentage-closer filtering\n\n\t\t\treturn texture2DCompare( shadowMap, cubeToUV( bd3D, texelSize.y ), dp );\n\n\t\t#endif\n\n\t}\n\n#endif\n`;\n","export default /* glsl */`\n#ifdef USE_SHADOWMAP\n\n\t#if NUM_DIR_LIGHT_SHADOWS > 0\n\n\t\tuniform mat4 directionalShadowMatrix[ NUM_DIR_LIGHT_SHADOWS ];\n\t\tvarying vec4 vDirectionalShadowCoord[ NUM_DIR_LIGHT_SHADOWS ];\n\n\t\tstruct DirectionalLightShadow {\n\t\t\tfloat shadowBias;\n\t\t\tfloat shadowNormalBias;\n\t\t\tfloat shadowRadius;\n\t\t\tvec2 shadowMapSize;\n\t\t};\n\n\t\tuniform DirectionalLightShadow directionalLightShadows[ NUM_DIR_LIGHT_SHADOWS ];\n\n\t#endif\n\n\t#if NUM_SPOT_LIGHT_SHADOWS > 0\n\n\t\tuniform mat4 spotShadowMatrix[ NUM_SPOT_LIGHT_SHADOWS ];\n\t\tvarying vec4 vSpotShadowCoord[ NUM_SPOT_LIGHT_SHADOWS ];\n\n\t\tstruct SpotLightShadow {\n\t\t\tfloat shadowBias;\n\t\t\tfloat shadowNormalBias;\n\t\t\tfloat shadowRadius;\n\t\t\tvec2 shadowMapSize;\n\t\t};\n\n\t\tuniform SpotLightShadow spotLightShadows[ NUM_SPOT_LIGHT_SHADOWS ];\n\n\t#endif\n\n\t#if NUM_POINT_LIGHT_SHADOWS > 0\n\n\t\tuniform mat4 pointShadowMatrix[ NUM_POINT_LIGHT_SHADOWS ];\n\t\tvarying vec4 vPointShadowCoord[ NUM_POINT_LIGHT_SHADOWS ];\n\n\t\tstruct PointLightShadow {\n\t\t\tfloat shadowBias;\n\t\t\tfloat shadowNormalBias;\n\t\t\tfloat shadowRadius;\n\t\t\tvec2 shadowMapSize;\n\t\t\tfloat shadowCameraNear;\n\t\t\tfloat shadowCameraFar;\n\t\t};\n\n\t\tuniform PointLightShadow pointLightShadows[ NUM_POINT_LIGHT_SHADOWS ];\n\n\t#endif\n\n\t/*\n\t#if NUM_RECT_AREA_LIGHTS > 0\n\n\t\t// TODO (abelnation): uniforms for area light shadows\n\n\t#endif\n\t*/\n\n#endif\n`;\n","export default /* glsl */`\n#ifdef USE_SHADOWMAP\n\n\t#if NUM_DIR_LIGHT_SHADOWS > 0 || NUM_SPOT_LIGHT_SHADOWS > 0 || NUM_POINT_LIGHT_SHADOWS > 0\n\n\t\t// Offsetting the position used for querying occlusion along the world normal can be used to reduce shadow acne.\n\t\tvec3 shadowWorldNormal = inverseTransformDirection( transformedNormal, viewMatrix );\n\t\tvec4 shadowWorldPosition;\n\n\t#endif\n\n\t#if NUM_DIR_LIGHT_SHADOWS > 0\n\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_DIR_LIGHT_SHADOWS; i ++ ) {\n\n\t\tshadowWorldPosition = worldPosition + vec4( shadowWorldNormal * directionalLightShadows[ i ].shadowNormalBias, 0 );\n\t\tvDirectionalShadowCoord[ i ] = directionalShadowMatrix[ i ] * shadowWorldPosition;\n\n\t}\n\t#pragma unroll_loop_end\n\n\t#endif\n\n\t#if NUM_SPOT_LIGHT_SHADOWS > 0\n\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_SPOT_LIGHT_SHADOWS; i ++ ) {\n\n\t\tshadowWorldPosition = worldPosition + vec4( shadowWorldNormal * spotLightShadows[ i ].shadowNormalBias, 0 );\n\t\tvSpotShadowCoord[ i ] = spotShadowMatrix[ i ] * shadowWorldPosition;\n\n\t}\n\t#pragma unroll_loop_end\n\n\t#endif\n\n\t#if NUM_POINT_LIGHT_SHADOWS > 0\n\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_POINT_LIGHT_SHADOWS; i ++ ) {\n\n\t\tshadowWorldPosition = worldPosition + vec4( shadowWorldNormal * pointLightShadows[ i ].shadowNormalBias, 0 );\n\t\tvPointShadowCoord[ i ] = pointShadowMatrix[ i ] * shadowWorldPosition;\n\n\t}\n\t#pragma unroll_loop_end\n\n\t#endif\n\n\t/*\n\t#if NUM_RECT_AREA_LIGHTS > 0\n\n\t\t// TODO (abelnation): update vAreaShadowCoord with area light info\n\n\t#endif\n\t*/\n\n#endif\n`;\n","export default /* glsl */`\nfloat getShadowMask() {\n\n\tfloat shadow = 1.0;\n\n\t#ifdef USE_SHADOWMAP\n\n\t#if NUM_DIR_LIGHT_SHADOWS > 0\n\n\tDirectionalLightShadow directionalLight;\n\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_DIR_LIGHT_SHADOWS; i ++ ) {\n\n\t\tdirectionalLight = directionalLightShadows[ i ];\n\t\tshadow *= receiveShadow ? getShadow( directionalShadowMap[ i ], directionalLight.shadowMapSize, directionalLight.shadowBias, directionalLight.shadowRadius, vDirectionalShadowCoord[ i ] ) : 1.0;\n\n\t}\n\t#pragma unroll_loop_end\n\n\t#endif\n\n\t#if NUM_SPOT_LIGHT_SHADOWS > 0\n\n\tSpotLightShadow spotLight;\n\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_SPOT_LIGHT_SHADOWS; i ++ ) {\n\n\t\tspotLight = spotLightShadows[ i ];\n\t\tshadow *= receiveShadow ? getShadow( spotShadowMap[ i ], spotLight.shadowMapSize, spotLight.shadowBias, spotLight.shadowRadius, vSpotShadowCoord[ i ] ) : 1.0;\n\n\t}\n\t#pragma unroll_loop_end\n\n\t#endif\n\n\t#if NUM_POINT_LIGHT_SHADOWS > 0\n\n\tPointLightShadow pointLight;\n\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_POINT_LIGHT_SHADOWS; i ++ ) {\n\n\t\tpointLight = pointLightShadows[ i ];\n\t\tshadow *= receiveShadow ? getPointShadow( pointShadowMap[ i ], pointLight.shadowMapSize, pointLight.shadowBias, pointLight.shadowRadius, vPointShadowCoord[ i ], pointLight.shadowCameraNear, pointLight.shadowCameraFar ) : 1.0;\n\n\t}\n\t#pragma unroll_loop_end\n\n\t#endif\n\n\t/*\n\t#if NUM_RECT_AREA_LIGHTS > 0\n\n\t\t// TODO (abelnation): update shadow for Area light\n\n\t#endif\n\t*/\n\n\t#endif\n\n\treturn shadow;\n\n}\n`;\n","export default /* glsl */`\n#ifdef USE_SKINNING\n\n\tmat4 boneMatX = getBoneMatrix( skinIndex.x );\n\tmat4 boneMatY = getBoneMatrix( skinIndex.y );\n\tmat4 boneMatZ = getBoneMatrix( skinIndex.z );\n\tmat4 boneMatW = getBoneMatrix( skinIndex.w );\n\n#endif\n`;\n","export default /* glsl */`\n#ifdef USE_SKINNING\n\n\tuniform mat4 bindMatrix;\n\tuniform mat4 bindMatrixInverse;\n\n\t#ifdef BONE_TEXTURE\n\n\t\tuniform highp sampler2D boneTexture;\n\t\tuniform int boneTextureSize;\n\n\t\tmat4 getBoneMatrix( const in float i ) {\n\n\t\t\tfloat j = i * 4.0;\n\t\t\tfloat x = mod( j, float( boneTextureSize ) );\n\t\t\tfloat y = floor( j / float( boneTextureSize ) );\n\n\t\t\tfloat dx = 1.0 / float( boneTextureSize );\n\t\t\tfloat dy = 1.0 / float( boneTextureSize );\n\n\t\t\ty = dy * ( y + 0.5 );\n\n\t\t\tvec4 v1 = texture2D( boneTexture, vec2( dx * ( x + 0.5 ), y ) );\n\t\t\tvec4 v2 = texture2D( boneTexture, vec2( dx * ( x + 1.5 ), y ) );\n\t\t\tvec4 v3 = texture2D( boneTexture, vec2( dx * ( x + 2.5 ), y ) );\n\t\t\tvec4 v4 = texture2D( boneTexture, vec2( dx * ( x + 3.5 ), y ) );\n\n\t\t\tmat4 bone = mat4( v1, v2, v3, v4 );\n\n\t\t\treturn bone;\n\n\t\t}\n\n\t#else\n\n\t\tuniform mat4 boneMatrices[ MAX_BONES ];\n\n\t\tmat4 getBoneMatrix( const in float i ) {\n\n\t\t\tmat4 bone = boneMatrices[ int(i) ];\n\t\t\treturn bone;\n\n\t\t}\n\n\t#endif\n\n#endif\n`;\n","export default /* glsl */`\n#ifdef USE_SKINNING\n\n\tvec4 skinVertex = bindMatrix * vec4( transformed, 1.0 );\n\n\tvec4 skinned = vec4( 0.0 );\n\tskinned += boneMatX * skinVertex * skinWeight.x;\n\tskinned += boneMatY * skinVertex * skinWeight.y;\n\tskinned += boneMatZ * skinVertex * skinWeight.z;\n\tskinned += boneMatW * skinVertex * skinWeight.w;\n\n\ttransformed = ( bindMatrixInverse * skinned ).xyz;\n\n#endif\n`;\n","export default /* glsl */`\n#ifdef USE_SKINNING\n\n\tmat4 skinMatrix = mat4( 0.0 );\n\tskinMatrix += skinWeight.x * boneMatX;\n\tskinMatrix += skinWeight.y * boneMatY;\n\tskinMatrix += skinWeight.z * boneMatZ;\n\tskinMatrix += skinWeight.w * boneMatW;\n\tskinMatrix = bindMatrixInverse * skinMatrix * bindMatrix;\n\n\tobjectNormal = vec4( skinMatrix * vec4( objectNormal, 0.0 ) ).xyz;\n\n\t#ifdef USE_TANGENT\n\n\t\tobjectTangent = vec4( skinMatrix * vec4( objectTangent, 0.0 ) ).xyz;\n\n\t#endif\n\n#endif\n`;\n","export default /* glsl */`\nfloat specularStrength;\n\n#ifdef USE_SPECULARMAP\n\n\tvec4 texelSpecular = texture2D( specularMap, vUv );\n\tspecularStrength = texelSpecular.r;\n\n#else\n\n\tspecularStrength = 1.0;\n\n#endif\n`;\n","export default /* glsl */`\n#ifdef USE_SPECULARMAP\n\n\tuniform sampler2D specularMap;\n\n#endif\n`;\n","export default /* glsl */`\n#if defined( TONE_MAPPING )\n\n\tgl_FragColor.rgb = toneMapping( gl_FragColor.rgb );\n\n#endif\n`;\n","export default /* glsl */`\n#ifndef saturate\n// <common> may have defined saturate() already\n#define saturate(a) clamp( a, 0.0, 1.0 )\n#endif\n\nuniform float toneMappingExposure;\n\n// exposure only\nvec3 LinearToneMapping( vec3 color ) {\n\n\treturn toneMappingExposure * color;\n\n}\n\n// source: https://www.cs.utah.edu/~reinhard/cdrom/\nvec3 ReinhardToneMapping( vec3 color ) {\n\n\tcolor *= toneMappingExposure;\n\treturn saturate( color / ( vec3( 1.0 ) + color ) );\n\n}\n\n// source: http://filmicworlds.com/blog/filmic-tonemapping-operators/\nvec3 OptimizedCineonToneMapping( vec3 color ) {\n\n\t// optimized filmic operator by Jim Hejl and Richard Burgess-Dawson\n\tcolor *= toneMappingExposure;\n\tcolor = max( vec3( 0.0 ), color - 0.004 );\n\treturn pow( ( color * ( 6.2 * color + 0.5 ) ) / ( color * ( 6.2 * color + 1.7 ) + 0.06 ), vec3( 2.2 ) );\n\n}\n\n// source: https://github.com/selfshadow/ltc_code/blob/master/webgl/shaders/ltc/ltc_blit.fs\nvec3 RRTAndODTFit( vec3 v ) {\n\n\tvec3 a = v * ( v + 0.0245786 ) - 0.000090537;\n\tvec3 b = v * ( 0.983729 * v + 0.4329510 ) + 0.238081;\n\treturn a / b;\n\n}\n\n// this implementation of ACES is modified to accommodate a brighter viewing environment.\n// the scale factor of 1/0.6 is subjective. see discussion in #19621.\n\nvec3 ACESFilmicToneMapping( vec3 color ) {\n\n\t// sRGB => XYZ => D65_2_D60 => AP1 => RRT_SAT\n\tconst mat3 ACESInputMat = mat3(\n\t\tvec3( 0.59719, 0.07600, 0.02840 ), // transposed from source\n\t\tvec3( 0.35458, 0.90834, 0.13383 ),\n\t\tvec3( 0.04823, 0.01566, 0.83777 )\n\t);\n\n\t// ODT_SAT => XYZ => D60_2_D65 => sRGB\n\tconst mat3 ACESOutputMat = mat3(\n\t\tvec3(  1.60475, -0.10208, -0.00327 ), // transposed from source\n\t\tvec3( -0.53108,  1.10813, -0.07276 ),\n\t\tvec3( -0.07367, -0.00605,  1.07602 )\n\t);\n\n\tcolor *= toneMappingExposure / 0.6;\n\n\tcolor = ACESInputMat * color;\n\n\t// Apply RRT and ODT\n\tcolor = RRTAndODTFit( color );\n\n\tcolor = ACESOutputMat * color;\n\n\t// Clamp to [0, 1]\n\treturn saturate( color );\n\n}\n\nvec3 CustomToneMapping( vec3 color ) { return color; }\n`;\n","export default /* glsl */`\n#ifdef USE_TRANSMISSIONMAP\n\n\ttotalTransmission *= texture2D( transmissionMap, vUv ).r;\n\n#endif\n`;\n","export default /* glsl */`\n#ifdef USE_TRANSMISSIONMAP\n\n\tuniform sampler2D transmissionMap;\n\n#endif\n`;\n","export default /* glsl */`\n#if ( defined( USE_UV ) && ! defined( UVS_VERTEX_ONLY ) )\n\n\tvarying vec2 vUv;\n\n#endif\n`;\n","export default /* glsl */`\n#ifdef USE_UV\n\n\t#ifdef UVS_VERTEX_ONLY\n\n\t\tvec2 vUv;\n\n\t#else\n\n\t\tvarying vec2 vUv;\n\n\t#endif\n\n\tuniform mat3 uvTransform;\n\n#endif\n`;\n","export default /* glsl */`\n#ifdef USE_UV\n\n\tvUv = ( uvTransform * vec3( uv, 1 ) ).xy;\n\n#endif\n`;\n","export default /* glsl */`\n#if defined( USE_LIGHTMAP ) || defined( USE_AOMAP )\n\n\tvarying vec2 vUv2;\n\n#endif\n`;\n","export default /* glsl */`\n#if defined( USE_LIGHTMAP ) || defined( USE_AOMAP )\n\n\tattribute vec2 uv2;\n\tvarying vec2 vUv2;\n\n\tuniform mat3 uv2Transform;\n\n#endif\n`;\n","export default /* glsl */`\n#if defined( USE_LIGHTMAP ) || defined( USE_AOMAP )\n\n\tvUv2 = ( uv2Transform * vec3( uv2, 1 ) ).xy;\n\n#endif\n`;\n","export default /* glsl */`\n#if defined( USE_ENVMAP ) || defined( DISTANCE ) || defined ( USE_SHADOWMAP )\n\n\tvec4 worldPosition = vec4( transformed, 1.0 );\n\n\t#ifdef USE_INSTANCING\n\n\t\tworldPosition = instanceMatrix * worldPosition;\n\n\t#endif\n\n\tworldPosition = modelMatrix * worldPosition;\n\n#endif\n`;\n","export default /* glsl */`\nuniform sampler2D t2D;\n\nvarying vec2 vUv;\n\nvoid main() {\n\n\tvec4 texColor = texture2D( t2D, vUv );\n\n\tgl_FragColor = mapTexelToLinear( texColor );\n\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\n}\n`;\n","export default /* glsl */`\nvarying vec2 vUv;\nuniform mat3 uvTransform;\n\nvoid main() {\n\n\tvUv = ( uvTransform * vec3( uv, 1 ) ).xy;\n\n\tgl_Position = vec4( position.xy, 1.0, 1.0 );\n\n}\n`;\n","export default /* glsl */`\n#include <envmap_common_pars_fragment>\nuniform float opacity;\n\nvarying vec3 vWorldDirection;\n\n#include <cube_uv_reflection_fragment>\n\nvoid main() {\n\n\tvec3 vReflect = vWorldDirection;\n\t#include <envmap_fragment>\n\n\tgl_FragColor = envColor;\n\tgl_FragColor.a *= opacity;\n\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\n}\n`;\n","export default /* glsl */`\nvarying vec3 vWorldDirection;\n\n#include <common>\n\nvoid main() {\n\n\tvWorldDirection = transformDirection( position, modelMatrix );\n\n\t#include <begin_vertex>\n\t#include <project_vertex>\n\n\tgl_Position.z = gl_Position.w; // set z to camera.far\n\n}\n`;\n","export default /* glsl */`\n#if DEPTH_PACKING == 3200\n\n\tuniform float opacity;\n\n#endif\n\n#include <common>\n#include <packing>\n#include <uv_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\n\nvarying vec2 vHighPrecisionZW;\n\nvoid main() {\n\n\t#include <clipping_planes_fragment>\n\n\tvec4 diffuseColor = vec4( 1.0 );\n\n\t#if DEPTH_PACKING == 3200\n\n\t\tdiffuseColor.a = opacity;\n\n\t#endif\n\n\t#include <map_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\n\t#include <logdepthbuf_fragment>\n\n\t// Higher precision equivalent of gl_FragCoord.z. This assumes depthRange has been left to its default values.\n\tfloat fragCoordZ = 0.5 * vHighPrecisionZW[0] / vHighPrecisionZW[1] + 0.5;\n\n\t#if DEPTH_PACKING == 3200\n\n\t\tgl_FragColor = vec4( vec3( 1.0 - fragCoordZ ), opacity );\n\n\t#elif DEPTH_PACKING == 3201\n\n\t\tgl_FragColor = packDepthToRGBA( fragCoordZ );\n\n\t#endif\n\n}\n`;\n","export default /* glsl */`\n#include <common>\n#include <uv_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\n\n// This is used for computing an equivalent of gl_FragCoord.z that is as high precision as possible.\n// Some platforms compute gl_FragCoord at a lower precision which makes the manually computed value better for\n// depth-based postprocessing effects. Reproduced on iPad with A10 processor / iPadOS 13.3.1.\nvarying vec2 vHighPrecisionZW;\n\nvoid main() {\n\n\t#include <uv_vertex>\n\n\t#include <skinbase_vertex>\n\n\t#ifdef USE_DISPLACEMENTMAP\n\n\t\t#include <beginnormal_vertex>\n\t\t#include <morphnormal_vertex>\n\t\t#include <skinnormal_vertex>\n\n\t#endif\n\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <displacementmap_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\n\tvHighPrecisionZW = gl_Position.zw;\n\n}\n`;\n","export default /* glsl */`\n#define DISTANCE\n\nuniform vec3 referencePosition;\nuniform float nearDistance;\nuniform float farDistance;\nvarying vec3 vWorldPosition;\n\n#include <common>\n#include <packing>\n#include <uv_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <clipping_planes_pars_fragment>\n\nvoid main () {\n\n\t#include <clipping_planes_fragment>\n\n\tvec4 diffuseColor = vec4( 1.0 );\n\n\t#include <map_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\n\tfloat dist = length( vWorldPosition - referencePosition );\n\tdist = ( dist - nearDistance ) / ( farDistance - nearDistance );\n\tdist = saturate( dist ); // clamp to [ 0, 1 ]\n\n\tgl_FragColor = packDepthToRGBA( dist );\n\n}\n`;\n","export default /* glsl */`\n#define DISTANCE\n\nvarying vec3 vWorldPosition;\n\n#include <common>\n#include <uv_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <clipping_planes_pars_vertex>\n\nvoid main() {\n\n\t#include <uv_vertex>\n\n\t#include <skinbase_vertex>\n\n\t#ifdef USE_DISPLACEMENTMAP\n\n\t\t#include <beginnormal_vertex>\n\t\t#include <morphnormal_vertex>\n\t\t#include <skinnormal_vertex>\n\n\t#endif\n\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <displacementmap_vertex>\n\t#include <project_vertex>\n\t#include <worldpos_vertex>\n\t#include <clipping_planes_vertex>\n\n\tvWorldPosition = worldPosition.xyz;\n\n}\n`;\n","export default /* glsl */`\nuniform sampler2D tEquirect;\n\nvarying vec3 vWorldDirection;\n\n#include <common>\n\nvoid main() {\n\n\tvec3 direction = normalize( vWorldDirection );\n\n\tvec2 sampleUV = equirectUv( direction );\n\n\tvec4 texColor = texture2D( tEquirect, sampleUV );\n\n\tgl_FragColor = mapTexelToLinear( texColor );\n\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\n}\n`;\n","export default /* glsl */`\nvarying vec3 vWorldDirection;\n\n#include <common>\n\nvoid main() {\n\n\tvWorldDirection = transformDirection( position, modelMatrix );\n\n\t#include <begin_vertex>\n\t#include <project_vertex>\n\n}\n`;\n","export default /* glsl */`\nuniform vec3 diffuse;\nuniform float opacity;\n\nuniform float dashSize;\nuniform float totalSize;\n\nvarying float vLineDistance;\n\n#include <common>\n#include <color_pars_fragment>\n#include <fog_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\n\nvoid main() {\n\n\t#include <clipping_planes_fragment>\n\n\tif ( mod( vLineDistance, totalSize ) > dashSize ) {\n\n\t\tdiscard;\n\n\t}\n\n\tvec3 outgoingLight = vec3( 0.0 );\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\n\t#include <logdepthbuf_fragment>\n\t#include <color_fragment>\n\n\toutgoingLight = diffuseColor.rgb; // simple shader\n\n\tgl_FragColor = vec4( outgoingLight, diffuseColor.a );\n\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n\t#include <premultiplied_alpha_fragment>\n\n}\n`;\n","export default /* glsl */`\nuniform float scale;\nattribute float lineDistance;\n\nvarying float vLineDistance;\n\n#include <common>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\n\nvoid main() {\n\n\tvLineDistance = scale * lineDistance;\n\n\t#include <color_vertex>\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\t#include <fog_vertex>\n\n}\n`;\n","export default /* glsl */`\nuniform vec3 diffuse;\nuniform float opacity;\n\n#ifndef FLAT_SHADED\n\n\tvarying vec3 vNormal;\n\n#endif\n\n#include <common>\n#include <dithering_pars_fragment>\n#include <color_pars_fragment>\n#include <uv_pars_fragment>\n#include <uv2_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <aomap_pars_fragment>\n#include <lightmap_pars_fragment>\n#include <envmap_common_pars_fragment>\n#include <envmap_pars_fragment>\n#include <cube_uv_reflection_fragment>\n#include <fog_pars_fragment>\n#include <specularmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\n\nvoid main() {\n\n\t#include <clipping_planes_fragment>\n\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\n\t#include <logdepthbuf_fragment>\n\t#include <map_fragment>\n\t#include <color_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <specularmap_fragment>\n\n\tReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );\n\n\t// accumulation (baked indirect lighting only)\n\t#ifdef USE_LIGHTMAP\n\t\n\t\tvec4 lightMapTexel= texture2D( lightMap, vUv2 );\n\t\treflectedLight.indirectDiffuse += lightMapTexelToLinear( lightMapTexel ).rgb * lightMapIntensity;\n\n\t#else\n\n\t\treflectedLight.indirectDiffuse += vec3( 1.0 );\n\n\t#endif\n\n\t// modulation\n\t#include <aomap_fragment>\n\n\treflectedLight.indirectDiffuse *= diffuseColor.rgb;\n\n\tvec3 outgoingLight = reflectedLight.indirectDiffuse;\n\n\t#include <envmap_fragment>\n\n\tgl_FragColor = vec4( outgoingLight, diffuseColor.a );\n\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n\t#include <premultiplied_alpha_fragment>\n\t#include <dithering_fragment>\n\n}\n`;\n","export default /* glsl */`\n#include <common>\n#include <uv_pars_vertex>\n#include <uv2_pars_vertex>\n#include <envmap_pars_vertex>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\n\nvoid main() {\n\n\t#include <uv_vertex>\n\t#include <uv2_vertex>\n\t#include <color_vertex>\n\t#include <skinbase_vertex>\n\n\t#ifdef USE_ENVMAP\n\n\t#include <beginnormal_vertex>\n\t#include <morphnormal_vertex>\n\t#include <skinnormal_vertex>\n\t#include <defaultnormal_vertex>\n\n\t#endif\n\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\n\t#include <worldpos_vertex>\n\t#include <clipping_planes_vertex>\n\t#include <envmap_vertex>\n\t#include <fog_vertex>\n\n}\n`;\n","export default /* glsl */`\nuniform vec3 diffuse;\nuniform vec3 emissive;\nuniform float opacity;\n\nvarying vec3 vLightFront;\nvarying vec3 vIndirectFront;\n\n#ifdef DOUBLE_SIDED\n\tvarying vec3 vLightBack;\n\tvarying vec3 vIndirectBack;\n#endif\n\n\n#include <common>\n#include <packing>\n#include <dithering_pars_fragment>\n#include <color_pars_fragment>\n#include <uv_pars_fragment>\n#include <uv2_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <aomap_pars_fragment>\n#include <lightmap_pars_fragment>\n#include <emissivemap_pars_fragment>\n#include <envmap_common_pars_fragment>\n#include <envmap_pars_fragment>\n#include <cube_uv_reflection_fragment>\n#include <bsdfs>\n#include <lights_pars_begin>\n#include <fog_pars_fragment>\n#include <shadowmap_pars_fragment>\n#include <shadowmask_pars_fragment>\n#include <specularmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\n\nvoid main() {\n\n\t#include <clipping_planes_fragment>\n\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\tReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );\n\tvec3 totalEmissiveRadiance = emissive;\n\n\t#include <logdepthbuf_fragment>\n\t#include <map_fragment>\n\t#include <color_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <specularmap_fragment>\n\t#include <emissivemap_fragment>\n\n\t// accumulation\n\n\t#ifdef DOUBLE_SIDED\n\n\t\treflectedLight.indirectDiffuse += ( gl_FrontFacing ) ? vIndirectFront : vIndirectBack;\n\n\t#else\n\n\t\treflectedLight.indirectDiffuse += vIndirectFront;\n\n\t#endif\n\n\t#include <lightmap_fragment>\n\n\treflectedLight.indirectDiffuse *= BRDF_Diffuse_Lambert( diffuseColor.rgb );\n\n\t#ifdef DOUBLE_SIDED\n\n\t\treflectedLight.directDiffuse = ( gl_FrontFacing ) ? vLightFront : vLightBack;\n\n\t#else\n\n\t\treflectedLight.directDiffuse = vLightFront;\n\n\t#endif\n\n\treflectedLight.directDiffuse *= BRDF_Diffuse_Lambert( diffuseColor.rgb ) * getShadowMask();\n\n\t// modulation\n\n\t#include <aomap_fragment>\n\n\tvec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + totalEmissiveRadiance;\n\n\t#include <envmap_fragment>\n\n\tgl_FragColor = vec4( outgoingLight, diffuseColor.a );\n\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n\t#include <premultiplied_alpha_fragment>\n\t#include <dithering_fragment>\n}\n`;\n","export default /* glsl */`\n#define LAMBERT\n\nvarying vec3 vLightFront;\nvarying vec3 vIndirectFront;\n\n#ifdef DOUBLE_SIDED\n\tvarying vec3 vLightBack;\n\tvarying vec3 vIndirectBack;\n#endif\n\n#include <common>\n#include <uv_pars_vertex>\n#include <uv2_pars_vertex>\n#include <envmap_pars_vertex>\n#include <bsdfs>\n#include <lights_pars_begin>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <shadowmap_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\n\nvoid main() {\n\n\t#include <uv_vertex>\n\t#include <uv2_vertex>\n\t#include <color_vertex>\n\n\t#include <beginnormal_vertex>\n\t#include <morphnormal_vertex>\n\t#include <skinbase_vertex>\n\t#include <skinnormal_vertex>\n\t#include <defaultnormal_vertex>\n\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\n\t#include <worldpos_vertex>\n\t#include <envmap_vertex>\n\t#include <lights_lambert_vertex>\n\t#include <shadowmap_vertex>\n\t#include <fog_vertex>\n}\n`;\n","export default /* glsl */`\n#define MATCAP\n\nuniform vec3 diffuse;\nuniform float opacity;\nuniform sampler2D matcap;\n\nvarying vec3 vViewPosition;\n\n#ifndef FLAT_SHADED\n\n\tvarying vec3 vNormal;\n\n#endif\n\n#include <common>\n#include <dithering_pars_fragment>\n#include <color_pars_fragment>\n#include <uv_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n\n#include <fog_pars_fragment>\n#include <bumpmap_pars_fragment>\n#include <normalmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\n\nvoid main() {\n\n\t#include <clipping_planes_fragment>\n\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\n\t#include <logdepthbuf_fragment>\n\t#include <map_fragment>\n\t#include <color_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <normal_fragment_begin>\n\t#include <normal_fragment_maps>\n\n\tvec3 viewDir = normalize( vViewPosition );\n\tvec3 x = normalize( vec3( viewDir.z, 0.0, - viewDir.x ) );\n\tvec3 y = cross( viewDir, x );\n\tvec2 uv = vec2( dot( x, normal ), dot( y, normal ) ) * 0.495 + 0.5; // 0.495 to remove artifacts caused by undersized matcap disks\n\n\t#ifdef USE_MATCAP\n\n\t\tvec4 matcapColor = texture2D( matcap, uv );\n\t\tmatcapColor = matcapTexelToLinear( matcapColor );\n\n\t#else\n\n\t\tvec4 matcapColor = vec4( 1.0 );\n\n\t#endif\n\n\tvec3 outgoingLight = diffuseColor.rgb * matcapColor.rgb;\n\n\tgl_FragColor = vec4( outgoingLight, diffuseColor.a );\n\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n\t#include <premultiplied_alpha_fragment>\n\t#include <dithering_fragment>\n\n}\n`;\n","export default /* glsl */`\n#define MATCAP\n\nvarying vec3 vViewPosition;\n\n#ifndef FLAT_SHADED\n\n\tvarying vec3 vNormal;\n\n#endif\n\n#include <common>\n#include <uv_pars_vertex>\n#include <color_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <fog_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\n\nvoid main() {\n\n\t#include <uv_vertex>\n\t#include <color_vertex>\n\t#include <beginnormal_vertex>\n\t#include <morphnormal_vertex>\n\t#include <skinbase_vertex>\n\t#include <skinnormal_vertex>\n\t#include <defaultnormal_vertex>\n\n\t#ifndef FLAT_SHADED // Normal computed with derivatives when FLAT_SHADED\n\n\t\tvNormal = normalize( transformedNormal );\n\n\t#endif\n\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <displacementmap_vertex>\n\t#include <project_vertex>\n\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\t#include <fog_vertex>\n\n\tvViewPosition = - mvPosition.xyz;\n\n}\n`;\n","export default /* glsl */`\n#define TOON\n\nuniform vec3 diffuse;\nuniform vec3 emissive;\nuniform float opacity;\n\n#include <common>\n#include <packing>\n#include <dithering_pars_fragment>\n#include <color_pars_fragment>\n#include <uv_pars_fragment>\n#include <uv2_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <aomap_pars_fragment>\n#include <lightmap_pars_fragment>\n#include <emissivemap_pars_fragment>\n#include <gradientmap_pars_fragment>\n#include <fog_pars_fragment>\n#include <bsdfs>\n#include <lights_pars_begin>\n#include <lights_toon_pars_fragment>\n#include <shadowmap_pars_fragment>\n#include <bumpmap_pars_fragment>\n#include <normalmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\n\nvoid main() {\n\n\t#include <clipping_planes_fragment>\n\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\tReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );\n\tvec3 totalEmissiveRadiance = emissive;\n\n\t#include <logdepthbuf_fragment>\n\t#include <map_fragment>\n\t#include <color_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <normal_fragment_begin>\n\t#include <normal_fragment_maps>\n\t#include <emissivemap_fragment>\n\n\t// accumulation\n\t#include <lights_toon_fragment>\n\t#include <lights_fragment_begin>\n\t#include <lights_fragment_maps>\n\t#include <lights_fragment_end>\n\n\t// modulation\n\t#include <aomap_fragment>\n\n\tvec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + totalEmissiveRadiance;\n\n\tgl_FragColor = vec4( outgoingLight, diffuseColor.a );\n\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n\t#include <premultiplied_alpha_fragment>\n\t#include <dithering_fragment>\n\n}\n`;\n","export default /* glsl */`\n#define TOON\n\nvarying vec3 vViewPosition;\n\n#ifndef FLAT_SHADED\n\n\tvarying vec3 vNormal;\n\n#endif\n\n#include <common>\n#include <uv_pars_vertex>\n#include <uv2_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <shadowmap_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\n\nvoid main() {\n\n\t#include <uv_vertex>\n\t#include <uv2_vertex>\n\t#include <color_vertex>\n\n\t#include <beginnormal_vertex>\n\t#include <morphnormal_vertex>\n\t#include <skinbase_vertex>\n\t#include <skinnormal_vertex>\n\t#include <defaultnormal_vertex>\n\n#ifndef FLAT_SHADED // Normal computed with derivatives when FLAT_SHADED\n\n\tvNormal = normalize( transformedNormal );\n\n#endif\n\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <displacementmap_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\n\tvViewPosition = - mvPosition.xyz;\n\n\t#include <worldpos_vertex>\n\t#include <shadowmap_vertex>\n\t#include <fog_vertex>\n\n}\n`;\n","export default /* glsl */`\n#define PHONG\n\nuniform vec3 diffuse;\nuniform vec3 emissive;\nuniform vec3 specular;\nuniform float shininess;\nuniform float opacity;\n\n#include <common>\n#include <packing>\n#include <dithering_pars_fragment>\n#include <color_pars_fragment>\n#include <uv_pars_fragment>\n#include <uv2_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <aomap_pars_fragment>\n#include <lightmap_pars_fragment>\n#include <emissivemap_pars_fragment>\n#include <envmap_common_pars_fragment>\n#include <envmap_pars_fragment>\n#include <cube_uv_reflection_fragment>\n#include <fog_pars_fragment>\n#include <bsdfs>\n#include <lights_pars_begin>\n#include <lights_phong_pars_fragment>\n#include <shadowmap_pars_fragment>\n#include <bumpmap_pars_fragment>\n#include <normalmap_pars_fragment>\n#include <specularmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\n\nvoid main() {\n\n\t#include <clipping_planes_fragment>\n\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\tReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );\n\tvec3 totalEmissiveRadiance = emissive;\n\n\t#include <logdepthbuf_fragment>\n\t#include <map_fragment>\n\t#include <color_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <specularmap_fragment>\n\t#include <normal_fragment_begin>\n\t#include <normal_fragment_maps>\n\t#include <emissivemap_fragment>\n\n\t// accumulation\n\t#include <lights_phong_fragment>\n\t#include <lights_fragment_begin>\n\t#include <lights_fragment_maps>\n\t#include <lights_fragment_end>\n\n\t// modulation\n\t#include <aomap_fragment>\n\n\tvec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + reflectedLight.directSpecular + reflectedLight.indirectSpecular + totalEmissiveRadiance;\n\n\t#include <envmap_fragment>\n\n\tgl_FragColor = vec4( outgoingLight, diffuseColor.a );\n\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n\t#include <premultiplied_alpha_fragment>\n\t#include <dithering_fragment>\n\n}\n`;\n","export default /* glsl */`\n#define PHONG\n\nvarying vec3 vViewPosition;\n\n#ifndef FLAT_SHADED\n\n\tvarying vec3 vNormal;\n\n#endif\n\n#include <common>\n#include <uv_pars_vertex>\n#include <uv2_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <envmap_pars_vertex>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <shadowmap_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\n\nvoid main() {\n\n\t#include <uv_vertex>\n\t#include <uv2_vertex>\n\t#include <color_vertex>\n\n\t#include <beginnormal_vertex>\n\t#include <morphnormal_vertex>\n\t#include <skinbase_vertex>\n\t#include <skinnormal_vertex>\n\t#include <defaultnormal_vertex>\n\n#ifndef FLAT_SHADED // Normal computed with derivatives when FLAT_SHADED\n\n\tvNormal = normalize( transformedNormal );\n\n#endif\n\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <displacementmap_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\n\tvViewPosition = - mvPosition.xyz;\n\n\t#include <worldpos_vertex>\n\t#include <envmap_vertex>\n\t#include <shadowmap_vertex>\n\t#include <fog_vertex>\n\n}\n`;\n","export default /* glsl */`\n#define STANDARD\n\n#ifdef PHYSICAL\n\t#define REFLECTIVITY\n\t#define CLEARCOAT\n\t#define TRANSMISSION\n#endif\n\nuniform vec3 diffuse;\nuniform vec3 emissive;\nuniform float roughness;\nuniform float metalness;\nuniform float opacity;\n\n#ifdef TRANSMISSION\n\tuniform float transmission;\n#endif\n\n#ifdef REFLECTIVITY\n\tuniform float reflectivity;\n#endif\n\n#ifdef CLEARCOAT\n\tuniform float clearcoat;\n\tuniform float clearcoatRoughness;\n#endif\n\n#ifdef USE_SHEEN\n\tuniform vec3 sheen;\n#endif\n\nvarying vec3 vViewPosition;\n\n#ifndef FLAT_SHADED\n\n\tvarying vec3 vNormal;\n\n\t#ifdef USE_TANGENT\n\n\t\tvarying vec3 vTangent;\n\t\tvarying vec3 vBitangent;\n\n\t#endif\n\n#endif\n\n#include <common>\n#include <packing>\n#include <dithering_pars_fragment>\n#include <color_pars_fragment>\n#include <uv_pars_fragment>\n#include <uv2_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <aomap_pars_fragment>\n#include <lightmap_pars_fragment>\n#include <emissivemap_pars_fragment>\n#include <transmissionmap_pars_fragment>\n#include <bsdfs>\n#include <cube_uv_reflection_fragment>\n#include <envmap_common_pars_fragment>\n#include <envmap_physical_pars_fragment>\n#include <fog_pars_fragment>\n#include <lights_pars_begin>\n#include <lights_physical_pars_fragment>\n#include <shadowmap_pars_fragment>\n#include <bumpmap_pars_fragment>\n#include <normalmap_pars_fragment>\n#include <clearcoat_pars_fragment>\n#include <roughnessmap_pars_fragment>\n#include <metalnessmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\n\nvoid main() {\n\n\t#include <clipping_planes_fragment>\n\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\tReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );\n\tvec3 totalEmissiveRadiance = emissive;\n\n\t#ifdef TRANSMISSION\n\t\tfloat totalTransmission = transmission;\n\t#endif\n\n\t#include <logdepthbuf_fragment>\n\t#include <map_fragment>\n\t#include <color_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <roughnessmap_fragment>\n\t#include <metalnessmap_fragment>\n\t#include <normal_fragment_begin>\n\t#include <normal_fragment_maps>\n\t#include <clearcoat_normal_fragment_begin>\n\t#include <clearcoat_normal_fragment_maps>\n\t#include <emissivemap_fragment>\n\t#include <transmissionmap_fragment>\n\n\t// accumulation\n\t#include <lights_physical_fragment>\n\t#include <lights_fragment_begin>\n\t#include <lights_fragment_maps>\n\t#include <lights_fragment_end>\n\n\t// modulation\n\t#include <aomap_fragment>\n\n\tvec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + reflectedLight.directSpecular + reflectedLight.indirectSpecular + totalEmissiveRadiance;\n\n\t// this is a stub for the transmission model\n\t#ifdef TRANSMISSION\n\t\tdiffuseColor.a *= mix( saturate( 1. - totalTransmission + linearToRelativeLuminance( reflectedLight.directSpecular + reflectedLight.indirectSpecular ) ), 1.0, metalness );\n\t#endif\n\n\tgl_FragColor = vec4( outgoingLight, diffuseColor.a );\n\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n\t#include <premultiplied_alpha_fragment>\n\t#include <dithering_fragment>\n\n}\n`;\n","export default /* glsl */`\n#define STANDARD\n\nvarying vec3 vViewPosition;\n\n#ifndef FLAT_SHADED\n\n\tvarying vec3 vNormal;\n\n\t#ifdef USE_TANGENT\n\n\t\tvarying vec3 vTangent;\n\t\tvarying vec3 vBitangent;\n\n\t#endif\n\n#endif\n\n#include <common>\n#include <uv_pars_vertex>\n#include <uv2_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <shadowmap_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\n\nvoid main() {\n\n\t#include <uv_vertex>\n\t#include <uv2_vertex>\n\t#include <color_vertex>\n\n\t#include <beginnormal_vertex>\n\t#include <morphnormal_vertex>\n\t#include <skinbase_vertex>\n\t#include <skinnormal_vertex>\n\t#include <defaultnormal_vertex>\n\n#ifndef FLAT_SHADED // Normal computed with derivatives when FLAT_SHADED\n\n\tvNormal = normalize( transformedNormal );\n\n\t#ifdef USE_TANGENT\n\n\t\tvTangent = normalize( transformedTangent );\n\t\tvBitangent = normalize( cross( vNormal, vTangent ) * tangent.w );\n\n\t#endif\n\n#endif\n\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <displacementmap_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\n\tvViewPosition = - mvPosition.xyz;\n\n\t#include <worldpos_vertex>\n\t#include <shadowmap_vertex>\n\t#include <fog_vertex>\n\n}\n`;\n","export default /* glsl */`\n#define NORMAL\n\nuniform float opacity;\n\n#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || defined( TANGENTSPACE_NORMALMAP )\n\n\tvarying vec3 vViewPosition;\n\n#endif\n\n#ifndef FLAT_SHADED\n\n\tvarying vec3 vNormal;\n\n\t#ifdef USE_TANGENT\n\n\t\tvarying vec3 vTangent;\n\t\tvarying vec3 vBitangent;\n\n\t#endif\n\n#endif\n\n#include <packing>\n#include <uv_pars_fragment>\n#include <bumpmap_pars_fragment>\n#include <normalmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\n\nvoid main() {\n\n\t#include <clipping_planes_fragment>\n\t#include <logdepthbuf_fragment>\n\t#include <normal_fragment_begin>\n\t#include <normal_fragment_maps>\n\n\tgl_FragColor = vec4( packNormalToRGB( normal ), opacity );\n\n}\n`;\n","export default /* glsl */`\n#define NORMAL\n\n#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || defined( TANGENTSPACE_NORMALMAP )\n\n\tvarying vec3 vViewPosition;\n\n#endif\n\n#ifndef FLAT_SHADED\n\n\tvarying vec3 vNormal;\n\n\t#ifdef USE_TANGENT\n\n\t\tvarying vec3 vTangent;\n\t\tvarying vec3 vBitangent;\n\n\t#endif\n\n#endif\n\n#include <common>\n#include <uv_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\n\nvoid main() {\n\n\t#include <uv_vertex>\n\n\t#include <beginnormal_vertex>\n\t#include <morphnormal_vertex>\n\t#include <skinbase_vertex>\n\t#include <skinnormal_vertex>\n\t#include <defaultnormal_vertex>\n\n#ifndef FLAT_SHADED // Normal computed with derivatives when FLAT_SHADED\n\n\tvNormal = normalize( transformedNormal );\n\n\t#ifdef USE_TANGENT\n\n\t\tvTangent = normalize( transformedTangent );\n\t\tvBitangent = normalize( cross( vNormal, vTangent ) * tangent.w );\n\n\t#endif\n\n#endif\n\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <displacementmap_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\n#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || defined( TANGENTSPACE_NORMALMAP )\n\n\tvViewPosition = - mvPosition.xyz;\n\n#endif\n\n}\n`;\n","export default /* glsl */`\nuniform vec3 diffuse;\nuniform float opacity;\n\n#include <common>\n#include <color_pars_fragment>\n#include <map_particle_pars_fragment>\n#include <fog_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\n\nvoid main() {\n\n\t#include <clipping_planes_fragment>\n\n\tvec3 outgoingLight = vec3( 0.0 );\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\n\t#include <logdepthbuf_fragment>\n\t#include <map_particle_fragment>\n\t#include <color_fragment>\n\t#include <alphatest_fragment>\n\n\toutgoingLight = diffuseColor.rgb;\n\n\tgl_FragColor = vec4( outgoingLight, diffuseColor.a );\n\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n\t#include <premultiplied_alpha_fragment>\n\n}\n`;\n","export default /* glsl */`\nuniform float size;\nuniform float scale;\n\n#include <common>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\n\nvoid main() {\n\n\t#include <color_vertex>\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <project_vertex>\n\n\tgl_PointSize = size;\n\n\t#ifdef USE_SIZEATTENUATION\n\n\t\tbool isPerspective = isPerspectiveMatrix( projectionMatrix );\n\n\t\tif ( isPerspective ) gl_PointSize *= ( scale / - mvPosition.z );\n\n\t#endif\n\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\t#include <worldpos_vertex>\n\t#include <fog_vertex>\n\n}\n`;\n","export default /* glsl */`\nuniform vec3 color;\nuniform float opacity;\n\n#include <common>\n#include <packing>\n#include <fog_pars_fragment>\n#include <bsdfs>\n#include <lights_pars_begin>\n#include <shadowmap_pars_fragment>\n#include <shadowmask_pars_fragment>\n\nvoid main() {\n\n\tgl_FragColor = vec4( color, opacity * ( 1.0 - getShadowMask() ) );\n\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n\n}\n`;\n","export default /* glsl */`\n#include <common>\n#include <fog_pars_vertex>\n#include <shadowmap_pars_vertex>\n\nvoid main() {\n\n\t#include <begin_vertex>\n\t#include <project_vertex>\n\t#include <worldpos_vertex>\n\n\t#include <beginnormal_vertex>\n\t#include <morphnormal_vertex>\n\t#include <skinbase_vertex>\n\t#include <skinnormal_vertex>\n\t#include <defaultnormal_vertex>\n\n\t#include <shadowmap_vertex>\n\t#include <fog_vertex>\n\n}\n`;\n","export default /* glsl */`\nuniform vec3 diffuse;\nuniform float opacity;\n\n#include <common>\n#include <uv_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <fog_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\n\nvoid main() {\n\n\t#include <clipping_planes_fragment>\n\n\tvec3 outgoingLight = vec3( 0.0 );\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\n\t#include <logdepthbuf_fragment>\n\t#include <map_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\n\toutgoingLight = diffuseColor.rgb;\n\n\tgl_FragColor = vec4( outgoingLight, diffuseColor.a );\n\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n\n}\n`;\n","export default /* glsl */`\nuniform float rotation;\nuniform vec2 center;\n\n#include <common>\n#include <uv_pars_vertex>\n#include <fog_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\n\nvoid main() {\n\n\t#include <uv_vertex>\n\n\tvec4 mvPosition = modelViewMatrix * vec4( 0.0, 0.0, 0.0, 1.0 );\n\n\tvec2 scale;\n\tscale.x = length( vec3( modelMatrix[ 0 ].x, modelMatrix[ 0 ].y, modelMatrix[ 0 ].z ) );\n\tscale.y = length( vec3( modelMatrix[ 1 ].x, modelMatrix[ 1 ].y, modelMatrix[ 1 ].z ) );\n\n\t#ifndef USE_SIZEATTENUATION\n\n\t\tbool isPerspective = isPerspectiveMatrix( projectionMatrix );\n\n\t\tif ( isPerspective ) scale *= - mvPosition.z;\n\n\t#endif\n\n\tvec2 alignedPosition = ( position.xy - ( center - vec2( 0.5 ) ) ) * scale;\n\n\tvec2 rotatedPosition;\n\trotatedPosition.x = cos( rotation ) * alignedPosition.x - sin( rotation ) * alignedPosition.y;\n\trotatedPosition.y = sin( rotation ) * alignedPosition.x + cos( rotation ) * alignedPosition.y;\n\n\tmvPosition.xy += rotatedPosition;\n\n\tgl_Position = projectionMatrix * mvPosition;\n\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\t#include <fog_vertex>\n\n}\n`;\n","import { Color } from '../../math/Color.js';\nimport { Vector2 } from '../../math/Vector2.js';\nimport { Matrix3 } from '../../math/Matrix3.js';\n\n/**\n * Uniforms library for shared webgl shaders\n */\n\nconst UniformsLib = {\n\n\tcommon: {\n\n\t\tdiffuse: { value: new Color( 0xeeeeee ) },\n\t\topacity: { value: 1.0 },\n\n\t\tmap: { value: null },\n\t\tuvTransform: { value: new Matrix3() },\n\t\tuv2Transform: { value: new Matrix3() },\n\n\t\talphaMap: { value: null },\n\n\t},\n\n\tspecularmap: {\n\n\t\tspecularMap: { value: null },\n\n\t},\n\n\tenvmap: {\n\n\t\tenvMap: { value: null },\n\t\tflipEnvMap: { value: - 1 },\n\t\treflectivity: { value: 1.0 },\n\t\trefractionRatio: { value: 0.98 },\n\t\tmaxMipLevel: { value: 0 }\n\n\t},\n\n\taomap: {\n\n\t\taoMap: { value: null },\n\t\taoMapIntensity: { value: 1 }\n\n\t},\n\n\tlightmap: {\n\n\t\tlightMap: { value: null },\n\t\tlightMapIntensity: { value: 1 }\n\n\t},\n\n\temissivemap: {\n\n\t\temissiveMap: { value: null }\n\n\t},\n\n\tbumpmap: {\n\n\t\tbumpMap: { value: null },\n\t\tbumpScale: { value: 1 }\n\n\t},\n\n\tnormalmap: {\n\n\t\tnormalMap: { value: null },\n\t\tnormalScale: { value: new Vector2( 1, 1 ) }\n\n\t},\n\n\tdisplacementmap: {\n\n\t\tdisplacementMap: { value: null },\n\t\tdisplacementScale: { value: 1 },\n\t\tdisplacementBias: { value: 0 }\n\n\t},\n\n\troughnessmap: {\n\n\t\troughnessMap: { value: null }\n\n\t},\n\n\tmetalnessmap: {\n\n\t\tmetalnessMap: { value: null }\n\n\t},\n\n\tgradientmap: {\n\n\t\tgradientMap: { value: null }\n\n\t},\n\n\tfog: {\n\n\t\tfogDensity: { value: 0.00025 },\n\t\tfogNear: { value: 1 },\n\t\tfogFar: { value: 2000 },\n\t\tfogColor: { value: new Color( 0xffffff ) }\n\n\t},\n\n\tlights: {\n\n\t\tambientLightColor: { value: [] },\n\n\t\tlightProbe: { value: [] },\n\n\t\tdirectionalLights: { value: [], properties: {\n\t\t\tdirection: {},\n\t\t\tcolor: {}\n\t\t} },\n\n\t\tdirectionalLightShadows: { value: [], properties: {\n\t\t\tshadowBias: {},\n\t\t\tshadowNormalBias: {},\n\t\t\tshadowRadius: {},\n\t\t\tshadowMapSize: {}\n\t\t} },\n\n\t\tdirectionalShadowMap: { value: [] },\n\t\tdirectionalShadowMatrix: { value: [] },\n\n\t\tspotLights: { value: [], properties: {\n\t\t\tcolor: {},\n\t\t\tposition: {},\n\t\t\tdirection: {},\n\t\t\tdistance: {},\n\t\t\tconeCos: {},\n\t\t\tpenumbraCos: {},\n\t\t\tdecay: {}\n\t\t} },\n\n\t\tspotLightShadows: { value: [], properties: {\n\t\t\tshadowBias: {},\n\t\t\tshadowNormalBias: {},\n\t\t\tshadowRadius: {},\n\t\t\tshadowMapSize: {}\n\t\t} },\n\n\t\tspotShadowMap: { value: [] },\n\t\tspotShadowMatrix: { value: [] },\n\n\t\tpointLights: { value: [], properties: {\n\t\t\tcolor: {},\n\t\t\tposition: {},\n\t\t\tdecay: {},\n\t\t\tdistance: {}\n\t\t} },\n\n\t\tpointLightShadows: { value: [], properties: {\n\t\t\tshadowBias: {},\n\t\t\tshadowNormalBias: {},\n\t\t\tshadowRadius: {},\n\t\t\tshadowMapSize: {},\n\t\t\tshadowCameraNear: {},\n\t\t\tshadowCameraFar: {}\n\t\t} },\n\n\t\tpointShadowMap: { value: [] },\n\t\tpointShadowMatrix: { value: [] },\n\n\t\themisphereLights: { value: [], properties: {\n\t\t\tdirection: {},\n\t\t\tskyColor: {},\n\t\t\tgroundColor: {}\n\t\t} },\n\n\t\t// TODO (abelnation): RectAreaLight BRDF data needs to be moved from example to main src\n\t\trectAreaLights: { value: [], properties: {\n\t\t\tcolor: {},\n\t\t\tposition: {},\n\t\t\twidth: {},\n\t\t\theight: {}\n\t\t} },\n\n\t\tltc_1: { value: null },\n\t\tltc_2: { value: null }\n\n\t},\n\n\tpoints: {\n\n\t\tdiffuse: { value: new Color( 0xeeeeee ) },\n\t\topacity: { value: 1.0 },\n\t\tsize: { value: 1.0 },\n\t\tscale: { value: 1.0 },\n\t\tmap: { value: null },\n\t\talphaMap: { value: null },\n\t\tuvTransform: { value: new Matrix3() }\n\n\t},\n\n\tsprite: {\n\n\t\tdiffuse: { value: new Color( 0xeeeeee ) },\n\t\topacity: { value: 1.0 },\n\t\tcenter: { value: new Vector2( 0.5, 0.5 ) },\n\t\trotation: { value: 0.0 },\n\t\tmap: { value: null },\n\t\talphaMap: { value: null },\n\t\tuvTransform: { value: new Matrix3() }\n\n\t}\n\n};\n\nexport { UniformsLib };\n","import { ShaderChunk } from './ShaderChunk.js';\nimport { mergeUniforms } from './UniformsUtils.js';\nimport { Vector2 } from '../../math/Vector2.js';\nimport { Vector3 } from '../../math/Vector3.js';\nimport { UniformsLib } from './UniformsLib.js';\nimport { Color } from '../../math/Color.js';\nimport { Matrix3 } from '../../math/Matrix3.js';\n\nconst ShaderLib = {\n\n\tbasic: {\n\n\t\tuniforms: mergeUniforms( [\n\t\t\tUniformsLib.common,\n\t\t\tUniformsLib.specularmap,\n\t\t\tUniformsLib.envmap,\n\t\t\tUniformsLib.aomap,\n\t\t\tUniformsLib.lightmap,\n\t\t\tUniformsLib.fog\n\t\t] ),\n\n\t\tvertexShader: ShaderChunk.meshbasic_vert,\n\t\tfragmentShader: ShaderChunk.meshbasic_frag\n\n\t},\n\n\tlambert: {\n\n\t\tuniforms: mergeUniforms( [\n\t\t\tUniformsLib.common,\n\t\t\tUniformsLib.specularmap,\n\t\t\tUniformsLib.envmap,\n\t\t\tUniformsLib.aomap,\n\t\t\tUniformsLib.lightmap,\n\t\t\tUniformsLib.emissivemap,\n\t\t\tUniformsLib.fog,\n\t\t\tUniformsLib.lights,\n\t\t\t{\n\t\t\t\temissive: { value: new Color( 0x000000 ) }\n\t\t\t}\n\t\t] ),\n\n\t\tvertexShader: ShaderChunk.meshlambert_vert,\n\t\tfragmentShader: ShaderChunk.meshlambert_frag\n\n\t},\n\n\tphong: {\n\n\t\tuniforms: mergeUniforms( [\n\t\t\tUniformsLib.common,\n\t\t\tUniformsLib.specularmap,\n\t\t\tUniformsLib.envmap,\n\t\t\tUniformsLib.aomap,\n\t\t\tUniformsLib.lightmap,\n\t\t\tUniformsLib.emissivemap,\n\t\t\tUniformsLib.bumpmap,\n\t\t\tUniformsLib.normalmap,\n\t\t\tUniformsLib.displacementmap,\n\t\t\tUniformsLib.fog,\n\t\t\tUniformsLib.lights,\n\t\t\t{\n\t\t\t\temissive: { value: new Color( 0x000000 ) },\n\t\t\t\tspecular: { value: new Color( 0x111111 ) },\n\t\t\t\tshininess: { value: 30 }\n\t\t\t}\n\t\t] ),\n\n\t\tvertexShader: ShaderChunk.meshphong_vert,\n\t\tfragmentShader: ShaderChunk.meshphong_frag\n\n\t},\n\n\tstandard: {\n\n\t\tuniforms: mergeUniforms( [\n\t\t\tUniformsLib.common,\n\t\t\tUniformsLib.envmap,\n\t\t\tUniformsLib.aomap,\n\t\t\tUniformsLib.lightmap,\n\t\t\tUniformsLib.emissivemap,\n\t\t\tUniformsLib.bumpmap,\n\t\t\tUniformsLib.normalmap,\n\t\t\tUniformsLib.displacementmap,\n\t\t\tUniformsLib.roughnessmap,\n\t\t\tUniformsLib.metalnessmap,\n\t\t\tUniformsLib.fog,\n\t\t\tUniformsLib.lights,\n\t\t\t{\n\t\t\t\temissive: { value: new Color( 0x000000 ) },\n\t\t\t\troughness: { value: 1.0 },\n\t\t\t\tmetalness: { value: 0.0 },\n\t\t\t\tenvMapIntensity: { value: 1 } // temporary\n\t\t\t}\n\t\t] ),\n\n\t\tvertexShader: ShaderChunk.meshphysical_vert,\n\t\tfragmentShader: ShaderChunk.meshphysical_frag\n\n\t},\n\n\ttoon: {\n\n\t\tuniforms: mergeUniforms( [\n\t\t\tUniformsLib.common,\n\t\t\tUniformsLib.aomap,\n\t\t\tUniformsLib.lightmap,\n\t\t\tUniformsLib.emissivemap,\n\t\t\tUniformsLib.bumpmap,\n\t\t\tUniformsLib.normalmap,\n\t\t\tUniformsLib.displacementmap,\n\t\t\tUniformsLib.gradientmap,\n\t\t\tUniformsLib.fog,\n\t\t\tUniformsLib.lights,\n\t\t\t{\n\t\t\t\temissive: { value: new Color( 0x000000 ) }\n\t\t\t}\n\t\t] ),\n\n\t\tvertexShader: ShaderChunk.meshtoon_vert,\n\t\tfragmentShader: ShaderChunk.meshtoon_frag\n\n\t},\n\n\tmatcap: {\n\n\t\tuniforms: mergeUniforms( [\n\t\t\tUniformsLib.common,\n\t\t\tUniformsLib.bumpmap,\n\t\t\tUniformsLib.normalmap,\n\t\t\tUniformsLib.displacementmap,\n\t\t\tUniformsLib.fog,\n\t\t\t{\n\t\t\t\tmatcap: { value: null }\n\t\t\t}\n\t\t] ),\n\n\t\tvertexShader: ShaderChunk.meshmatcap_vert,\n\t\tfragmentShader: ShaderChunk.meshmatcap_frag\n\n\t},\n\n\tpoints: {\n\n\t\tuniforms: mergeUniforms( [\n\t\t\tUniformsLib.points,\n\t\t\tUniformsLib.fog\n\t\t] ),\n\n\t\tvertexShader: ShaderChunk.points_vert,\n\t\tfragmentShader: ShaderChunk.points_frag\n\n\t},\n\n\tdashed: {\n\n\t\tuniforms: mergeUniforms( [\n\t\t\tUniformsLib.common,\n\t\t\tUniformsLib.fog,\n\t\t\t{\n\t\t\t\tscale: { value: 1 },\n\t\t\t\tdashSize: { value: 1 },\n\t\t\t\ttotalSize: { value: 2 }\n\t\t\t}\n\t\t] ),\n\n\t\tvertexShader: ShaderChunk.linedashed_vert,\n\t\tfragmentShader: ShaderChunk.linedashed_frag\n\n\t},\n\n\tdepth: {\n\n\t\tuniforms: mergeUniforms( [\n\t\t\tUniformsLib.common,\n\t\t\tUniformsLib.displacementmap\n\t\t] ),\n\n\t\tvertexShader: ShaderChunk.depth_vert,\n\t\tfragmentShader: ShaderChunk.depth_frag\n\n\t},\n\n\tnormal: {\n\n\t\tuniforms: mergeUniforms( [\n\t\t\tUniformsLib.common,\n\t\t\tUniformsLib.bumpmap,\n\t\t\tUniformsLib.normalmap,\n\t\t\tUniformsLib.displacementmap,\n\t\t\t{\n\t\t\t\topacity: { value: 1.0 }\n\t\t\t}\n\t\t] ),\n\n\t\tvertexShader: ShaderChunk.normal_vert,\n\t\tfragmentShader: ShaderChunk.normal_frag\n\n\t},\n\n\tsprite: {\n\n\t\tuniforms: mergeUniforms( [\n\t\t\tUniformsLib.sprite,\n\t\t\tUniformsLib.fog\n\t\t] ),\n\n\t\tvertexShader: ShaderChunk.sprite_vert,\n\t\tfragmentShader: ShaderChunk.sprite_frag\n\n\t},\n\n\tbackground: {\n\n\t\tuniforms: {\n\t\t\tuvTransform: { value: new Matrix3() },\n\t\t\tt2D: { value: null },\n\t\t},\n\n\t\tvertexShader: ShaderChunk.background_vert,\n\t\tfragmentShader: ShaderChunk.background_frag\n\n\t},\n\t/* -------------------------------------------------------------------------\n\t//\tCube map shader\n\t ------------------------------------------------------------------------- */\n\n\tcube: {\n\n\t\tuniforms: mergeUniforms( [\n\t\t\tUniformsLib.envmap,\n\t\t\t{\n\t\t\t\topacity: { value: 1.0 }\n\t\t\t}\n\t\t] ),\n\n\t\tvertexShader: ShaderChunk.cube_vert,\n\t\tfragmentShader: ShaderChunk.cube_frag\n\n\t},\n\n\tequirect: {\n\n\t\tuniforms: {\n\t\t\ttEquirect: { value: null },\n\t\t},\n\n\t\tvertexShader: ShaderChunk.equirect_vert,\n\t\tfragmentShader: ShaderChunk.equirect_frag\n\n\t},\n\n\tdistanceRGBA: {\n\n\t\tuniforms: mergeUniforms( [\n\t\t\tUniformsLib.common,\n\t\t\tUniformsLib.displacementmap,\n\t\t\t{\n\t\t\t\treferencePosition: { value: new Vector3() },\n\t\t\t\tnearDistance: { value: 1 },\n\t\t\t\tfarDistance: { value: 1000 }\n\t\t\t}\n\t\t] ),\n\n\t\tvertexShader: ShaderChunk.distanceRGBA_vert,\n\t\tfragmentShader: ShaderChunk.distanceRGBA_frag\n\n\t},\n\n\tshadow: {\n\n\t\tuniforms: mergeUniforms( [\n\t\t\tUniformsLib.lights,\n\t\t\tUniformsLib.fog,\n\t\t\t{\n\t\t\t\tcolor: { value: new Color( 0x00000 ) },\n\t\t\t\topacity: { value: 1.0 }\n\t\t\t},\n\t\t] ),\n\n\t\tvertexShader: ShaderChunk.shadow_vert,\n\t\tfragmentShader: ShaderChunk.shadow_frag\n\n\t}\n\n};\n\nShaderLib.physical = {\n\n\tuniforms: mergeUniforms( [\n\t\tShaderLib.standard.uniforms,\n\t\t{\n\t\t\tclearcoat: { value: 0 },\n\t\t\tclearcoatMap: { value: null },\n\t\t\tclearcoatRoughness: { value: 0 },\n\t\t\tclearcoatRoughnessMap: { value: null },\n\t\t\tclearcoatNormalScale: { value: new Vector2( 1, 1 ) },\n\t\t\tclearcoatNormalMap: { value: null },\n\t\t\tsheen: { value: new Color( 0x000000 ) },\n\t\t\ttransmission: { value: 0 },\n\t\t\ttransmissionMap: { value: null },\n\t\t}\n\t] ),\n\n\tvertexShader: ShaderChunk.meshphysical_vert,\n\tfragmentShader: ShaderChunk.meshphysical_frag\n\n};\n\n\nexport { ShaderLib };\n","import { BackSide, FrontSide, CubeUVReflectionMapping } from '../../constants.js';\nimport { BoxGeometry } from '../../geometries/BoxGeometry.js';\nimport { PlaneGeometry } from '../../geometries/PlaneGeometry.js';\nimport { ShaderMaterial } from '../../materials/ShaderMaterial.js';\nimport { Color } from '../../math/Color.js';\nimport { Mesh } from '../../objects/Mesh.js';\nimport { ShaderLib } from '../shaders/ShaderLib.js';\nimport { cloneUniforms } from '../shaders/UniformsUtils.js';\n\nfunction WebGLBackground( renderer, cubemaps, state, objects, premultipliedAlpha ) {\n\n\tconst clearColor = new Color( 0x000000 );\n\tlet clearAlpha = 0;\n\n\tlet planeMesh;\n\tlet boxMesh;\n\n\tlet currentBackground = null;\n\tlet currentBackgroundVersion = 0;\n\tlet currentTonemapping = null;\n\n\tfunction render( renderList, scene, camera, forceClear ) {\n\n\t\tlet background = scene.isScene === true ? scene.background : null;\n\n\t\tif ( background && background.isTexture ) {\n\n\t\t\tbackground = cubemaps.get( background );\n\n\t\t}\n\n\t\t// Ignore background in AR\n\t\t// TODO: Reconsider this.\n\n\t\tconst xr = renderer.xr;\n\t\tconst session = xr.getSession && xr.getSession();\n\n\t\tif ( session && session.environmentBlendMode === 'additive' ) {\n\n\t\t\tbackground = null;\n\n\t\t}\n\n\t\tif ( background === null ) {\n\n\t\t\tsetClear( clearColor, clearAlpha );\n\n\t\t} else if ( background && background.isColor ) {\n\n\t\t\tsetClear( background, 1 );\n\t\t\tforceClear = true;\n\n\t\t}\n\n\t\tif ( renderer.autoClear || forceClear ) {\n\n\t\t\trenderer.clear( renderer.autoClearColor, renderer.autoClearDepth, renderer.autoClearStencil );\n\n\t\t}\n\n\t\tif ( background && ( background.isCubeTexture || background.isWebGLCubeRenderTarget || background.mapping === CubeUVReflectionMapping ) ) {\n\n\t\t\tif ( boxMesh === undefined ) {\n\n\t\t\t\tboxMesh = new Mesh(\n\t\t\t\t\tnew BoxGeometry( 1, 1, 1 ),\n\t\t\t\t\tnew ShaderMaterial( {\n\t\t\t\t\t\tname: 'BackgroundCubeMaterial',\n\t\t\t\t\t\tuniforms: cloneUniforms( ShaderLib.cube.uniforms ),\n\t\t\t\t\t\tvertexShader: ShaderLib.cube.vertexShader,\n\t\t\t\t\t\tfragmentShader: ShaderLib.cube.fragmentShader,\n\t\t\t\t\t\tside: BackSide,\n\t\t\t\t\t\tdepthTest: false,\n\t\t\t\t\t\tdepthWrite: false,\n\t\t\t\t\t\tfog: false\n\t\t\t\t\t} )\n\t\t\t\t);\n\n\t\t\t\tboxMesh.geometry.deleteAttribute( 'normal' );\n\t\t\t\tboxMesh.geometry.deleteAttribute( 'uv' );\n\n\t\t\t\tboxMesh.onBeforeRender = function ( renderer, scene, camera ) {\n\n\t\t\t\t\tthis.matrixWorld.copyPosition( camera.matrixWorld );\n\n\t\t\t\t};\n\n\t\t\t\t// enable code injection for non-built-in material\n\t\t\t\tObject.defineProperty( boxMesh.material, 'envMap', {\n\n\t\t\t\t\tget: function () {\n\n\t\t\t\t\t\treturn this.uniforms.envMap.value;\n\n\t\t\t\t\t}\n\n\t\t\t\t} );\n\n\t\t\t\tobjects.update( boxMesh );\n\n\t\t\t}\n\n\t\t\tif ( background.isWebGLCubeRenderTarget ) {\n\n\t\t\t\t// TODO Deprecate\n\n\t\t\t\tbackground = background.texture;\n\n\t\t\t}\n\n\t\t\tboxMesh.material.uniforms.envMap.value = background;\n\t\t\tboxMesh.material.uniforms.flipEnvMap.value = ( background.isCubeTexture && background._needsFlipEnvMap ) ? - 1 : 1;\n\n\t\t\tif ( currentBackground !== background ||\n\t\t\t\tcurrentBackgroundVersion !== background.version ||\n\t\t\t\tcurrentTonemapping !== renderer.toneMapping ) {\n\n\t\t\t\tboxMesh.material.needsUpdate = true;\n\n\t\t\t\tcurrentBackground = background;\n\t\t\t\tcurrentBackgroundVersion = background.version;\n\t\t\t\tcurrentTonemapping = renderer.toneMapping;\n\n\t\t\t}\n\n\t\t\t// push to the pre-sorted opaque render list\n\t\t\trenderList.unshift( boxMesh, boxMesh.geometry, boxMesh.material, 0, 0, null );\n\n\t\t} else if ( background && background.isTexture ) {\n\n\t\t\tif ( planeMesh === undefined ) {\n\n\t\t\t\tplaneMesh = new Mesh(\n\t\t\t\t\tnew PlaneGeometry( 2, 2 ),\n\t\t\t\t\tnew ShaderMaterial( {\n\t\t\t\t\t\tname: 'BackgroundMaterial',\n\t\t\t\t\t\tuniforms: cloneUniforms( ShaderLib.background.uniforms ),\n\t\t\t\t\t\tvertexShader: ShaderLib.background.vertexShader,\n\t\t\t\t\t\tfragmentShader: ShaderLib.background.fragmentShader,\n\t\t\t\t\t\tside: FrontSide,\n\t\t\t\t\t\tdepthTest: false,\n\t\t\t\t\t\tdepthWrite: false,\n\t\t\t\t\t\tfog: false\n\t\t\t\t\t} )\n\t\t\t\t);\n\n\t\t\t\tplaneMesh.geometry.deleteAttribute( 'normal' );\n\n\t\t\t\t// enable code injection for non-built-in material\n\t\t\t\tObject.defineProperty( planeMesh.material, 'map', {\n\n\t\t\t\t\tget: function () {\n\n\t\t\t\t\t\treturn this.uniforms.t2D.value;\n\n\t\t\t\t\t}\n\n\t\t\t\t} );\n\n\t\t\t\tobjects.update( planeMesh );\n\n\t\t\t}\n\n\t\t\tplaneMesh.material.uniforms.t2D.value = background;\n\n\t\t\tif ( background.matrixAutoUpdate === true ) {\n\n\t\t\t\tbackground.updateMatrix();\n\n\t\t\t}\n\n\t\t\tplaneMesh.material.uniforms.uvTransform.value.copy( background.matrix );\n\n\t\t\tif ( currentBackground !== background ||\n\t\t\t\tcurrentBackgroundVersion !== background.version ||\n\t\t\t\tcurrentTonemapping !== renderer.toneMapping ) {\n\n\t\t\t\tplaneMesh.material.needsUpdate = true;\n\n\t\t\t\tcurrentBackground = background;\n\t\t\t\tcurrentBackgroundVersion = background.version;\n\t\t\t\tcurrentTonemapping = renderer.toneMapping;\n\n\t\t\t}\n\n\n\t\t\t// push to the pre-sorted opaque render list\n\t\t\trenderList.unshift( planeMesh, planeMesh.geometry, planeMesh.material, 0, 0, null );\n\n\t\t}\n\n\t}\n\n\tfunction setClear( color, alpha ) {\n\n\t\tstate.buffers.color.setClear( color.r, color.g, color.b, alpha, premultipliedAlpha );\n\n\t}\n\n\treturn {\n\n\t\tgetClearColor: function () {\n\n\t\t\treturn clearColor;\n\n\t\t},\n\t\tsetClearColor: function ( color, alpha = 1 ) {\n\n\t\t\tclearColor.set( color );\n\t\t\tclearAlpha = alpha;\n\t\t\tsetClear( clearColor, clearAlpha );\n\n\t\t},\n\t\tgetClearAlpha: function () {\n\n\t\t\treturn clearAlpha;\n\n\t\t},\n\t\tsetClearAlpha: function ( alpha ) {\n\n\t\t\tclearAlpha = alpha;\n\t\t\tsetClear( clearColor, clearAlpha );\n\n\t\t},\n\t\trender: render\n\n\t};\n\n}\n\n\nexport { WebGLBackground };\n","function WebGLBindingStates( gl, extensions, attributes, capabilities ) {\n\n\tconst maxVertexAttributes = gl.getParameter( gl.MAX_VERTEX_ATTRIBS );\n\n\tconst extension = capabilities.isWebGL2 ? null : extensions.get( 'OES_vertex_array_object' );\n\tconst vaoAvailable = capabilities.isWebGL2 || extension !== null;\n\n\tconst bindingStates = {};\n\n\tconst defaultState = createBindingState( null );\n\tlet currentState = defaultState;\n\n\tfunction setup( object, material, program, geometry, index ) {\n\n\t\tlet updateBuffers = false;\n\n\t\tif ( vaoAvailable ) {\n\n\t\t\tconst state = getBindingState( geometry, program, material );\n\n\t\t\tif ( currentState !== state ) {\n\n\t\t\t\tcurrentState = state;\n\t\t\t\tbindVertexArrayObject( currentState.object );\n\n\t\t\t}\n\n\t\t\tupdateBuffers = needsUpdate( geometry, index );\n\n\t\t\tif ( updateBuffers ) saveCache( geometry, index );\n\n\t\t} else {\n\n\t\t\tconst wireframe = ( material.wireframe === true );\n\n\t\t\tif ( currentState.geometry !== geometry.id ||\n\t\t\t\tcurrentState.program !== program.id ||\n\t\t\t\tcurrentState.wireframe !== wireframe ) {\n\n\t\t\t\tcurrentState.geometry = geometry.id;\n\t\t\t\tcurrentState.program = program.id;\n\t\t\t\tcurrentState.wireframe = wireframe;\n\n\t\t\t\tupdateBuffers = true;\n\n\t\t\t}\n\n\t\t}\n\n\t\tif ( object.isInstancedMesh === true ) {\n\n\t\t\tupdateBuffers = true;\n\n\t\t}\n\n\t\tif ( index !== null ) {\n\n\t\t\tattributes.update( index, gl.ELEMENT_ARRAY_BUFFER );\n\n\t\t}\n\n\t\tif ( updateBuffers ) {\n\n\t\t\tsetupVertexAttributes( object, material, program, geometry );\n\n\t\t\tif ( index !== null ) {\n\n\t\t\t\tgl.bindBuffer( gl.ELEMENT_ARRAY_BUFFER, attributes.get( index ).buffer );\n\n\t\t\t}\n\n\t\t}\n\n\t}\n\n\tfunction createVertexArrayObject() {\n\n\t\tif ( capabilities.isWebGL2 ) return gl.createVertexArray();\n\n\t\treturn extension.createVertexArrayOES();\n\n\t}\n\n\tfunction bindVertexArrayObject( vao ) {\n\n\t\tif ( capabilities.isWebGL2 ) return gl.bindVertexArray( vao );\n\n\t\treturn extension.bindVertexArrayOES( vao );\n\n\t}\n\n\tfunction deleteVertexArrayObject( vao ) {\n\n\t\tif ( capabilities.isWebGL2 ) return gl.deleteVertexArray( vao );\n\n\t\treturn extension.deleteVertexArrayOES( vao );\n\n\t}\n\n\tfunction getBindingState( geometry, program, material ) {\n\n\t\tconst wireframe = ( material.wireframe === true );\n\n\t\tlet programMap = bindingStates[ geometry.id ];\n\n\t\tif ( programMap === undefined ) {\n\n\t\t\tprogramMap = {};\n\t\t\tbindingStates[ geometry.id ] = programMap;\n\n\t\t}\n\n\t\tlet stateMap = programMap[ program.id ];\n\n\t\tif ( stateMap === undefined ) {\n\n\t\t\tstateMap = {};\n\t\t\tprogramMap[ program.id ] = stateMap;\n\n\t\t}\n\n\t\tlet state = stateMap[ wireframe ];\n\n\t\tif ( state === undefined ) {\n\n\t\t\tstate = createBindingState( createVertexArrayObject() );\n\t\t\tstateMap[ wireframe ] = state;\n\n\t\t}\n\n\t\treturn state;\n\n\t}\n\n\tfunction createBindingState( vao ) {\n\n\t\tconst newAttributes = [];\n\t\tconst enabledAttributes = [];\n\t\tconst attributeDivisors = [];\n\n\t\tfor ( let i = 0; i < maxVertexAttributes; i ++ ) {\n\n\t\t\tnewAttributes[ i ] = 0;\n\t\t\tenabledAttributes[ i ] = 0;\n\t\t\tattributeDivisors[ i ] = 0;\n\n\t\t}\n\n\t\treturn {\n\n\t\t\t// for backward compatibility on non-VAO support browser\n\t\t\tgeometry: null,\n\t\t\tprogram: null,\n\t\t\twireframe: false,\n\n\t\t\tnewAttributes: newAttributes,\n\t\t\tenabledAttributes: enabledAttributes,\n\t\t\tattributeDivisors: attributeDivisors,\n\t\t\tobject: vao,\n\t\t\tattributes: {},\n\t\t\tindex: null\n\n\t\t};\n\n\t}\n\n\tfunction needsUpdate( geometry, index ) {\n\n\t\tconst cachedAttributes = currentState.attributes;\n\t\tconst geometryAttributes = geometry.attributes;\n\n\t\tlet attributesNum = 0;\n\n\t\tfor ( const key in geometryAttributes ) {\n\n\t\t\tconst cachedAttribute = cachedAttributes[ key ];\n\t\t\tconst geometryAttribute = geometryAttributes[ key ];\n\n\t\t\tif ( cachedAttribute === undefined ) return true;\n\n\t\t\tif ( cachedAttribute.attribute !== geometryAttribute ) return true;\n\n\t\t\tif ( cachedAttribute.data !== geometryAttribute.data ) return true;\n\n\t\t\tattributesNum ++;\n\n\t\t}\n\n\t\tif ( currentState.attributesNum !== attributesNum ) return true;\n\n\t\tif ( currentState.index !== index ) return true;\n\n\t\treturn false;\n\n\t}\n\n\tfunction saveCache( geometry, index ) {\n\n\t\tconst cache = {};\n\t\tconst attributes = geometry.attributes;\n\t\tlet attributesNum = 0;\n\n\t\tfor ( const key in attributes ) {\n\n\t\t\tconst attribute = attributes[ key ];\n\n\t\t\tconst data = {};\n\t\t\tdata.attribute = attribute;\n\n\t\t\tif ( attribute.data ) {\n\n\t\t\t\tdata.data = attribute.data;\n\n\t\t\t}\n\n\t\t\tcache[ key ] = data;\n\n\t\t\tattributesNum ++;\n\n\t\t}\n\n\t\tcurrentState.attributes = cache;\n\t\tcurrentState.attributesNum = attributesNum;\n\n\t\tcurrentState.index = index;\n\n\t}\n\n\tfunction initAttributes() {\n\n\t\tconst newAttributes = currentState.newAttributes;\n\n\t\tfor ( let i = 0, il = newAttributes.length; i < il; i ++ ) {\n\n\t\t\tnewAttributes[ i ] = 0;\n\n\t\t}\n\n\t}\n\n\tfunction enableAttribute( attribute ) {\n\n\t\tenableAttributeAndDivisor( attribute, 0 );\n\n\t}\n\n\tfunction enableAttributeAndDivisor( attribute, meshPerAttribute ) {\n\n\t\tconst newAttributes = currentState.newAttributes;\n\t\tconst enabledAttributes = currentState.enabledAttributes;\n\t\tconst attributeDivisors = currentState.attributeDivisors;\n\n\t\tnewAttributes[ attribute ] = 1;\n\n\t\tif ( enabledAttributes[ attribute ] === 0 ) {\n\n\t\t\tgl.enableVertexAttribArray( attribute );\n\t\t\tenabledAttributes[ attribute ] = 1;\n\n\t\t}\n\n\t\tif ( attributeDivisors[ attribute ] !== meshPerAttribute ) {\n\n\t\t\tconst extension = capabilities.isWebGL2 ? gl : extensions.get( 'ANGLE_instanced_arrays' );\n\n\t\t\textension[ capabilities.isWebGL2 ? 'vertexAttribDivisor' : 'vertexAttribDivisorANGLE' ]( attribute, meshPerAttribute );\n\t\t\tattributeDivisors[ attribute ] = meshPerAttribute;\n\n\t\t}\n\n\t}\n\n\tfunction disableUnusedAttributes() {\n\n\t\tconst newAttributes = currentState.newAttributes;\n\t\tconst enabledAttributes = currentState.enabledAttributes;\n\n\t\tfor ( let i = 0, il = enabledAttributes.length; i < il; i ++ ) {\n\n\t\t\tif ( enabledAttributes[ i ] !== newAttributes[ i ] ) {\n\n\t\t\t\tgl.disableVertexAttribArray( i );\n\t\t\t\tenabledAttributes[ i ] = 0;\n\n\t\t\t}\n\n\t\t}\n\n\t}\n\n\tfunction vertexAttribPointer( index, size, type, normalized, stride, offset ) {\n\n\t\tif ( capabilities.isWebGL2 === true && ( type === gl.INT || type === gl.UNSIGNED_INT ) ) {\n\n\t\t\tgl.vertexAttribIPointer( index, size, type, stride, offset );\n\n\t\t} else {\n\n\t\t\tgl.vertexAttribPointer( index, size, type, normalized, stride, offset );\n\n\t\t}\n\n\t}\n\n\tfunction setupVertexAttributes( object, material, program, geometry ) {\n\n\t\tif ( capabilities.isWebGL2 === false && ( object.isInstancedMesh || geometry.isInstancedBufferGeometry ) ) {\n\n\t\t\tif ( extensions.get( 'ANGLE_instanced_arrays' ) === null ) return;\n\n\t\t}\n\n\t\tinitAttributes();\n\n\t\tconst geometryAttributes = geometry.attributes;\n\n\t\tconst programAttributes = program.getAttributes();\n\n\t\tconst materialDefaultAttributeValues = material.defaultAttributeValues;\n\n\t\tfor ( const name in programAttributes ) {\n\n\t\t\tconst programAttribute = programAttributes[ name ];\n\n\t\t\tif ( programAttribute >= 0 ) {\n\n\t\t\t\tconst geometryAttribute = geometryAttributes[ name ];\n\n\t\t\t\tif ( geometryAttribute !== undefined ) {\n\n\t\t\t\t\tconst normalized = geometryAttribute.normalized;\n\t\t\t\t\tconst size = geometryAttribute.itemSize;\n\n\t\t\t\t\tconst attribute = attributes.get( geometryAttribute );\n\n\t\t\t\t\t// TODO Attribute may not be available on context restore\n\n\t\t\t\t\tif ( attribute === undefined ) continue;\n\n\t\t\t\t\tconst buffer = attribute.buffer;\n\t\t\t\t\tconst type = attribute.type;\n\t\t\t\t\tconst bytesPerElement = attribute.bytesPerElement;\n\n\t\t\t\t\tif ( geometryAttribute.isInterleavedBufferAttribute ) {\n\n\t\t\t\t\t\tconst data = geometryAttribute.data;\n\t\t\t\t\t\tconst stride = data.stride;\n\t\t\t\t\t\tconst offset = geometryAttribute.offset;\n\n\t\t\t\t\t\tif ( data && data.isInstancedInterleavedBuffer ) {\n\n\t\t\t\t\t\t\tenableAttributeAndDivisor( programAttribute, data.meshPerAttribute );\n\n\t\t\t\t\t\t\tif ( geometry._maxInstanceCount === undefined ) {\n\n\t\t\t\t\t\t\t\tgeometry._maxInstanceCount = data.meshPerAttribute * data.count;\n\n\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t} else {\n\n\t\t\t\t\t\t\tenableAttribute( programAttribute );\n\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\tgl.bindBuffer( gl.ARRAY_BUFFER, buffer );\n\t\t\t\t\t\tvertexAttribPointer( programAttribute, size, type, normalized, stride * bytesPerElement, offset * bytesPerElement );\n\n\t\t\t\t\t} else {\n\n\t\t\t\t\t\tif ( geometryAttribute.isInstancedBufferAttribute ) {\n\n\t\t\t\t\t\t\tenableAttributeAndDivisor( programAttribute, geometryAttribute.meshPerAttribute );\n\n\t\t\t\t\t\t\tif ( geometry._maxInstanceCount === undefined ) {\n\n\t\t\t\t\t\t\t\tgeometry._maxInstanceCount = geometryAttribute.meshPerAttribute * geometryAttribute.count;\n\n\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t} else {\n\n\t\t\t\t\t\t\tenableAttribute( programAttribute );\n\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\tgl.bindBuffer( gl.ARRAY_BUFFER, buffer );\n\t\t\t\t\t\tvertexAttribPointer( programAttribute, size, type, normalized, 0, 0 );\n\n\t\t\t\t\t}\n\n\t\t\t\t} else if ( name === 'instanceMatrix' ) {\n\n\t\t\t\t\tconst attribute = attributes.get( object.instanceMatrix );\n\n\t\t\t\t\t// TODO Attribute may not be available on context restore\n\n\t\t\t\t\tif ( attribute === undefined ) continue;\n\n\t\t\t\t\tconst buffer = attribute.buffer;\n\t\t\t\t\tconst type = attribute.type;\n\n\t\t\t\t\tenableAttributeAndDivisor( programAttribute + 0, 1 );\n\t\t\t\t\tenableAttributeAndDivisor( programAttribute + 1, 1 );\n\t\t\t\t\tenableAttributeAndDivisor( programAttribute + 2, 1 );\n\t\t\t\t\tenableAttributeAndDivisor( programAttribute + 3, 1 );\n\n\t\t\t\t\tgl.bindBuffer( gl.ARRAY_BUFFER, buffer );\n\n\t\t\t\t\tgl.vertexAttribPointer( programAttribute + 0, 4, type, false, 64, 0 );\n\t\t\t\t\tgl.vertexAttribPointer( programAttribute + 1, 4, type, false, 64, 16 );\n\t\t\t\t\tgl.vertexAttribPointer( programAttribute + 2, 4, type, false, 64, 32 );\n\t\t\t\t\tgl.vertexAttribPointer( programAttribute + 3, 4, type, false, 64, 48 );\n\n\t\t\t\t} else if ( name === 'instanceColor' ) {\n\n\t\t\t\t\tconst attribute = attributes.get( object.instanceColor );\n\n\t\t\t\t\t// TODO Attribute may not be available on context restore\n\n\t\t\t\t\tif ( attribute === undefined ) continue;\n\n\t\t\t\t\tconst buffer = attribute.buffer;\n\t\t\t\t\tconst type = attribute.type;\n\n\t\t\t\t\tenableAttributeAndDivisor( programAttribute, 1 );\n\n\t\t\t\t\tgl.bindBuffer( gl.ARRAY_BUFFER, buffer );\n\n\t\t\t\t\tgl.vertexAttribPointer( programAttribute, 3, type, false, 12, 0 );\n\n\t\t\t\t} else if ( materialDefaultAttributeValues !== undefined ) {\n\n\t\t\t\t\tconst value = materialDefaultAttributeValues[ name ];\n\n\t\t\t\t\tif ( value !== undefined ) {\n\n\t\t\t\t\t\tswitch ( value.length ) {\n\n\t\t\t\t\t\t\tcase 2:\n\t\t\t\t\t\t\t\tgl.vertexAttrib2fv( programAttribute, value );\n\t\t\t\t\t\t\t\tbreak;\n\n\t\t\t\t\t\t\tcase 3:\n\t\t\t\t\t\t\t\tgl.vertexAttrib3fv( programAttribute, value );\n\t\t\t\t\t\t\t\tbreak;\n\n\t\t\t\t\t\t\tcase 4:\n\t\t\t\t\t\t\t\tgl.vertexAttrib4fv( programAttribute, value );\n\t\t\t\t\t\t\t\tbreak;\n\n\t\t\t\t\t\t\tdefault:\n\t\t\t\t\t\t\t\tgl.vertexAttrib1fv( programAttribute, value );\n\n\t\t\t\t\t\t}\n\n\t\t\t\t\t}\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t}\n\n\t\tdisableUnusedAttributes();\n\n\t}\n\n\tfunction dispose() {\n\n\t\treset();\n\n\t\tfor ( const geometryId in bindingStates ) {\n\n\t\t\tconst programMap = bindingStates[ geometryId ];\n\n\t\t\tfor ( const programId in programMap ) {\n\n\t\t\t\tconst stateMap = programMap[ programId ];\n\n\t\t\t\tfor ( const wireframe in stateMap ) {\n\n\t\t\t\t\tdeleteVertexArrayObject( stateMap[ wireframe ].object );\n\n\t\t\t\t\tdelete stateMap[ wireframe ];\n\n\t\t\t\t}\n\n\t\t\t\tdelete programMap[ programId ];\n\n\t\t\t}\n\n\t\t\tdelete bindingStates[ geometryId ];\n\n\t\t}\n\n\t}\n\n\tfunction releaseStatesOfGeometry( geometry ) {\n\n\t\tif ( bindingStates[ geometry.id ] === undefined ) return;\n\n\t\tconst programMap = bindingStates[ geometry.id ];\n\n\t\tfor ( const programId in programMap ) {\n\n\t\t\tconst stateMap = programMap[ programId ];\n\n\t\t\tfor ( const wireframe in stateMap ) {\n\n\t\t\t\tdeleteVertexArrayObject( stateMap[ wireframe ].object );\n\n\t\t\t\tdelete stateMap[ wireframe ];\n\n\t\t\t}\n\n\t\t\tdelete programMap[ programId ];\n\n\t\t}\n\n\t\tdelete bindingStates[ geometry.id ];\n\n\t}\n\n\tfunction releaseStatesOfProgram( program ) {\n\n\t\tfor ( const geometryId in bindingStates ) {\n\n\t\t\tconst programMap = bindingStates[ geometryId ];\n\n\t\t\tif ( programMap[ program.id ] === undefined ) continue;\n\n\t\t\tconst stateMap = programMap[ program.id ];\n\n\t\t\tfor ( const wireframe in stateMap ) {\n\n\t\t\t\tdeleteVertexArrayObject( stateMap[ wireframe ].object );\n\n\t\t\t\tdelete stateMap[ wireframe ];\n\n\t\t\t}\n\n\t\t\tdelete programMap[ program.id ];\n\n\t\t}\n\n\t}\n\n\tfunction reset() {\n\n\t\tresetDefaultState();\n\n\t\tif ( currentState === defaultState ) return;\n\n\t\tcurrentState = defaultState;\n\t\tbindVertexArrayObject( currentState.object );\n\n\t}\n\n\t// for backward-compatilibity\n\n\tfunction resetDefaultState() {\n\n\t\tdefaultState.geometry = null;\n\t\tdefaultState.program = null;\n\t\tdefaultState.wireframe = false;\n\n\t}\n\n\treturn {\n\n\t\tsetup: setup,\n\t\treset: reset,\n\t\tresetDefaultState: resetDefaultState,\n\t\tdispose: dispose,\n\t\treleaseStatesOfGeometry: releaseStatesOfGeometry,\n\t\treleaseStatesOfProgram: releaseStatesOfProgram,\n\n\t\tinitAttributes: initAttributes,\n\t\tenableAttribute: enableAttribute,\n\t\tdisableUnusedAttributes: disableUnusedAttributes\n\n\t};\n\n}\n\n\nexport { WebGLBindingStates };\n","function WebGLBufferRenderer( gl, extensions, info, capabilities ) {\n\n\tconst isWebGL2 = capabilities.isWebGL2;\n\n\tlet mode;\n\n\tfunction setMode( value ) {\n\n\t\tmode = value;\n\n\t}\n\n\tfunction render( start, count ) {\n\n\t\tgl.drawArrays( mode, start, count );\n\n\t\tinfo.update( count, mode, 1 );\n\n\t}\n\n\tfunction renderInstances( start, count, primcount ) {\n\n\t\tif ( primcount === 0 ) return;\n\n\t\tlet extension, methodName;\n\n\t\tif ( isWebGL2 ) {\n\n\t\t\textension = gl;\n\t\t\tmethodName = 'drawArraysInstanced';\n\n\t\t} else {\n\n\t\t\textension = extensions.get( 'ANGLE_instanced_arrays' );\n\t\t\tmethodName = 'drawArraysInstancedANGLE';\n\n\t\t\tif ( extension === null ) {\n\n\t\t\t\tconsole.error( 'THREE.WebGLBufferRenderer: using THREE.InstancedBufferGeometry but hardware does not support extension ANGLE_instanced_arrays.' );\n\t\t\t\treturn;\n\n\t\t\t}\n\n\t\t}\n\n\t\textension[ methodName ]( mode, start, count, primcount );\n\n\t\tinfo.update( count, mode, primcount );\n\n\t}\n\n\t//\n\n\tthis.setMode = setMode;\n\tthis.render = render;\n\tthis.renderInstances = renderInstances;\n\n}\n\n\nexport { WebGLBufferRenderer };\n","function WebGLCapabilities( gl, extensions, parameters ) {\n\n\tlet maxAnisotropy;\n\n\tfunction getMaxAnisotropy() {\n\n\t\tif ( maxAnisotropy !== undefined ) return maxAnisotropy;\n\n\t\tif ( extensions.has( 'EXT_texture_filter_anisotropic' ) === true ) {\n\n\t\t\tconst extension = extensions.get( 'EXT_texture_filter_anisotropic' );\n\n\t\t\tmaxAnisotropy = gl.getParameter( extension.MAX_TEXTURE_MAX_ANISOTROPY_EXT );\n\n\t\t} else {\n\n\t\t\tmaxAnisotropy = 0;\n\n\t\t}\n\n\t\treturn maxAnisotropy;\n\n\t}\n\n\tfunction getMaxPrecision( precision ) {\n\n\t\tif ( precision === 'highp' ) {\n\n\t\t\tif ( gl.getShaderPrecisionFormat( gl.VERTEX_SHADER, gl.HIGH_FLOAT ).precision > 0 &&\n\t\t\t\tgl.getShaderPrecisionFormat( gl.FRAGMENT_SHADER, gl.HIGH_FLOAT ).precision > 0 ) {\n\n\t\t\t\treturn 'highp';\n\n\t\t\t}\n\n\t\t\tprecision = 'mediump';\n\n\t\t}\n\n\t\tif ( precision === 'mediump' ) {\n\n\t\t\tif ( gl.getShaderPrecisionFormat( gl.VERTEX_SHADER, gl.MEDIUM_FLOAT ).precision > 0 &&\n\t\t\t\tgl.getShaderPrecisionFormat( gl.FRAGMENT_SHADER, gl.MEDIUM_FLOAT ).precision > 0 ) {\n\n\t\t\t\treturn 'mediump';\n\n\t\t\t}\n\n\t\t}\n\n\t\treturn 'lowp';\n\n\t}\n\n\t/* eslint-disable no-undef */\n\tconst isWebGL2 = ( typeof WebGL2RenderingContext !== 'undefined' && gl instanceof WebGL2RenderingContext ) ||\n\t\t( typeof WebGL2ComputeRenderingContext !== 'undefined' && gl instanceof WebGL2ComputeRenderingContext );\n\t/* eslint-enable no-undef */\n\n\tlet precision = parameters.precision !== undefined ? parameters.precision : 'highp';\n\tconst maxPrecision = getMaxPrecision( precision );\n\n\tif ( maxPrecision !== precision ) {\n\n\t\tconsole.warn( 'THREE.WebGLRenderer:', precision, 'not supported, using', maxPrecision, 'instead.' );\n\t\tprecision = maxPrecision;\n\n\t}\n\n\tconst logarithmicDepthBuffer = parameters.logarithmicDepthBuffer === true;\n\n\tconst maxTextures = gl.getParameter( gl.MAX_TEXTURE_IMAGE_UNITS );\n\tconst maxVertexTextures = gl.getParameter( gl.MAX_VERTEX_TEXTURE_IMAGE_UNITS );\n\tconst maxTextureSize = gl.getParameter( gl.MAX_TEXTURE_SIZE );\n\tconst maxCubemapSize = gl.getParameter( gl.MAX_CUBE_MAP_TEXTURE_SIZE );\n\n\tconst maxAttributes = gl.getParameter( gl.MAX_VERTEX_ATTRIBS );\n\tconst maxVertexUniforms = gl.getParameter( gl.MAX_VERTEX_UNIFORM_VECTORS );\n\tconst maxVaryings = gl.getParameter( gl.MAX_VARYING_VECTORS );\n\tconst maxFragmentUniforms = gl.getParameter( gl.MAX_FRAGMENT_UNIFORM_VECTORS );\n\n\tconst vertexTextures = maxVertexTextures > 0;\n\tconst floatFragmentTextures = isWebGL2 || extensions.has( 'OES_texture_float' );\n\tconst floatVertexTextures = vertexTextures && floatFragmentTextures;\n\n\tconst maxSamples = isWebGL2 ? gl.getParameter( gl.MAX_SAMPLES ) : 0;\n\n\treturn {\n\n\t\tisWebGL2: isWebGL2,\n\n\t\tgetMaxAnisotropy: getMaxAnisotropy,\n\t\tgetMaxPrecision: getMaxPrecision,\n\n\t\tprecision: precision,\n\t\tlogarithmicDepthBuffer: logarithmicDepthBuffer,\n\n\t\tmaxTextures: maxTextures,\n\t\tmaxVertexTextures: maxVertexTextures,\n\t\tmaxTextureSize: maxTextureSize,\n\t\tmaxCubemapSize: maxCubemapSize,\n\n\t\tmaxAttributes: maxAttributes,\n\t\tmaxVertexUniforms: maxVertexUniforms,\n\t\tmaxVaryings: maxVaryings,\n\t\tmaxFragmentUniforms: maxFragmentUniforms,\n\n\t\tvertexTextures: vertexTextures,\n\t\tfloatFragmentTextures: floatFragmentTextures,\n\t\tfloatVertexTextures: floatVertexTextures,\n\n\t\tmaxSamples: maxSamples\n\n\t};\n\n}\n\n\nexport { WebGLCapabilities };\n","import { Matrix3 } from '../../math/Matrix3.js';\nimport { Plane } from '../../math/Plane.js';\n\nfunction WebGLClipping( properties ) {\n\n\tconst scope = this;\n\n\tlet globalState = null,\n\t\tnumGlobalPlanes = 0,\n\t\tlocalClippingEnabled = false,\n\t\trenderingShadows = false;\n\n\tconst plane = new Plane(),\n\t\tviewNormalMatrix = new Matrix3(),\n\n\t\tuniform = { value: null, needsUpdate: false };\n\n\tthis.uniform = uniform;\n\tthis.numPlanes = 0;\n\tthis.numIntersection = 0;\n\n\tthis.init = function ( planes, enableLocalClipping, camera ) {\n\n\t\tconst enabled =\n\t\t\tplanes.length !== 0 ||\n\t\t\tenableLocalClipping ||\n\t\t\t// enable state of previous frame - the clipping code has to\n\t\t\t// run another frame in order to reset the state:\n\t\t\tnumGlobalPlanes !== 0 ||\n\t\t\tlocalClippingEnabled;\n\n\t\tlocalClippingEnabled = enableLocalClipping;\n\n\t\tglobalState = projectPlanes( planes, camera, 0 );\n\t\tnumGlobalPlanes = planes.length;\n\n\t\treturn enabled;\n\n\t};\n\n\tthis.beginShadows = function () {\n\n\t\trenderingShadows = true;\n\t\tprojectPlanes( null );\n\n\t};\n\n\tthis.endShadows = function () {\n\n\t\trenderingShadows = false;\n\t\tresetGlobalState();\n\n\t};\n\n\tthis.setState = function ( material, camera, useCache ) {\n\n\t\tconst planes = material.clippingPlanes,\n\t\t\tclipIntersection = material.clipIntersection,\n\t\t\tclipShadows = material.clipShadows;\n\n\t\tconst materialProperties = properties.get( material );\n\n\t\tif ( ! localClippingEnabled || planes === null || planes.length === 0 || renderingShadows && ! clipShadows ) {\n\n\t\t\t// there's no local clipping\n\n\t\t\tif ( renderingShadows ) {\n\n\t\t\t\t// there's no global clipping\n\n\t\t\t\tprojectPlanes( null );\n\n\t\t\t} else {\n\n\t\t\t\tresetGlobalState();\n\n\t\t\t}\n\n\t\t} else {\n\n\t\t\tconst nGlobal = renderingShadows ? 0 : numGlobalPlanes,\n\t\t\t\tlGlobal = nGlobal * 4;\n\n\t\t\tlet dstArray = materialProperties.clippingState || null;\n\n\t\t\tuniform.value = dstArray; // ensure unique state\n\n\t\t\tdstArray = projectPlanes( planes, camera, lGlobal, useCache );\n\n\t\t\tfor ( let i = 0; i !== lGlobal; ++ i ) {\n\n\t\t\t\tdstArray[ i ] = globalState[ i ];\n\n\t\t\t}\n\n\t\t\tmaterialProperties.clippingState = dstArray;\n\t\t\tthis.numIntersection = clipIntersection ? this.numPlanes : 0;\n\t\t\tthis.numPlanes += nGlobal;\n\n\t\t}\n\n\n\t};\n\n\tfunction resetGlobalState() {\n\n\t\tif ( uniform.value !== globalState ) {\n\n\t\t\tuniform.value = globalState;\n\t\t\tuniform.needsUpdate = numGlobalPlanes > 0;\n\n\t\t}\n\n\t\tscope.numPlanes = numGlobalPlanes;\n\t\tscope.numIntersection = 0;\n\n\t}\n\n\tfunction projectPlanes( planes, camera, dstOffset, skipTransform ) {\n\n\t\tconst nPlanes = planes !== null ? planes.length : 0;\n\t\tlet dstArray = null;\n\n\t\tif ( nPlanes !== 0 ) {\n\n\t\t\tdstArray = uniform.value;\n\n\t\t\tif ( skipTransform !== true || dstArray === null ) {\n\n\t\t\t\tconst flatSize = dstOffset + nPlanes * 4,\n\t\t\t\t\tviewMatrix = camera.matrixWorldInverse;\n\n\t\t\t\tviewNormalMatrix.getNormalMatrix( viewMatrix );\n\n\t\t\t\tif ( dstArray === null || dstArray.length < flatSize ) {\n\n\t\t\t\t\tdstArray = new Float32Array( flatSize );\n\n\t\t\t\t}\n\n\t\t\t\tfor ( let i = 0, i4 = dstOffset; i !== nPlanes; ++ i, i4 += 4 ) {\n\n\t\t\t\t\tplane.copy( planes[ i ] ).applyMatrix4( viewMatrix, viewNormalMatrix );\n\n\t\t\t\t\tplane.normal.toArray( dstArray, i4 );\n\t\t\t\t\tdstArray[ i4 + 3 ] = plane.constant;\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t\tuniform.value = dstArray;\n\t\t\tuniform.needsUpdate = true;\n\n\t\t}\n\n\t\tscope.numPlanes = nPlanes;\n\t\tscope.numIntersection = 0;\n\n\t\treturn dstArray;\n\n\t}\n\n}\n\n\nexport { WebGLClipping };\n","import { EventDispatcher } from '../core/EventDispatcher.js';\nimport { Texture } from '../textures/Texture.js';\nimport { LinearFilter } from '../constants.js';\nimport { Vector4 } from '../math/Vector4.js';\n\n/*\n In options, we can specify:\n * Texture parameters for an auto-generated target texture\n * depthBuffer/stencilBuffer: Booleans to indicate if we should generate these buffers\n*/\nclass WebGLRenderTarget extends EventDispatcher {\n\n\tconstructor( width, height, options ) {\n\n\t\tsuper();\n\n\t\tthis.width = width;\n\t\tthis.height = height;\n\t\tthis.depth = 1;\n\n\t\tthis.scissor = new Vector4( 0, 0, width, height );\n\t\tthis.scissorTest = false;\n\n\t\tthis.viewport = new Vector4( 0, 0, width, height );\n\n\t\toptions = options || {};\n\n\t\tthis.texture = new Texture( undefined, options.mapping, options.wrapS, options.wrapT, options.magFilter, options.minFilter, options.format, options.type, options.anisotropy, options.encoding );\n\n\t\tthis.texture.image = {};\n\t\tthis.texture.image.width = width;\n\t\tthis.texture.image.height = height;\n\t\tthis.texture.image.depth = 1;\n\n\t\tthis.texture.generateMipmaps = options.generateMipmaps !== undefined ? options.generateMipmaps : false;\n\t\tthis.texture.minFilter = options.minFilter !== undefined ? options.minFilter : LinearFilter;\n\n\t\tthis.depthBuffer = options.depthBuffer !== undefined ? options.depthBuffer : true;\n\t\tthis.stencilBuffer = options.stencilBuffer !== undefined ? options.stencilBuffer : false;\n\t\tthis.depthTexture = options.depthTexture !== undefined ? options.depthTexture : null;\n\n\t}\n\n\tsetTexture( texture ) {\n\n\t\ttexture.image = {\n\t\t\twidth: this.width,\n\t\t\theight: this.height,\n\t\t\tdepth: this.depth\n\t\t};\n\n\t\tthis.texture = texture;\n\n\t}\n\n\tsetSize( width, height, depth = 1 ) {\n\n\t\tif ( this.width !== width || this.height !== height || this.depth !== depth ) {\n\n\t\t\tthis.width = width;\n\t\t\tthis.height = height;\n\t\t\tthis.depth = depth;\n\n\t\t\tthis.texture.image.width = width;\n\t\t\tthis.texture.image.height = height;\n\t\t\tthis.texture.image.depth = depth;\n\n\t\t\tthis.dispose();\n\n\t\t}\n\n\t\tthis.viewport.set( 0, 0, width, height );\n\t\tthis.scissor.set( 0, 0, width, height );\n\n\t}\n\n\tclone() {\n\n\t\treturn new this.constructor().copy( this );\n\n\t}\n\n\tcopy( source ) {\n\n\t\tthis.width = source.width;\n\t\tthis.height = source.height;\n\t\tthis.depth = source.depth;\n\n\t\tthis.viewport.copy( source.viewport );\n\n\t\tthis.texture = source.texture.clone();\n\n\t\tthis.depthBuffer = source.depthBuffer;\n\t\tthis.stencilBuffer = source.stencilBuffer;\n\t\tthis.depthTexture = source.depthTexture;\n\n\t\treturn this;\n\n\t}\n\n\tdispose() {\n\n\t\tthis.dispatchEvent( { type: 'dispose' } );\n\n\t}\n\n}\n\nWebGLRenderTarget.prototype.isWebGLRenderTarget = true;\n\nexport { WebGLRenderTarget };\n","import { Object3D } from '../core/Object3D.js';\nimport { Vector3 } from '../math/Vector3.js';\nimport { PerspectiveCamera } from './PerspectiveCamera.js';\n\nconst fov = 90, aspect = 1;\n\nclass CubeCamera extends Object3D {\n\n\tconstructor( near, far, renderTarget ) {\n\n\t\tsuper();\n\n\t\tthis.type = 'CubeCamera';\n\n\t\tif ( renderTarget.isWebGLCubeRenderTarget !== true ) {\n\n\t\t\tconsole.error( 'THREE.CubeCamera: The constructor now expects an instance of WebGLCubeRenderTarget as third parameter.' );\n\t\t\treturn;\n\n\t\t}\n\n\t\tthis.renderTarget = renderTarget;\n\n\t\tconst cameraPX = new PerspectiveCamera( fov, aspect, near, far );\n\t\tcameraPX.layers = this.layers;\n\t\tcameraPX.up.set( 0, - 1, 0 );\n\t\tcameraPX.lookAt( new Vector3( 1, 0, 0 ) );\n\t\tthis.add( cameraPX );\n\n\t\tconst cameraNX = new PerspectiveCamera( fov, aspect, near, far );\n\t\tcameraNX.layers = this.layers;\n\t\tcameraNX.up.set( 0, - 1, 0 );\n\t\tcameraNX.lookAt( new Vector3( - 1, 0, 0 ) );\n\t\tthis.add( cameraNX );\n\n\t\tconst cameraPY = new PerspectiveCamera( fov, aspect, near, far );\n\t\tcameraPY.layers = this.layers;\n\t\tcameraPY.up.set( 0, 0, 1 );\n\t\tcameraPY.lookAt( new Vector3( 0, 1, 0 ) );\n\t\tthis.add( cameraPY );\n\n\t\tconst cameraNY = new PerspectiveCamera( fov, aspect, near, far );\n\t\tcameraNY.layers = this.layers;\n\t\tcameraNY.up.set( 0, 0, - 1 );\n\t\tcameraNY.lookAt( new Vector3( 0, - 1, 0 ) );\n\t\tthis.add( cameraNY );\n\n\t\tconst cameraPZ = new PerspectiveCamera( fov, aspect, near, far );\n\t\tcameraPZ.layers = this.layers;\n\t\tcameraPZ.up.set( 0, - 1, 0 );\n\t\tcameraPZ.lookAt( new Vector3( 0, 0, 1 ) );\n\t\tthis.add( cameraPZ );\n\n\t\tconst cameraNZ = new PerspectiveCamera( fov, aspect, near, far );\n\t\tcameraNZ.layers = this.layers;\n\t\tcameraNZ.up.set( 0, - 1, 0 );\n\t\tcameraNZ.lookAt( new Vector3( 0, 0, - 1 ) );\n\t\tthis.add( cameraNZ );\n\n\t}\n\n\tupdate( renderer, scene ) {\n\n\t\tif ( this.parent === null ) this.updateMatrixWorld();\n\n\t\tconst renderTarget = this.renderTarget;\n\n\t\tconst [ cameraPX, cameraNX, cameraPY, cameraNY, cameraPZ, cameraNZ ] = this.children;\n\n\t\tconst currentXrEnabled = renderer.xr.enabled;\n\t\tconst currentRenderTarget = renderer.getRenderTarget();\n\n\t\trenderer.xr.enabled = false;\n\n\t\tconst generateMipmaps = renderTarget.texture.generateMipmaps;\n\n\t\trenderTarget.texture.generateMipmaps = false;\n\n\t\trenderer.setRenderTarget( renderTarget, 0 );\n\t\trenderer.render( scene, cameraPX );\n\n\t\trenderer.setRenderTarget( renderTarget, 1 );\n\t\trenderer.render( scene, cameraNX );\n\n\t\trenderer.setRenderTarget( renderTarget, 2 );\n\t\trenderer.render( scene, cameraPY );\n\n\t\trenderer.setRenderTarget( renderTarget, 3 );\n\t\trenderer.render( scene, cameraNY );\n\n\t\trenderer.setRenderTarget( renderTarget, 4 );\n\t\trenderer.render( scene, cameraPZ );\n\n\t\trenderTarget.texture.generateMipmaps = generateMipmaps;\n\n\t\trenderer.setRenderTarget( renderTarget, 5 );\n\t\trenderer.render( scene, cameraNZ );\n\n\t\trenderer.setRenderTarget( currentRenderTarget );\n\n\t\trenderer.xr.enabled = currentXrEnabled;\n\n\t}\n\n}\n\nexport { CubeCamera };\n","import { Texture } from './Texture.js';\nimport { CubeReflectionMapping, RGBFormat } from '../constants.js';\n\nclass CubeTexture extends Texture {\n\n\tconstructor( images, mapping, wrapS, wrapT, magFilter, minFilter, format, type, anisotropy, encoding ) {\n\n\t\timages = images !== undefined ? images : [];\n\t\tmapping = mapping !== undefined ? mapping : CubeReflectionMapping;\n\t\tformat = format !== undefined ? format : RGBFormat;\n\n\t\tsuper( images, mapping, wrapS, wrapT, magFilter, minFilter, format, type, anisotropy, encoding );\n\n\t\t// Why CubeTexture._needsFlipEnvMap is necessary:\n\t\t//\n\t\t// By convention -- likely based on the RenderMan spec from the 1990's -- cube maps are specified by WebGL (and three.js)\n\t\t// in a coordinate system in which positive-x is to the right when looking up the positive-z axis -- in other words,\n\t\t// in a left-handed coordinate system. By continuing this convention, preexisting cube maps continued to render correctly.\n\n\t\t// three.js uses a right-handed coordinate system. So environment maps used in three.js appear to have px and nx swapped\n\t\t// and the flag _needsFlipEnvMap controls this conversion. The flip is not required (and thus _needsFlipEnvMap is set to false)\n\t\t// when using WebGLCubeRenderTarget.texture as a cube texture.\n\n\t\tthis._needsFlipEnvMap = true;\n\n\t\tthis.flipY = false;\n\n\t}\n\n\tget images() {\n\n\t\treturn this.image;\n\n\t}\n\n\tset images( value ) {\n\n\t\tthis.image = value;\n\n\t}\n\n}\n\nCubeTexture.prototype.isCubeTexture = true;\n\nexport { CubeTexture };\n","import { BackSide, LinearFilter, LinearMipmapLinearFilter, NoBlending, RGBAFormat } from '../constants.js';\nimport { Mesh } from '../objects/Mesh.js';\nimport { BoxGeometry } from '../geometries/BoxGeometry.js';\nimport { ShaderMaterial } from '../materials/ShaderMaterial.js';\nimport { cloneUniforms } from './shaders/UniformsUtils.js';\nimport { WebGLRenderTarget } from './WebGLRenderTarget.js';\nimport { CubeCamera } from '../cameras/CubeCamera.js';\nimport { CubeTexture } from '../textures/CubeTexture.js';\n\nclass WebGLCubeRenderTarget extends WebGLRenderTarget {\n\n\tconstructor( size, options, dummy ) {\n\n\t\tif ( Number.isInteger( options ) ) {\n\n\t\t\tconsole.warn( 'THREE.WebGLCubeRenderTarget: constructor signature is now WebGLCubeRenderTarget( size, options )' );\n\n\t\t\toptions = dummy;\n\n\t\t}\n\n\t\tsuper( size, size, options );\n\n\t\toptions = options || {};\n\n\t\tthis.texture = new CubeTexture( undefined, options.mapping, options.wrapS, options.wrapT, options.magFilter, options.minFilter, options.format, options.type, options.anisotropy, options.encoding );\n\n\t\tthis.texture.generateMipmaps = options.generateMipmaps !== undefined ? options.generateMipmaps : false;\n\t\tthis.texture.minFilter = options.minFilter !== undefined ? options.minFilter : LinearFilter;\n\n\t\tthis.texture._needsFlipEnvMap = false;\n\n\t}\n\n\tfromEquirectangularTexture( renderer, texture ) {\n\n\t\tthis.texture.type = texture.type;\n\t\tthis.texture.format = RGBAFormat; // see #18859\n\t\tthis.texture.encoding = texture.encoding;\n\n\t\tthis.texture.generateMipmaps = texture.generateMipmaps;\n\t\tthis.texture.minFilter = texture.minFilter;\n\t\tthis.texture.magFilter = texture.magFilter;\n\n\t\tconst shader = {\n\n\t\t\tuniforms: {\n\t\t\t\ttEquirect: { value: null },\n\t\t\t},\n\n\t\t\tvertexShader: /* glsl */`\n\n\t\t\t\tvarying vec3 vWorldDirection;\n\n\t\t\t\tvec3 transformDirection( in vec3 dir, in mat4 matrix ) {\n\n\t\t\t\t\treturn normalize( ( matrix * vec4( dir, 0.0 ) ).xyz );\n\n\t\t\t\t}\n\n\t\t\t\tvoid main() {\n\n\t\t\t\t\tvWorldDirection = transformDirection( position, modelMatrix );\n\n\t\t\t\t\t#include <begin_vertex>\n\t\t\t\t\t#include <project_vertex>\n\n\t\t\t\t}\n\t\t\t`,\n\n\t\t\tfragmentShader: /* glsl */`\n\n\t\t\t\tuniform sampler2D tEquirect;\n\n\t\t\t\tvarying vec3 vWorldDirection;\n\n\t\t\t\t#include <common>\n\n\t\t\t\tvoid main() {\n\n\t\t\t\t\tvec3 direction = normalize( vWorldDirection );\n\n\t\t\t\t\tvec2 sampleUV = equirectUv( direction );\n\n\t\t\t\t\tgl_FragColor = texture2D( tEquirect, sampleUV );\n\n\t\t\t\t}\n\t\t\t`\n\t\t};\n\n\t\tconst geometry = new BoxGeometry( 5, 5, 5 );\n\n\t\tconst material = new ShaderMaterial( {\n\n\t\t\tname: 'CubemapFromEquirect',\n\n\t\t\tuniforms: cloneUniforms( shader.uniforms ),\n\t\t\tvertexShader: shader.vertexShader,\n\t\t\tfragmentShader: shader.fragmentShader,\n\t\t\tside: BackSide,\n\t\t\tblending: NoBlending\n\n\t\t} );\n\n\t\tmaterial.uniforms.tEquirect.value = texture;\n\n\t\tconst mesh = new Mesh( geometry, material );\n\n\t\tconst currentMinFilter = texture.minFilter;\n\n\t\t// Avoid blurred poles\n\t\tif ( texture.minFilter === LinearMipmapLinearFilter ) texture.minFilter = LinearFilter;\n\n\t\tconst camera = new CubeCamera( 1, 10, this );\n\t\tcamera.update( renderer, mesh );\n\n\t\ttexture.minFilter = currentMinFilter;\n\n\t\tmesh.geometry.dispose();\n\t\tmesh.material.dispose();\n\n\t\treturn this;\n\n\t}\n\n\tclear( renderer, color, depth, stencil ) {\n\n\t\tconst currentRenderTarget = renderer.getRenderTarget();\n\n\t\tfor ( let i = 0; i < 6; i ++ ) {\n\n\t\t\trenderer.setRenderTarget( this, i );\n\n\t\t\trenderer.clear( color, depth, stencil );\n\n\t\t}\n\n\t\trenderer.setRenderTarget( currentRenderTarget );\n\n\t}\n\n}\n\nWebGLCubeRenderTarget.prototype.isWebGLCubeRenderTarget = true;\n\nexport { WebGLCubeRenderTarget };\n","import { CubeReflectionMapping, CubeRefractionMapping, EquirectangularReflectionMapping, EquirectangularRefractionMapping } from '../../constants.js';\nimport { WebGLCubeRenderTarget } from '../WebGLCubeRenderTarget.js';\n\nfunction WebGLCubeMaps( renderer ) {\n\n\tlet cubemaps = new WeakMap();\n\n\tfunction mapTextureMapping( texture, mapping ) {\n\n\t\tif ( mapping === EquirectangularReflectionMapping ) {\n\n\t\t\ttexture.mapping = CubeReflectionMapping;\n\n\t\t} else if ( mapping === EquirectangularRefractionMapping ) {\n\n\t\t\ttexture.mapping = CubeRefractionMapping;\n\n\t\t}\n\n\t\treturn texture;\n\n\t}\n\n\tfunction get( texture ) {\n\n\t\tif ( texture && texture.isTexture ) {\n\n\t\t\tconst mapping = texture.mapping;\n\n\t\t\tif ( mapping === EquirectangularReflectionMapping || mapping === EquirectangularRefractionMapping ) {\n\n\t\t\t\tif ( cubemaps.has( texture ) ) {\n\n\t\t\t\t\tconst cubemap = cubemaps.get( texture ).texture;\n\t\t\t\t\treturn mapTextureMapping( cubemap, texture.mapping );\n\n\t\t\t\t} else {\n\n\t\t\t\t\tconst image = texture.image;\n\n\t\t\t\t\tif ( image && image.height > 0 ) {\n\n\t\t\t\t\t\tconst currentRenderTarget = renderer.getRenderTarget();\n\n\t\t\t\t\t\tconst renderTarget = new WebGLCubeRenderTarget( image.height / 2 );\n\t\t\t\t\t\trenderTarget.fromEquirectangularTexture( renderer, texture );\n\t\t\t\t\t\tcubemaps.set( texture, renderTarget );\n\n\t\t\t\t\t\trenderer.setRenderTarget( currentRenderTarget );\n\n\t\t\t\t\t\ttexture.addEventListener( 'dispose', onTextureDispose );\n\n\t\t\t\t\t\treturn mapTextureMapping( renderTarget.texture, texture.mapping );\n\n\t\t\t\t\t} else {\n\n\t\t\t\t\t\t// image not yet ready. try the conversion next frame\n\n\t\t\t\t\t\treturn null;\n\n\t\t\t\t\t}\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t}\n\n\t\treturn texture;\n\n\t}\n\n\tfunction onTextureDispose( event ) {\n\n\t\tconst texture = event.target;\n\n\t\ttexture.removeEventListener( 'dispose', onTextureDispose );\n\n\t\tconst cubemap = cubemaps.get( texture );\n\n\t\tif ( cubemap !== undefined ) {\n\n\t\t\tcubemaps.delete( texture );\n\t\t\tcubemap.dispose();\n\n\t\t}\n\n\t}\n\n\tfunction dispose() {\n\n\t\tcubemaps = new WeakMap();\n\n\t}\n\n\treturn {\n\t\tget: get,\n\t\tdispose: dispose\n\t};\n\n}\n\nexport { WebGLCubeMaps };\n","function WebGLExtensions( gl ) {\n\n\tconst extensions = {};\n\n\tfunction getExtension( name ) {\n\n\t\tif ( extensions[ name ] !== undefined ) {\n\n\t\t\treturn extensions[ name ];\n\n\t\t}\n\n\t\tlet extension;\n\n\t\tswitch ( name ) {\n\n\t\t\tcase 'WEBGL_depth_texture':\n\t\t\t\textension = gl.getExtension( 'WEBGL_depth_texture' ) || gl.getExtension( 'MOZ_WEBGL_depth_texture' ) || gl.getExtension( 'WEBKIT_WEBGL_depth_texture' );\n\t\t\t\tbreak;\n\n\t\t\tcase 'EXT_texture_filter_anisotropic':\n\t\t\t\textension = gl.getExtension( 'EXT_texture_filter_anisotropic' ) || gl.getExtension( 'MOZ_EXT_texture_filter_anisotropic' ) || gl.getExtension( 'WEBKIT_EXT_texture_filter_anisotropic' );\n\t\t\t\tbreak;\n\n\t\t\tcase 'WEBGL_compressed_texture_s3tc':\n\t\t\t\textension = gl.getExtension( 'WEBGL_compressed_texture_s3tc' ) || gl.getExtension( 'MOZ_WEBGL_compressed_texture_s3tc' ) || gl.getExtension( 'WEBKIT_WEBGL_compressed_texture_s3tc' );\n\t\t\t\tbreak;\n\n\t\t\tcase 'WEBGL_compressed_texture_pvrtc':\n\t\t\t\textension = gl.getExtension( 'WEBGL_compressed_texture_pvrtc' ) || gl.getExtension( 'WEBKIT_WEBGL_compressed_texture_pvrtc' );\n\t\t\t\tbreak;\n\n\t\t\tdefault:\n\t\t\t\textension = gl.getExtension( name );\n\n\t\t}\n\n\t\textensions[ name ] = extension;\n\n\t\treturn extension;\n\n\t}\n\n\treturn {\n\n\t\thas: function ( name ) {\n\n\t\t\treturn getExtension( name ) !== null;\n\n\t\t},\n\n\t\tinit: function ( capabilities ) {\n\n\t\t\tif ( capabilities.isWebGL2 ) {\n\n\t\t\t\tgetExtension( 'EXT_color_buffer_float' );\n\n\t\t\t} else {\n\n\t\t\t\tgetExtension( 'WEBGL_depth_texture' );\n\t\t\t\tgetExtension( 'OES_texture_float' );\n\t\t\t\tgetExtension( 'OES_texture_half_float' );\n\t\t\t\tgetExtension( 'OES_texture_half_float_linear' );\n\t\t\t\tgetExtension( 'OES_standard_derivatives' );\n\t\t\t\tgetExtension( 'OES_element_index_uint' );\n\t\t\t\tgetExtension( 'OES_vertex_array_object' );\n\t\t\t\tgetExtension( 'ANGLE_instanced_arrays' );\n\n\t\t\t}\n\n\t\t\tgetExtension( 'OES_texture_float_linear' );\n\t\t\tgetExtension( 'EXT_color_buffer_half_float' );\n\n\t\t},\n\n\t\tget: function ( name ) {\n\n\t\t\tconst extension = getExtension( name );\n\n\t\t\tif ( extension === null ) {\n\n\t\t\t\tconsole.warn( 'THREE.WebGLRenderer: ' + name + ' extension not supported.' );\n\n\t\t\t}\n\n\t\t\treturn extension;\n\n\t\t}\n\n\t};\n\n}\n\n\nexport { WebGLExtensions };\n","import { Uint16BufferAttribute, Uint32BufferAttribute } from '../../core/BufferAttribute.js';\nimport { arrayMax } from '../../utils.js';\n\nfunction WebGLGeometries( gl, attributes, info, bindingStates ) {\n\n\tconst geometries = {};\n\tconst wireframeAttributes = new WeakMap();\n\n\tfunction onGeometryDispose( event ) {\n\n\t\tconst geometry = event.target;\n\n\t\tif ( geometry.index !== null ) {\n\n\t\t\tattributes.remove( geometry.index );\n\n\t\t}\n\n\t\tfor ( const name in geometry.attributes ) {\n\n\t\t\tattributes.remove( geometry.attributes[ name ] );\n\n\t\t}\n\n\t\tgeometry.removeEventListener( 'dispose', onGeometryDispose );\n\n\t\tdelete geometries[ geometry.id ];\n\n\t\tconst attribute = wireframeAttributes.get( geometry );\n\n\t\tif ( attribute ) {\n\n\t\t\tattributes.remove( attribute );\n\t\t\twireframeAttributes.delete( geometry );\n\n\t\t}\n\n\t\tbindingStates.releaseStatesOfGeometry( geometry );\n\n\t\tif ( geometry.isInstancedBufferGeometry === true ) {\n\n\t\t\tdelete geometry._maxInstanceCount;\n\n\t\t}\n\n\t\t//\n\n\t\tinfo.memory.geometries --;\n\n\t}\n\n\tfunction get( object, geometry ) {\n\n\t\tif ( geometries[ geometry.id ] === true ) return geometry;\n\n\t\tgeometry.addEventListener( 'dispose', onGeometryDispose );\n\n\t\tgeometries[ geometry.id ] = true;\n\n\t\tinfo.memory.geometries ++;\n\n\t\treturn geometry;\n\n\t}\n\n\tfunction update( geometry ) {\n\n\t\tconst geometryAttributes = geometry.attributes;\n\n\t\t// Updating index buffer in VAO now. See WebGLBindingStates.\n\n\t\tfor ( const name in geometryAttributes ) {\n\n\t\t\tattributes.update( geometryAttributes[ name ], gl.ARRAY_BUFFER );\n\n\t\t}\n\n\t\t// morph targets\n\n\t\tconst morphAttributes = geometry.morphAttributes;\n\n\t\tfor ( const name in morphAttributes ) {\n\n\t\t\tconst array = morphAttributes[ name ];\n\n\t\t\tfor ( let i = 0, l = array.length; i < l; i ++ ) {\n\n\t\t\t\tattributes.update( array[ i ], gl.ARRAY_BUFFER );\n\n\t\t\t}\n\n\t\t}\n\n\t}\n\n\tfunction updateWireframeAttribute( geometry ) {\n\n\t\tconst indices = [];\n\n\t\tconst geometryIndex = geometry.index;\n\t\tconst geometryPosition = geometry.attributes.position;\n\t\tlet version = 0;\n\n\t\tif ( geometryIndex !== null ) {\n\n\t\t\tconst array = geometryIndex.array;\n\t\t\tversion = geometryIndex.version;\n\n\t\t\tfor ( let i = 0, l = array.length; i < l; i += 3 ) {\n\n\t\t\t\tconst a = array[ i + 0 ];\n\t\t\t\tconst b = array[ i + 1 ];\n\t\t\t\tconst c = array[ i + 2 ];\n\n\t\t\t\tindices.push( a, b, b, c, c, a );\n\n\t\t\t}\n\n\t\t} else {\n\n\t\t\tconst array = geometryPosition.array;\n\t\t\tversion = geometryPosition.version;\n\n\t\t\tfor ( let i = 0, l = ( array.length / 3 ) - 1; i < l; i += 3 ) {\n\n\t\t\t\tconst a = i + 0;\n\t\t\t\tconst b = i + 1;\n\t\t\t\tconst c = i + 2;\n\n\t\t\t\tindices.push( a, b, b, c, c, a );\n\n\t\t\t}\n\n\t\t}\n\n\t\tconst attribute = new ( arrayMax( indices ) > 65535 ? Uint32BufferAttribute : Uint16BufferAttribute )( indices, 1 );\n\t\tattribute.version = version;\n\n\t\t// Updating index buffer in VAO now. See WebGLBindingStates\n\n\t\t//\n\n\t\tconst previousAttribute = wireframeAttributes.get( geometry );\n\n\t\tif ( previousAttribute ) attributes.remove( previousAttribute );\n\n\t\t//\n\n\t\twireframeAttributes.set( geometry, attribute );\n\n\t}\n\n\tfunction getWireframeAttribute( geometry ) {\n\n\t\tconst currentAttribute = wireframeAttributes.get( geometry );\n\n\t\tif ( currentAttribute ) {\n\n\t\t\tconst geometryIndex = geometry.index;\n\n\t\t\tif ( geometryIndex !== null ) {\n\n\t\t\t\t// if the attribute is obsolete, create a new one\n\n\t\t\t\tif ( currentAttribute.version < geometryIndex.version ) {\n\n\t\t\t\t\tupdateWireframeAttribute( geometry );\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t} else {\n\n\t\t\tupdateWireframeAttribute( geometry );\n\n\t\t}\n\n\t\treturn wireframeAttributes.get( geometry );\n\n\t}\n\n\treturn {\n\n\t\tget: get,\n\t\tupdate: update,\n\n\t\tgetWireframeAttribute: getWireframeAttribute\n\n\t};\n\n}\n\n\nexport { WebGLGeometries };\n","function WebGLIndexedBufferRenderer( gl, extensions, info, capabilities ) {\n\n\tconst isWebGL2 = capabilities.isWebGL2;\n\n\tlet mode;\n\n\tfunction setMode( value ) {\n\n\t\tmode = value;\n\n\t}\n\n\tlet type, bytesPerElement;\n\n\tfunction setIndex( value ) {\n\n\t\ttype = value.type;\n\t\tbytesPerElement = value.bytesPerElement;\n\n\t}\n\n\tfunction render( start, count ) {\n\n\t\tgl.drawElements( mode, count, type, start * bytesPerElement );\n\n\t\tinfo.update( count, mode, 1 );\n\n\t}\n\n\tfunction renderInstances( start, count, primcount ) {\n\n\t\tif ( primcount === 0 ) return;\n\n\t\tlet extension, methodName;\n\n\t\tif ( isWebGL2 ) {\n\n\t\t\textension = gl;\n\t\t\tmethodName = 'drawElementsInstanced';\n\n\t\t} else {\n\n\t\t\textension = extensions.get( 'ANGLE_instanced_arrays' );\n\t\t\tmethodName = 'drawElementsInstancedANGLE';\n\n\t\t\tif ( extension === null ) {\n\n\t\t\t\tconsole.error( 'THREE.WebGLIndexedBufferRenderer: using THREE.InstancedBufferGeometry but hardware does not support extension ANGLE_instanced_arrays.' );\n\t\t\t\treturn;\n\n\t\t\t}\n\n\t\t}\n\n\t\textension[ methodName ]( mode, count, type, start * bytesPerElement, primcount );\n\n\t\tinfo.update( count, mode, primcount );\n\n\t}\n\n\t//\n\n\tthis.setMode = setMode;\n\tthis.setIndex = setIndex;\n\tthis.render = render;\n\tthis.renderInstances = renderInstances;\n\n}\n\n\nexport { WebGLIndexedBufferRenderer };\n","function WebGLInfo( gl ) {\n\n\tconst memory = {\n\t\tgeometries: 0,\n\t\ttextures: 0\n\t};\n\n\tconst render = {\n\t\tframe: 0,\n\t\tcalls: 0,\n\t\ttriangles: 0,\n\t\tpoints: 0,\n\t\tlines: 0\n\t};\n\n\tfunction update( count, mode, instanceCount ) {\n\n\t\trender.calls ++;\n\n\t\tswitch ( mode ) {\n\n\t\t\tcase gl.TRIANGLES:\n\t\t\t\trender.triangles += instanceCount * ( count / 3 );\n\t\t\t\tbreak;\n\n\t\t\tcase gl.LINES:\n\t\t\t\trender.lines += instanceCount * ( count / 2 );\n\t\t\t\tbreak;\n\n\t\t\tcase gl.LINE_STRIP:\n\t\t\t\trender.lines += instanceCount * ( count - 1 );\n\t\t\t\tbreak;\n\n\t\t\tcase gl.LINE_LOOP:\n\t\t\t\trender.lines += instanceCount * count;\n\t\t\t\tbreak;\n\n\t\t\tcase gl.POINTS:\n\t\t\t\trender.points += instanceCount * count;\n\t\t\t\tbreak;\n\n\t\t\tdefault:\n\t\t\t\tconsole.error( 'THREE.WebGLInfo: Unknown draw mode:', mode );\n\t\t\t\tbreak;\n\n\t\t}\n\n\t}\n\n\tfunction reset() {\n\n\t\trender.frame ++;\n\t\trender.calls = 0;\n\t\trender.triangles = 0;\n\t\trender.points = 0;\n\t\trender.lines = 0;\n\n\t}\n\n\treturn {\n\t\tmemory: memory,\n\t\trender: render,\n\t\tprograms: null,\n\t\tautoReset: true,\n\t\treset: reset,\n\t\tupdate: update\n\t};\n\n}\n\n\nexport { WebGLInfo };\n","function numericalSort( a, b ) {\n\n\treturn a[ 0 ] - b[ 0 ];\n\n}\n\nfunction absNumericalSort( a, b ) {\n\n\treturn Math.abs( b[ 1 ] ) - Math.abs( a[ 1 ] );\n\n}\n\nfunction WebGLMorphtargets( gl ) {\n\n\tconst influencesList = {};\n\tconst morphInfluences = new Float32Array( 8 );\n\n\tconst workInfluences = [];\n\n\tfor ( let i = 0; i < 8; i ++ ) {\n\n\t\tworkInfluences[ i ] = [ i, 0 ];\n\n\t}\n\n\tfunction update( object, geometry, material, program ) {\n\n\t\tconst objectInfluences = object.morphTargetInfluences;\n\n\t\t// When object doesn't have morph target influences defined, we treat it as a 0-length array\n\t\t// This is important to make sure we set up morphTargetBaseInfluence / morphTargetInfluences\n\n\t\tconst length = objectInfluences === undefined ? 0 : objectInfluences.length;\n\n\t\tlet influences = influencesList[ geometry.id ];\n\n\t\tif ( influences === undefined ) {\n\n\t\t\t// initialise list\n\n\t\t\tinfluences = [];\n\n\t\t\tfor ( let i = 0; i < length; i ++ ) {\n\n\t\t\t\tinfluences[ i ] = [ i, 0 ];\n\n\t\t\t}\n\n\t\t\tinfluencesList[ geometry.id ] = influences;\n\n\t\t}\n\n\t\t// Collect influences\n\n\t\tfor ( let i = 0; i < length; i ++ ) {\n\n\t\t\tconst influence = influences[ i ];\n\n\t\t\tinfluence[ 0 ] = i;\n\t\t\tinfluence[ 1 ] = objectInfluences[ i ];\n\n\t\t}\n\n\t\tinfluences.sort( absNumericalSort );\n\n\t\tfor ( let i = 0; i < 8; i ++ ) {\n\n\t\t\tif ( i < length && influences[ i ][ 1 ] ) {\n\n\t\t\t\tworkInfluences[ i ][ 0 ] = influences[ i ][ 0 ];\n\t\t\t\tworkInfluences[ i ][ 1 ] = influences[ i ][ 1 ];\n\n\t\t\t} else {\n\n\t\t\t\tworkInfluences[ i ][ 0 ] = Number.MAX_SAFE_INTEGER;\n\t\t\t\tworkInfluences[ i ][ 1 ] = 0;\n\n\t\t\t}\n\n\t\t}\n\n\t\tworkInfluences.sort( numericalSort );\n\n\t\tconst morphTargets = material.morphTargets && geometry.morphAttributes.position;\n\t\tconst morphNormals = material.morphNormals && geometry.morphAttributes.normal;\n\n\t\tlet morphInfluencesSum = 0;\n\n\t\tfor ( let i = 0; i < 8; i ++ ) {\n\n\t\t\tconst influence = workInfluences[ i ];\n\t\t\tconst index = influence[ 0 ];\n\t\t\tconst value = influence[ 1 ];\n\n\t\t\tif ( index !== Number.MAX_SAFE_INTEGER && value ) {\n\n\t\t\t\tif ( morphTargets && geometry.getAttribute( 'morphTarget' + i ) !== morphTargets[ index ] ) {\n\n\t\t\t\t\tgeometry.setAttribute( 'morphTarget' + i, morphTargets[ index ] );\n\n\t\t\t\t}\n\n\t\t\t\tif ( morphNormals && geometry.getAttribute( 'morphNormal' + i ) !== morphNormals[ index ] ) {\n\n\t\t\t\t\tgeometry.setAttribute( 'morphNormal' + i, morphNormals[ index ] );\n\n\t\t\t\t}\n\n\t\t\t\tmorphInfluences[ i ] = value;\n\t\t\t\tmorphInfluencesSum += value;\n\n\t\t\t} else {\n\n\t\t\t\tif ( morphTargets && geometry.hasAttribute( 'morphTarget' + i ) === true ) {\n\n\t\t\t\t\tgeometry.deleteAttribute( 'morphTarget' + i );\n\n\t\t\t\t}\n\n\t\t\t\tif ( morphNormals && geometry.hasAttribute( 'morphNormal' + i ) === true ) {\n\n\t\t\t\t\tgeometry.deleteAttribute( 'morphNormal' + i );\n\n\t\t\t\t}\n\n\t\t\t\tmorphInfluences[ i ] = 0;\n\n\t\t\t}\n\n\t\t}\n\n\t\t// GLSL shader uses formula baseinfluence * base + sum(target * influence)\n\t\t// This allows us to switch between absolute morphs and relative morphs without changing shader code\n\t\t// When baseinfluence = 1 - sum(influence), the above is equivalent to sum((target - base) * influence)\n\t\tconst morphBaseInfluence = geometry.morphTargetsRelative ? 1 : 1 - morphInfluencesSum;\n\n\t\tprogram.getUniforms().setValue( gl, 'morphTargetBaseInfluence', morphBaseInfluence );\n\t\tprogram.getUniforms().setValue( gl, 'morphTargetInfluences', morphInfluences );\n\n\t}\n\n\treturn {\n\n\t\tupdate: update\n\n\t};\n\n}\n\n\nexport { WebGLMorphtargets };\n","function WebGLObjects( gl, geometries, attributes, info ) {\n\n\tlet updateMap = new WeakMap();\n\n\tfunction update( object ) {\n\n\t\tconst frame = info.render.frame;\n\n\t\tconst geometry = object.geometry;\n\t\tconst buffergeometry = geometries.get( object, geometry );\n\n\t\t// Update once per frame\n\n\t\tif ( updateMap.get( buffergeometry ) !== frame ) {\n\n\t\t\tgeometries.update( buffergeometry );\n\n\t\t\tupdateMap.set( buffergeometry, frame );\n\n\t\t}\n\n\t\tif ( object.isInstancedMesh ) {\n\n\t\t\tif ( object.hasEventListener( 'dispose', onInstancedMeshDispose ) === false ) {\n\n\t\t\t\tobject.addEventListener( 'dispose', onInstancedMeshDispose );\n\n\t\t\t}\n\n\t\t\tattributes.update( object.instanceMatrix, gl.ARRAY_BUFFER );\n\n\t\t\tif ( object.instanceColor !== null ) {\n\n\t\t\t\tattributes.update( object.instanceColor, gl.ARRAY_BUFFER );\n\n\t\t\t}\n\n\t\t}\n\n\t\treturn buffergeometry;\n\n\t}\n\n\tfunction dispose() {\n\n\t\tupdateMap = new WeakMap();\n\n\t}\n\n\tfunction onInstancedMeshDispose( event ) {\n\n\t\tconst instancedMesh = event.target;\n\n\t\tinstancedMesh.removeEventListener( 'dispose', onInstancedMeshDispose );\n\n\t\tattributes.remove( instancedMesh.instanceMatrix );\n\n\t\tif ( instancedMesh.instanceColor !== null ) attributes.remove( instancedMesh.instanceColor );\n\n\t}\n\n\treturn {\n\n\t\tupdate: update,\n\t\tdispose: dispose\n\n\t};\n\n}\n\n\nexport { WebGLObjects };\n","import { Texture } from './Texture.js';\nimport { ClampToEdgeWrapping, NearestFilter } from '../constants.js';\n\nclass DataTexture2DArray extends Texture {\n\n\tconstructor( data = null, width = 1, height = 1, depth = 1 ) {\n\n\t\tsuper( null );\n\n\t\tthis.image = { data, width, height, depth };\n\n\t\tthis.magFilter = NearestFilter;\n\t\tthis.minFilter = NearestFilter;\n\n\t\tthis.wrapR = ClampToEdgeWrapping;\n\n\t\tthis.generateMipmaps = false;\n\t\tthis.flipY = false;\n\n\t\tthis.needsUpdate = true;\n\n\t}\n\n}\n\nDataTexture2DArray.prototype.isDataTexture2DArray = true;\n\nexport { DataTexture2DArray };\n","import { Texture } from './Texture.js';\nimport { ClampToEdgeWrapping, NearestFilter } from '../constants.js';\n\nclass DataTexture3D extends Texture {\n\n\tconstructor( data = null, width = 1, height = 1, depth = 1 ) {\n\n\t\t// We're going to add .setXXX() methods for setting properties later.\n\t\t// Users can still set in DataTexture3D directly.\n\t\t//\n\t\t//\tconst texture = new THREE.DataTexture3D( data, width, height, depth );\n\t\t// \ttexture.anisotropy = 16;\n\t\t//\n\t\t// See #14839\n\n\t\tsuper( null );\n\n\t\tthis.image = { data, width, height, depth };\n\n\t\tthis.magFilter = NearestFilter;\n\t\tthis.minFilter = NearestFilter;\n\n\t\tthis.wrapR = ClampToEdgeWrapping;\n\n\t\tthis.generateMipmaps = false;\n\t\tthis.flipY = false;\n\n\t\tthis.needsUpdate = true;\n\n\t}\n\n}\n\nDataTexture3D.prototype.isDataTexture3D = true;\n\nexport { DataTexture3D };\n","/**\n * Uniforms of a program.\n * Those form a tree structure with a special top-level container for the root,\n * which you get by calling 'new WebGLUniforms( gl, program )'.\n *\n *\n * Properties of inner nodes including the top-level container:\n *\n * .seq - array of nested uniforms\n * .map - nested uniforms by name\n *\n *\n * Methods of all nodes except the top-level container:\n *\n * .setValue( gl, value, [textures] )\n *\n * \t\tuploads a uniform value(s)\n *  \tthe 'textures' parameter is needed for sampler uniforms\n *\n *\n * Static methods of the top-level container (textures factorizations):\n *\n * .upload( gl, seq, values, textures )\n *\n * \t\tsets uniforms in 'seq' to 'values[id].value'\n *\n * .seqWithValue( seq, values ) : filteredSeq\n *\n * \t\tfilters 'seq' entries with corresponding entry in values\n *\n *\n * Methods of the top-level container (textures factorizations):\n *\n * .setValue( gl, name, value, textures )\n *\n * \t\tsets uniform with  name 'name' to 'value'\n *\n * .setOptional( gl, obj, prop )\n *\n * \t\tlike .set for an optional property of the object\n *\n */\n\nimport { CubeTexture } from '../../textures/CubeTexture.js';\nimport { Texture } from '../../textures/Texture.js';\nimport { DataTexture2DArray } from '../../textures/DataTexture2DArray.js';\nimport { DataTexture3D } from '../../textures/DataTexture3D.js';\n\nconst emptyTexture = new Texture();\nconst emptyTexture2dArray = new DataTexture2DArray();\nconst emptyTexture3d = new DataTexture3D();\nconst emptyCubeTexture = new CubeTexture();\n\n// --- Utilities ---\n\n// Array Caches (provide typed arrays for temporary by size)\n\nconst arrayCacheF32 = [];\nconst arrayCacheI32 = [];\n\n// Float32Array caches used for uploading Matrix uniforms\n\nconst mat4array = new Float32Array( 16 );\nconst mat3array = new Float32Array( 9 );\nconst mat2array = new Float32Array( 4 );\n\n// Flattening for arrays of vectors and matrices\n\nfunction flatten( array, nBlocks, blockSize ) {\n\n\tconst firstElem = array[ 0 ];\n\n\tif ( firstElem <= 0 || firstElem > 0 ) return array;\n\t// unoptimized: ! isNaN( firstElem )\n\t// see http://jacksondunstan.com/articles/983\n\n\tconst n = nBlocks * blockSize;\n\tlet r = arrayCacheF32[ n ];\n\n\tif ( r === undefined ) {\n\n\t\tr = new Float32Array( n );\n\t\tarrayCacheF32[ n ] = r;\n\n\t}\n\n\tif ( nBlocks !== 0 ) {\n\n\t\tfirstElem.toArray( r, 0 );\n\n\t\tfor ( let i = 1, offset = 0; i !== nBlocks; ++ i ) {\n\n\t\t\toffset += blockSize;\n\t\t\tarray[ i ].toArray( r, offset );\n\n\t\t}\n\n\t}\n\n\treturn r;\n\n}\n\nfunction arraysEqual( a, b ) {\n\n\tif ( a.length !== b.length ) return false;\n\n\tfor ( let i = 0, l = a.length; i < l; i ++ ) {\n\n\t\tif ( a[ i ] !== b[ i ] ) return false;\n\n\t}\n\n\treturn true;\n\n}\n\nfunction copyArray( a, b ) {\n\n\tfor ( let i = 0, l = b.length; i < l; i ++ ) {\n\n\t\ta[ i ] = b[ i ];\n\n\t}\n\n}\n\n// Texture unit allocation\n\nfunction allocTexUnits( textures, n ) {\n\n\tlet r = arrayCacheI32[ n ];\n\n\tif ( r === undefined ) {\n\n\t\tr = new Int32Array( n );\n\t\tarrayCacheI32[ n ] = r;\n\n\t}\n\n\tfor ( let i = 0; i !== n; ++ i ) {\n\n\t\tr[ i ] = textures.allocateTextureUnit();\n\n\t}\n\n\treturn r;\n\n}\n\n// --- Setters ---\n\n// Note: Defining these methods externally, because they come in a bunch\n// and this way their names minify.\n\n// Single scalar\n\nfunction setValueV1f( gl, v ) {\n\n\tconst cache = this.cache;\n\n\tif ( cache[ 0 ] === v ) return;\n\n\tgl.uniform1f( this.addr, v );\n\n\tcache[ 0 ] = v;\n\n}\n\n// Single float vector (from flat array or THREE.VectorN)\n\nfunction setValueV2f( gl, v ) {\n\n\tconst cache = this.cache;\n\n\tif ( v.x !== undefined ) {\n\n\t\tif ( cache[ 0 ] !== v.x || cache[ 1 ] !== v.y ) {\n\n\t\t\tgl.uniform2f( this.addr, v.x, v.y );\n\n\t\t\tcache[ 0 ] = v.x;\n\t\t\tcache[ 1 ] = v.y;\n\n\t\t}\n\n\t} else {\n\n\t\tif ( arraysEqual( cache, v ) ) return;\n\n\t\tgl.uniform2fv( this.addr, v );\n\n\t\tcopyArray( cache, v );\n\n\t}\n\n}\n\nfunction setValueV3f( gl, v ) {\n\n\tconst cache = this.cache;\n\n\tif ( v.x !== undefined ) {\n\n\t\tif ( cache[ 0 ] !== v.x || cache[ 1 ] !== v.y || cache[ 2 ] !== v.z ) {\n\n\t\t\tgl.uniform3f( this.addr, v.x, v.y, v.z );\n\n\t\t\tcache[ 0 ] = v.x;\n\t\t\tcache[ 1 ] = v.y;\n\t\t\tcache[ 2 ] = v.z;\n\n\t\t}\n\n\t} else if ( v.r !== undefined ) {\n\n\t\tif ( cache[ 0 ] !== v.r || cache[ 1 ] !== v.g || cache[ 2 ] !== v.b ) {\n\n\t\t\tgl.uniform3f( this.addr, v.r, v.g, v.b );\n\n\t\t\tcache[ 0 ] = v.r;\n\t\t\tcache[ 1 ] = v.g;\n\t\t\tcache[ 2 ] = v.b;\n\n\t\t}\n\n\t} else {\n\n\t\tif ( arraysEqual( cache, v ) ) return;\n\n\t\tgl.uniform3fv( this.addr, v );\n\n\t\tcopyArray( cache, v );\n\n\t}\n\n}\n\nfunction setValueV4f( gl, v ) {\n\n\tconst cache = this.cache;\n\n\tif ( v.x !== undefined ) {\n\n\t\tif ( cache[ 0 ] !== v.x || cache[ 1 ] !== v.y || cache[ 2 ] !== v.z || cache[ 3 ] !== v.w ) {\n\n\t\t\tgl.uniform4f( this.addr, v.x, v.y, v.z, v.w );\n\n\t\t\tcache[ 0 ] = v.x;\n\t\t\tcache[ 1 ] = v.y;\n\t\t\tcache[ 2 ] = v.z;\n\t\t\tcache[ 3 ] = v.w;\n\n\t\t}\n\n\t} else {\n\n\t\tif ( arraysEqual( cache, v ) ) return;\n\n\t\tgl.uniform4fv( this.addr, v );\n\n\t\tcopyArray( cache, v );\n\n\t}\n\n}\n\n// Single matrix (from flat array or MatrixN)\n\nfunction setValueM2( gl, v ) {\n\n\tconst cache = this.cache;\n\tconst elements = v.elements;\n\n\tif ( elements === undefined ) {\n\n\t\tif ( arraysEqual( cache, v ) ) return;\n\n\t\tgl.uniformMatrix2fv( this.addr, false, v );\n\n\t\tcopyArray( cache, v );\n\n\t} else {\n\n\t\tif ( arraysEqual( cache, elements ) ) return;\n\n\t\tmat2array.set( elements );\n\n\t\tgl.uniformMatrix2fv( this.addr, false, mat2array );\n\n\t\tcopyArray( cache, elements );\n\n\t}\n\n}\n\nfunction setValueM3( gl, v ) {\n\n\tconst cache = this.cache;\n\tconst elements = v.elements;\n\n\tif ( elements === undefined ) {\n\n\t\tif ( arraysEqual( cache, v ) ) return;\n\n\t\tgl.uniformMatrix3fv( this.addr, false, v );\n\n\t\tcopyArray( cache, v );\n\n\t} else {\n\n\t\tif ( arraysEqual( cache, elements ) ) return;\n\n\t\tmat3array.set( elements );\n\n\t\tgl.uniformMatrix3fv( this.addr, false, mat3array );\n\n\t\tcopyArray( cache, elements );\n\n\t}\n\n}\n\nfunction setValueM4( gl, v ) {\n\n\tconst cache = this.cache;\n\tconst elements = v.elements;\n\n\tif ( elements === undefined ) {\n\n\t\tif ( arraysEqual( cache, v ) ) return;\n\n\t\tgl.uniformMatrix4fv( this.addr, false, v );\n\n\t\tcopyArray( cache, v );\n\n\t} else {\n\n\t\tif ( arraysEqual( cache, elements ) ) return;\n\n\t\tmat4array.set( elements );\n\n\t\tgl.uniformMatrix4fv( this.addr, false, mat4array );\n\n\t\tcopyArray( cache, elements );\n\n\t}\n\n}\n\n// Single texture (2D / Cube)\n\nfunction setValueT1( gl, v, textures ) {\n\n\tconst cache = this.cache;\n\tconst unit = textures.allocateTextureUnit();\n\n\tif ( cache[ 0 ] !== unit ) {\n\n\t\tgl.uniform1i( this.addr, unit );\n\t\tcache[ 0 ] = unit;\n\n\t}\n\n\ttextures.safeSetTexture2D( v || emptyTexture, unit );\n\n}\n\nfunction setValueT2DArray1( gl, v, textures ) {\n\n\tconst cache = this.cache;\n\tconst unit = textures.allocateTextureUnit();\n\n\tif ( cache[ 0 ] !== unit ) {\n\n\t\tgl.uniform1i( this.addr, unit );\n\t\tcache[ 0 ] = unit;\n\n\t}\n\n\ttextures.setTexture2DArray( v || emptyTexture2dArray, unit );\n\n}\n\nfunction setValueT3D1( gl, v, textures ) {\n\n\tconst cache = this.cache;\n\tconst unit = textures.allocateTextureUnit();\n\n\tif ( cache[ 0 ] !== unit ) {\n\n\t\tgl.uniform1i( this.addr, unit );\n\t\tcache[ 0 ] = unit;\n\n\t}\n\n\ttextures.setTexture3D( v || emptyTexture3d, unit );\n\n}\n\nfunction setValueT6( gl, v, textures ) {\n\n\tconst cache = this.cache;\n\tconst unit = textures.allocateTextureUnit();\n\n\tif ( cache[ 0 ] !== unit ) {\n\n\t\tgl.uniform1i( this.addr, unit );\n\t\tcache[ 0 ] = unit;\n\n\t}\n\n\ttextures.safeSetTextureCube( v || emptyCubeTexture, unit );\n\n}\n\n// Integer / Boolean vectors or arrays thereof (always flat arrays)\n\nfunction setValueV1i( gl, v ) {\n\n\tconst cache = this.cache;\n\n\tif ( cache[ 0 ] === v ) return;\n\n\tgl.uniform1i( this.addr, v );\n\n\tcache[ 0 ] = v;\n\n}\n\nfunction setValueV2i( gl, v ) {\n\n\tconst cache = this.cache;\n\n\tif ( arraysEqual( cache, v ) ) return;\n\n\tgl.uniform2iv( this.addr, v );\n\n\tcopyArray( cache, v );\n\n}\n\nfunction setValueV3i( gl, v ) {\n\n\tconst cache = this.cache;\n\n\tif ( arraysEqual( cache, v ) ) return;\n\n\tgl.uniform3iv( this.addr, v );\n\n\tcopyArray( cache, v );\n\n}\n\nfunction setValueV4i( gl, v ) {\n\n\tconst cache = this.cache;\n\n\tif ( arraysEqual( cache, v ) ) return;\n\n\tgl.uniform4iv( this.addr, v );\n\n\tcopyArray( cache, v );\n\n}\n\n// uint\n\nfunction setValueV1ui( gl, v ) {\n\n\tconst cache = this.cache;\n\n\tif ( cache[ 0 ] === v ) return;\n\n\tgl.uniform1ui( this.addr, v );\n\n\tcache[ 0 ] = v;\n\n}\n\n// Helper to pick the right setter for the singular case\n\nfunction getSingularSetter( type ) {\n\n\tswitch ( type ) {\n\n\t\tcase 0x1406: return setValueV1f; // FLOAT\n\t\tcase 0x8b50: return setValueV2f; // _VEC2\n\t\tcase 0x8b51: return setValueV3f; // _VEC3\n\t\tcase 0x8b52: return setValueV4f; // _VEC4\n\n\t\tcase 0x8b5a: return setValueM2; // _MAT2\n\t\tcase 0x8b5b: return setValueM3; // _MAT3\n\t\tcase 0x8b5c: return setValueM4; // _MAT4\n\n\t\tcase 0x1404: case 0x8b56: return setValueV1i; // INT, BOOL\n\t\tcase 0x8b53: case 0x8b57: return setValueV2i; // _VEC2\n\t\tcase 0x8b54: case 0x8b58: return setValueV3i; // _VEC3\n\t\tcase 0x8b55: case 0x8b59: return setValueV4i; // _VEC4\n\n\t\tcase 0x1405: return setValueV1ui; // UINT\n\n\t\tcase 0x8b5e: // SAMPLER_2D\n\t\tcase 0x8d66: // SAMPLER_EXTERNAL_OES\n\t\tcase 0x8dca: // INT_SAMPLER_2D\n\t\tcase 0x8dd2: // UNSIGNED_INT_SAMPLER_2D\n\t\tcase 0x8b62: // SAMPLER_2D_SHADOW\n\t\t\treturn setValueT1;\n\n\t\tcase 0x8b5f: // SAMPLER_3D\n\t\tcase 0x8dcb: // INT_SAMPLER_3D\n\t\tcase 0x8dd3: // UNSIGNED_INT_SAMPLER_3D\n\t\t\treturn setValueT3D1;\n\n\t\tcase 0x8b60: // SAMPLER_CUBE\n\t\tcase 0x8dcc: // INT_SAMPLER_CUBE\n\t\tcase 0x8dd4: // UNSIGNED_INT_SAMPLER_CUBE\n\t\tcase 0x8dc5: // SAMPLER_CUBE_SHADOW\n\t\t\treturn setValueT6;\n\n\t\tcase 0x8dc1: // SAMPLER_2D_ARRAY\n\t\tcase 0x8dcf: // INT_SAMPLER_2D_ARRAY\n\t\tcase 0x8dd7: // UNSIGNED_INT_SAMPLER_2D_ARRAY\n\t\tcase 0x8dc4: // SAMPLER_2D_ARRAY_SHADOW\n\t\t\treturn setValueT2DArray1;\n\n\t}\n\n}\n\n// Array of scalars\nfunction setValueV1fArray( gl, v ) {\n\n\tgl.uniform1fv( this.addr, v );\n\n}\n\n// Integer / Boolean vectors or arrays thereof (always flat arrays)\nfunction setValueV1iArray( gl, v ) {\n\n\tgl.uniform1iv( this.addr, v );\n\n}\n\nfunction setValueV2iArray( gl, v ) {\n\n\tgl.uniform2iv( this.addr, v );\n\n}\n\nfunction setValueV3iArray( gl, v ) {\n\n\tgl.uniform3iv( this.addr, v );\n\n}\n\nfunction setValueV4iArray( gl, v ) {\n\n\tgl.uniform4iv( this.addr, v );\n\n}\n\n\n// Array of vectors (flat or from THREE classes)\n\nfunction setValueV2fArray( gl, v ) {\n\n\tconst data = flatten( v, this.size, 2 );\n\n\tgl.uniform2fv( this.addr, data );\n\n}\n\nfunction setValueV3fArray( gl, v ) {\n\n\tconst data = flatten( v, this.size, 3 );\n\n\tgl.uniform3fv( this.addr, data );\n\n}\n\nfunction setValueV4fArray( gl, v ) {\n\n\tconst data = flatten( v, this.size, 4 );\n\n\tgl.uniform4fv( this.addr, data );\n\n}\n\n// Array of matrices (flat or from THREE clases)\n\nfunction setValueM2Array( gl, v ) {\n\n\tconst data = flatten( v, this.size, 4 );\n\n\tgl.uniformMatrix2fv( this.addr, false, data );\n\n}\n\nfunction setValueM3Array( gl, v ) {\n\n\tconst data = flatten( v, this.size, 9 );\n\n\tgl.uniformMatrix3fv( this.addr, false, data );\n\n}\n\nfunction setValueM4Array( gl, v ) {\n\n\tconst data = flatten( v, this.size, 16 );\n\n\tgl.uniformMatrix4fv( this.addr, false, data );\n\n}\n\n// Array of textures (2D / Cube)\n\nfunction setValueT1Array( gl, v, textures ) {\n\n\tconst n = v.length;\n\n\tconst units = allocTexUnits( textures, n );\n\n\tgl.uniform1iv( this.addr, units );\n\n\tfor ( let i = 0; i !== n; ++ i ) {\n\n\t\ttextures.safeSetTexture2D( v[ i ] || emptyTexture, units[ i ] );\n\n\t}\n\n}\n\nfunction setValueT6Array( gl, v, textures ) {\n\n\tconst n = v.length;\n\n\tconst units = allocTexUnits( textures, n );\n\n\tgl.uniform1iv( this.addr, units );\n\n\tfor ( let i = 0; i !== n; ++ i ) {\n\n\t\ttextures.safeSetTextureCube( v[ i ] || emptyCubeTexture, units[ i ] );\n\n\t}\n\n}\n\n// Helper to pick the right setter for a pure (bottom-level) array\n\nfunction getPureArraySetter( type ) {\n\n\tswitch ( type ) {\n\n\t\tcase 0x1406: return setValueV1fArray; // FLOAT\n\t\tcase 0x8b50: return setValueV2fArray; // _VEC2\n\t\tcase 0x8b51: return setValueV3fArray; // _VEC3\n\t\tcase 0x8b52: return setValueV4fArray; // _VEC4\n\n\t\tcase 0x8b5a: return setValueM2Array; // _MAT2\n\t\tcase 0x8b5b: return setValueM3Array; // _MAT3\n\t\tcase 0x8b5c: return setValueM4Array; // _MAT4\n\n\t\tcase 0x1404: case 0x8b56: return setValueV1iArray; // INT, BOOL\n\t\tcase 0x8b53: case 0x8b57: return setValueV2iArray; // _VEC2\n\t\tcase 0x8b54: case 0x8b58: return setValueV3iArray; // _VEC3\n\t\tcase 0x8b55: case 0x8b59: return setValueV4iArray; // _VEC4\n\n\t\tcase 0x8b5e: // SAMPLER_2D\n\t\tcase 0x8d66: // SAMPLER_EXTERNAL_OES\n\t\tcase 0x8dca: // INT_SAMPLER_2D\n\t\tcase 0x8dd2: // UNSIGNED_INT_SAMPLER_2D\n\t\tcase 0x8b62: // SAMPLER_2D_SHADOW\n\t\t\treturn setValueT1Array;\n\n\t\tcase 0x8b60: // SAMPLER_CUBE\n\t\tcase 0x8dcc: // INT_SAMPLER_CUBE\n\t\tcase 0x8dd4: // UNSIGNED_INT_SAMPLER_CUBE\n\t\tcase 0x8dc5: // SAMPLER_CUBE_SHADOW\n\t\t\treturn setValueT6Array;\n\n\t}\n\n}\n\n// --- Uniform Classes ---\n\nfunction SingleUniform( id, activeInfo, addr ) {\n\n\tthis.id = id;\n\tthis.addr = addr;\n\tthis.cache = [];\n\tthis.setValue = getSingularSetter( activeInfo.type );\n\n\t// this.path = activeInfo.name; // DEBUG\n\n}\n\nfunction PureArrayUniform( id, activeInfo, addr ) {\n\n\tthis.id = id;\n\tthis.addr = addr;\n\tthis.cache = [];\n\tthis.size = activeInfo.size;\n\tthis.setValue = getPureArraySetter( activeInfo.type );\n\n\t// this.path = activeInfo.name; // DEBUG\n\n}\n\nPureArrayUniform.prototype.updateCache = function ( data ) {\n\n\tconst cache = this.cache;\n\n\tif ( data instanceof Float32Array && cache.length !== data.length ) {\n\n\t\tthis.cache = new Float32Array( data.length );\n\n\t}\n\n\tcopyArray( cache, data );\n\n};\n\nfunction StructuredUniform( id ) {\n\n\tthis.id = id;\n\n\tthis.seq = [];\n\tthis.map = {};\n\n}\n\nStructuredUniform.prototype.setValue = function ( gl, value, textures ) {\n\n\tconst seq = this.seq;\n\n\tfor ( let i = 0, n = seq.length; i !== n; ++ i ) {\n\n\t\tconst u = seq[ i ];\n\t\tu.setValue( gl, value[ u.id ], textures );\n\n\t}\n\n};\n\n// --- Top-level ---\n\n// Parser - builds up the property tree from the path strings\n\nconst RePathPart = /(\\w+)(\\])?(\\[|\\.)?/g;\n\n// extracts\n// \t- the identifier (member name or array index)\n//  - followed by an optional right bracket (found when array index)\n//  - followed by an optional left bracket or dot (type of subscript)\n//\n// Note: These portions can be read in a non-overlapping fashion and\n// allow straightforward parsing of the hierarchy that WebGL encodes\n// in the uniform names.\n\nfunction addUniform( container, uniformObject ) {\n\n\tcontainer.seq.push( uniformObject );\n\tcontainer.map[ uniformObject.id ] = uniformObject;\n\n}\n\nfunction parseUniform( activeInfo, addr, container ) {\n\n\tconst path = activeInfo.name,\n\t\tpathLength = path.length;\n\n\t// reset RegExp object, because of the early exit of a previous run\n\tRePathPart.lastIndex = 0;\n\n\twhile ( true ) {\n\n\t\tconst match = RePathPart.exec( path ),\n\t\t\tmatchEnd = RePathPart.lastIndex;\n\n\t\tlet id = match[ 1 ];\n\t\tconst idIsIndex = match[ 2 ] === ']',\n\t\t\tsubscript = match[ 3 ];\n\n\t\tif ( idIsIndex ) id = id | 0; // convert to integer\n\n\t\tif ( subscript === undefined || subscript === '[' && matchEnd + 2 === pathLength ) {\n\n\t\t\t// bare name or \"pure\" bottom-level array \"[0]\" suffix\n\n\t\t\taddUniform( container, subscript === undefined ?\n\t\t\t\tnew SingleUniform( id, activeInfo, addr ) :\n\t\t\t\tnew PureArrayUniform( id, activeInfo, addr ) );\n\n\t\t\tbreak;\n\n\t\t} else {\n\n\t\t\t// step into inner node / create it in case it doesn't exist\n\n\t\t\tconst map = container.map;\n\t\t\tlet next = map[ id ];\n\n\t\t\tif ( next === undefined ) {\n\n\t\t\t\tnext = new StructuredUniform( id );\n\t\t\t\taddUniform( container, next );\n\n\t\t\t}\n\n\t\t\tcontainer = next;\n\n\t\t}\n\n\t}\n\n}\n\n// Root Container\n\nfunction WebGLUniforms( gl, program ) {\n\n\tthis.seq = [];\n\tthis.map = {};\n\n\tconst n = gl.getProgramParameter( program, gl.ACTIVE_UNIFORMS );\n\n\tfor ( let i = 0; i < n; ++ i ) {\n\n\t\tconst info = gl.getActiveUniform( program, i ),\n\t\t\taddr = gl.getUniformLocation( program, info.name );\n\n\t\tparseUniform( info, addr, this );\n\n\t}\n\n}\n\nWebGLUniforms.prototype.setValue = function ( gl, name, value, textures ) {\n\n\tconst u = this.map[ name ];\n\n\tif ( u !== undefined ) u.setValue( gl, value, textures );\n\n};\n\nWebGLUniforms.prototype.setOptional = function ( gl, object, name ) {\n\n\tconst v = object[ name ];\n\n\tif ( v !== undefined ) this.setValue( gl, name, v );\n\n};\n\n\n// Static interface\n\nWebGLUniforms.upload = function ( gl, seq, values, textures ) {\n\n\tfor ( let i = 0, n = seq.length; i !== n; ++ i ) {\n\n\t\tconst u = seq[ i ],\n\t\t\tv = values[ u.id ];\n\n\t\tif ( v.needsUpdate !== false ) {\n\n\t\t\t// note: always updating when .needsUpdate is undefined\n\t\t\tu.setValue( gl, v.value, textures );\n\n\t\t}\n\n\t}\n\n};\n\nWebGLUniforms.seqWithValue = function ( seq, values ) {\n\n\tconst r = [];\n\n\tfor ( let i = 0, n = seq.length; i !== n; ++ i ) {\n\n\t\tconst u = seq[ i ];\n\t\tif ( u.id in values ) r.push( u );\n\n\t}\n\n\treturn r;\n\n};\n\nexport { WebGLUniforms };\n","function WebGLShader( gl, type, string ) {\n\n\tconst shader = gl.createShader( type );\n\n\tgl.shaderSource( shader, string );\n\tgl.compileShader( shader );\n\n\treturn shader;\n\n}\n\nexport { WebGLShader };\n","import { WebGLUniforms } from './WebGLUniforms.js';\nimport { WebGLShader } from './WebGLShader.js';\nimport { ShaderChunk } from '../shaders/ShaderChunk.js';\nimport { NoToneMapping, AddOperation, MixOperation, MultiplyOperation, CubeRefractionMapping, CubeUVRefractionMapping, CubeUVReflectionMapping, CubeReflectionMapping, PCFSoftShadowMap, PCFShadowMap, VSMShadowMap, ACESFilmicToneMapping, CineonToneMapping, CustomToneMapping, ReinhardToneMapping, LinearToneMapping, GammaEncoding, RGBDEncoding, RGBM16Encoding, RGBM7Encoding, RGBEEncoding, sRGBEncoding, LinearEncoding, LogLuvEncoding, GLSL3 } from '../../constants.js';\n\nlet programIdCount = 0;\n\nfunction addLineNumbers( string ) {\n\n\tconst lines = string.split( '\\n' );\n\n\tfor ( let i = 0; i < lines.length; i ++ ) {\n\n\t\tlines[ i ] = ( i + 1 ) + ': ' + lines[ i ];\n\n\t}\n\n\treturn lines.join( '\\n' );\n\n}\n\nfunction getEncodingComponents( encoding ) {\n\n\tswitch ( encoding ) {\n\n\t\tcase LinearEncoding:\n\t\t\treturn [ 'Linear', '( value )' ];\n\t\tcase sRGBEncoding:\n\t\t\treturn [ 'sRGB', '( value )' ];\n\t\tcase RGBEEncoding:\n\t\t\treturn [ 'RGBE', '( value )' ];\n\t\tcase RGBM7Encoding:\n\t\t\treturn [ 'RGBM', '( value, 7.0 )' ];\n\t\tcase RGBM16Encoding:\n\t\t\treturn [ 'RGBM', '( value, 16.0 )' ];\n\t\tcase RGBDEncoding:\n\t\t\treturn [ 'RGBD', '( value, 256.0 )' ];\n\t\tcase GammaEncoding:\n\t\t\treturn [ 'Gamma', '( value, float( GAMMA_FACTOR ) )' ];\n\t\tcase LogLuvEncoding:\n\t\t\treturn [ 'LogLuv', '( value )' ];\n\t\tdefault:\n\t\t\tconsole.warn( 'THREE.WebGLProgram: Unsupported encoding:', encoding );\n\t\t\treturn [ 'Linear', '( value )' ];\n\n\t}\n\n}\n\nfunction getShaderErrors( gl, shader, type ) {\n\n\tconst status = gl.getShaderParameter( shader, gl.COMPILE_STATUS );\n\tconst log = gl.getShaderInfoLog( shader ).trim();\n\n\tif ( status && log === '' ) return '';\n\n\t// --enable-privileged-webgl-extension\n\t// console.log( '**' + type + '**', gl.getExtension( 'WEBGL_debug_shaders' ).getTranslatedShaderSource( shader ) );\n\n\tconst source = gl.getShaderSource( shader );\n\n\treturn 'THREE.WebGLShader: gl.getShaderInfoLog() ' + type + '\\n' + log + addLineNumbers( source );\n\n}\n\nfunction getTexelDecodingFunction( functionName, encoding ) {\n\n\tconst components = getEncodingComponents( encoding );\n\treturn 'vec4 ' + functionName + '( vec4 value ) { return ' + components[ 0 ] + 'ToLinear' + components[ 1 ] + '; }';\n\n}\n\nfunction getTexelEncodingFunction( functionName, encoding ) {\n\n\tconst components = getEncodingComponents( encoding );\n\treturn 'vec4 ' + functionName + '( vec4 value ) { return LinearTo' + components[ 0 ] + components[ 1 ] + '; }';\n\n}\n\nfunction getToneMappingFunction( functionName, toneMapping ) {\n\n\tlet toneMappingName;\n\n\tswitch ( toneMapping ) {\n\n\t\tcase LinearToneMapping:\n\t\t\ttoneMappingName = 'Linear';\n\t\t\tbreak;\n\n\t\tcase ReinhardToneMapping:\n\t\t\ttoneMappingName = 'Reinhard';\n\t\t\tbreak;\n\n\t\tcase CineonToneMapping:\n\t\t\ttoneMappingName = 'OptimizedCineon';\n\t\t\tbreak;\n\n\t\tcase ACESFilmicToneMapping:\n\t\t\ttoneMappingName = 'ACESFilmic';\n\t\t\tbreak;\n\n\t\tcase CustomToneMapping:\n\t\t\ttoneMappingName = 'Custom';\n\t\t\tbreak;\n\n\t\tdefault:\n\t\t\tconsole.warn( 'THREE.WebGLProgram: Unsupported toneMapping:', toneMapping );\n\t\t\ttoneMappingName = 'Linear';\n\n\t}\n\n\treturn 'vec3 ' + functionName + '( vec3 color ) { return ' + toneMappingName + 'ToneMapping( color ); }';\n\n}\n\nfunction generateExtensions( parameters ) {\n\n\tconst chunks = [\n\t\t( parameters.extensionDerivatives || parameters.envMapCubeUV || parameters.bumpMap || parameters.tangentSpaceNormalMap || parameters.clearcoatNormalMap || parameters.flatShading || parameters.shaderID === 'physical' ) ? '#extension GL_OES_standard_derivatives : enable' : '',\n\t\t( parameters.extensionFragDepth || parameters.logarithmicDepthBuffer ) && parameters.rendererExtensionFragDepth ? '#extension GL_EXT_frag_depth : enable' : '',\n\t\t( parameters.extensionDrawBuffers && parameters.rendererExtensionDrawBuffers ) ? '#extension GL_EXT_draw_buffers : require' : '',\n\t\t( parameters.extensionShaderTextureLOD || parameters.envMap ) && parameters.rendererExtensionShaderTextureLod ? '#extension GL_EXT_shader_texture_lod : enable' : ''\n\t];\n\n\treturn chunks.filter( filterEmptyLine ).join( '\\n' );\n\n}\n\nfunction generateDefines( defines ) {\n\n\tconst chunks = [];\n\n\tfor ( const name in defines ) {\n\n\t\tconst value = defines[ name ];\n\n\t\tif ( value === false ) continue;\n\n\t\tchunks.push( '#define ' + name + ' ' + value );\n\n\t}\n\n\treturn chunks.join( '\\n' );\n\n}\n\nfunction fetchAttributeLocations( gl, program ) {\n\n\tconst attributes = {};\n\n\tconst n = gl.getProgramParameter( program, gl.ACTIVE_ATTRIBUTES );\n\n\tfor ( let i = 0; i < n; i ++ ) {\n\n\t\tconst info = gl.getActiveAttrib( program, i );\n\t\tconst name = info.name;\n\n\t\t// console.log( 'THREE.WebGLProgram: ACTIVE VERTEX ATTRIBUTE:', name, i );\n\n\t\tattributes[ name ] = gl.getAttribLocation( program, name );\n\n\t}\n\n\treturn attributes;\n\n}\n\nfunction filterEmptyLine( string ) {\n\n\treturn string !== '';\n\n}\n\nfunction replaceLightNums( string, parameters ) {\n\n\treturn string\n\t\t.replace( /NUM_DIR_LIGHTS/g, parameters.numDirLights )\n\t\t.replace( /NUM_SPOT_LIGHTS/g, parameters.numSpotLights )\n\t\t.replace( /NUM_RECT_AREA_LIGHTS/g, parameters.numRectAreaLights )\n\t\t.replace( /NUM_POINT_LIGHTS/g, parameters.numPointLights )\n\t\t.replace( /NUM_HEMI_LIGHTS/g, parameters.numHemiLights )\n\t\t.replace( /NUM_DIR_LIGHT_SHADOWS/g, parameters.numDirLightShadows )\n\t\t.replace( /NUM_SPOT_LIGHT_SHADOWS/g, parameters.numSpotLightShadows )\n\t\t.replace( /NUM_POINT_LIGHT_SHADOWS/g, parameters.numPointLightShadows );\n\n}\n\nfunction replaceClippingPlaneNums( string, parameters ) {\n\n\treturn string\n\t\t.replace( /NUM_CLIPPING_PLANES/g, parameters.numClippingPlanes )\n\t\t.replace( /UNION_CLIPPING_PLANES/g, ( parameters.numClippingPlanes - parameters.numClipIntersection ) );\n\n}\n\n// Resolve Includes\n\nconst includePattern = /^[ \\t]*#include +<([\\w\\d./]+)>/gm;\n\nfunction resolveIncludes( string ) {\n\n\treturn string.replace( includePattern, includeReplacer );\n\n}\n\nfunction includeReplacer( match, include ) {\n\n\tconst string = ShaderChunk[ include ];\n\n\tif ( string === undefined ) {\n\n\t\tthrow new Error( 'Can not resolve #include <' + include + '>' );\n\n\t}\n\n\treturn resolveIncludes( string );\n\n}\n\n// Unroll Loops\n\nconst deprecatedUnrollLoopPattern = /#pragma unroll_loop[\\s]+?for \\( int i \\= (\\d+)\\; i < (\\d+)\\; i \\+\\+ \\) \\{([\\s\\S]+?)(?=\\})\\}/g;\nconst unrollLoopPattern = /#pragma unroll_loop_start\\s+for\\s*\\(\\s*int\\s+i\\s*=\\s*(\\d+)\\s*;\\s*i\\s*<\\s*(\\d+)\\s*;\\s*i\\s*\\+\\+\\s*\\)\\s*{([\\s\\S]+?)}\\s+#pragma unroll_loop_end/g;\n\nfunction unrollLoops( string ) {\n\n\treturn string\n\t\t.replace( unrollLoopPattern, loopReplacer )\n\t\t.replace( deprecatedUnrollLoopPattern, deprecatedLoopReplacer );\n\n}\n\nfunction deprecatedLoopReplacer( match, start, end, snippet ) {\n\n\tconsole.warn( 'WebGLProgram: #pragma unroll_loop shader syntax is deprecated. Please use #pragma unroll_loop_start syntax instead.' );\n\treturn loopReplacer( match, start, end, snippet );\n\n}\n\nfunction loopReplacer( match, start, end, snippet ) {\n\n\tlet string = '';\n\n\tfor ( let i = parseInt( start ); i < parseInt( end ); i ++ ) {\n\n\t\tstring += snippet\n\t\t\t.replace( /\\[\\s*i\\s*\\]/g, '[ ' + i + ' ]' )\n\t\t\t.replace( /UNROLLED_LOOP_INDEX/g, i );\n\n\t}\n\n\treturn string;\n\n}\n\n//\n\nfunction generatePrecision( parameters ) {\n\n\tlet precisionstring = 'precision ' + parameters.precision + ' float;\\nprecision ' + parameters.precision + ' int;';\n\n\tif ( parameters.precision === 'highp' ) {\n\n\t\tprecisionstring += '\\n#define HIGH_PRECISION';\n\n\t} else if ( parameters.precision === 'mediump' ) {\n\n\t\tprecisionstring += '\\n#define MEDIUM_PRECISION';\n\n\t} else if ( parameters.precision === 'lowp' ) {\n\n\t\tprecisionstring += '\\n#define LOW_PRECISION';\n\n\t}\n\n\treturn precisionstring;\n\n}\n\nfunction generateShadowMapTypeDefine( parameters ) {\n\n\tlet shadowMapTypeDefine = 'SHADOWMAP_TYPE_BASIC';\n\n\tif ( parameters.shadowMapType === PCFShadowMap ) {\n\n\t\tshadowMapTypeDefine = 'SHADOWMAP_TYPE_PCF';\n\n\t} else if ( parameters.shadowMapType === PCFSoftShadowMap ) {\n\n\t\tshadowMapTypeDefine = 'SHADOWMAP_TYPE_PCF_SOFT';\n\n\t} else if ( parameters.shadowMapType === VSMShadowMap ) {\n\n\t\tshadowMapTypeDefine = 'SHADOWMAP_TYPE_VSM';\n\n\t}\n\n\treturn shadowMapTypeDefine;\n\n}\n\nfunction generateEnvMapTypeDefine( parameters ) {\n\n\tlet envMapTypeDefine = 'ENVMAP_TYPE_CUBE';\n\n\tif ( parameters.envMap ) {\n\n\t\tswitch ( parameters.envMapMode ) {\n\n\t\t\tcase CubeReflectionMapping:\n\t\t\tcase CubeRefractionMapping:\n\t\t\t\tenvMapTypeDefine = 'ENVMAP_TYPE_CUBE';\n\t\t\t\tbreak;\n\n\t\t\tcase CubeUVReflectionMapping:\n\t\t\tcase CubeUVRefractionMapping:\n\t\t\t\tenvMapTypeDefine = 'ENVMAP_TYPE_CUBE_UV';\n\t\t\t\tbreak;\n\n\t\t}\n\n\t}\n\n\treturn envMapTypeDefine;\n\n}\n\nfunction generateEnvMapModeDefine( parameters ) {\n\n\tlet envMapModeDefine = 'ENVMAP_MODE_REFLECTION';\n\n\tif ( parameters.envMap ) {\n\n\t\tswitch ( parameters.envMapMode ) {\n\n\t\t\tcase CubeRefractionMapping:\n\t\t\tcase CubeUVRefractionMapping:\n\n\t\t\t\tenvMapModeDefine = 'ENVMAP_MODE_REFRACTION';\n\t\t\t\tbreak;\n\n\t\t}\n\n\t}\n\n\treturn envMapModeDefine;\n\n}\n\nfunction generateEnvMapBlendingDefine( parameters ) {\n\n\tlet envMapBlendingDefine = 'ENVMAP_BLENDING_NONE';\n\n\tif ( parameters.envMap ) {\n\n\t\tswitch ( parameters.combine ) {\n\n\t\t\tcase MultiplyOperation:\n\t\t\t\tenvMapBlendingDefine = 'ENVMAP_BLENDING_MULTIPLY';\n\t\t\t\tbreak;\n\n\t\t\tcase MixOperation:\n\t\t\t\tenvMapBlendingDefine = 'ENVMAP_BLENDING_MIX';\n\t\t\t\tbreak;\n\n\t\t\tcase AddOperation:\n\t\t\t\tenvMapBlendingDefine = 'ENVMAP_BLENDING_ADD';\n\t\t\t\tbreak;\n\n\t\t}\n\n\t}\n\n\treturn envMapBlendingDefine;\n\n}\n\nfunction WebGLProgram( renderer, cacheKey, parameters, bindingStates ) {\n\n\tconst gl = renderer.getContext();\n\n\tconst defines = parameters.defines;\n\n\tlet vertexShader = parameters.vertexShader;\n\tlet fragmentShader = parameters.fragmentShader;\n\n\tconst shadowMapTypeDefine = generateShadowMapTypeDefine( parameters );\n\tconst envMapTypeDefine = generateEnvMapTypeDefine( parameters );\n\tconst envMapModeDefine = generateEnvMapModeDefine( parameters );\n\tconst envMapBlendingDefine = generateEnvMapBlendingDefine( parameters );\n\n\n\tconst gammaFactorDefine = ( renderer.gammaFactor > 0 ) ? renderer.gammaFactor : 1.0;\n\n\tconst customExtensions = parameters.isWebGL2 ? '' : generateExtensions( parameters );\n\n\tconst customDefines = generateDefines( defines );\n\n\tconst program = gl.createProgram();\n\n\tlet prefixVertex, prefixFragment;\n\tlet versionString = parameters.glslVersion ? '#version ' + parameters.glslVersion + '\\n' : '';\n\n\tif ( parameters.isRawShaderMaterial ) {\n\n\t\tprefixVertex = [\n\n\t\t\tcustomDefines\n\n\t\t].filter( filterEmptyLine ).join( '\\n' );\n\n\t\tif ( prefixVertex.length > 0 ) {\n\n\t\t\tprefixVertex += '\\n';\n\n\t\t}\n\n\t\tprefixFragment = [\n\n\t\t\tcustomExtensions,\n\t\t\tcustomDefines\n\n\t\t].filter( filterEmptyLine ).join( '\\n' );\n\n\t\tif ( prefixFragment.length > 0 ) {\n\n\t\t\tprefixFragment += '\\n';\n\n\t\t}\n\n\t} else {\n\n\t\tprefixVertex = [\n\n\t\t\tgeneratePrecision( parameters ),\n\n\t\t\t'#define SHADER_NAME ' + parameters.shaderName,\n\n\t\t\tcustomDefines,\n\n\t\t\tparameters.instancing ? '#define USE_INSTANCING' : '',\n\t\t\tparameters.instancingColor ? '#define USE_INSTANCING_COLOR' : '',\n\n\t\t\tparameters.supportsVertexTextures ? '#define VERTEX_TEXTURES' : '',\n\n\t\t\t'#define GAMMA_FACTOR ' + gammaFactorDefine,\n\n\t\t\t'#define MAX_BONES ' + parameters.maxBones,\n\t\t\t( parameters.useFog && parameters.fog ) ? '#define USE_FOG' : '',\n\t\t\t( parameters.useFog && parameters.fogExp2 ) ? '#define FOG_EXP2' : '',\n\n\t\t\tparameters.map ? '#define USE_MAP' : '',\n\t\t\tparameters.envMap ? '#define USE_ENVMAP' : '',\n\t\t\tparameters.envMap ? '#define ' + envMapModeDefine : '',\n\t\t\tparameters.lightMap ? '#define USE_LIGHTMAP' : '',\n\t\t\tparameters.aoMap ? '#define USE_AOMAP' : '',\n\t\t\tparameters.emissiveMap ? '#define USE_EMISSIVEMAP' : '',\n\t\t\tparameters.bumpMap ? '#define USE_BUMPMAP' : '',\n\t\t\tparameters.normalMap ? '#define USE_NORMALMAP' : '',\n\t\t\t( parameters.normalMap && parameters.objectSpaceNormalMap ) ? '#define OBJECTSPACE_NORMALMAP' : '',\n\t\t\t( parameters.normalMap && parameters.tangentSpaceNormalMap ) ? '#define TANGENTSPACE_NORMALMAP' : '',\n\n\t\t\tparameters.clearcoatMap ? '#define USE_CLEARCOATMAP' : '',\n\t\t\tparameters.clearcoatRoughnessMap ? '#define USE_CLEARCOAT_ROUGHNESSMAP' : '',\n\t\t\tparameters.clearcoatNormalMap ? '#define USE_CLEARCOAT_NORMALMAP' : '',\n\t\t\tparameters.displacementMap && parameters.supportsVertexTextures ? '#define USE_DISPLACEMENTMAP' : '',\n\t\t\tparameters.specularMap ? '#define USE_SPECULARMAP' : '',\n\t\t\tparameters.roughnessMap ? '#define USE_ROUGHNESSMAP' : '',\n\t\t\tparameters.metalnessMap ? '#define USE_METALNESSMAP' : '',\n\t\t\tparameters.alphaMap ? '#define USE_ALPHAMAP' : '',\n\t\t\tparameters.transmissionMap ? '#define USE_TRANSMISSIONMAP' : '',\n\n\t\t\tparameters.vertexTangents ? '#define USE_TANGENT' : '',\n\t\t\tparameters.vertexColors ? '#define USE_COLOR' : '',\n\t\t\tparameters.vertexUvs ? '#define USE_UV' : '',\n\t\t\tparameters.uvsVertexOnly ? '#define UVS_VERTEX_ONLY' : '',\n\n\t\t\tparameters.flatShading ? '#define FLAT_SHADED' : '',\n\n\t\t\tparameters.skinning ? '#define USE_SKINNING' : '',\n\t\t\tparameters.useVertexTexture ? '#define BONE_TEXTURE' : '',\n\n\t\t\tparameters.morphTargets ? '#define USE_MORPHTARGETS' : '',\n\t\t\tparameters.morphNormals && parameters.flatShading === false ? '#define USE_MORPHNORMALS' : '',\n\t\t\tparameters.doubleSided ? '#define DOUBLE_SIDED' : '',\n\t\t\tparameters.flipSided ? '#define FLIP_SIDED' : '',\n\n\t\t\tparameters.shadowMapEnabled ? '#define USE_SHADOWMAP' : '',\n\t\t\tparameters.shadowMapEnabled ? '#define ' + shadowMapTypeDefine : '',\n\n\t\t\tparameters.sizeAttenuation ? '#define USE_SIZEATTENUATION' : '',\n\n\t\t\tparameters.logarithmicDepthBuffer ? '#define USE_LOGDEPTHBUF' : '',\n\t\t\t( parameters.logarithmicDepthBuffer && parameters.rendererExtensionFragDepth ) ? '#define USE_LOGDEPTHBUF_EXT' : '',\n\n\t\t\t'uniform mat4 modelMatrix;',\n\t\t\t'uniform mat4 modelViewMatrix;',\n\t\t\t'uniform mat4 projectionMatrix;',\n\t\t\t'uniform mat4 viewMatrix;',\n\t\t\t'uniform mat3 normalMatrix;',\n\t\t\t'uniform vec3 cameraPosition;',\n\t\t\t'uniform bool isOrthographic;',\n\n\t\t\t'#ifdef USE_INSTANCING',\n\n\t\t\t'\tattribute mat4 instanceMatrix;',\n\n\t\t\t'#endif',\n\n\t\t\t'#ifdef USE_INSTANCING_COLOR',\n\n\t\t\t'\tattribute vec3 instanceColor;',\n\n\t\t\t'#endif',\n\n\t\t\t'attribute vec3 position;',\n\t\t\t'attribute vec3 normal;',\n\t\t\t'attribute vec2 uv;',\n\n\t\t\t'#ifdef USE_TANGENT',\n\n\t\t\t'\tattribute vec4 tangent;',\n\n\t\t\t'#endif',\n\n\t\t\t'#ifdef USE_COLOR',\n\n\t\t\t'\tattribute vec3 color;',\n\n\t\t\t'#endif',\n\n\t\t\t'#ifdef USE_MORPHTARGETS',\n\n\t\t\t'\tattribute vec3 morphTarget0;',\n\t\t\t'\tattribute vec3 morphTarget1;',\n\t\t\t'\tattribute vec3 morphTarget2;',\n\t\t\t'\tattribute vec3 morphTarget3;',\n\n\t\t\t'\t#ifdef USE_MORPHNORMALS',\n\n\t\t\t'\t\tattribute vec3 morphNormal0;',\n\t\t\t'\t\tattribute vec3 morphNormal1;',\n\t\t\t'\t\tattribute vec3 morphNormal2;',\n\t\t\t'\t\tattribute vec3 morphNormal3;',\n\n\t\t\t'\t#else',\n\n\t\t\t'\t\tattribute vec3 morphTarget4;',\n\t\t\t'\t\tattribute vec3 morphTarget5;',\n\t\t\t'\t\tattribute vec3 morphTarget6;',\n\t\t\t'\t\tattribute vec3 morphTarget7;',\n\n\t\t\t'\t#endif',\n\n\t\t\t'#endif',\n\n\t\t\t'#ifdef USE_SKINNING',\n\n\t\t\t'\tattribute vec4 skinIndex;',\n\t\t\t'\tattribute vec4 skinWeight;',\n\n\t\t\t'#endif',\n\n\t\t\t'\\n'\n\n\t\t].filter( filterEmptyLine ).join( '\\n' );\n\n\t\tprefixFragment = [\n\n\t\t\tcustomExtensions,\n\n\t\t\tgeneratePrecision( parameters ),\n\n\t\t\t'#define SHADER_NAME ' + parameters.shaderName,\n\n\t\t\tcustomDefines,\n\n\t\t\tparameters.alphaTest ? '#define ALPHATEST ' + parameters.alphaTest + ( parameters.alphaTest % 1 ? '' : '.0' ) : '', // add '.0' if integer\n\n\t\t\t'#define GAMMA_FACTOR ' + gammaFactorDefine,\n\n\t\t\t( parameters.useFog && parameters.fog ) ? '#define USE_FOG' : '',\n\t\t\t( parameters.useFog && parameters.fogExp2 ) ? '#define FOG_EXP2' : '',\n\n\t\t\tparameters.map ? '#define USE_MAP' : '',\n\t\t\tparameters.matcap ? '#define USE_MATCAP' : '',\n\t\t\tparameters.envMap ? '#define USE_ENVMAP' : '',\n\t\t\tparameters.envMap ? '#define ' + envMapTypeDefine : '',\n\t\t\tparameters.envMap ? '#define ' + envMapModeDefine : '',\n\t\t\tparameters.envMap ? '#define ' + envMapBlendingDefine : '',\n\t\t\tparameters.lightMap ? '#define USE_LIGHTMAP' : '',\n\t\t\tparameters.aoMap ? '#define USE_AOMAP' : '',\n\t\t\tparameters.emissiveMap ? '#define USE_EMISSIVEMAP' : '',\n\t\t\tparameters.bumpMap ? '#define USE_BUMPMAP' : '',\n\t\t\tparameters.normalMap ? '#define USE_NORMALMAP' : '',\n\t\t\t( parameters.normalMap && parameters.objectSpaceNormalMap ) ? '#define OBJECTSPACE_NORMALMAP' : '',\n\t\t\t( parameters.normalMap && parameters.tangentSpaceNormalMap ) ? '#define TANGENTSPACE_NORMALMAP' : '',\n\t\t\tparameters.clearcoatMap ? '#define USE_CLEARCOATMAP' : '',\n\t\t\tparameters.clearcoatRoughnessMap ? '#define USE_CLEARCOAT_ROUGHNESSMAP' : '',\n\t\t\tparameters.clearcoatNormalMap ? '#define USE_CLEARCOAT_NORMALMAP' : '',\n\t\t\tparameters.specularMap ? '#define USE_SPECULARMAP' : '',\n\t\t\tparameters.roughnessMap ? '#define USE_ROUGHNESSMAP' : '',\n\t\t\tparameters.metalnessMap ? '#define USE_METALNESSMAP' : '',\n\t\t\tparameters.alphaMap ? '#define USE_ALPHAMAP' : '',\n\n\t\t\tparameters.sheen ? '#define USE_SHEEN' : '',\n\t\t\tparameters.transmissionMap ? '#define USE_TRANSMISSIONMAP' : '',\n\n\t\t\tparameters.vertexTangents ? '#define USE_TANGENT' : '',\n\t\t\tparameters.vertexColors || parameters.instancingColor ? '#define USE_COLOR' : '',\n\t\t\tparameters.vertexUvs ? '#define USE_UV' : '',\n\t\t\tparameters.uvsVertexOnly ? '#define UVS_VERTEX_ONLY' : '',\n\n\t\t\tparameters.gradientMap ? '#define USE_GRADIENTMAP' : '',\n\n\t\t\tparameters.flatShading ? '#define FLAT_SHADED' : '',\n\n\t\t\tparameters.doubleSided ? '#define DOUBLE_SIDED' : '',\n\t\t\tparameters.flipSided ? '#define FLIP_SIDED' : '',\n\n\t\t\tparameters.shadowMapEnabled ? '#define USE_SHADOWMAP' : '',\n\t\t\tparameters.shadowMapEnabled ? '#define ' + shadowMapTypeDefine : '',\n\n\t\t\tparameters.premultipliedAlpha ? '#define PREMULTIPLIED_ALPHA' : '',\n\n\t\t\tparameters.physicallyCorrectLights ? '#define PHYSICALLY_CORRECT_LIGHTS' : '',\n\n\t\t\tparameters.logarithmicDepthBuffer ? '#define USE_LOGDEPTHBUF' : '',\n\t\t\t( parameters.logarithmicDepthBuffer && parameters.rendererExtensionFragDepth ) ? '#define USE_LOGDEPTHBUF_EXT' : '',\n\n\t\t\t( ( parameters.extensionShaderTextureLOD || parameters.envMap ) && parameters.rendererExtensionShaderTextureLod ) ? '#define TEXTURE_LOD_EXT' : '',\n\n\t\t\t'uniform mat4 viewMatrix;',\n\t\t\t'uniform vec3 cameraPosition;',\n\t\t\t'uniform bool isOrthographic;',\n\n\t\t\t( parameters.toneMapping !== NoToneMapping ) ? '#define TONE_MAPPING' : '',\n\t\t\t( parameters.toneMapping !== NoToneMapping ) ? ShaderChunk[ 'tonemapping_pars_fragment' ] : '', // this code is required here because it is used by the toneMapping() function defined below\n\t\t\t( parameters.toneMapping !== NoToneMapping ) ? getToneMappingFunction( 'toneMapping', parameters.toneMapping ) : '',\n\n\t\t\tparameters.dithering ? '#define DITHERING' : '',\n\n\t\t\tShaderChunk[ 'encodings_pars_fragment' ], // this code is required here because it is used by the various encoding/decoding function defined below\n\t\t\tparameters.map ? getTexelDecodingFunction( 'mapTexelToLinear', parameters.mapEncoding ) : '',\n\t\t\tparameters.matcap ? getTexelDecodingFunction( 'matcapTexelToLinear', parameters.matcapEncoding ) : '',\n\t\t\tparameters.envMap ? getTexelDecodingFunction( 'envMapTexelToLinear', parameters.envMapEncoding ) : '',\n\t\t\tparameters.emissiveMap ? getTexelDecodingFunction( 'emissiveMapTexelToLinear', parameters.emissiveMapEncoding ) : '',\n\t\t\tparameters.lightMap ? getTexelDecodingFunction( 'lightMapTexelToLinear', parameters.lightMapEncoding ) : '',\n\t\t\tgetTexelEncodingFunction( 'linearToOutputTexel', parameters.outputEncoding ),\n\n\t\t\tparameters.depthPacking ? '#define DEPTH_PACKING ' + parameters.depthPacking : '',\n\n\t\t\t'\\n'\n\n\t\t].filter( filterEmptyLine ).join( '\\n' );\n\n\t}\n\n\tvertexShader = resolveIncludes( vertexShader );\n\tvertexShader = replaceLightNums( vertexShader, parameters );\n\tvertexShader = replaceClippingPlaneNums( vertexShader, parameters );\n\n\tfragmentShader = resolveIncludes( fragmentShader );\n\tfragmentShader = replaceLightNums( fragmentShader, parameters );\n\tfragmentShader = replaceClippingPlaneNums( fragmentShader, parameters );\n\n\tvertexShader = unrollLoops( vertexShader );\n\tfragmentShader = unrollLoops( fragmentShader );\n\n\tif ( parameters.isWebGL2 && parameters.isRawShaderMaterial !== true ) {\n\n\t\t// GLSL 3.0 conversion for built-in materials and ShaderMaterial\n\n\t\tversionString = '#version 300 es\\n';\n\n\t\tprefixVertex = [\n\t\t\t'#define attribute in',\n\t\t\t'#define varying out',\n\t\t\t'#define texture2D texture'\n\t\t].join( '\\n' ) + '\\n' + prefixVertex;\n\n\t\tprefixFragment = [\n\t\t\t'#define varying in',\n\t\t\t( parameters.glslVersion === GLSL3 ) ? '' : 'out highp vec4 pc_fragColor;',\n\t\t\t( parameters.glslVersion === GLSL3 ) ? '' : '#define gl_FragColor pc_fragColor',\n\t\t\t'#define gl_FragDepthEXT gl_FragDepth',\n\t\t\t'#define texture2D texture',\n\t\t\t'#define textureCube texture',\n\t\t\t'#define texture2DProj textureProj',\n\t\t\t'#define texture2DLodEXT textureLod',\n\t\t\t'#define texture2DProjLodEXT textureProjLod',\n\t\t\t'#define textureCubeLodEXT textureLod',\n\t\t\t'#define texture2DGradEXT textureGrad',\n\t\t\t'#define texture2DProjGradEXT textureProjGrad',\n\t\t\t'#define textureCubeGradEXT textureGrad'\n\t\t].join( '\\n' ) + '\\n' + prefixFragment;\n\n\t}\n\n\tconst vertexGlsl = versionString + prefixVertex + vertexShader;\n\tconst fragmentGlsl = versionString + prefixFragment + fragmentShader;\n\n\t// console.log( '*VERTEX*', vertexGlsl );\n\t// console.log( '*FRAGMENT*', fragmentGlsl );\n\n\tconst glVertexShader = WebGLShader( gl, gl.VERTEX_SHADER, vertexGlsl );\n\tconst glFragmentShader = WebGLShader( gl, gl.FRAGMENT_SHADER, fragmentGlsl );\n\n\tgl.attachShader( program, glVertexShader );\n\tgl.attachShader( program, glFragmentShader );\n\n\t// Force a particular attribute to index 0.\n\n\tif ( parameters.index0AttributeName !== undefined ) {\n\n\t\tgl.bindAttribLocation( program, 0, parameters.index0AttributeName );\n\n\t} else if ( parameters.morphTargets === true ) {\n\n\t\t// programs with morphTargets displace position out of attribute 0\n\t\tgl.bindAttribLocation( program, 0, 'position' );\n\n\t}\n\n\tgl.linkProgram( program );\n\n\t// check for link errors\n\tif ( renderer.debug.checkShaderErrors ) {\n\n\t\tconst programLog = gl.getProgramInfoLog( program ).trim();\n\t\tconst vertexLog = gl.getShaderInfoLog( glVertexShader ).trim();\n\t\tconst fragmentLog = gl.getShaderInfoLog( glFragmentShader ).trim();\n\n\t\tlet runnable = true;\n\t\tlet haveDiagnostics = true;\n\n\t\tif ( gl.getProgramParameter( program, gl.LINK_STATUS ) === false ) {\n\n\t\t\trunnable = false;\n\n\t\t\tconst vertexErrors = getShaderErrors( gl, glVertexShader, 'vertex' );\n\t\t\tconst fragmentErrors = getShaderErrors( gl, glFragmentShader, 'fragment' );\n\n\t\t\tconsole.error( 'THREE.WebGLProgram: shader error: ', gl.getError(), 'gl.VALIDATE_STATUS', gl.getProgramParameter( program, gl.VALIDATE_STATUS ), 'gl.getProgramInfoLog', programLog, vertexErrors, fragmentErrors );\n\n\t\t} else if ( programLog !== '' ) {\n\n\t\t\tconsole.warn( 'THREE.WebGLProgram: gl.getProgramInfoLog()', programLog );\n\n\t\t} else if ( vertexLog === '' || fragmentLog === '' ) {\n\n\t\t\thaveDiagnostics = false;\n\n\t\t}\n\n\t\tif ( haveDiagnostics ) {\n\n\t\t\tthis.diagnostics = {\n\n\t\t\t\trunnable: runnable,\n\n\t\t\t\tprogramLog: programLog,\n\n\t\t\t\tvertexShader: {\n\n\t\t\t\t\tlog: vertexLog,\n\t\t\t\t\tprefix: prefixVertex\n\n\t\t\t\t},\n\n\t\t\t\tfragmentShader: {\n\n\t\t\t\t\tlog: fragmentLog,\n\t\t\t\t\tprefix: prefixFragment\n\n\t\t\t\t}\n\n\t\t\t};\n\n\t\t}\n\n\t}\n\n\t// Clean up\n\n\t// Crashes in iOS9 and iOS10. #18402\n\t// gl.detachShader( program, glVertexShader );\n\t// gl.detachShader( program, glFragmentShader );\n\n\tgl.deleteShader( glVertexShader );\n\tgl.deleteShader( glFragmentShader );\n\n\t// set up caching for uniform locations\n\n\tlet cachedUniforms;\n\n\tthis.getUniforms = function () {\n\n\t\tif ( cachedUniforms === undefined ) {\n\n\t\t\tcachedUniforms = new WebGLUniforms( gl, program );\n\n\t\t}\n\n\t\treturn cachedUniforms;\n\n\t};\n\n\t// set up caching for attribute locations\n\n\tlet cachedAttributes;\n\n\tthis.getAttributes = function () {\n\n\t\tif ( cachedAttributes === undefined ) {\n\n\t\t\tcachedAttributes = fetchAttributeLocations( gl, program );\n\n\t\t}\n\n\t\treturn cachedAttributes;\n\n\t};\n\n\t// free resource\n\n\tthis.destroy = function () {\n\n\t\tbindingStates.releaseStatesOfProgram( this );\n\n\t\tgl.deleteProgram( program );\n\t\tthis.program = undefined;\n\n\t};\n\n\t//\n\n\tthis.name = parameters.shaderName;\n\tthis.id = programIdCount ++;\n\tthis.cacheKey = cacheKey;\n\tthis.usedTimes = 1;\n\tthis.program = program;\n\tthis.vertexShader = glVertexShader;\n\tthis.fragmentShader = glFragmentShader;\n\n\treturn this;\n\n}\n\nexport { WebGLProgram };\n","import { BackSide, DoubleSide, CubeUVRefractionMapping, CubeUVReflectionMapping, LinearEncoding, ObjectSpaceNormalMap, TangentSpaceNormalMap, NoToneMapping } from '../../constants.js';\nimport { WebGLProgram } from './WebGLProgram.js';\nimport { ShaderLib } from '../shaders/ShaderLib.js';\nimport { UniformsUtils } from '../shaders/UniformsUtils.js';\n\nfunction WebGLPrograms( renderer, cubemaps, extensions, capabilities, bindingStates, clipping ) {\n\n\tconst programs = [];\n\n\tconst isWebGL2 = capabilities.isWebGL2;\n\tconst logarithmicDepthBuffer = capabilities.logarithmicDepthBuffer;\n\tconst floatVertexTextures = capabilities.floatVertexTextures;\n\tconst maxVertexUniforms = capabilities.maxVertexUniforms;\n\tconst vertexTextures = capabilities.vertexTextures;\n\n\tlet precision = capabilities.precision;\n\n\tconst shaderIDs = {\n\t\tMeshDepthMaterial: 'depth',\n\t\tMeshDistanceMaterial: 'distanceRGBA',\n\t\tMeshNormalMaterial: 'normal',\n\t\tMeshBasicMaterial: 'basic',\n\t\tMeshLambertMaterial: 'lambert',\n\t\tMeshPhongMaterial: 'phong',\n\t\tMeshToonMaterial: 'toon',\n\t\tMeshStandardMaterial: 'physical',\n\t\tMeshPhysicalMaterial: 'physical',\n\t\tMeshMatcapMaterial: 'matcap',\n\t\tLineBasicMaterial: 'basic',\n\t\tLineDashedMaterial: 'dashed',\n\t\tPointsMaterial: 'points',\n\t\tShadowMaterial: 'shadow',\n\t\tSpriteMaterial: 'sprite'\n\t};\n\n\tconst parameterNames = [\n\t\t'precision', 'isWebGL2', 'supportsVertexTextures', 'outputEncoding', 'instancing', 'instancingColor',\n\t\t'map', 'mapEncoding', 'matcap', 'matcapEncoding', 'envMap', 'envMapMode', 'envMapEncoding', 'envMapCubeUV',\n\t\t'lightMap', 'lightMapEncoding', 'aoMap', 'emissiveMap', 'emissiveMapEncoding', 'bumpMap', 'normalMap', 'objectSpaceNormalMap', 'tangentSpaceNormalMap', 'clearcoatMap', 'clearcoatRoughnessMap', 'clearcoatNormalMap', 'displacementMap', 'specularMap',\n\t\t'roughnessMap', 'metalnessMap', 'gradientMap',\n\t\t'alphaMap', 'combine', 'vertexColors', 'vertexTangents', 'vertexUvs', 'uvsVertexOnly', 'fog', 'useFog', 'fogExp2',\n\t\t'flatShading', 'sizeAttenuation', 'logarithmicDepthBuffer', 'skinning',\n\t\t'maxBones', 'useVertexTexture', 'morphTargets', 'morphNormals',\n\t\t'maxMorphTargets', 'maxMorphNormals', 'premultipliedAlpha',\n\t\t'numDirLights', 'numPointLights', 'numSpotLights', 'numHemiLights', 'numRectAreaLights',\n\t\t'numDirLightShadows', 'numPointLightShadows', 'numSpotLightShadows',\n\t\t'shadowMapEnabled', 'shadowMapType', 'toneMapping', 'physicallyCorrectLights',\n\t\t'alphaTest', 'doubleSided', 'flipSided', 'numClippingPlanes', 'numClipIntersection', 'depthPacking', 'dithering',\n\t\t'sheen', 'transmissionMap'\n\t];\n\n\tfunction getMaxBones( object ) {\n\n\t\tconst skeleton = object.skeleton;\n\t\tconst bones = skeleton.bones;\n\n\t\tif ( floatVertexTextures ) {\n\n\t\t\treturn 1024;\n\n\t\t} else {\n\n\t\t\t// default for when object is not specified\n\t\t\t// ( for example when prebuilding shader to be used with multiple objects )\n\t\t\t//\n\t\t\t//  - leave some extra space for other uniforms\n\t\t\t//  - limit here is ANGLE's 254 max uniform vectors\n\t\t\t//    (up to 54 should be safe)\n\n\t\t\tconst nVertexUniforms = maxVertexUniforms;\n\t\t\tconst nVertexMatrices = Math.floor( ( nVertexUniforms - 20 ) / 4 );\n\n\t\t\tconst maxBones = Math.min( nVertexMatrices, bones.length );\n\n\t\t\tif ( maxBones < bones.length ) {\n\n\t\t\t\tconsole.warn( 'THREE.WebGLRenderer: Skeleton has ' + bones.length + ' bones. This GPU supports ' + maxBones + '.' );\n\t\t\t\treturn 0;\n\n\t\t\t}\n\n\t\t\treturn maxBones;\n\n\t\t}\n\n\t}\n\n\tfunction getTextureEncodingFromMap( map ) {\n\n\t\tlet encoding;\n\n\t\tif ( map && map.isTexture ) {\n\n\t\t\tencoding = map.encoding;\n\n\t\t} else if ( map && map.isWebGLRenderTarget ) {\n\n\t\t\tconsole.warn( 'THREE.WebGLPrograms.getTextureEncodingFromMap: don\\'t use render targets as textures. Use their .texture property instead.' );\n\t\t\tencoding = map.texture.encoding;\n\n\t\t} else {\n\n\t\t\tencoding = LinearEncoding;\n\n\t\t}\n\n\t\treturn encoding;\n\n\t}\n\n\tfunction getParameters( material, lights, shadows, scene, object ) {\n\n\t\tconst fog = scene.fog;\n\t\tconst environment = material.isMeshStandardMaterial ? scene.environment : null;\n\n\t\tconst envMap = cubemaps.get( material.envMap || environment );\n\n\t\tconst shaderID = shaderIDs[ material.type ];\n\n\t\t// heuristics to create shader parameters according to lights in the scene\n\t\t// (not to blow over maxLights budget)\n\n\t\tconst maxBones = object.isSkinnedMesh ? getMaxBones( object ) : 0;\n\n\t\tif ( material.precision !== null ) {\n\n\t\t\tprecision = capabilities.getMaxPrecision( material.precision );\n\n\t\t\tif ( precision !== material.precision ) {\n\n\t\t\t\tconsole.warn( 'THREE.WebGLProgram.getParameters:', material.precision, 'not supported, using', precision, 'instead.' );\n\n\t\t\t}\n\n\t\t}\n\n\t\tlet vertexShader, fragmentShader;\n\n\t\tif ( shaderID ) {\n\n\t\t\tconst shader = ShaderLib[ shaderID ];\n\n\t\t\tvertexShader = shader.vertexShader;\n\t\t\tfragmentShader = shader.fragmentShader;\n\n\t\t} else {\n\n\t\t\tvertexShader = material.vertexShader;\n\t\t\tfragmentShader = material.fragmentShader;\n\n\t\t}\n\n\t\tconst currentRenderTarget = renderer.getRenderTarget();\n\n\t\tconst parameters = {\n\n\t\t\tisWebGL2: isWebGL2,\n\n\t\t\tshaderID: shaderID,\n\t\t\tshaderName: material.type,\n\n\t\t\tvertexShader: vertexShader,\n\t\t\tfragmentShader: fragmentShader,\n\t\t\tdefines: material.defines,\n\n\t\t\tisRawShaderMaterial: material.isRawShaderMaterial === true,\n\t\t\tglslVersion: material.glslVersion,\n\n\t\t\tprecision: precision,\n\n\t\t\tinstancing: object.isInstancedMesh === true,\n\t\t\tinstancingColor: object.isInstancedMesh === true && object.instanceColor !== null,\n\n\t\t\tsupportsVertexTextures: vertexTextures,\n\t\t\toutputEncoding: ( currentRenderTarget !== null ) ? getTextureEncodingFromMap( currentRenderTarget.texture ) : renderer.outputEncoding,\n\t\t\tmap: !! material.map,\n\t\t\tmapEncoding: getTextureEncodingFromMap( material.map ),\n\t\t\tmatcap: !! material.matcap,\n\t\t\tmatcapEncoding: getTextureEncodingFromMap( material.matcap ),\n\t\t\tenvMap: !! envMap,\n\t\t\tenvMapMode: envMap && envMap.mapping,\n\t\t\tenvMapEncoding: getTextureEncodingFromMap( envMap ),\n\t\t\tenvMapCubeUV: ( !! envMap ) && ( ( envMap.mapping === CubeUVReflectionMapping ) || ( envMap.mapping === CubeUVRefractionMapping ) ),\n\t\t\tlightMap: !! material.lightMap,\n\t\t\tlightMapEncoding: getTextureEncodingFromMap( material.lightMap ),\n\t\t\taoMap: !! material.aoMap,\n\t\t\temissiveMap: !! material.emissiveMap,\n\t\t\temissiveMapEncoding: getTextureEncodingFromMap( material.emissiveMap ),\n\t\t\tbumpMap: !! material.bumpMap,\n\t\t\tnormalMap: !! material.normalMap,\n\t\t\tobjectSpaceNormalMap: material.normalMapType === ObjectSpaceNormalMap,\n\t\t\ttangentSpaceNormalMap: material.normalMapType === TangentSpaceNormalMap,\n\t\t\tclearcoatMap: !! material.clearcoatMap,\n\t\t\tclearcoatRoughnessMap: !! material.clearcoatRoughnessMap,\n\t\t\tclearcoatNormalMap: !! material.clearcoatNormalMap,\n\t\t\tdisplacementMap: !! material.displacementMap,\n\t\t\troughnessMap: !! material.roughnessMap,\n\t\t\tmetalnessMap: !! material.metalnessMap,\n\t\t\tspecularMap: !! material.specularMap,\n\t\t\talphaMap: !! material.alphaMap,\n\n\t\t\tgradientMap: !! material.gradientMap,\n\n\t\t\tsheen: !! material.sheen,\n\n\t\t\ttransmissionMap: !! material.transmissionMap,\n\n\t\t\tcombine: material.combine,\n\n\t\t\tvertexTangents: ( material.normalMap && material.vertexTangents ),\n\t\t\tvertexColors: material.vertexColors,\n\t\t\tvertexUvs: !! material.map || !! material.bumpMap || !! material.normalMap || !! material.specularMap || !! material.alphaMap || !! material.emissiveMap || !! material.roughnessMap || !! material.metalnessMap || !! material.clearcoatMap || !! material.clearcoatRoughnessMap || !! material.clearcoatNormalMap || !! material.displacementMap || !! material.transmissionMap,\n\t\t\tuvsVertexOnly: ! ( !! material.map || !! material.bumpMap || !! material.normalMap || !! material.specularMap || !! material.alphaMap || !! material.emissiveMap || !! material.roughnessMap || !! material.metalnessMap || !! material.clearcoatNormalMap || !! material.transmissionMap ) && !! material.displacementMap,\n\n\t\t\tfog: !! fog,\n\t\t\tuseFog: material.fog,\n\t\t\tfogExp2: ( fog && fog.isFogExp2 ),\n\n\t\t\tflatShading: !! material.flatShading,\n\n\t\t\tsizeAttenuation: material.sizeAttenuation,\n\t\t\tlogarithmicDepthBuffer: logarithmicDepthBuffer,\n\n\t\t\tskinning: material.skinning && maxBones > 0,\n\t\t\tmaxBones: maxBones,\n\t\t\tuseVertexTexture: floatVertexTextures,\n\n\t\t\tmorphTargets: material.morphTargets,\n\t\t\tmorphNormals: material.morphNormals,\n\t\t\tmaxMorphTargets: renderer.maxMorphTargets,\n\t\t\tmaxMorphNormals: renderer.maxMorphNormals,\n\n\t\t\tnumDirLights: lights.directional.length,\n\t\t\tnumPointLights: lights.point.length,\n\t\t\tnumSpotLights: lights.spot.length,\n\t\t\tnumRectAreaLights: lights.rectArea.length,\n\t\t\tnumHemiLights: lights.hemi.length,\n\n\t\t\tnumDirLightShadows: lights.directionalShadowMap.length,\n\t\t\tnumPointLightShadows: lights.pointShadowMap.length,\n\t\t\tnumSpotLightShadows: lights.spotShadowMap.length,\n\n\t\t\tnumClippingPlanes: clipping.numPlanes,\n\t\t\tnumClipIntersection: clipping.numIntersection,\n\n\t\t\tdithering: material.dithering,\n\n\t\t\tshadowMapEnabled: renderer.shadowMap.enabled && shadows.length > 0,\n\t\t\tshadowMapType: renderer.shadowMap.type,\n\n\t\t\ttoneMapping: material.toneMapped ? renderer.toneMapping : NoToneMapping,\n\t\t\tphysicallyCorrectLights: renderer.physicallyCorrectLights,\n\n\t\t\tpremultipliedAlpha: material.premultipliedAlpha,\n\n\t\t\talphaTest: material.alphaTest,\n\t\t\tdoubleSided: material.side === DoubleSide,\n\t\t\tflipSided: material.side === BackSide,\n\n\t\t\tdepthPacking: ( material.depthPacking !== undefined ) ? material.depthPacking : false,\n\n\t\t\tindex0AttributeName: material.index0AttributeName,\n\n\t\t\textensionDerivatives: material.extensions && material.extensions.derivatives,\n\t\t\textensionFragDepth: material.extensions && material.extensions.fragDepth,\n\t\t\textensionDrawBuffers: material.extensions && material.extensions.drawBuffers,\n\t\t\textensionShaderTextureLOD: material.extensions && material.extensions.shaderTextureLOD,\n\n\t\t\trendererExtensionFragDepth: isWebGL2 || extensions.has( 'EXT_frag_depth' ),\n\t\t\trendererExtensionDrawBuffers: isWebGL2 || extensions.has( 'WEBGL_draw_buffers' ),\n\t\t\trendererExtensionShaderTextureLod: isWebGL2 || extensions.has( 'EXT_shader_texture_lod' ),\n\n\t\t\tcustomProgramCacheKey: material.customProgramCacheKey()\n\n\t\t};\n\n\t\treturn parameters;\n\n\t}\n\n\tfunction getProgramCacheKey( parameters ) {\n\n\t\tconst array = [];\n\n\t\tif ( parameters.shaderID ) {\n\n\t\t\tarray.push( parameters.shaderID );\n\n\t\t} else {\n\n\t\t\tarray.push( parameters.fragmentShader );\n\t\t\tarray.push( parameters.vertexShader );\n\n\t\t}\n\n\t\tif ( parameters.defines !== undefined ) {\n\n\t\t\tfor ( const name in parameters.defines ) {\n\n\t\t\t\tarray.push( name );\n\t\t\t\tarray.push( parameters.defines[ name ] );\n\n\t\t\t}\n\n\t\t}\n\n\t\tif ( parameters.isRawShaderMaterial === false ) {\n\n\t\t\tfor ( let i = 0; i < parameterNames.length; i ++ ) {\n\n\t\t\t\tarray.push( parameters[ parameterNames[ i ] ] );\n\n\t\t\t}\n\n\t\t\tarray.push( renderer.outputEncoding );\n\t\t\tarray.push( renderer.gammaFactor );\n\n\t\t}\n\n\t\tarray.push( parameters.customProgramCacheKey );\n\n\t\treturn array.join();\n\n\t}\n\n\tfunction getUniforms( material ) {\n\n\t\tconst shaderID = shaderIDs[ material.type ];\n\t\tlet uniforms;\n\n\t\tif ( shaderID ) {\n\n\t\t\tconst shader = ShaderLib[ shaderID ];\n\t\t\tuniforms = UniformsUtils.clone( shader.uniforms );\n\n\t\t} else {\n\n\t\t\tuniforms = material.uniforms;\n\n\t\t}\n\n\t\treturn uniforms;\n\n\t}\n\n\tfunction acquireProgram( parameters, cacheKey ) {\n\n\t\tlet program;\n\n\t\t// Check if code has been already compiled\n\t\tfor ( let p = 0, pl = programs.length; p < pl; p ++ ) {\n\n\t\t\tconst preexistingProgram = programs[ p ];\n\n\t\t\tif ( preexistingProgram.cacheKey === cacheKey ) {\n\n\t\t\t\tprogram = preexistingProgram;\n\t\t\t\t++ program.usedTimes;\n\n\t\t\t\tbreak;\n\n\t\t\t}\n\n\t\t}\n\n\t\tif ( program === undefined ) {\n\n\t\t\tprogram = new WebGLProgram( renderer, cacheKey, parameters, bindingStates );\n\t\t\tprograms.push( program );\n\n\t\t}\n\n\t\treturn program;\n\n\t}\n\n\tfunction releaseProgram( program ) {\n\n\t\tif ( -- program.usedTimes === 0 ) {\n\n\t\t\t// Remove from unordered set\n\t\t\tconst i = programs.indexOf( program );\n\t\t\tprograms[ i ] = programs[ programs.length - 1 ];\n\t\t\tprograms.pop();\n\n\t\t\t// Free WebGL resources\n\t\t\tprogram.destroy();\n\n\t\t}\n\n\t}\n\n\treturn {\n\t\tgetParameters: getParameters,\n\t\tgetProgramCacheKey: getProgramCacheKey,\n\t\tgetUniforms: getUniforms,\n\t\tacquireProgram: acquireProgram,\n\t\treleaseProgram: releaseProgram,\n\t\t// Exposed for resource monitoring & error feedback via renderer.info:\n\t\tprograms: programs\n\t};\n\n}\n\n\nexport { WebGLPrograms };\n","function WebGLProperties() {\n\n\tlet properties = new WeakMap();\n\n\tfunction get( object ) {\n\n\t\tlet map = properties.get( object );\n\n\t\tif ( map === undefined ) {\n\n\t\t\tmap = {};\n\t\t\tproperties.set( object, map );\n\n\t\t}\n\n\t\treturn map;\n\n\t}\n\n\tfunction remove( object ) {\n\n\t\tproperties.delete( object );\n\n\t}\n\n\tfunction update( object, key, value ) {\n\n\t\tproperties.get( object )[ key ] = value;\n\n\t}\n\n\tfunction dispose() {\n\n\t\tproperties = new WeakMap();\n\n\t}\n\n\treturn {\n\t\tget: get,\n\t\tremove: remove,\n\t\tupdate: update,\n\t\tdispose: dispose\n\t};\n\n}\n\n\nexport { WebGLProperties };\n","function painterSortStable( a, b ) {\n\n\tif ( a.groupOrder !== b.groupOrder ) {\n\n\t\treturn a.groupOrder - b.groupOrder;\n\n\t} else if ( a.renderOrder !== b.renderOrder ) {\n\n\t\treturn a.renderOrder - b.renderOrder;\n\n\t} else if ( a.program !== b.program ) {\n\n\t\treturn a.program.id - b.program.id;\n\n\t} else if ( a.material.id !== b.material.id ) {\n\n\t\treturn a.material.id - b.material.id;\n\n\t} else if ( a.z !== b.z ) {\n\n\t\treturn a.z - b.z;\n\n\t} else {\n\n\t\treturn a.id - b.id;\n\n\t}\n\n}\n\nfunction reversePainterSortStable( a, b ) {\n\n\tif ( a.groupOrder !== b.groupOrder ) {\n\n\t\treturn a.groupOrder - b.groupOrder;\n\n\t} else if ( a.renderOrder !== b.renderOrder ) {\n\n\t\treturn a.renderOrder - b.renderOrder;\n\n\t} else if ( a.z !== b.z ) {\n\n\t\treturn b.z - a.z;\n\n\t} else {\n\n\t\treturn a.id - b.id;\n\n\t}\n\n}\n\n\nfunction WebGLRenderList( properties ) {\n\n\tconst renderItems = [];\n\tlet renderItemsIndex = 0;\n\n\tconst opaque = [];\n\tconst transparent = [];\n\n\tconst defaultProgram = { id: - 1 };\n\n\tfunction init() {\n\n\t\trenderItemsIndex = 0;\n\n\t\topaque.length = 0;\n\t\ttransparent.length = 0;\n\n\t}\n\n\tfunction getNextRenderItem( object, geometry, material, groupOrder, z, group ) {\n\n\t\tlet renderItem = renderItems[ renderItemsIndex ];\n\t\tconst materialProperties = properties.get( material );\n\n\t\tif ( renderItem === undefined ) {\n\n\t\t\trenderItem = {\n\t\t\t\tid: object.id,\n\t\t\t\tobject: object,\n\t\t\t\tgeometry: geometry,\n\t\t\t\tmaterial: material,\n\t\t\t\tprogram: materialProperties.program || defaultProgram,\n\t\t\t\tgroupOrder: groupOrder,\n\t\t\t\trenderOrder: object.renderOrder,\n\t\t\t\tz: z,\n\t\t\t\tgroup: group\n\t\t\t};\n\n\t\t\trenderItems[ renderItemsIndex ] = renderItem;\n\n\t\t} else {\n\n\t\t\trenderItem.id = object.id;\n\t\t\trenderItem.object = object;\n\t\t\trenderItem.geometry = geometry;\n\t\t\trenderItem.material = material;\n\t\t\trenderItem.program = materialProperties.program || defaultProgram;\n\t\t\trenderItem.groupOrder = groupOrder;\n\t\t\trenderItem.renderOrder = object.renderOrder;\n\t\t\trenderItem.z = z;\n\t\t\trenderItem.group = group;\n\n\t\t}\n\n\t\trenderItemsIndex ++;\n\n\t\treturn renderItem;\n\n\t}\n\n\tfunction push( object, geometry, material, groupOrder, z, group ) {\n\n\t\tconst renderItem = getNextRenderItem( object, geometry, material, groupOrder, z, group );\n\n\t\t( material.transparent === true ? transparent : opaque ).push( renderItem );\n\n\t}\n\n\tfunction unshift( object, geometry, material, groupOrder, z, group ) {\n\n\t\tconst renderItem = getNextRenderItem( object, geometry, material, groupOrder, z, group );\n\n\t\t( material.transparent === true ? transparent : opaque ).unshift( renderItem );\n\n\t}\n\n\tfunction sort( customOpaqueSort, customTransparentSort ) {\n\n\t\tif ( opaque.length > 1 ) opaque.sort( customOpaqueSort || painterSortStable );\n\t\tif ( transparent.length > 1 ) transparent.sort( customTransparentSort || reversePainterSortStable );\n\n\t}\n\n\tfunction finish() {\n\n\t\t// Clear references from inactive renderItems in the list\n\n\t\tfor ( let i = renderItemsIndex, il = renderItems.length; i < il; i ++ ) {\n\n\t\t\tconst renderItem = renderItems[ i ];\n\n\t\t\tif ( renderItem.id === null ) break;\n\n\t\t\trenderItem.id = null;\n\t\t\trenderItem.object = null;\n\t\t\trenderItem.geometry = null;\n\t\t\trenderItem.material = null;\n\t\t\trenderItem.program = null;\n\t\t\trenderItem.group = null;\n\n\t\t}\n\n\t}\n\n\treturn {\n\n\t\topaque: opaque,\n\t\ttransparent: transparent,\n\n\t\tinit: init,\n\t\tpush: push,\n\t\tunshift: unshift,\n\t\tfinish: finish,\n\n\t\tsort: sort\n\t};\n\n}\n\nfunction WebGLRenderLists( properties ) {\n\n\tlet lists = new WeakMap();\n\n\tfunction get( scene, renderCallDepth ) {\n\n\t\tlet list;\n\n\t\tif ( lists.has( scene ) === false ) {\n\n\t\t\tlist = new WebGLRenderList( properties );\n\t\t\tlists.set( scene, [ list ] );\n\n\t\t} else {\n\n\t\t\tif ( renderCallDepth >= lists.get( scene ).length ) {\n\n\t\t\t\tlist = new WebGLRenderList( properties );\n\t\t\t\tlists.get( scene ).push( list );\n\n\t\t\t} else {\n\n\t\t\t\tlist = lists.get( scene )[ renderCallDepth ];\n\n\t\t\t}\n\n\t\t}\n\n\t\treturn list;\n\n\t}\n\n\tfunction dispose() {\n\n\t\tlists = new WeakMap();\n\n\t}\n\n\treturn {\n\t\tget: get,\n\t\tdispose: dispose\n\t};\n\n}\n\n\nexport { WebGLRenderLists, WebGLRenderList };\n","import { Color } from '../../math/Color.js';\nimport { Matrix4 } from '../../math/Matrix4.js';\nimport { Vector2 } from '../../math/Vector2.js';\nimport { Vector3 } from '../../math/Vector3.js';\nimport { UniformsLib } from '../shaders/UniformsLib.js';\n\nfunction UniformsCache() {\n\n\tconst lights = {};\n\n\treturn {\n\n\t\tget: function ( light ) {\n\n\t\t\tif ( lights[ light.id ] !== undefined ) {\n\n\t\t\t\treturn lights[ light.id ];\n\n\t\t\t}\n\n\t\t\tlet uniforms;\n\n\t\t\tswitch ( light.type ) {\n\n\t\t\t\tcase 'DirectionalLight':\n\t\t\t\t\tuniforms = {\n\t\t\t\t\t\tdirection: new Vector3(),\n\t\t\t\t\t\tcolor: new Color()\n\t\t\t\t\t};\n\t\t\t\t\tbreak;\n\n\t\t\t\tcase 'SpotLight':\n\t\t\t\t\tuniforms = {\n\t\t\t\t\t\tposition: new Vector3(),\n\t\t\t\t\t\tdirection: new Vector3(),\n\t\t\t\t\t\tcolor: new Color(),\n\t\t\t\t\t\tdistance: 0,\n\t\t\t\t\t\tconeCos: 0,\n\t\t\t\t\t\tpenumbraCos: 0,\n\t\t\t\t\t\tdecay: 0\n\t\t\t\t\t};\n\t\t\t\t\tbreak;\n\n\t\t\t\tcase 'PointLight':\n\t\t\t\t\tuniforms = {\n\t\t\t\t\t\tposition: new Vector3(),\n\t\t\t\t\t\tcolor: new Color(),\n\t\t\t\t\t\tdistance: 0,\n\t\t\t\t\t\tdecay: 0\n\t\t\t\t\t};\n\t\t\t\t\tbreak;\n\n\t\t\t\tcase 'HemisphereLight':\n\t\t\t\t\tuniforms = {\n\t\t\t\t\t\tdirection: new Vector3(),\n\t\t\t\t\t\tskyColor: new Color(),\n\t\t\t\t\t\tgroundColor: new Color()\n\t\t\t\t\t};\n\t\t\t\t\tbreak;\n\n\t\t\t\tcase 'RectAreaLight':\n\t\t\t\t\tuniforms = {\n\t\t\t\t\t\tcolor: new Color(),\n\t\t\t\t\t\tposition: new Vector3(),\n\t\t\t\t\t\thalfWidth: new Vector3(),\n\t\t\t\t\t\thalfHeight: new Vector3()\n\t\t\t\t\t};\n\t\t\t\t\tbreak;\n\n\t\t\t}\n\n\t\t\tlights[ light.id ] = uniforms;\n\n\t\t\treturn uniforms;\n\n\t\t}\n\n\t};\n\n}\n\nfunction ShadowUniformsCache() {\n\n\tconst lights = {};\n\n\treturn {\n\n\t\tget: function ( light ) {\n\n\t\t\tif ( lights[ light.id ] !== undefined ) {\n\n\t\t\t\treturn lights[ light.id ];\n\n\t\t\t}\n\n\t\t\tlet uniforms;\n\n\t\t\tswitch ( light.type ) {\n\n\t\t\t\tcase 'DirectionalLight':\n\t\t\t\t\tuniforms = {\n\t\t\t\t\t\tshadowBias: 0,\n\t\t\t\t\t\tshadowNormalBias: 0,\n\t\t\t\t\t\tshadowRadius: 1,\n\t\t\t\t\t\tshadowMapSize: new Vector2()\n\t\t\t\t\t};\n\t\t\t\t\tbreak;\n\n\t\t\t\tcase 'SpotLight':\n\t\t\t\t\tuniforms = {\n\t\t\t\t\t\tshadowBias: 0,\n\t\t\t\t\t\tshadowNormalBias: 0,\n\t\t\t\t\t\tshadowRadius: 1,\n\t\t\t\t\t\tshadowMapSize: new Vector2()\n\t\t\t\t\t};\n\t\t\t\t\tbreak;\n\n\t\t\t\tcase 'PointLight':\n\t\t\t\t\tuniforms = {\n\t\t\t\t\t\tshadowBias: 0,\n\t\t\t\t\t\tshadowNormalBias: 0,\n\t\t\t\t\t\tshadowRadius: 1,\n\t\t\t\t\t\tshadowMapSize: new Vector2(),\n\t\t\t\t\t\tshadowCameraNear: 1,\n\t\t\t\t\t\tshadowCameraFar: 1000\n\t\t\t\t\t};\n\t\t\t\t\tbreak;\n\n\t\t\t\t// TODO (abelnation): set RectAreaLight shadow uniforms\n\n\t\t\t}\n\n\t\t\tlights[ light.id ] = uniforms;\n\n\t\t\treturn uniforms;\n\n\t\t}\n\n\t};\n\n}\n\n\n\nlet nextVersion = 0;\n\nfunction shadowCastingLightsFirst( lightA, lightB ) {\n\n\treturn ( lightB.castShadow ? 1 : 0 ) - ( lightA.castShadow ? 1 : 0 );\n\n}\n\nfunction WebGLLights( extensions, capabilities ) {\n\n\tconst cache = new UniformsCache();\n\n\tconst shadowCache = ShadowUniformsCache();\n\n\tconst state = {\n\n\t\tversion: 0,\n\n\t\thash: {\n\t\t\tdirectionalLength: - 1,\n\t\t\tpointLength: - 1,\n\t\t\tspotLength: - 1,\n\t\t\trectAreaLength: - 1,\n\t\t\themiLength: - 1,\n\n\t\t\tnumDirectionalShadows: - 1,\n\t\t\tnumPointShadows: - 1,\n\t\t\tnumSpotShadows: - 1\n\t\t},\n\n\t\tambient: [ 0, 0, 0 ],\n\t\tprobe: [],\n\t\tdirectional: [],\n\t\tdirectionalShadow: [],\n\t\tdirectionalShadowMap: [],\n\t\tdirectionalShadowMatrix: [],\n\t\tspot: [],\n\t\tspotShadow: [],\n\t\tspotShadowMap: [],\n\t\tspotShadowMatrix: [],\n\t\trectArea: [],\n\t\trectAreaLTC1: null,\n\t\trectAreaLTC2: null,\n\t\tpoint: [],\n\t\tpointShadow: [],\n\t\tpointShadowMap: [],\n\t\tpointShadowMatrix: [],\n\t\themi: []\n\n\t};\n\n\tfor ( let i = 0; i < 9; i ++ ) state.probe.push( new Vector3() );\n\n\tconst vector3 = new Vector3();\n\tconst matrix4 = new Matrix4();\n\tconst matrix42 = new Matrix4();\n\n\tfunction setup( lights ) {\n\n\t\tlet r = 0, g = 0, b = 0;\n\n\t\tfor ( let i = 0; i < 9; i ++ ) state.probe[ i ].set( 0, 0, 0 );\n\n\t\tlet directionalLength = 0;\n\t\tlet pointLength = 0;\n\t\tlet spotLength = 0;\n\t\tlet rectAreaLength = 0;\n\t\tlet hemiLength = 0;\n\n\t\tlet numDirectionalShadows = 0;\n\t\tlet numPointShadows = 0;\n\t\tlet numSpotShadows = 0;\n\n\t\tlights.sort( shadowCastingLightsFirst );\n\n\t\tfor ( let i = 0, l = lights.length; i < l; i ++ ) {\n\n\t\t\tconst light = lights[ i ];\n\n\t\t\tconst color = light.color;\n\t\t\tconst intensity = light.intensity;\n\t\t\tconst distance = light.distance;\n\n\t\t\tconst shadowMap = ( light.shadow && light.shadow.map ) ? light.shadow.map.texture : null;\n\n\t\t\tif ( light.isAmbientLight ) {\n\n\t\t\t\tr += color.r * intensity;\n\t\t\t\tg += color.g * intensity;\n\t\t\t\tb += color.b * intensity;\n\n\t\t\t} else if ( light.isLightProbe ) {\n\n\t\t\t\tfor ( let j = 0; j < 9; j ++ ) {\n\n\t\t\t\t\tstate.probe[ j ].addScaledVector( light.sh.coefficients[ j ], intensity );\n\n\t\t\t\t}\n\n\t\t\t} else if ( light.isDirectionalLight ) {\n\n\t\t\t\tconst uniforms = cache.get( light );\n\n\t\t\t\tuniforms.color.copy( light.color ).multiplyScalar( light.intensity );\n\n\t\t\t\tif ( light.castShadow ) {\n\n\t\t\t\t\tconst shadow = light.shadow;\n\n\t\t\t\t\tconst shadowUniforms = shadowCache.get( light );\n\n\t\t\t\t\tshadowUniforms.shadowBias = shadow.bias;\n\t\t\t\t\tshadowUniforms.shadowNormalBias = shadow.normalBias;\n\t\t\t\t\tshadowUniforms.shadowRadius = shadow.radius;\n\t\t\t\t\tshadowUniforms.shadowMapSize = shadow.mapSize;\n\n\t\t\t\t\tstate.directionalShadow[ directionalLength ] = shadowUniforms;\n\t\t\t\t\tstate.directionalShadowMap[ directionalLength ] = shadowMap;\n\t\t\t\t\tstate.directionalShadowMatrix[ directionalLength ] = light.shadow.matrix;\n\n\t\t\t\t\tnumDirectionalShadows ++;\n\n\t\t\t\t}\n\n\t\t\t\tstate.directional[ directionalLength ] = uniforms;\n\n\t\t\t\tdirectionalLength ++;\n\n\t\t\t} else if ( light.isSpotLight ) {\n\n\t\t\t\tconst uniforms = cache.get( light );\n\n\t\t\t\tuniforms.position.setFromMatrixPosition( light.matrixWorld );\n\n\t\t\t\tuniforms.color.copy( color ).multiplyScalar( intensity );\n\t\t\t\tuniforms.distance = distance;\n\n\t\t\t\tuniforms.coneCos = Math.cos( light.angle );\n\t\t\t\tuniforms.penumbraCos = Math.cos( light.angle * ( 1 - light.penumbra ) );\n\t\t\t\tuniforms.decay = light.decay;\n\n\t\t\t\tif ( light.castShadow ) {\n\n\t\t\t\t\tconst shadow = light.shadow;\n\n\t\t\t\t\tconst shadowUniforms = shadowCache.get( light );\n\n\t\t\t\t\tshadowUniforms.shadowBias = shadow.bias;\n\t\t\t\t\tshadowUniforms.shadowNormalBias = shadow.normalBias;\n\t\t\t\t\tshadowUniforms.shadowRadius = shadow.radius;\n\t\t\t\t\tshadowUniforms.shadowMapSize = shadow.mapSize;\n\n\t\t\t\t\tstate.spotShadow[ spotLength ] = shadowUniforms;\n\t\t\t\t\tstate.spotShadowMap[ spotLength ] = shadowMap;\n\t\t\t\t\tstate.spotShadowMatrix[ spotLength ] = light.shadow.matrix;\n\n\t\t\t\t\tnumSpotShadows ++;\n\n\t\t\t\t}\n\n\t\t\t\tstate.spot[ spotLength ] = uniforms;\n\n\t\t\t\tspotLength ++;\n\n\t\t\t} else if ( light.isRectAreaLight ) {\n\n\t\t\t\tconst uniforms = cache.get( light );\n\n\t\t\t\t// (a) intensity is the total visible light emitted\n\t\t\t\t//uniforms.color.copy( color ).multiplyScalar( intensity / ( light.width * light.height * Math.PI ) );\n\n\t\t\t\t// (b) intensity is the brightness of the light\n\t\t\t\tuniforms.color.copy( color ).multiplyScalar( intensity );\n\n\t\t\t\tuniforms.halfWidth.set( light.width * 0.5, 0.0, 0.0 );\n\t\t\t\tuniforms.halfHeight.set( 0.0, light.height * 0.5, 0.0 );\n\n\t\t\t\tstate.rectArea[ rectAreaLength ] = uniforms;\n\n\t\t\t\trectAreaLength ++;\n\n\t\t\t} else if ( light.isPointLight ) {\n\n\t\t\t\tconst uniforms = cache.get( light );\n\n\t\t\t\tuniforms.color.copy( light.color ).multiplyScalar( light.intensity );\n\t\t\t\tuniforms.distance = light.distance;\n\t\t\t\tuniforms.decay = light.decay;\n\n\t\t\t\tif ( light.castShadow ) {\n\n\t\t\t\t\tconst shadow = light.shadow;\n\n\t\t\t\t\tconst shadowUniforms = shadowCache.get( light );\n\n\t\t\t\t\tshadowUniforms.shadowBias = shadow.bias;\n\t\t\t\t\tshadowUniforms.shadowNormalBias = shadow.normalBias;\n\t\t\t\t\tshadowUniforms.shadowRadius = shadow.radius;\n\t\t\t\t\tshadowUniforms.shadowMapSize = shadow.mapSize;\n\t\t\t\t\tshadowUniforms.shadowCameraNear = shadow.camera.near;\n\t\t\t\t\tshadowUniforms.shadowCameraFar = shadow.camera.far;\n\n\t\t\t\t\tstate.pointShadow[ pointLength ] = shadowUniforms;\n\t\t\t\t\tstate.pointShadowMap[ pointLength ] = shadowMap;\n\t\t\t\t\tstate.pointShadowMatrix[ pointLength ] = light.shadow.matrix;\n\n\t\t\t\t\tnumPointShadows ++;\n\n\t\t\t\t}\n\n\t\t\t\tstate.point[ pointLength ] = uniforms;\n\n\t\t\t\tpointLength ++;\n\n\t\t\t} else if ( light.isHemisphereLight ) {\n\n\t\t\t\tconst uniforms = cache.get( light );\n\n\t\t\t\tuniforms.skyColor.copy( light.color ).multiplyScalar( intensity );\n\t\t\t\tuniforms.groundColor.copy( light.groundColor ).multiplyScalar( intensity );\n\n\t\t\t\tstate.hemi[ hemiLength ] = uniforms;\n\n\t\t\t\themiLength ++;\n\n\t\t\t}\n\n\t\t}\n\n\t\tif ( rectAreaLength > 0 ) {\n\n\t\t\tif ( capabilities.isWebGL2 ) {\n\n\t\t\t\t// WebGL 2\n\n\t\t\t\tstate.rectAreaLTC1 = UniformsLib.LTC_FLOAT_1;\n\t\t\t\tstate.rectAreaLTC2 = UniformsLib.LTC_FLOAT_2;\n\n\t\t\t} else {\n\n\t\t\t\t// WebGL 1\n\n\t\t\t\tif ( extensions.has( 'OES_texture_float_linear' ) === true ) {\n\n\t\t\t\t\tstate.rectAreaLTC1 = UniformsLib.LTC_FLOAT_1;\n\t\t\t\t\tstate.rectAreaLTC2 = UniformsLib.LTC_FLOAT_2;\n\n\t\t\t\t} else if ( extensions.has( 'OES_texture_half_float_linear' ) === true ) {\n\n\t\t\t\t\tstate.rectAreaLTC1 = UniformsLib.LTC_HALF_1;\n\t\t\t\t\tstate.rectAreaLTC2 = UniformsLib.LTC_HALF_2;\n\n\t\t\t\t} else {\n\n\t\t\t\t\tconsole.error( 'THREE.WebGLRenderer: Unable to use RectAreaLight. Missing WebGL extensions.' );\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t}\n\n\t\tstate.ambient[ 0 ] = r;\n\t\tstate.ambient[ 1 ] = g;\n\t\tstate.ambient[ 2 ] = b;\n\n\t\tconst hash = state.hash;\n\n\t\tif ( hash.directionalLength !== directionalLength ||\n\t\t\thash.pointLength !== pointLength ||\n\t\t\thash.spotLength !== spotLength ||\n\t\t\thash.rectAreaLength !== rectAreaLength ||\n\t\t\thash.hemiLength !== hemiLength ||\n\t\t\thash.numDirectionalShadows !== numDirectionalShadows ||\n\t\t\thash.numPointShadows !== numPointShadows ||\n\t\t\thash.numSpotShadows !== numSpotShadows ) {\n\n\t\t\tstate.directional.length = directionalLength;\n\t\t\tstate.spot.length = spotLength;\n\t\t\tstate.rectArea.length = rectAreaLength;\n\t\t\tstate.point.length = pointLength;\n\t\t\tstate.hemi.length = hemiLength;\n\n\t\t\tstate.directionalShadow.length = numDirectionalShadows;\n\t\t\tstate.directionalShadowMap.length = numDirectionalShadows;\n\t\t\tstate.pointShadow.length = numPointShadows;\n\t\t\tstate.pointShadowMap.length = numPointShadows;\n\t\t\tstate.spotShadow.length = numSpotShadows;\n\t\t\tstate.spotShadowMap.length = numSpotShadows;\n\t\t\tstate.directionalShadowMatrix.length = numDirectionalShadows;\n\t\t\tstate.pointShadowMatrix.length = numPointShadows;\n\t\t\tstate.spotShadowMatrix.length = numSpotShadows;\n\n\t\t\thash.directionalLength = directionalLength;\n\t\t\thash.pointLength = pointLength;\n\t\t\thash.spotLength = spotLength;\n\t\t\thash.rectAreaLength = rectAreaLength;\n\t\t\thash.hemiLength = hemiLength;\n\n\t\t\thash.numDirectionalShadows = numDirectionalShadows;\n\t\t\thash.numPointShadows = numPointShadows;\n\t\t\thash.numSpotShadows = numSpotShadows;\n\n\t\t\tstate.version = nextVersion ++;\n\n\t\t}\n\n\t}\n\n\tfunction setupView( lights, camera ) {\n\n\t\tlet directionalLength = 0;\n\t\tlet pointLength = 0;\n\t\tlet spotLength = 0;\n\t\tlet rectAreaLength = 0;\n\t\tlet hemiLength = 0;\n\n\t\tconst viewMatrix = camera.matrixWorldInverse;\n\n\t\tfor ( let i = 0, l = lights.length; i < l; i ++ ) {\n\n\t\t\tconst light = lights[ i ];\n\n\t\t\tif ( light.isDirectionalLight ) {\n\n\t\t\t\tconst uniforms = state.directional[ directionalLength ];\n\n\t\t\t\tuniforms.direction.setFromMatrixPosition( light.matrixWorld );\n\t\t\t\tvector3.setFromMatrixPosition( light.target.matrixWorld );\n\t\t\t\tuniforms.direction.sub( vector3 );\n\t\t\t\tuniforms.direction.transformDirection( viewMatrix );\n\n\t\t\t\tdirectionalLength ++;\n\n\t\t\t} else if ( light.isSpotLight ) {\n\n\t\t\t\tconst uniforms = state.spot[ spotLength ];\n\n\t\t\t\tuniforms.position.setFromMatrixPosition( light.matrixWorld );\n\t\t\t\tuniforms.position.applyMatrix4( viewMatrix );\n\n\t\t\t\tuniforms.direction.setFromMatrixPosition( light.matrixWorld );\n\t\t\t\tvector3.setFromMatrixPosition( light.target.matrixWorld );\n\t\t\t\tuniforms.direction.sub( vector3 );\n\t\t\t\tuniforms.direction.transformDirection( viewMatrix );\n\n\t\t\t\tspotLength ++;\n\n\t\t\t} else if ( light.isRectAreaLight ) {\n\n\t\t\t\tconst uniforms = state.rectArea[ rectAreaLength ];\n\n\t\t\t\tuniforms.position.setFromMatrixPosition( light.matrixWorld );\n\t\t\t\tuniforms.position.applyMatrix4( viewMatrix );\n\n\t\t\t\t// extract local rotation of light to derive width/height half vectors\n\t\t\t\tmatrix42.identity();\n\t\t\t\tmatrix4.copy( light.matrixWorld );\n\t\t\t\tmatrix4.premultiply( viewMatrix );\n\t\t\t\tmatrix42.extractRotation( matrix4 );\n\n\t\t\t\tuniforms.halfWidth.set( light.width * 0.5, 0.0, 0.0 );\n\t\t\t\tuniforms.halfHeight.set( 0.0, light.height * 0.5, 0.0 );\n\n\t\t\t\tuniforms.halfWidth.applyMatrix4( matrix42 );\n\t\t\t\tuniforms.halfHeight.applyMatrix4( matrix42 );\n\n\t\t\t\trectAreaLength ++;\n\n\t\t\t} else if ( light.isPointLight ) {\n\n\t\t\t\tconst uniforms = state.point[ pointLength ];\n\n\t\t\t\tuniforms.position.setFromMatrixPosition( light.matrixWorld );\n\t\t\t\tuniforms.position.applyMatrix4( viewMatrix );\n\n\t\t\t\tpointLength ++;\n\n\t\t\t} else if ( light.isHemisphereLight ) {\n\n\t\t\t\tconst uniforms = state.hemi[ hemiLength ];\n\n\t\t\t\tuniforms.direction.setFromMatrixPosition( light.matrixWorld );\n\t\t\t\tuniforms.direction.transformDirection( viewMatrix );\n\t\t\t\tuniforms.direction.normalize();\n\n\t\t\t\themiLength ++;\n\n\t\t\t}\n\n\t\t}\n\n\t}\n\n\treturn {\n\t\tsetup: setup,\n\t\tsetupView: setupView,\n\t\tstate: state\n\t};\n\n}\n\n\nexport { WebGLLights };\n","import { WebGLLights } from './WebGLLights.js';\n\nfunction WebGLRenderState( extensions, capabilities ) {\n\n\tconst lights = new WebGLLights( extensions, capabilities );\n\n\tconst lightsArray = [];\n\tconst shadowsArray = [];\n\n\tfunction init() {\n\n\t\tlightsArray.length = 0;\n\t\tshadowsArray.length = 0;\n\n\t}\n\n\tfunction pushLight( light ) {\n\n\t\tlightsArray.push( light );\n\n\t}\n\n\tfunction pushShadow( shadowLight ) {\n\n\t\tshadowsArray.push( shadowLight );\n\n\t}\n\n\tfunction setupLights() {\n\n\t\tlights.setup( lightsArray );\n\n\t}\n\n\tfunction setupLightsView( camera ) {\n\n\t\tlights.setupView( lightsArray, camera );\n\n\t}\n\n\tconst state = {\n\t\tlightsArray: lightsArray,\n\t\tshadowsArray: shadowsArray,\n\n\t\tlights: lights\n\t};\n\n\treturn {\n\t\tinit: init,\n\t\tstate: state,\n\t\tsetupLights: setupLights,\n\t\tsetupLightsView: setupLightsView,\n\n\t\tpushLight: pushLight,\n\t\tpushShadow: pushShadow\n\t};\n\n}\n\nfunction WebGLRenderStates( extensions, capabilities ) {\n\n\tlet renderStates = new WeakMap();\n\n\tfunction get( scene, renderCallDepth = 0 ) {\n\n\t\tlet renderState;\n\n\t\tif ( renderStates.has( scene ) === false ) {\n\n\t\t\trenderState = new WebGLRenderState( extensions, capabilities );\n\t\t\trenderStates.set( scene, [ renderState ] );\n\n\t\t} else {\n\n\t\t\tif ( renderCallDepth >= renderStates.get( scene ).length ) {\n\n\t\t\t\trenderState = new WebGLRenderState( extensions, capabilities );\n\t\t\t\trenderStates.get( scene ).push( renderState );\n\n\t\t\t} else {\n\n\t\t\t\trenderState = renderStates.get( scene )[ renderCallDepth ];\n\n\t\t\t}\n\n\t\t}\n\n\t\treturn renderState;\n\n\t}\n\n\tfunction dispose() {\n\n\t\trenderStates = new WeakMap();\n\n\t}\n\n\treturn {\n\t\tget: get,\n\t\tdispose: dispose\n\t};\n\n}\n\n\nexport { WebGLRenderStates };\n","import { Material } from './Material.js';\nimport { BasicDepthPacking } from '../constants.js';\n\n/**\n * parameters = {\n *\n *  opacity: <float>,\n *\n *  map: new THREE.Texture( <Image> ),\n *\n *  alphaMap: new THREE.Texture( <Image> ),\n *\n *  displacementMap: new THREE.Texture( <Image> ),\n *  displacementScale: <float>,\n *  displacementBias: <float>,\n *\n *  wireframe: <boolean>,\n *  wireframeLinewidth: <float>\n * }\n */\n\nclass MeshDepthMaterial extends Material {\n\n\tconstructor( parameters ) {\n\n\t\tsuper();\n\n\t\tthis.type = 'MeshDepthMaterial';\n\n\t\tthis.depthPacking = BasicDepthPacking;\n\n\t\tthis.skinning = false;\n\t\tthis.morphTargets = false;\n\n\t\tthis.map = null;\n\n\t\tthis.alphaMap = null;\n\n\t\tthis.displacementMap = null;\n\t\tthis.displacementScale = 1;\n\t\tthis.displacementBias = 0;\n\n\t\tthis.wireframe = false;\n\t\tthis.wireframeLinewidth = 1;\n\n\t\tthis.fog = false;\n\n\t\tthis.setValues( parameters );\n\n\t}\n\n\tcopy( source ) {\n\n\t\tsuper.copy( source );\n\n\t\tthis.depthPacking = source.depthPacking;\n\n\t\tthis.skinning = source.skinning;\n\t\tthis.morphTargets = source.morphTargets;\n\n\t\tthis.map = source.map;\n\n\t\tthis.alphaMap = source.alphaMap;\n\n\t\tthis.displacementMap = source.displacementMap;\n\t\tthis.displacementScale = source.displacementScale;\n\t\tthis.displacementBias = source.displacementBias;\n\n\t\tthis.wireframe = source.wireframe;\n\t\tthis.wireframeLinewidth = source.wireframeLinewidth;\n\n\t\treturn this;\n\n\t}\n\n}\n\nMeshDepthMaterial.prototype.isMeshDepthMaterial = true;\n\nexport { MeshDepthMaterial };\n","import { Material } from './Material.js';\nimport { Vector3 } from '../math/Vector3.js';\n\n/**\n * parameters = {\n *\n *  referencePosition: <float>,\n *  nearDistance: <float>,\n *  farDistance: <float>,\n *\n *  skinning: <bool>,\n *  morphTargets: <bool>,\n *\n *  map: new THREE.Texture( <Image> ),\n *\n *  alphaMap: new THREE.Texture( <Image> ),\n *\n *  displacementMap: new THREE.Texture( <Image> ),\n *  displacementScale: <float>,\n *  displacementBias: <float>\n *\n * }\n */\n\nclass MeshDistanceMaterial extends Material {\n\n\tconstructor( parameters ) {\n\n\t\tsuper();\n\n\t\tthis.type = 'MeshDistanceMaterial';\n\n\t\tthis.referencePosition = new Vector3();\n\t\tthis.nearDistance = 1;\n\t\tthis.farDistance = 1000;\n\n\t\tthis.skinning = false;\n\t\tthis.morphTargets = false;\n\n\t\tthis.map = null;\n\n\t\tthis.alphaMap = null;\n\n\t\tthis.displacementMap = null;\n\t\tthis.displacementScale = 1;\n\t\tthis.displacementBias = 0;\n\n\t\tthis.fog = false;\n\n\t\tthis.setValues( parameters );\n\n\t}\n\n\tcopy( source ) {\n\n\t\tsuper.copy( source );\n\n\t\tthis.referencePosition.copy( source.referencePosition );\n\t\tthis.nearDistance = source.nearDistance;\n\t\tthis.farDistance = source.farDistance;\n\n\t\tthis.skinning = source.skinning;\n\t\tthis.morphTargets = source.morphTargets;\n\n\t\tthis.map = source.map;\n\n\t\tthis.alphaMap = source.alphaMap;\n\n\t\tthis.displacementMap = source.displacementMap;\n\t\tthis.displacementScale = source.displacementScale;\n\t\tthis.displacementBias = source.displacementBias;\n\n\t\treturn this;\n\n\t}\n\n}\n\nMeshDistanceMaterial.prototype.isMeshDistanceMaterial = true;\n\nexport { MeshDistanceMaterial };\n","import { FrontSide, BackSide, DoubleSide, RGBAFormat, NearestFilter, LinearFilter, PCFShadowMap, VSMShadowMap, RGBADepthPacking, NoBlending } from '../../constants.js';\nimport { WebGLRenderTarget } from '../WebGLRenderTarget.js';\nimport { MeshDepthMaterial } from '../../materials/MeshDepthMaterial.js';\nimport { MeshDistanceMaterial } from '../../materials/MeshDistanceMaterial.js';\nimport { ShaderMaterial } from '../../materials/ShaderMaterial.js';\nimport { BufferAttribute } from '../../core/BufferAttribute.js';\nimport { BufferGeometry } from '../../core/BufferGeometry.js';\nimport { Mesh } from '../../objects/Mesh.js';\nimport { Vector4 } from '../../math/Vector4.js';\nimport { Vector2 } from '../../math/Vector2.js';\nimport { Frustum } from '../../math/Frustum.js';\n\nimport vsm_frag from '../shaders/ShaderLib/vsm_frag.glsl.js';\nimport vsm_vert from '../shaders/ShaderLib/vsm_vert.glsl.js';\n\nfunction WebGLShadowMap( _renderer, _objects, maxTextureSize ) {\n\n\tlet _frustum = new Frustum();\n\n\tconst _shadowMapSize = new Vector2(),\n\t\t_viewportSize = new Vector2(),\n\n\t\t_viewport = new Vector4(),\n\n\t\t_depthMaterials = [],\n\t\t_distanceMaterials = [],\n\n\t\t_materialCache = {};\n\n\tconst shadowSide = { 0: BackSide, 1: FrontSide, 2: DoubleSide };\n\n\tconst shadowMaterialVertical = new ShaderMaterial( {\n\n\t\tdefines: {\n\t\t\tSAMPLE_RATE: 2.0 / 8.0,\n\t\t\tHALF_SAMPLE_RATE: 1.0 / 8.0\n\t\t},\n\n\t\tuniforms: {\n\t\t\tshadow_pass: { value: null },\n\t\t\tresolution: { value: new Vector2() },\n\t\t\tradius: { value: 4.0 }\n\t\t},\n\n\t\tvertexShader: vsm_vert,\n\n\t\tfragmentShader: vsm_frag\n\n\t} );\n\n\tconst shadowMaterialHorizontal = shadowMaterialVertical.clone();\n\tshadowMaterialHorizontal.defines.HORIZONTAL_PASS = 1;\n\n\tconst fullScreenTri = new BufferGeometry();\n\tfullScreenTri.setAttribute(\n\t\t'position',\n\t\tnew BufferAttribute(\n\t\t\tnew Float32Array( [ - 1, - 1, 0.5, 3, - 1, 0.5, - 1, 3, 0.5 ] ),\n\t\t\t3\n\t\t)\n\t);\n\n\tconst fullScreenMesh = new Mesh( fullScreenTri, shadowMaterialVertical );\n\n\tconst scope = this;\n\n\tthis.enabled = false;\n\n\tthis.autoUpdate = true;\n\tthis.needsUpdate = false;\n\n\tthis.type = PCFShadowMap;\n\n\tthis.render = function ( lights, scene, camera ) {\n\n\t\tif ( scope.enabled === false ) return;\n\t\tif ( scope.autoUpdate === false && scope.needsUpdate === false ) return;\n\n\t\tif ( lights.length === 0 ) return;\n\n\t\tconst currentRenderTarget = _renderer.getRenderTarget();\n\t\tconst activeCubeFace = _renderer.getActiveCubeFace();\n\t\tconst activeMipmapLevel = _renderer.getActiveMipmapLevel();\n\n\t\tconst _state = _renderer.state;\n\n\t\t// Set GL state for depth map.\n\t\t_state.setBlending( NoBlending );\n\t\t_state.buffers.color.setClear( 1, 1, 1, 1 );\n\t\t_state.buffers.depth.setTest( true );\n\t\t_state.setScissorTest( false );\n\n\t\t// render depth map\n\n\t\tfor ( let i = 0, il = lights.length; i < il; i ++ ) {\n\n\t\t\tconst light = lights[ i ];\n\t\t\tconst shadow = light.shadow;\n\n\t\t\tif ( shadow === undefined ) {\n\n\t\t\t\tconsole.warn( 'THREE.WebGLShadowMap:', light, 'has no shadow.' );\n\t\t\t\tcontinue;\n\n\t\t\t}\n\n\t\t\tif ( shadow.autoUpdate === false && shadow.needsUpdate === false ) continue;\n\n\t\t\t_shadowMapSize.copy( shadow.mapSize );\n\n\t\t\tconst shadowFrameExtents = shadow.getFrameExtents();\n\n\t\t\t_shadowMapSize.multiply( shadowFrameExtents );\n\n\t\t\t_viewportSize.copy( shadow.mapSize );\n\n\t\t\tif ( _shadowMapSize.x > maxTextureSize || _shadowMapSize.y > maxTextureSize ) {\n\n\t\t\t\tif ( _shadowMapSize.x > maxTextureSize ) {\n\n\t\t\t\t\t_viewportSize.x = Math.floor( maxTextureSize / shadowFrameExtents.x );\n\t\t\t\t\t_shadowMapSize.x = _viewportSize.x * shadowFrameExtents.x;\n\t\t\t\t\tshadow.mapSize.x = _viewportSize.x;\n\n\t\t\t\t}\n\n\t\t\t\tif ( _shadowMapSize.y > maxTextureSize ) {\n\n\t\t\t\t\t_viewportSize.y = Math.floor( maxTextureSize / shadowFrameExtents.y );\n\t\t\t\t\t_shadowMapSize.y = _viewportSize.y * shadowFrameExtents.y;\n\t\t\t\t\tshadow.mapSize.y = _viewportSize.y;\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t\tif ( shadow.map === null && ! shadow.isPointLightShadow && this.type === VSMShadowMap ) {\n\n\t\t\t\tconst pars = { minFilter: LinearFilter, magFilter: LinearFilter, format: RGBAFormat };\n\n\t\t\t\tshadow.map = new WebGLRenderTarget( _shadowMapSize.x, _shadowMapSize.y, pars );\n\t\t\t\tshadow.map.texture.name = light.name + '.shadowMap';\n\n\t\t\t\tshadow.mapPass = new WebGLRenderTarget( _shadowMapSize.x, _shadowMapSize.y, pars );\n\n\t\t\t\tshadow.camera.updateProjectionMatrix();\n\n\t\t\t}\n\n\t\t\tif ( shadow.map === null ) {\n\n\t\t\t\tconst pars = { minFilter: NearestFilter, magFilter: NearestFilter, format: RGBAFormat };\n\n\t\t\t\tshadow.map = new WebGLRenderTarget( _shadowMapSize.x, _shadowMapSize.y, pars );\n\t\t\t\tshadow.map.texture.name = light.name + '.shadowMap';\n\n\t\t\t\tshadow.camera.updateProjectionMatrix();\n\n\t\t\t}\n\n\t\t\t_renderer.setRenderTarget( shadow.map );\n\t\t\t_renderer.clear();\n\n\t\t\tconst viewportCount = shadow.getViewportCount();\n\n\t\t\tfor ( let vp = 0; vp < viewportCount; vp ++ ) {\n\n\t\t\t\tconst viewport = shadow.getViewport( vp );\n\n\t\t\t\t_viewport.set(\n\t\t\t\t\t_viewportSize.x * viewport.x,\n\t\t\t\t\t_viewportSize.y * viewport.y,\n\t\t\t\t\t_viewportSize.x * viewport.z,\n\t\t\t\t\t_viewportSize.y * viewport.w\n\t\t\t\t);\n\n\t\t\t\t_state.viewport( _viewport );\n\n\t\t\t\tshadow.updateMatrices( light, vp );\n\n\t\t\t\t_frustum = shadow.getFrustum();\n\n\t\t\t\trenderObject( scene, camera, shadow.camera, light, this.type );\n\n\t\t\t}\n\n\t\t\t// do blur pass for VSM\n\n\t\t\tif ( ! shadow.isPointLightShadow && this.type === VSMShadowMap ) {\n\n\t\t\t\tVSMPass( shadow, camera );\n\n\t\t\t}\n\n\t\t\tshadow.needsUpdate = false;\n\n\t\t}\n\n\t\tscope.needsUpdate = false;\n\n\t\t_renderer.setRenderTarget( currentRenderTarget, activeCubeFace, activeMipmapLevel );\n\n\t};\n\n\tfunction VSMPass( shadow, camera ) {\n\n\t\tconst geometry = _objects.update( fullScreenMesh );\n\n\t\t// vertical pass\n\n\t\tshadowMaterialVertical.uniforms.shadow_pass.value = shadow.map.texture;\n\t\tshadowMaterialVertical.uniforms.resolution.value = shadow.mapSize;\n\t\tshadowMaterialVertical.uniforms.radius.value = shadow.radius;\n\t\t_renderer.setRenderTarget( shadow.mapPass );\n\t\t_renderer.clear();\n\t\t_renderer.renderBufferDirect( camera, null, geometry, shadowMaterialVertical, fullScreenMesh, null );\n\n\t\t// horizontal pass\n\n\t\tshadowMaterialHorizontal.uniforms.shadow_pass.value = shadow.mapPass.texture;\n\t\tshadowMaterialHorizontal.uniforms.resolution.value = shadow.mapSize;\n\t\tshadowMaterialHorizontal.uniforms.radius.value = shadow.radius;\n\t\t_renderer.setRenderTarget( shadow.map );\n\t\t_renderer.clear();\n\t\t_renderer.renderBufferDirect( camera, null, geometry, shadowMaterialHorizontal, fullScreenMesh, null );\n\n\t}\n\n\tfunction getDepthMaterialVariant( useMorphing, useSkinning, useInstancing ) {\n\n\t\tconst index = useMorphing << 0 | useSkinning << 1 | useInstancing << 2;\n\n\t\tlet material = _depthMaterials[ index ];\n\n\t\tif ( material === undefined ) {\n\n\t\t\tmaterial = new MeshDepthMaterial( {\n\n\t\t\t\tdepthPacking: RGBADepthPacking,\n\n\t\t\t\tmorphTargets: useMorphing,\n\t\t\t\tskinning: useSkinning\n\n\t\t\t} );\n\n\t\t\t_depthMaterials[ index ] = material;\n\n\t\t}\n\n\t\treturn material;\n\n\t}\n\n\tfunction getDistanceMaterialVariant( useMorphing, useSkinning, useInstancing ) {\n\n\t\tconst index = useMorphing << 0 | useSkinning << 1 | useInstancing << 2;\n\n\t\tlet material = _distanceMaterials[ index ];\n\n\t\tif ( material === undefined ) {\n\n\t\t\tmaterial = new MeshDistanceMaterial( {\n\n\t\t\t\tmorphTargets: useMorphing,\n\t\t\t\tskinning: useSkinning\n\n\t\t\t} );\n\n\t\t\t_distanceMaterials[ index ] = material;\n\n\t\t}\n\n\t\treturn material;\n\n\t}\n\n\tfunction getDepthMaterial( object, geometry, material, light, shadowCameraNear, shadowCameraFar, type ) {\n\n\t\tlet result = null;\n\n\t\tlet getMaterialVariant = getDepthMaterialVariant;\n\t\tlet customMaterial = object.customDepthMaterial;\n\n\t\tif ( light.isPointLight === true ) {\n\n\t\t\tgetMaterialVariant = getDistanceMaterialVariant;\n\t\t\tcustomMaterial = object.customDistanceMaterial;\n\n\t\t}\n\n\t\tif ( customMaterial === undefined ) {\n\n\t\t\tlet useMorphing = false;\n\n\t\t\tif ( material.morphTargets === true ) {\n\n\t\t\t\tuseMorphing = geometry.morphAttributes && geometry.morphAttributes.position && geometry.morphAttributes.position.length > 0;\n\n\t\t\t}\n\n\t\t\tlet useSkinning = false;\n\n\t\t\tif ( object.isSkinnedMesh === true ) {\n\n\t\t\t\tif ( material.skinning === true ) {\n\n\t\t\t\t\tuseSkinning = true;\n\n\t\t\t\t} else {\n\n\t\t\t\t\tconsole.warn( 'THREE.WebGLShadowMap: THREE.SkinnedMesh with material.skinning set to false:', object );\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t\tconst useInstancing = object.isInstancedMesh === true;\n\n\t\t\tresult = getMaterialVariant( useMorphing, useSkinning, useInstancing );\n\n\t\t} else {\n\n\t\t\tresult = customMaterial;\n\n\t\t}\n\n\t\tif ( _renderer.localClippingEnabled &&\n\t\t\t\tmaterial.clipShadows === true &&\n\t\t\t\tmaterial.clippingPlanes.length !== 0 ) {\n\n\t\t\t// in this case we need a unique material instance reflecting the\n\t\t\t// appropriate state\n\n\t\t\tconst keyA = result.uuid, keyB = material.uuid;\n\n\t\t\tlet materialsForVariant = _materialCache[ keyA ];\n\n\t\t\tif ( materialsForVariant === undefined ) {\n\n\t\t\t\tmaterialsForVariant = {};\n\t\t\t\t_materialCache[ keyA ] = materialsForVariant;\n\n\t\t\t}\n\n\t\t\tlet cachedMaterial = materialsForVariant[ keyB ];\n\n\t\t\tif ( cachedMaterial === undefined ) {\n\n\t\t\t\tcachedMaterial = result.clone();\n\t\t\t\tmaterialsForVariant[ keyB ] = cachedMaterial;\n\n\t\t\t}\n\n\t\t\tresult = cachedMaterial;\n\n\t\t}\n\n\t\tresult.visible = material.visible;\n\t\tresult.wireframe = material.wireframe;\n\n\t\tif ( type === VSMShadowMap ) {\n\n\t\t\tresult.side = ( material.shadowSide !== null ) ? material.shadowSide : material.side;\n\n\t\t} else {\n\n\t\t\tresult.side = ( material.shadowSide !== null ) ? material.shadowSide : shadowSide[ material.side ];\n\n\t\t}\n\n\t\tresult.clipShadows = material.clipShadows;\n\t\tresult.clippingPlanes = material.clippingPlanes;\n\t\tresult.clipIntersection = material.clipIntersection;\n\n\t\tresult.wireframeLinewidth = material.wireframeLinewidth;\n\t\tresult.linewidth = material.linewidth;\n\n\t\tif ( light.isPointLight === true && result.isMeshDistanceMaterial === true ) {\n\n\t\t\tresult.referencePosition.setFromMatrixPosition( light.matrixWorld );\n\t\t\tresult.nearDistance = shadowCameraNear;\n\t\t\tresult.farDistance = shadowCameraFar;\n\n\t\t}\n\n\t\treturn result;\n\n\t}\n\n\tfunction renderObject( object, camera, shadowCamera, light, type ) {\n\n\t\tif ( object.visible === false ) return;\n\n\t\tconst visible = object.layers.test( camera.layers );\n\n\t\tif ( visible && ( object.isMesh || object.isLine || object.isPoints ) ) {\n\n\t\t\tif ( ( object.castShadow || ( object.receiveShadow && type === VSMShadowMap ) ) && ( ! object.frustumCulled || _frustum.intersectsObject( object ) ) ) {\n\n\t\t\t\tobject.modelViewMatrix.multiplyMatrices( shadowCamera.matrixWorldInverse, object.matrixWorld );\n\n\t\t\t\tconst geometry = _objects.update( object );\n\t\t\t\tconst material = object.material;\n\n\t\t\t\tif ( Array.isArray( material ) ) {\n\n\t\t\t\t\tconst groups = geometry.groups;\n\n\t\t\t\t\tfor ( let k = 0, kl = groups.length; k < kl; k ++ ) {\n\n\t\t\t\t\t\tconst group = groups[ k ];\n\t\t\t\t\t\tconst groupMaterial = material[ group.materialIndex ];\n\n\t\t\t\t\t\tif ( groupMaterial && groupMaterial.visible ) {\n\n\t\t\t\t\t\t\tconst depthMaterial = getDepthMaterial( object, geometry, groupMaterial, light, shadowCamera.near, shadowCamera.far, type );\n\n\t\t\t\t\t\t\t_renderer.renderBufferDirect( shadowCamera, null, geometry, depthMaterial, object, group );\n\n\t\t\t\t\t\t}\n\n\t\t\t\t\t}\n\n\t\t\t\t} else if ( material.visible ) {\n\n\t\t\t\t\tconst depthMaterial = getDepthMaterial( object, geometry, material, light, shadowCamera.near, shadowCamera.far, type );\n\n\t\t\t\t\t_renderer.renderBufferDirect( shadowCamera, null, geometry, depthMaterial, object, null );\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t}\n\n\t\tconst children = object.children;\n\n\t\tfor ( let i = 0, l = children.length; i < l; i ++ ) {\n\n\t\t\trenderObject( children[ i ], camera, shadowCamera, light, type );\n\n\t\t}\n\n\t}\n\n}\n\n\nexport { WebGLShadowMap };\n","export default /* glsl */`\nvoid main() {\n\n\tgl_Position = vec4( position, 1.0 );\n\n}\n`;\n","export default /* glsl */`\nuniform sampler2D shadow_pass;\nuniform vec2 resolution;\nuniform float radius;\n\n#include <packing>\n\nvoid main() {\n\n\tfloat mean = 0.0;\n\tfloat squared_mean = 0.0;\n\n\t// This seems totally useless but it's a crazy work around for a Adreno compiler bug\n\tfloat depth = unpackRGBAToDepth( texture2D( shadow_pass, ( gl_FragCoord.xy ) / resolution ) );\n\n\tfor ( float i = -1.0; i < 1.0 ; i += SAMPLE_RATE) {\n\n\t\t#ifdef HORIZONTAL_PASS\n\n\t\t\tvec2 distribution = unpackRGBATo2Half( texture2D( shadow_pass, ( gl_FragCoord.xy + vec2( i, 0.0 ) * radius ) / resolution ) );\n\t\t\tmean += distribution.x;\n\t\t\tsquared_mean += distribution.y * distribution.y + distribution.x * distribution.x;\n\n\t\t#else\n\n\t\t\tfloat depth = unpackRGBAToDepth( texture2D( shadow_pass, ( gl_FragCoord.xy + vec2( 0.0, i ) * radius ) / resolution ) );\n\t\t\tmean += depth;\n\t\t\tsquared_mean += depth * depth;\n\n\t\t#endif\n\n\t}\n\n\tmean = mean * HALF_SAMPLE_RATE;\n\tsquared_mean = squared_mean * HALF_SAMPLE_RATE;\n\n\tfloat std_dev = sqrt( squared_mean - mean * mean );\n\n\tgl_FragColor = pack2HalfToRGBA( vec2( mean, std_dev ) );\n\n}\n`;\n","import { NotEqualDepth, GreaterDepth, GreaterEqualDepth, EqualDepth, LessEqualDepth, LessDepth, AlwaysDepth, NeverDepth, CullFaceFront, CullFaceBack, CullFaceNone, DoubleSide, BackSide, CustomBlending, MultiplyBlending, SubtractiveBlending, AdditiveBlending, NoBlending, NormalBlending, AddEquation, SubtractEquation, ReverseSubtractEquation, MinEquation, MaxEquation, ZeroFactor, OneFactor, SrcColorFactor, SrcAlphaFactor, SrcAlphaSaturateFactor, DstColorFactor, DstAlphaFactor, OneMinusSrcColorFactor, OneMinusSrcAlphaFactor, OneMinusDstColorFactor, OneMinusDstAlphaFactor } from '../../constants.js';\nimport { Vector4 } from '../../math/Vector4.js';\n\nfunction WebGLState( gl, extensions, capabilities ) {\n\n\tconst isWebGL2 = capabilities.isWebGL2;\n\n\tfunction ColorBuffer() {\n\n\t\tlet locked = false;\n\n\t\tconst color = new Vector4();\n\t\tlet currentColorMask = null;\n\t\tconst currentColorClear = new Vector4( 0, 0, 0, 0 );\n\n\t\treturn {\n\n\t\t\tsetMask: function ( colorMask ) {\n\n\t\t\t\tif ( currentColorMask !== colorMask && ! locked ) {\n\n\t\t\t\t\tgl.colorMask( colorMask, colorMask, colorMask, colorMask );\n\t\t\t\t\tcurrentColorMask = colorMask;\n\n\t\t\t\t}\n\n\t\t\t},\n\n\t\t\tsetLocked: function ( lock ) {\n\n\t\t\t\tlocked = lock;\n\n\t\t\t},\n\n\t\t\tsetClear: function ( r, g, b, a, premultipliedAlpha ) {\n\n\t\t\t\tif ( premultipliedAlpha === true ) {\n\n\t\t\t\t\tr *= a; g *= a; b *= a;\n\n\t\t\t\t}\n\n\t\t\t\tcolor.set( r, g, b, a );\n\n\t\t\t\tif ( currentColorClear.equals( color ) === false ) {\n\n\t\t\t\t\tgl.clearColor( r, g, b, a );\n\t\t\t\t\tcurrentColorClear.copy( color );\n\n\t\t\t\t}\n\n\t\t\t},\n\n\t\t\treset: function () {\n\n\t\t\t\tlocked = false;\n\n\t\t\t\tcurrentColorMask = null;\n\t\t\t\tcurrentColorClear.set( - 1, 0, 0, 0 ); // set to invalid state\n\n\t\t\t}\n\n\t\t};\n\n\t}\n\n\tfunction DepthBuffer() {\n\n\t\tlet locked = false;\n\n\t\tlet currentDepthMask = null;\n\t\tlet currentDepthFunc = null;\n\t\tlet currentDepthClear = null;\n\n\t\treturn {\n\n\t\t\tsetTest: function ( depthTest ) {\n\n\t\t\t\tif ( depthTest ) {\n\n\t\t\t\t\tenable( gl.DEPTH_TEST );\n\n\t\t\t\t} else {\n\n\t\t\t\t\tdisable( gl.DEPTH_TEST );\n\n\t\t\t\t}\n\n\t\t\t},\n\n\t\t\tsetMask: function ( depthMask ) {\n\n\t\t\t\tif ( currentDepthMask !== depthMask && ! locked ) {\n\n\t\t\t\t\tgl.depthMask( depthMask );\n\t\t\t\t\tcurrentDepthMask = depthMask;\n\n\t\t\t\t}\n\n\t\t\t},\n\n\t\t\tsetFunc: function ( depthFunc ) {\n\n\t\t\t\tif ( currentDepthFunc !== depthFunc ) {\n\n\t\t\t\t\tif ( depthFunc ) {\n\n\t\t\t\t\t\tswitch ( depthFunc ) {\n\n\t\t\t\t\t\t\tcase NeverDepth:\n\n\t\t\t\t\t\t\t\tgl.depthFunc( gl.NEVER );\n\t\t\t\t\t\t\t\tbreak;\n\n\t\t\t\t\t\t\tcase AlwaysDepth:\n\n\t\t\t\t\t\t\t\tgl.depthFunc( gl.ALWAYS );\n\t\t\t\t\t\t\t\tbreak;\n\n\t\t\t\t\t\t\tcase LessDepth:\n\n\t\t\t\t\t\t\t\tgl.depthFunc( gl.LESS );\n\t\t\t\t\t\t\t\tbreak;\n\n\t\t\t\t\t\t\tcase LessEqualDepth:\n\n\t\t\t\t\t\t\t\tgl.depthFunc( gl.LEQUAL );\n\t\t\t\t\t\t\t\tbreak;\n\n\t\t\t\t\t\t\tcase EqualDepth:\n\n\t\t\t\t\t\t\t\tgl.depthFunc( gl.EQUAL );\n\t\t\t\t\t\t\t\tbreak;\n\n\t\t\t\t\t\t\tcase GreaterEqualDepth:\n\n\t\t\t\t\t\t\t\tgl.depthFunc( gl.GEQUAL );\n\t\t\t\t\t\t\t\tbreak;\n\n\t\t\t\t\t\t\tcase GreaterDepth:\n\n\t\t\t\t\t\t\t\tgl.depthFunc( gl.GREATER );\n\t\t\t\t\t\t\t\tbreak;\n\n\t\t\t\t\t\t\tcase NotEqualDepth:\n\n\t\t\t\t\t\t\t\tgl.depthFunc( gl.NOTEQUAL );\n\t\t\t\t\t\t\t\tbreak;\n\n\t\t\t\t\t\t\tdefault:\n\n\t\t\t\t\t\t\t\tgl.depthFunc( gl.LEQUAL );\n\n\t\t\t\t\t\t}\n\n\t\t\t\t\t} else {\n\n\t\t\t\t\t\tgl.depthFunc( gl.LEQUAL );\n\n\t\t\t\t\t}\n\n\t\t\t\t\tcurrentDepthFunc = depthFunc;\n\n\t\t\t\t}\n\n\t\t\t},\n\n\t\t\tsetLocked: function ( lock ) {\n\n\t\t\t\tlocked = lock;\n\n\t\t\t},\n\n\t\t\tsetClear: function ( depth ) {\n\n\t\t\t\tif ( currentDepthClear !== depth ) {\n\n\t\t\t\t\tgl.clearDepth( depth );\n\t\t\t\t\tcurrentDepthClear = depth;\n\n\t\t\t\t}\n\n\t\t\t},\n\n\t\t\treset: function () {\n\n\t\t\t\tlocked = false;\n\n\t\t\t\tcurrentDepthMask = null;\n\t\t\t\tcurrentDepthFunc = null;\n\t\t\t\tcurrentDepthClear = null;\n\n\t\t\t}\n\n\t\t};\n\n\t}\n\n\tfunction StencilBuffer() {\n\n\t\tlet locked = false;\n\n\t\tlet currentStencilMask = null;\n\t\tlet currentStencilFunc = null;\n\t\tlet currentStencilRef = null;\n\t\tlet currentStencilFuncMask = null;\n\t\tlet currentStencilFail = null;\n\t\tlet currentStencilZFail = null;\n\t\tlet currentStencilZPass = null;\n\t\tlet currentStencilClear = null;\n\n\t\treturn {\n\n\t\t\tsetTest: function ( stencilTest ) {\n\n\t\t\t\tif ( ! locked ) {\n\n\t\t\t\t\tif ( stencilTest ) {\n\n\t\t\t\t\t\tenable( gl.STENCIL_TEST );\n\n\t\t\t\t\t} else {\n\n\t\t\t\t\t\tdisable( gl.STENCIL_TEST );\n\n\t\t\t\t\t}\n\n\t\t\t\t}\n\n\t\t\t},\n\n\t\t\tsetMask: function ( stencilMask ) {\n\n\t\t\t\tif ( currentStencilMask !== stencilMask && ! locked ) {\n\n\t\t\t\t\tgl.stencilMask( stencilMask );\n\t\t\t\t\tcurrentStencilMask = stencilMask;\n\n\t\t\t\t}\n\n\t\t\t},\n\n\t\t\tsetFunc: function ( stencilFunc, stencilRef, stencilMask ) {\n\n\t\t\t\tif ( currentStencilFunc !== stencilFunc ||\n\t\t\t\t     currentStencilRef !== stencilRef ||\n\t\t\t\t     currentStencilFuncMask !== stencilMask ) {\n\n\t\t\t\t\tgl.stencilFunc( stencilFunc, stencilRef, stencilMask );\n\n\t\t\t\t\tcurrentStencilFunc = stencilFunc;\n\t\t\t\t\tcurrentStencilRef = stencilRef;\n\t\t\t\t\tcurrentStencilFuncMask = stencilMask;\n\n\t\t\t\t}\n\n\t\t\t},\n\n\t\t\tsetOp: function ( stencilFail, stencilZFail, stencilZPass ) {\n\n\t\t\t\tif ( currentStencilFail !== stencilFail ||\n\t\t\t\t     currentStencilZFail !== stencilZFail ||\n\t\t\t\t     currentStencilZPass !== stencilZPass ) {\n\n\t\t\t\t\tgl.stencilOp( stencilFail, stencilZFail, stencilZPass );\n\n\t\t\t\t\tcurrentStencilFail = stencilFail;\n\t\t\t\t\tcurrentStencilZFail = stencilZFail;\n\t\t\t\t\tcurrentStencilZPass = stencilZPass;\n\n\t\t\t\t}\n\n\t\t\t},\n\n\t\t\tsetLocked: function ( lock ) {\n\n\t\t\t\tlocked = lock;\n\n\t\t\t},\n\n\t\t\tsetClear: function ( stencil ) {\n\n\t\t\t\tif ( currentStencilClear !== stencil ) {\n\n\t\t\t\t\tgl.clearStencil( stencil );\n\t\t\t\t\tcurrentStencilClear = stencil;\n\n\t\t\t\t}\n\n\t\t\t},\n\n\t\t\treset: function () {\n\n\t\t\t\tlocked = false;\n\n\t\t\t\tcurrentStencilMask = null;\n\t\t\t\tcurrentStencilFunc = null;\n\t\t\t\tcurrentStencilRef = null;\n\t\t\t\tcurrentStencilFuncMask = null;\n\t\t\t\tcurrentStencilFail = null;\n\t\t\t\tcurrentStencilZFail = null;\n\t\t\t\tcurrentStencilZPass = null;\n\t\t\t\tcurrentStencilClear = null;\n\n\t\t\t}\n\n\t\t};\n\n\t}\n\n\t//\n\n\tconst colorBuffer = new ColorBuffer();\n\tconst depthBuffer = new DepthBuffer();\n\tconst stencilBuffer = new StencilBuffer();\n\n\tlet enabledCapabilities = {};\n\n\tlet currentProgram = null;\n\n\tlet currentBlendingEnabled = false;\n\tlet currentBlending = null;\n\tlet currentBlendEquation = null;\n\tlet currentBlendSrc = null;\n\tlet currentBlendDst = null;\n\tlet currentBlendEquationAlpha = null;\n\tlet currentBlendSrcAlpha = null;\n\tlet currentBlendDstAlpha = null;\n\tlet currentPremultipledAlpha = false;\n\n\tlet currentFlipSided = null;\n\tlet currentCullFace = null;\n\n\tlet currentLineWidth = null;\n\n\tlet currentPolygonOffsetFactor = null;\n\tlet currentPolygonOffsetUnits = null;\n\n\tconst maxTextures = gl.getParameter( gl.MAX_COMBINED_TEXTURE_IMAGE_UNITS );\n\n\tlet lineWidthAvailable = false;\n\tlet version = 0;\n\tconst glVersion = gl.getParameter( gl.VERSION );\n\n\tif ( glVersion.indexOf( 'WebGL' ) !== - 1 ) {\n\n\t\tversion = parseFloat( /^WebGL (\\d)/.exec( glVersion )[ 1 ] );\n\t\tlineWidthAvailable = ( version >= 1.0 );\n\n\t} else if ( glVersion.indexOf( 'OpenGL ES' ) !== - 1 ) {\n\n\t\tversion = parseFloat( /^OpenGL ES (\\d)/.exec( glVersion )[ 1 ] );\n\t\tlineWidthAvailable = ( version >= 2.0 );\n\n\t}\n\n\tlet currentTextureSlot = null;\n\tlet currentBoundTextures = {};\n\n\tconst currentScissor = new Vector4();\n\tconst currentViewport = new Vector4();\n\n\tfunction createTexture( type, target, count ) {\n\n\t\tconst data = new Uint8Array( 4 ); // 4 is required to match default unpack alignment of 4.\n\t\tconst texture = gl.createTexture();\n\n\t\tgl.bindTexture( type, texture );\n\t\tgl.texParameteri( type, gl.TEXTURE_MIN_FILTER, gl.NEAREST );\n\t\tgl.texParameteri( type, gl.TEXTURE_MAG_FILTER, gl.NEAREST );\n\n\t\tfor ( let i = 0; i < count; i ++ ) {\n\n\t\t\tgl.texImage2D( target + i, 0, gl.RGBA, 1, 1, 0, gl.RGBA, gl.UNSIGNED_BYTE, data );\n\n\t\t}\n\n\t\treturn texture;\n\n\t}\n\n\tconst emptyTextures = {};\n\temptyTextures[ gl.TEXTURE_2D ] = createTexture( gl.TEXTURE_2D, gl.TEXTURE_2D, 1 );\n\temptyTextures[ gl.TEXTURE_CUBE_MAP ] = createTexture( gl.TEXTURE_CUBE_MAP, gl.TEXTURE_CUBE_MAP_POSITIVE_X, 6 );\n\n\t// init\n\n\tcolorBuffer.setClear( 0, 0, 0, 1 );\n\tdepthBuffer.setClear( 1 );\n\tstencilBuffer.setClear( 0 );\n\n\tenable( gl.DEPTH_TEST );\n\tdepthBuffer.setFunc( LessEqualDepth );\n\n\tsetFlipSided( false );\n\tsetCullFace( CullFaceBack );\n\tenable( gl.CULL_FACE );\n\n\tsetBlending( NoBlending );\n\n\t//\n\n\tfunction enable( id ) {\n\n\t\tif ( enabledCapabilities[ id ] !== true ) {\n\n\t\t\tgl.enable( id );\n\t\t\tenabledCapabilities[ id ] = true;\n\n\t\t}\n\n\t}\n\n\tfunction disable( id ) {\n\n\t\tif ( enabledCapabilities[ id ] !== false ) {\n\n\t\t\tgl.disable( id );\n\t\t\tenabledCapabilities[ id ] = false;\n\n\t\t}\n\n\t}\n\n\tfunction useProgram( program ) {\n\n\t\tif ( currentProgram !== program ) {\n\n\t\t\tgl.useProgram( program );\n\n\t\t\tcurrentProgram = program;\n\n\t\t\treturn true;\n\n\t\t}\n\n\t\treturn false;\n\n\t}\n\n\tconst equationToGL = {\n\t\t[ AddEquation ]: gl.FUNC_ADD,\n\t\t[ SubtractEquation ]: gl.FUNC_SUBTRACT,\n\t\t[ ReverseSubtractEquation ]: gl.FUNC_REVERSE_SUBTRACT\n\t};\n\n\tif ( isWebGL2 ) {\n\n\t\tequationToGL[ MinEquation ] = gl.MIN;\n\t\tequationToGL[ MaxEquation ] = gl.MAX;\n\n\t} else {\n\n\t\tconst extension = extensions.get( 'EXT_blend_minmax' );\n\n\t\tif ( extension !== null ) {\n\n\t\t\tequationToGL[ MinEquation ] = extension.MIN_EXT;\n\t\t\tequationToGL[ MaxEquation ] = extension.MAX_EXT;\n\n\t\t}\n\n\t}\n\n\tconst factorToGL = {\n\t\t[ ZeroFactor ]: gl.ZERO,\n\t\t[ OneFactor ]: gl.ONE,\n\t\t[ SrcColorFactor ]: gl.SRC_COLOR,\n\t\t[ SrcAlphaFactor ]: gl.SRC_ALPHA,\n\t\t[ SrcAlphaSaturateFactor ]: gl.SRC_ALPHA_SATURATE,\n\t\t[ DstColorFactor ]: gl.DST_COLOR,\n\t\t[ DstAlphaFactor ]: gl.DST_ALPHA,\n\t\t[ OneMinusSrcColorFactor ]: gl.ONE_MINUS_SRC_COLOR,\n\t\t[ OneMinusSrcAlphaFactor ]: gl.ONE_MINUS_SRC_ALPHA,\n\t\t[ OneMinusDstColorFactor ]: gl.ONE_MINUS_DST_COLOR,\n\t\t[ OneMinusDstAlphaFactor ]: gl.ONE_MINUS_DST_ALPHA\n\t};\n\n\tfunction setBlending( blending, blendEquation, blendSrc, blendDst, blendEquationAlpha, blendSrcAlpha, blendDstAlpha, premultipliedAlpha ) {\n\n\t\tif ( blending === NoBlending ) {\n\n\t\t\tif ( currentBlendingEnabled === true ) {\n\n\t\t\t\tdisable( gl.BLEND );\n\t\t\t\tcurrentBlendingEnabled = false;\n\n\t\t\t}\n\n\t\t\treturn;\n\n\t\t}\n\n\t\tif ( currentBlendingEnabled === false ) {\n\n\t\t\tenable( gl.BLEND );\n\t\t\tcurrentBlendingEnabled = true;\n\n\t\t}\n\n\t\tif ( blending !== CustomBlending ) {\n\n\t\t\tif ( blending !== currentBlending || premultipliedAlpha !== currentPremultipledAlpha ) {\n\n\t\t\t\tif ( currentBlendEquation !== AddEquation || currentBlendEquationAlpha !== AddEquation ) {\n\n\t\t\t\t\tgl.blendEquation( gl.FUNC_ADD );\n\n\t\t\t\t\tcurrentBlendEquation = AddEquation;\n\t\t\t\t\tcurrentBlendEquationAlpha = AddEquation;\n\n\t\t\t\t}\n\n\t\t\t\tif ( premultipliedAlpha ) {\n\n\t\t\t\t\tswitch ( blending ) {\n\n\t\t\t\t\t\tcase NormalBlending:\n\t\t\t\t\t\t\tgl.blendFuncSeparate( gl.ONE, gl.ONE_MINUS_SRC_ALPHA, gl.ONE, gl.ONE_MINUS_SRC_ALPHA );\n\t\t\t\t\t\t\tbreak;\n\n\t\t\t\t\t\tcase AdditiveBlending:\n\t\t\t\t\t\t\tgl.blendFunc( gl.ONE, gl.ONE );\n\t\t\t\t\t\t\tbreak;\n\n\t\t\t\t\t\tcase SubtractiveBlending:\n\t\t\t\t\t\t\tgl.blendFuncSeparate( gl.ZERO, gl.ZERO, gl.ONE_MINUS_SRC_COLOR, gl.ONE_MINUS_SRC_ALPHA );\n\t\t\t\t\t\t\tbreak;\n\n\t\t\t\t\t\tcase MultiplyBlending:\n\t\t\t\t\t\t\tgl.blendFuncSeparate( gl.ZERO, gl.SRC_COLOR, gl.ZERO, gl.SRC_ALPHA );\n\t\t\t\t\t\t\tbreak;\n\n\t\t\t\t\t\tdefault:\n\t\t\t\t\t\t\tconsole.error( 'THREE.WebGLState: Invalid blending: ', blending );\n\t\t\t\t\t\t\tbreak;\n\n\t\t\t\t\t}\n\n\t\t\t\t} else {\n\n\t\t\t\t\tswitch ( blending ) {\n\n\t\t\t\t\t\tcase NormalBlending:\n\t\t\t\t\t\t\tgl.blendFuncSeparate( gl.SRC_ALPHA, gl.ONE_MINUS_SRC_ALPHA, gl.ONE, gl.ONE_MINUS_SRC_ALPHA );\n\t\t\t\t\t\t\tbreak;\n\n\t\t\t\t\t\tcase AdditiveBlending:\n\t\t\t\t\t\t\tgl.blendFunc( gl.SRC_ALPHA, gl.ONE );\n\t\t\t\t\t\t\tbreak;\n\n\t\t\t\t\t\tcase SubtractiveBlending:\n\t\t\t\t\t\t\tgl.blendFunc( gl.ZERO, gl.ONE_MINUS_SRC_COLOR );\n\t\t\t\t\t\t\tbreak;\n\n\t\t\t\t\t\tcase MultiplyBlending:\n\t\t\t\t\t\t\tgl.blendFunc( gl.ZERO, gl.SRC_COLOR );\n\t\t\t\t\t\t\tbreak;\n\n\t\t\t\t\t\tdefault:\n\t\t\t\t\t\t\tconsole.error( 'THREE.WebGLState: Invalid blending: ', blending );\n\t\t\t\t\t\t\tbreak;\n\n\t\t\t\t\t}\n\n\t\t\t\t}\n\n\t\t\t\tcurrentBlendSrc = null;\n\t\t\t\tcurrentBlendDst = null;\n\t\t\t\tcurrentBlendSrcAlpha = null;\n\t\t\t\tcurrentBlendDstAlpha = null;\n\n\t\t\t\tcurrentBlending = blending;\n\t\t\t\tcurrentPremultipledAlpha = premultipliedAlpha;\n\n\t\t\t}\n\n\t\t\treturn;\n\n\t\t}\n\n\t\t// custom blending\n\n\t\tblendEquationAlpha = blendEquationAlpha || blendEquation;\n\t\tblendSrcAlpha = blendSrcAlpha || blendSrc;\n\t\tblendDstAlpha = blendDstAlpha || blendDst;\n\n\t\tif ( blendEquation !== currentBlendEquation || blendEquationAlpha !== currentBlendEquationAlpha ) {\n\n\t\t\tgl.blendEquationSeparate( equationToGL[ blendEquation ], equationToGL[ blendEquationAlpha ] );\n\n\t\t\tcurrentBlendEquation = blendEquation;\n\t\t\tcurrentBlendEquationAlpha = blendEquationAlpha;\n\n\t\t}\n\n\t\tif ( blendSrc !== currentBlendSrc || blendDst !== currentBlendDst || blendSrcAlpha !== currentBlendSrcAlpha || blendDstAlpha !== currentBlendDstAlpha ) {\n\n\t\t\tgl.blendFuncSeparate( factorToGL[ blendSrc ], factorToGL[ blendDst ], factorToGL[ blendSrcAlpha ], factorToGL[ blendDstAlpha ] );\n\n\t\t\tcurrentBlendSrc = blendSrc;\n\t\t\tcurrentBlendDst = blendDst;\n\t\t\tcurrentBlendSrcAlpha = blendSrcAlpha;\n\t\t\tcurrentBlendDstAlpha = blendDstAlpha;\n\n\t\t}\n\n\t\tcurrentBlending = blending;\n\t\tcurrentPremultipledAlpha = null;\n\n\t}\n\n\tfunction setMaterial( material, frontFaceCW ) {\n\n\t\tmaterial.side === DoubleSide\n\t\t\t? disable( gl.CULL_FACE )\n\t\t\t: enable( gl.CULL_FACE );\n\n\t\tlet flipSided = ( material.side === BackSide );\n\t\tif ( frontFaceCW ) flipSided = ! flipSided;\n\n\t\tsetFlipSided( flipSided );\n\n\t\t( material.blending === NormalBlending && material.transparent === false )\n\t\t\t? setBlending( NoBlending )\n\t\t\t: setBlending( material.blending, material.blendEquation, material.blendSrc, material.blendDst, material.blendEquationAlpha, material.blendSrcAlpha, material.blendDstAlpha, material.premultipliedAlpha );\n\n\t\tdepthBuffer.setFunc( material.depthFunc );\n\t\tdepthBuffer.setTest( material.depthTest );\n\t\tdepthBuffer.setMask( material.depthWrite );\n\t\tcolorBuffer.setMask( material.colorWrite );\n\n\t\tconst stencilWrite = material.stencilWrite;\n\t\tstencilBuffer.setTest( stencilWrite );\n\t\tif ( stencilWrite ) {\n\n\t\t\tstencilBuffer.setMask( material.stencilWriteMask );\n\t\t\tstencilBuffer.setFunc( material.stencilFunc, material.stencilRef, material.stencilFuncMask );\n\t\t\tstencilBuffer.setOp( material.stencilFail, material.stencilZFail, material.stencilZPass );\n\n\t\t}\n\n\t\tsetPolygonOffset( material.polygonOffset, material.polygonOffsetFactor, material.polygonOffsetUnits );\n\n\t}\n\n\t//\n\n\tfunction setFlipSided( flipSided ) {\n\n\t\tif ( currentFlipSided !== flipSided ) {\n\n\t\t\tif ( flipSided ) {\n\n\t\t\t\tgl.frontFace( gl.CW );\n\n\t\t\t} else {\n\n\t\t\t\tgl.frontFace( gl.CCW );\n\n\t\t\t}\n\n\t\t\tcurrentFlipSided = flipSided;\n\n\t\t}\n\n\t}\n\n\tfunction setCullFace( cullFace ) {\n\n\t\tif ( cullFace !== CullFaceNone ) {\n\n\t\t\tenable( gl.CULL_FACE );\n\n\t\t\tif ( cullFace !== currentCullFace ) {\n\n\t\t\t\tif ( cullFace === CullFaceBack ) {\n\n\t\t\t\t\tgl.cullFace( gl.BACK );\n\n\t\t\t\t} else if ( cullFace === CullFaceFront ) {\n\n\t\t\t\t\tgl.cullFace( gl.FRONT );\n\n\t\t\t\t} else {\n\n\t\t\t\t\tgl.cullFace( gl.FRONT_AND_BACK );\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t} else {\n\n\t\t\tdisable( gl.CULL_FACE );\n\n\t\t}\n\n\t\tcurrentCullFace = cullFace;\n\n\t}\n\n\tfunction setLineWidth( width ) {\n\n\t\tif ( width !== currentLineWidth ) {\n\n\t\t\tif ( lineWidthAvailable ) gl.lineWidth( width );\n\n\t\t\tcurrentLineWidth = width;\n\n\t\t}\n\n\t}\n\n\tfunction setPolygonOffset( polygonOffset, factor, units ) {\n\n\t\tif ( polygonOffset ) {\n\n\t\t\tenable( gl.POLYGON_OFFSET_FILL );\n\n\t\t\tif ( currentPolygonOffsetFactor !== factor || currentPolygonOffsetUnits !== units ) {\n\n\t\t\t\tgl.polygonOffset( factor, units );\n\n\t\t\t\tcurrentPolygonOffsetFactor = factor;\n\t\t\t\tcurrentPolygonOffsetUnits = units;\n\n\t\t\t}\n\n\t\t} else {\n\n\t\t\tdisable( gl.POLYGON_OFFSET_FILL );\n\n\t\t}\n\n\t}\n\n\tfunction setScissorTest( scissorTest ) {\n\n\t\tif ( scissorTest ) {\n\n\t\t\tenable( gl.SCISSOR_TEST );\n\n\t\t} else {\n\n\t\t\tdisable( gl.SCISSOR_TEST );\n\n\t\t}\n\n\t}\n\n\t// texture\n\n\tfunction activeTexture( webglSlot ) {\n\n\t\tif ( webglSlot === undefined ) webglSlot = gl.TEXTURE0 + maxTextures - 1;\n\n\t\tif ( currentTextureSlot !== webglSlot ) {\n\n\t\t\tgl.activeTexture( webglSlot );\n\t\t\tcurrentTextureSlot = webglSlot;\n\n\t\t}\n\n\t}\n\n\tfunction bindTexture( webglType, webglTexture ) {\n\n\t\tif ( currentTextureSlot === null ) {\n\n\t\t\tactiveTexture();\n\n\t\t}\n\n\t\tlet boundTexture = currentBoundTextures[ currentTextureSlot ];\n\n\t\tif ( boundTexture === undefined ) {\n\n\t\t\tboundTexture = { type: undefined, texture: undefined };\n\t\t\tcurrentBoundTextures[ currentTextureSlot ] = boundTexture;\n\n\t\t}\n\n\t\tif ( boundTexture.type !== webglType || boundTexture.texture !== webglTexture ) {\n\n\t\t\tgl.bindTexture( webglType, webglTexture || emptyTextures[ webglType ] );\n\n\t\t\tboundTexture.type = webglType;\n\t\t\tboundTexture.texture = webglTexture;\n\n\t\t}\n\n\t}\n\n\tfunction unbindTexture() {\n\n\t\tconst boundTexture = currentBoundTextures[ currentTextureSlot ];\n\n\t\tif ( boundTexture !== undefined && boundTexture.type !== undefined ) {\n\n\t\t\tgl.bindTexture( boundTexture.type, null );\n\n\t\t\tboundTexture.type = undefined;\n\t\t\tboundTexture.texture = undefined;\n\n\t\t}\n\n\t}\n\n\tfunction compressedTexImage2D() {\n\n\t\ttry {\n\n\t\t\tgl.compressedTexImage2D.apply( gl, arguments );\n\n\t\t} catch ( error ) {\n\n\t\t\tconsole.error( 'THREE.WebGLState:', error );\n\n\t\t}\n\n\t}\n\n\tfunction texImage2D() {\n\n\t\ttry {\n\n\t\t\tgl.texImage2D.apply( gl, arguments );\n\n\t\t} catch ( error ) {\n\n\t\t\tconsole.error( 'THREE.WebGLState:', error );\n\n\t\t}\n\n\t}\n\n\tfunction texImage3D() {\n\n\t\ttry {\n\n\t\t\tgl.texImage3D.apply( gl, arguments );\n\n\t\t} catch ( error ) {\n\n\t\t\tconsole.error( 'THREE.WebGLState:', error );\n\n\t\t}\n\n\t}\n\n\t//\n\n\tfunction scissor( scissor ) {\n\n\t\tif ( currentScissor.equals( scissor ) === false ) {\n\n\t\t\tgl.scissor( scissor.x, scissor.y, scissor.z, scissor.w );\n\t\t\tcurrentScissor.copy( scissor );\n\n\t\t}\n\n\t}\n\n\tfunction viewport( viewport ) {\n\n\t\tif ( currentViewport.equals( viewport ) === false ) {\n\n\t\t\tgl.viewport( viewport.x, viewport.y, viewport.z, viewport.w );\n\t\t\tcurrentViewport.copy( viewport );\n\n\t\t}\n\n\t}\n\n\t//\n\n\tfunction reset() {\n\n\t\t// reset state\n\n\t\tgl.disable( gl.BLEND );\n\t\tgl.disable( gl.CULL_FACE );\n\t\tgl.disable( gl.DEPTH_TEST );\n\t\tgl.disable( gl.POLYGON_OFFSET_FILL );\n\t\tgl.disable( gl.SCISSOR_TEST );\n\t\tgl.disable( gl.STENCIL_TEST );\n\n\t\tgl.blendEquation( gl.FUNC_ADD );\n\t\tgl.blendFunc( gl.ONE, gl.ZERO );\n\t\tgl.blendFuncSeparate( gl.ONE, gl.ZERO, gl.ONE, gl.ZERO );\n\n\t\tgl.colorMask( true, true, true, true );\n\t\tgl.clearColor( 0, 0, 0, 0 );\n\n\t\tgl.depthMask( true );\n\t\tgl.depthFunc( gl.LESS );\n\t\tgl.clearDepth( 1 );\n\n\t\tgl.stencilMask( 0xffffffff );\n\t\tgl.stencilFunc( gl.ALWAYS, 0, 0xffffffff );\n\t\tgl.stencilOp( gl.KEEP, gl.KEEP, gl.KEEP );\n\t\tgl.clearStencil( 0 );\n\n\t\tgl.cullFace( gl.BACK );\n\t\tgl.frontFace( gl.CCW );\n\n\t\tgl.polygonOffset( 0, 0 );\n\n\t\tgl.activeTexture( gl.TEXTURE0 );\n\n\t\tgl.useProgram( null );\n\n\t\tgl.lineWidth( 1 );\n\n\t\tgl.scissor( 0, 0, gl.canvas.width, gl.canvas.height );\n\t\tgl.viewport( 0, 0, gl.canvas.width, gl.canvas.height );\n\n\t\t// reset internals\n\n\t\tenabledCapabilities = {};\n\n\t\tcurrentTextureSlot = null;\n\t\tcurrentBoundTextures = {};\n\n\t\tcurrentProgram = null;\n\n\t\tcurrentBlendingEnabled = false;\n\t\tcurrentBlending = null;\n\t\tcurrentBlendEquation = null;\n\t\tcurrentBlendSrc = null;\n\t\tcurrentBlendDst = null;\n\t\tcurrentBlendEquationAlpha = null;\n\t\tcurrentBlendSrcAlpha = null;\n\t\tcurrentBlendDstAlpha = null;\n\t\tcurrentPremultipledAlpha = false;\n\n\t\tcurrentFlipSided = null;\n\t\tcurrentCullFace = null;\n\n\t\tcurrentLineWidth = null;\n\n\t\tcurrentPolygonOffsetFactor = null;\n\t\tcurrentPolygonOffsetUnits = null;\n\n\t\tcolorBuffer.reset();\n\t\tdepthBuffer.reset();\n\t\tstencilBuffer.reset();\n\n\t}\n\n\treturn {\n\n\t\tbuffers: {\n\t\t\tcolor: colorBuffer,\n\t\t\tdepth: depthBuffer,\n\t\t\tstencil: stencilBuffer\n\t\t},\n\n\t\tenable: enable,\n\t\tdisable: disable,\n\n\t\tuseProgram: useProgram,\n\n\t\tsetBlending: setBlending,\n\t\tsetMaterial: setMaterial,\n\n\t\tsetFlipSided: setFlipSided,\n\t\tsetCullFace: setCullFace,\n\n\t\tsetLineWidth: setLineWidth,\n\t\tsetPolygonOffset: setPolygonOffset,\n\n\t\tsetScissorTest: setScissorTest,\n\n\t\tactiveTexture: activeTexture,\n\t\tbindTexture: bindTexture,\n\t\tunbindTexture: unbindTexture,\n\t\tcompressedTexImage2D: compressedTexImage2D,\n\t\ttexImage2D: texImage2D,\n\t\ttexImage3D: texImage3D,\n\n\t\tscissor: scissor,\n\t\tviewport: viewport,\n\n\t\treset: reset\n\n\t};\n\n}\n\nexport { WebGLState };\n","import { LinearFilter, LinearMipmapLinearFilter, LinearMipmapNearestFilter, NearestFilter, NearestMipmapLinearFilter, NearestMipmapNearestFilter, RGBFormat, RGBAFormat, DepthFormat, DepthStencilFormat, UnsignedShortType, UnsignedIntType, UnsignedInt248Type, FloatType, HalfFloatType, MirroredRepeatWrapping, ClampToEdgeWrapping, RepeatWrapping } from '../../constants.js';\nimport { MathUtils } from '../../math/MathUtils.js';\n\nfunction WebGLTextures( _gl, extensions, state, properties, capabilities, utils, info ) {\n\n\tconst isWebGL2 = capabilities.isWebGL2;\n\tconst maxTextures = capabilities.maxTextures;\n\tconst maxCubemapSize = capabilities.maxCubemapSize;\n\tconst maxTextureSize = capabilities.maxTextureSize;\n\tconst maxSamples = capabilities.maxSamples;\n\n\tconst _videoTextures = new WeakMap();\n\tlet _canvas;\n\n\t// cordova iOS (as of 5.0) still uses UIWebView, which provides OffscreenCanvas,\n\t// also OffscreenCanvas.getContext(\"webgl\"), but not OffscreenCanvas.getContext(\"2d\")!\n\t// Some implementations may only implement OffscreenCanvas partially (e.g. lacking 2d).\n\n\tlet useOffscreenCanvas = false;\n\n\ttry {\n\n\t\tuseOffscreenCanvas = typeof OffscreenCanvas !== 'undefined'\n\t\t\t&& ( new OffscreenCanvas( 1, 1 ).getContext( '2d' ) ) !== null;\n\n\t} catch ( err ) {\n\n\t\t// Ignore any errors\n\n\t}\n\n\tfunction createCanvas( width, height ) {\n\n\t\t// Use OffscreenCanvas when available. Specially needed in web workers\n\n\t\treturn useOffscreenCanvas ?\n\t\t\tnew OffscreenCanvas( width, height ) :\n\t\t\tdocument.createElementNS( 'http://www.w3.org/1999/xhtml', 'canvas' );\n\n\t}\n\n\tfunction resizeImage( image, needsPowerOfTwo, needsNewCanvas, maxSize ) {\n\n\t\tlet scale = 1;\n\n\t\t// handle case if texture exceeds max size\n\n\t\tif ( image.width > maxSize || image.height > maxSize ) {\n\n\t\t\tscale = maxSize / Math.max( image.width, image.height );\n\n\t\t}\n\n\t\t// only perform resize if necessary\n\n\t\tif ( scale < 1 || needsPowerOfTwo === true ) {\n\n\t\t\t// only perform resize for certain image types\n\n\t\t\tif ( ( typeof HTMLImageElement !== 'undefined' && image instanceof HTMLImageElement ) ||\n\t\t\t\t( typeof HTMLCanvasElement !== 'undefined' && image instanceof HTMLCanvasElement ) ||\n\t\t\t\t( typeof ImageBitmap !== 'undefined' && image instanceof ImageBitmap ) ) {\n\n\t\t\t\tconst floor = needsPowerOfTwo ? MathUtils.floorPowerOfTwo : Math.floor;\n\n\t\t\t\tconst width = floor( scale * image.width );\n\t\t\t\tconst height = floor( scale * image.height );\n\n\t\t\t\tif ( _canvas === undefined ) _canvas = createCanvas( width, height );\n\n\t\t\t\t// cube textures can't reuse the same canvas\n\n\t\t\t\tconst canvas = needsNewCanvas ? createCanvas( width, height ) : _canvas;\n\n\t\t\t\tcanvas.width = width;\n\t\t\t\tcanvas.height = height;\n\n\t\t\t\tconst context = canvas.getContext( '2d' );\n\t\t\t\tcontext.drawImage( image, 0, 0, width, height );\n\n\t\t\t\tconsole.warn( 'THREE.WebGLRenderer: Texture has been resized from (' + image.width + 'x' + image.height + ') to (' + width + 'x' + height + ').' );\n\n\t\t\t\treturn canvas;\n\n\t\t\t} else {\n\n\t\t\t\tif ( 'data' in image ) {\n\n\t\t\t\t\tconsole.warn( 'THREE.WebGLRenderer: Image in DataTexture is too big (' + image.width + 'x' + image.height + ').' );\n\n\t\t\t\t}\n\n\t\t\t\treturn image;\n\n\t\t\t}\n\n\t\t}\n\n\t\treturn image;\n\n\t}\n\n\tfunction isPowerOfTwo( image ) {\n\n\t\treturn MathUtils.isPowerOfTwo( image.width ) && MathUtils.isPowerOfTwo( image.height );\n\n\t}\n\n\tfunction textureNeedsPowerOfTwo( texture ) {\n\n\t\tif ( isWebGL2 ) return false;\n\n\t\treturn ( texture.wrapS !== ClampToEdgeWrapping || texture.wrapT !== ClampToEdgeWrapping ) ||\n\t\t\t( texture.minFilter !== NearestFilter && texture.minFilter !== LinearFilter );\n\n\t}\n\n\tfunction textureNeedsGenerateMipmaps( texture, supportsMips ) {\n\n\t\treturn texture.generateMipmaps && supportsMips &&\n\t\t\ttexture.minFilter !== NearestFilter && texture.minFilter !== LinearFilter;\n\n\t}\n\n\tfunction generateMipmap( target, texture, width, height ) {\n\n\t\t_gl.generateMipmap( target );\n\n\t\tconst textureProperties = properties.get( texture );\n\n\t\ttextureProperties.__maxMipLevel = Math.log2( Math.max( width, height ) );\n\n\t}\n\n\tfunction getInternalFormat( internalFormatName, glFormat, glType ) {\n\n\t\tif ( isWebGL2 === false ) return glFormat;\n\n\t\tif ( internalFormatName !== null ) {\n\n\t\t\tif ( _gl[ internalFormatName ] !== undefined ) return _gl[ internalFormatName ];\n\n\t\t\tconsole.warn( 'THREE.WebGLRenderer: Attempt to use non-existing WebGL internal format \\'' + internalFormatName + '\\'' );\n\n\t\t}\n\n\t\tlet internalFormat = glFormat;\n\n\t\tif ( glFormat === _gl.RED ) {\n\n\t\t\tif ( glType === _gl.FLOAT ) internalFormat = _gl.R32F;\n\t\t\tif ( glType === _gl.HALF_FLOAT ) internalFormat = _gl.R16F;\n\t\t\tif ( glType === _gl.UNSIGNED_BYTE ) internalFormat = _gl.R8;\n\n\t\t}\n\n\t\tif ( glFormat === _gl.RGB ) {\n\n\t\t\tif ( glType === _gl.FLOAT ) internalFormat = _gl.RGB32F;\n\t\t\tif ( glType === _gl.HALF_FLOAT ) internalFormat = _gl.RGB16F;\n\t\t\tif ( glType === _gl.UNSIGNED_BYTE ) internalFormat = _gl.RGB8;\n\n\t\t}\n\n\t\tif ( glFormat === _gl.RGBA ) {\n\n\t\t\tif ( glType === _gl.FLOAT ) internalFormat = _gl.RGBA32F;\n\t\t\tif ( glType === _gl.HALF_FLOAT ) internalFormat = _gl.RGBA16F;\n\t\t\tif ( glType === _gl.UNSIGNED_BYTE ) internalFormat = _gl.RGBA8;\n\n\t\t}\n\n\t\tif ( internalFormat === _gl.R16F || internalFormat === _gl.R32F ||\n\t\t\tinternalFormat === _gl.RGBA16F || internalFormat === _gl.RGBA32F ) {\n\n\t\t\textensions.get( 'EXT_color_buffer_float' );\n\n\t\t}\n\n\t\treturn internalFormat;\n\n\t}\n\n\t// Fallback filters for non-power-of-2 textures\n\n\tfunction filterFallback( f ) {\n\n\t\tif ( f === NearestFilter || f === NearestMipmapNearestFilter || f === NearestMipmapLinearFilter ) {\n\n\t\t\treturn _gl.NEAREST;\n\n\t\t}\n\n\t\treturn _gl.LINEAR;\n\n\t}\n\n\t//\n\n\tfunction onTextureDispose( event ) {\n\n\t\tconst texture = event.target;\n\n\t\ttexture.removeEventListener( 'dispose', onTextureDispose );\n\n\t\tdeallocateTexture( texture );\n\n\t\tif ( texture.isVideoTexture ) {\n\n\t\t\t_videoTextures.delete( texture );\n\n\t\t}\n\n\t\tinfo.memory.textures --;\n\n\t}\n\n\tfunction onRenderTargetDispose( event ) {\n\n\t\tconst renderTarget = event.target;\n\n\t\trenderTarget.removeEventListener( 'dispose', onRenderTargetDispose );\n\n\t\tdeallocateRenderTarget( renderTarget );\n\n\t\tinfo.memory.textures --;\n\n\t}\n\n\t//\n\n\tfunction deallocateTexture( texture ) {\n\n\t\tconst textureProperties = properties.get( texture );\n\n\t\tif ( textureProperties.__webglInit === undefined ) return;\n\n\t\t_gl.deleteTexture( textureProperties.__webglTexture );\n\n\t\tproperties.remove( texture );\n\n\t}\n\n\tfunction deallocateRenderTarget( renderTarget ) {\n\n\t\tconst texture = renderTarget.texture;\n\n\t\tconst renderTargetProperties = properties.get( renderTarget );\n\t\tconst textureProperties = properties.get( texture );\n\n\t\tif ( ! renderTarget ) return;\n\n\t\tif ( textureProperties.__webglTexture !== undefined ) {\n\n\t\t\t_gl.deleteTexture( textureProperties.__webglTexture );\n\n\t\t}\n\n\t\tif ( renderTarget.depthTexture ) {\n\n\t\t\trenderTarget.depthTexture.dispose();\n\n\t\t}\n\n\t\tif ( renderTarget.isWebGLCubeRenderTarget ) {\n\n\t\t\tfor ( let i = 0; i < 6; i ++ ) {\n\n\t\t\t\t_gl.deleteFramebuffer( renderTargetProperties.__webglFramebuffer[ i ] );\n\t\t\t\tif ( renderTargetProperties.__webglDepthbuffer ) _gl.deleteRenderbuffer( renderTargetProperties.__webglDepthbuffer[ i ] );\n\n\t\t\t}\n\n\t\t} else {\n\n\t\t\t_gl.deleteFramebuffer( renderTargetProperties.__webglFramebuffer );\n\t\t\tif ( renderTargetProperties.__webglDepthbuffer ) _gl.deleteRenderbuffer( renderTargetProperties.__webglDepthbuffer );\n\t\t\tif ( renderTargetProperties.__webglMultisampledFramebuffer ) _gl.deleteFramebuffer( renderTargetProperties.__webglMultisampledFramebuffer );\n\t\t\tif ( renderTargetProperties.__webglColorRenderbuffer ) _gl.deleteRenderbuffer( renderTargetProperties.__webglColorRenderbuffer );\n\t\t\tif ( renderTargetProperties.__webglDepthRenderbuffer ) _gl.deleteRenderbuffer( renderTargetProperties.__webglDepthRenderbuffer );\n\n\t\t}\n\n\t\tproperties.remove( texture );\n\t\tproperties.remove( renderTarget );\n\n\t}\n\n\t//\n\n\tlet textureUnits = 0;\n\n\tfunction resetTextureUnits() {\n\n\t\ttextureUnits = 0;\n\n\t}\n\n\tfunction allocateTextureUnit() {\n\n\t\tconst textureUnit = textureUnits;\n\n\t\tif ( textureUnit >= maxTextures ) {\n\n\t\t\tconsole.warn( 'THREE.WebGLTextures: Trying to use ' + textureUnit + ' texture units while this GPU supports only ' + maxTextures );\n\n\t\t}\n\n\t\ttextureUnits += 1;\n\n\t\treturn textureUnit;\n\n\t}\n\n\t//\n\n\tfunction setTexture2D( texture, slot ) {\n\n\t\tconst textureProperties = properties.get( texture );\n\n\t\tif ( texture.isVideoTexture ) updateVideoTexture( texture );\n\n\t\tif ( texture.version > 0 && textureProperties.__version !== texture.version ) {\n\n\t\t\tconst image = texture.image;\n\n\t\t\tif ( image === undefined ) {\n\n\t\t\t\tconsole.warn( 'THREE.WebGLRenderer: Texture marked for update but image is undefined' );\n\n\t\t\t} else if ( image.complete === false ) {\n\n\t\t\t\tconsole.warn( 'THREE.WebGLRenderer: Texture marked for update but image is incomplete' );\n\n\t\t\t} else {\n\n\t\t\t\tuploadTexture( textureProperties, texture, slot );\n\t\t\t\treturn;\n\n\t\t\t}\n\n\t\t}\n\n\t\tstate.activeTexture( _gl.TEXTURE0 + slot );\n\t\tstate.bindTexture( _gl.TEXTURE_2D, textureProperties.__webglTexture );\n\n\t}\n\n\tfunction setTexture2DArray( texture, slot ) {\n\n\t\tconst textureProperties = properties.get( texture );\n\n\t\tif ( texture.version > 0 && textureProperties.__version !== texture.version ) {\n\n\t\t\tuploadTexture( textureProperties, texture, slot );\n\t\t\treturn;\n\n\t\t}\n\n\t\tstate.activeTexture( _gl.TEXTURE0 + slot );\n\t\tstate.bindTexture( _gl.TEXTURE_2D_ARRAY, textureProperties.__webglTexture );\n\n\t}\n\n\tfunction setTexture3D( texture, slot ) {\n\n\t\tconst textureProperties = properties.get( texture );\n\n\t\tif ( texture.version > 0 && textureProperties.__version !== texture.version ) {\n\n\t\t\tuploadTexture( textureProperties, texture, slot );\n\t\t\treturn;\n\n\t\t}\n\n\t\tstate.activeTexture( _gl.TEXTURE0 + slot );\n\t\tstate.bindTexture( _gl.TEXTURE_3D, textureProperties.__webglTexture );\n\n\t}\n\n\tfunction setTextureCube( texture, slot ) {\n\n\t\tconst textureProperties = properties.get( texture );\n\n\t\tif ( texture.version > 0 && textureProperties.__version !== texture.version ) {\n\n\t\t\tuploadCubeTexture( textureProperties, texture, slot );\n\t\t\treturn;\n\n\t\t}\n\n\t\tstate.activeTexture( _gl.TEXTURE0 + slot );\n\t\tstate.bindTexture( _gl.TEXTURE_CUBE_MAP, textureProperties.__webglTexture );\n\n\t}\n\n\tconst wrappingToGL = {\n\t\t[ RepeatWrapping ]: _gl.REPEAT,\n\t\t[ ClampToEdgeWrapping ]: _gl.CLAMP_TO_EDGE,\n\t\t[ MirroredRepeatWrapping ]: _gl.MIRRORED_REPEAT\n\t};\n\n\tconst filterToGL = {\n\t\t[ NearestFilter ]: _gl.NEAREST,\n\t\t[ NearestMipmapNearestFilter ]: _gl.NEAREST_MIPMAP_NEAREST,\n\t\t[ NearestMipmapLinearFilter ]: _gl.NEAREST_MIPMAP_LINEAR,\n\n\t\t[ LinearFilter ]: _gl.LINEAR,\n\t\t[ LinearMipmapNearestFilter ]: _gl.LINEAR_MIPMAP_NEAREST,\n\t\t[ LinearMipmapLinearFilter ]: _gl.LINEAR_MIPMAP_LINEAR\n\t};\n\n\tfunction setTextureParameters( textureType, texture, supportsMips ) {\n\n\t\tif ( supportsMips ) {\n\n\t\t\t_gl.texParameteri( textureType, _gl.TEXTURE_WRAP_S, wrappingToGL[ texture.wrapS ] );\n\t\t\t_gl.texParameteri( textureType, _gl.TEXTURE_WRAP_T, wrappingToGL[ texture.wrapT ] );\n\n\t\t\tif ( textureType === _gl.TEXTURE_3D || textureType === _gl.TEXTURE_2D_ARRAY ) {\n\n\t\t\t\t_gl.texParameteri( textureType, _gl.TEXTURE_WRAP_R, wrappingToGL[ texture.wrapR ] );\n\n\t\t\t}\n\n\t\t\t_gl.texParameteri( textureType, _gl.TEXTURE_MAG_FILTER, filterToGL[ texture.magFilter ] );\n\t\t\t_gl.texParameteri( textureType, _gl.TEXTURE_MIN_FILTER, filterToGL[ texture.minFilter ] );\n\n\t\t} else {\n\n\t\t\t_gl.texParameteri( textureType, _gl.TEXTURE_WRAP_S, _gl.CLAMP_TO_EDGE );\n\t\t\t_gl.texParameteri( textureType, _gl.TEXTURE_WRAP_T, _gl.CLAMP_TO_EDGE );\n\n\t\t\tif ( textureType === _gl.TEXTURE_3D || textureType === _gl.TEXTURE_2D_ARRAY ) {\n\n\t\t\t\t_gl.texParameteri( textureType, _gl.TEXTURE_WRAP_R, _gl.CLAMP_TO_EDGE );\n\n\t\t\t}\n\n\t\t\tif ( texture.wrapS !== ClampToEdgeWrapping || texture.wrapT !== ClampToEdgeWrapping ) {\n\n\t\t\t\tconsole.warn( 'THREE.WebGLRenderer: Texture is not power of two. Texture.wrapS and Texture.wrapT should be set to THREE.ClampToEdgeWrapping.' );\n\n\t\t\t}\n\n\t\t\t_gl.texParameteri( textureType, _gl.TEXTURE_MAG_FILTER, filterFallback( texture.magFilter ) );\n\t\t\t_gl.texParameteri( textureType, _gl.TEXTURE_MIN_FILTER, filterFallback( texture.minFilter ) );\n\n\t\t\tif ( texture.minFilter !== NearestFilter && texture.minFilter !== LinearFilter ) {\n\n\t\t\t\tconsole.warn( 'THREE.WebGLRenderer: Texture is not power of two. Texture.minFilter should be set to THREE.NearestFilter or THREE.LinearFilter.' );\n\n\t\t\t}\n\n\t\t}\n\n\t\tif ( extensions.has( 'EXT_texture_filter_anisotropic' ) === true ) {\n\n\t\t\tconst extension = extensions.get( 'EXT_texture_filter_anisotropic' );\n\n\t\t\tif ( texture.type === FloatType && extensions.has( 'OES_texture_float_linear' ) === false ) return; // verify extension for WebGL 1 and WebGL 2\n\t\t\tif ( isWebGL2 === false && ( texture.type === HalfFloatType && extensions.has( 'OES_texture_half_float_linear' ) === false ) ) return; // verify extension for WebGL 1 only\n\n\t\t\tif ( texture.anisotropy > 1 || properties.get( texture ).__currentAnisotropy ) {\n\n\t\t\t\t_gl.texParameterf( textureType, extension.TEXTURE_MAX_ANISOTROPY_EXT, Math.min( texture.anisotropy, capabilities.getMaxAnisotropy() ) );\n\t\t\t\tproperties.get( texture ).__currentAnisotropy = texture.anisotropy;\n\n\t\t\t}\n\n\t\t}\n\n\t}\n\n\tfunction initTexture( textureProperties, texture ) {\n\n\t\tif ( textureProperties.__webglInit === undefined ) {\n\n\t\t\ttextureProperties.__webglInit = true;\n\n\t\t\ttexture.addEventListener( 'dispose', onTextureDispose );\n\n\t\t\ttextureProperties.__webglTexture = _gl.createTexture();\n\n\t\t\tinfo.memory.textures ++;\n\n\t\t}\n\n\t}\n\n\tfunction uploadTexture( textureProperties, texture, slot ) {\n\n\t\tlet textureType = _gl.TEXTURE_2D;\n\n\t\tif ( texture.isDataTexture2DArray ) textureType = _gl.TEXTURE_2D_ARRAY;\n\t\tif ( texture.isDataTexture3D ) textureType = _gl.TEXTURE_3D;\n\n\t\tinitTexture( textureProperties, texture );\n\n\t\tstate.activeTexture( _gl.TEXTURE0 + slot );\n\t\tstate.bindTexture( textureType, textureProperties.__webglTexture );\n\n\t\t_gl.pixelStorei( _gl.UNPACK_FLIP_Y_WEBGL, texture.flipY );\n\t\t_gl.pixelStorei( _gl.UNPACK_PREMULTIPLY_ALPHA_WEBGL, texture.premultiplyAlpha );\n\t\t_gl.pixelStorei( _gl.UNPACK_ALIGNMENT, texture.unpackAlignment );\n\t\t_gl.pixelStorei( _gl.UNPACK_COLORSPACE_CONVERSION_WEBGL, _gl.NONE );\n\n\t\tconst needsPowerOfTwo = textureNeedsPowerOfTwo( texture ) && isPowerOfTwo( texture.image ) === false;\n\t\tconst image = resizeImage( texture.image, needsPowerOfTwo, false, maxTextureSize );\n\n\t\tconst supportsMips = isPowerOfTwo( image ) || isWebGL2,\n\t\t\tglFormat = utils.convert( texture.format );\n\n\t\tlet glType = utils.convert( texture.type ),\n\t\t\tglInternalFormat = getInternalFormat( texture.internalFormat, glFormat, glType );\n\n\t\tsetTextureParameters( textureType, texture, supportsMips );\n\n\t\tlet mipmap;\n\t\tconst mipmaps = texture.mipmaps;\n\n\t\tif ( texture.isDepthTexture ) {\n\n\t\t\t// populate depth texture with dummy data\n\n\t\t\tglInternalFormat = _gl.DEPTH_COMPONENT;\n\n\t\t\tif ( isWebGL2 ) {\n\n\t\t\t\tif ( texture.type === FloatType ) {\n\n\t\t\t\t\tglInternalFormat = _gl.DEPTH_COMPONENT32F;\n\n\t\t\t\t} else if ( texture.type === UnsignedIntType ) {\n\n\t\t\t\t\tglInternalFormat = _gl.DEPTH_COMPONENT24;\n\n\t\t\t\t} else if ( texture.type === UnsignedInt248Type ) {\n\n\t\t\t\t\tglInternalFormat = _gl.DEPTH24_STENCIL8;\n\n\t\t\t\t} else {\n\n\t\t\t\t\tglInternalFormat = _gl.DEPTH_COMPONENT16; // WebGL2 requires sized internalformat for glTexImage2D\n\n\t\t\t\t}\n\n\t\t\t} else {\n\n\t\t\t\tif ( texture.type === FloatType ) {\n\n\t\t\t\t\tconsole.error( 'WebGLRenderer: Floating point depth texture requires WebGL2.' );\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t\t// validation checks for WebGL 1\n\n\t\t\tif ( texture.format === DepthFormat && glInternalFormat === _gl.DEPTH_COMPONENT ) {\n\n\t\t\t\t// The error INVALID_OPERATION is generated by texImage2D if format and internalformat are\n\t\t\t\t// DEPTH_COMPONENT and type is not UNSIGNED_SHORT or UNSIGNED_INT\n\t\t\t\t// (https://www.khronos.org/registry/webgl/extensions/WEBGL_depth_texture/)\n\t\t\t\tif ( texture.type !== UnsignedShortType && texture.type !== UnsignedIntType ) {\n\n\t\t\t\t\tconsole.warn( 'THREE.WebGLRenderer: Use UnsignedShortType or UnsignedIntType for DepthFormat DepthTexture.' );\n\n\t\t\t\t\ttexture.type = UnsignedShortType;\n\t\t\t\t\tglType = utils.convert( texture.type );\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t\tif ( texture.format === DepthStencilFormat && glInternalFormat === _gl.DEPTH_COMPONENT ) {\n\n\t\t\t\t// Depth stencil textures need the DEPTH_STENCIL internal format\n\t\t\t\t// (https://www.khronos.org/registry/webgl/extensions/WEBGL_depth_texture/)\n\t\t\t\tglInternalFormat = _gl.DEPTH_STENCIL;\n\n\t\t\t\t// The error INVALID_OPERATION is generated by texImage2D if format and internalformat are\n\t\t\t\t// DEPTH_STENCIL and type is not UNSIGNED_INT_24_8_WEBGL.\n\t\t\t\t// (https://www.khronos.org/registry/webgl/extensions/WEBGL_depth_texture/)\n\t\t\t\tif ( texture.type !== UnsignedInt248Type ) {\n\n\t\t\t\t\tconsole.warn( 'THREE.WebGLRenderer: Use UnsignedInt248Type for DepthStencilFormat DepthTexture.' );\n\n\t\t\t\t\ttexture.type = UnsignedInt248Type;\n\t\t\t\t\tglType = utils.convert( texture.type );\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t\t//\n\n\t\t\tstate.texImage2D( _gl.TEXTURE_2D, 0, glInternalFormat, image.width, image.height, 0, glFormat, glType, null );\n\n\t\t} else if ( texture.isDataTexture ) {\n\n\t\t\t// use manually created mipmaps if available\n\t\t\t// if there are no manual mipmaps\n\t\t\t// set 0 level mipmap and then use GL to generate other mipmap levels\n\n\t\t\tif ( mipmaps.length > 0 && supportsMips ) {\n\n\t\t\t\tfor ( let i = 0, il = mipmaps.length; i < il; i ++ ) {\n\n\t\t\t\t\tmipmap = mipmaps[ i ];\n\t\t\t\t\tstate.texImage2D( _gl.TEXTURE_2D, i, glInternalFormat, mipmap.width, mipmap.height, 0, glFormat, glType, mipmap.data );\n\n\t\t\t\t}\n\n\t\t\t\ttexture.generateMipmaps = false;\n\t\t\t\ttextureProperties.__maxMipLevel = mipmaps.length - 1;\n\n\t\t\t} else {\n\n\t\t\t\tstate.texImage2D( _gl.TEXTURE_2D, 0, glInternalFormat, image.width, image.height, 0, glFormat, glType, image.data );\n\t\t\t\ttextureProperties.__maxMipLevel = 0;\n\n\t\t\t}\n\n\t\t} else if ( texture.isCompressedTexture ) {\n\n\t\t\tfor ( let i = 0, il = mipmaps.length; i < il; i ++ ) {\n\n\t\t\t\tmipmap = mipmaps[ i ];\n\n\t\t\t\tif ( texture.format !== RGBAFormat && texture.format !== RGBFormat ) {\n\n\t\t\t\t\tif ( glFormat !== null ) {\n\n\t\t\t\t\t\tstate.compressedTexImage2D( _gl.TEXTURE_2D, i, glInternalFormat, mipmap.width, mipmap.height, 0, mipmap.data );\n\n\t\t\t\t\t} else {\n\n\t\t\t\t\t\tconsole.warn( 'THREE.WebGLRenderer: Attempt to load unsupported compressed texture format in .uploadTexture()' );\n\n\t\t\t\t\t}\n\n\t\t\t\t} else {\n\n\t\t\t\t\tstate.texImage2D( _gl.TEXTURE_2D, i, glInternalFormat, mipmap.width, mipmap.height, 0, glFormat, glType, mipmap.data );\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t\ttextureProperties.__maxMipLevel = mipmaps.length - 1;\n\n\t\t} else if ( texture.isDataTexture2DArray ) {\n\n\t\t\tstate.texImage3D( _gl.TEXTURE_2D_ARRAY, 0, glInternalFormat, image.width, image.height, image.depth, 0, glFormat, glType, image.data );\n\t\t\ttextureProperties.__maxMipLevel = 0;\n\n\t\t} else if ( texture.isDataTexture3D ) {\n\n\t\t\tstate.texImage3D( _gl.TEXTURE_3D, 0, glInternalFormat, image.width, image.height, image.depth, 0, glFormat, glType, image.data );\n\t\t\ttextureProperties.__maxMipLevel = 0;\n\n\t\t} else {\n\n\t\t\t// regular Texture (image, video, canvas)\n\n\t\t\t// use manually created mipmaps if available\n\t\t\t// if there are no manual mipmaps\n\t\t\t// set 0 level mipmap and then use GL to generate other mipmap levels\n\n\t\t\tif ( mipmaps.length > 0 && supportsMips ) {\n\n\t\t\t\tfor ( let i = 0, il = mipmaps.length; i < il; i ++ ) {\n\n\t\t\t\t\tmipmap = mipmaps[ i ];\n\t\t\t\t\tstate.texImage2D( _gl.TEXTURE_2D, i, glInternalFormat, glFormat, glType, mipmap );\n\n\t\t\t\t}\n\n\t\t\t\ttexture.generateMipmaps = false;\n\t\t\t\ttextureProperties.__maxMipLevel = mipmaps.length - 1;\n\n\t\t\t} else {\n\n\t\t\t\tstate.texImage2D( _gl.TEXTURE_2D, 0, glInternalFormat, glFormat, glType, image );\n\t\t\t\ttextureProperties.__maxMipLevel = 0;\n\n\t\t\t}\n\n\t\t}\n\n\t\tif ( textureNeedsGenerateMipmaps( texture, supportsMips ) ) {\n\n\t\t\tgenerateMipmap( textureType, texture, image.width, image.height );\n\n\t\t}\n\n\t\ttextureProperties.__version = texture.version;\n\n\t\tif ( texture.onUpdate ) texture.onUpdate( texture );\n\n\t}\n\n\tfunction uploadCubeTexture( textureProperties, texture, slot ) {\n\n\t\tif ( texture.image.length !== 6 ) return;\n\n\t\tinitTexture( textureProperties, texture );\n\n\t\tstate.activeTexture( _gl.TEXTURE0 + slot );\n\t\tstate.bindTexture( _gl.TEXTURE_CUBE_MAP, textureProperties.__webglTexture );\n\n\t\t_gl.pixelStorei( _gl.UNPACK_FLIP_Y_WEBGL, texture.flipY );\n\t\t_gl.pixelStorei( _gl.UNPACK_PREMULTIPLY_ALPHA_WEBGL, texture.premultiplyAlpha );\n\t\t_gl.pixelStorei( _gl.UNPACK_ALIGNMENT, texture.unpackAlignment );\n\t\t_gl.pixelStorei( _gl.UNPACK_COLORSPACE_CONVERSION_WEBGL, _gl.NONE );\n\n\t\tconst isCompressed = ( texture && ( texture.isCompressedTexture || texture.image[ 0 ].isCompressedTexture ) );\n\t\tconst isDataTexture = ( texture.image[ 0 ] && texture.image[ 0 ].isDataTexture );\n\n\t\tconst cubeImage = [];\n\n\t\tfor ( let i = 0; i < 6; i ++ ) {\n\n\t\t\tif ( ! isCompressed && ! isDataTexture ) {\n\n\t\t\t\tcubeImage[ i ] = resizeImage( texture.image[ i ], false, true, maxCubemapSize );\n\n\t\t\t} else {\n\n\t\t\t\tcubeImage[ i ] = isDataTexture ? texture.image[ i ].image : texture.image[ i ];\n\n\t\t\t}\n\n\t\t}\n\n\t\tconst image = cubeImage[ 0 ],\n\t\t\tsupportsMips = isPowerOfTwo( image ) || isWebGL2,\n\t\t\tglFormat = utils.convert( texture.format ),\n\t\t\tglType = utils.convert( texture.type ),\n\t\t\tglInternalFormat = getInternalFormat( texture.internalFormat, glFormat, glType );\n\n\t\tsetTextureParameters( _gl.TEXTURE_CUBE_MAP, texture, supportsMips );\n\n\t\tlet mipmaps;\n\n\t\tif ( isCompressed ) {\n\n\t\t\tfor ( let i = 0; i < 6; i ++ ) {\n\n\t\t\t\tmipmaps = cubeImage[ i ].mipmaps;\n\n\t\t\t\tfor ( let j = 0; j < mipmaps.length; j ++ ) {\n\n\t\t\t\t\tconst mipmap = mipmaps[ j ];\n\n\t\t\t\t\tif ( texture.format !== RGBAFormat && texture.format !== RGBFormat ) {\n\n\t\t\t\t\t\tif ( glFormat !== null ) {\n\n\t\t\t\t\t\t\tstate.compressedTexImage2D( _gl.TEXTURE_CUBE_MAP_POSITIVE_X + i, j, glInternalFormat, mipmap.width, mipmap.height, 0, mipmap.data );\n\n\t\t\t\t\t\t} else {\n\n\t\t\t\t\t\t\tconsole.warn( 'THREE.WebGLRenderer: Attempt to load unsupported compressed texture format in .setTextureCube()' );\n\n\t\t\t\t\t\t}\n\n\t\t\t\t\t} else {\n\n\t\t\t\t\t\tstate.texImage2D( _gl.TEXTURE_CUBE_MAP_POSITIVE_X + i, j, glInternalFormat, mipmap.width, mipmap.height, 0, glFormat, glType, mipmap.data );\n\n\t\t\t\t\t}\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t\ttextureProperties.__maxMipLevel = mipmaps.length - 1;\n\n\t\t} else {\n\n\t\t\tmipmaps = texture.mipmaps;\n\n\t\t\tfor ( let i = 0; i < 6; i ++ ) {\n\n\t\t\t\tif ( isDataTexture ) {\n\n\t\t\t\t\tstate.texImage2D( _gl.TEXTURE_CUBE_MAP_POSITIVE_X + i, 0, glInternalFormat, cubeImage[ i ].width, cubeImage[ i ].height, 0, glFormat, glType, cubeImage[ i ].data );\n\n\t\t\t\t\tfor ( let j = 0; j < mipmaps.length; j ++ ) {\n\n\t\t\t\t\t\tconst mipmap = mipmaps[ j ];\n\t\t\t\t\t\tconst mipmapImage = mipmap.image[ i ].image;\n\n\t\t\t\t\t\tstate.texImage2D( _gl.TEXTURE_CUBE_MAP_POSITIVE_X + i, j + 1, glInternalFormat, mipmapImage.width, mipmapImage.height, 0, glFormat, glType, mipmapImage.data );\n\n\t\t\t\t\t}\n\n\t\t\t\t} else {\n\n\t\t\t\t\tstate.texImage2D( _gl.TEXTURE_CUBE_MAP_POSITIVE_X + i, 0, glInternalFormat, glFormat, glType, cubeImage[ i ] );\n\n\t\t\t\t\tfor ( let j = 0; j < mipmaps.length; j ++ ) {\n\n\t\t\t\t\t\tconst mipmap = mipmaps[ j ];\n\n\t\t\t\t\t\tstate.texImage2D( _gl.TEXTURE_CUBE_MAP_POSITIVE_X + i, j + 1, glInternalFormat, glFormat, glType, mipmap.image[ i ] );\n\n\t\t\t\t\t}\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t\ttextureProperties.__maxMipLevel = mipmaps.length;\n\n\t\t}\n\n\t\tif ( textureNeedsGenerateMipmaps( texture, supportsMips ) ) {\n\n\t\t\t// We assume images for cube map have the same size.\n\t\t\tgenerateMipmap( _gl.TEXTURE_CUBE_MAP, texture, image.width, image.height );\n\n\t\t}\n\n\t\ttextureProperties.__version = texture.version;\n\n\t\tif ( texture.onUpdate ) texture.onUpdate( texture );\n\n\t}\n\n\t// Render targets\n\n\t// Setup storage for target texture and bind it to correct framebuffer\n\tfunction setupFrameBufferTexture( framebuffer, renderTarget, attachment, textureTarget ) {\n\n\t\tconst texture = renderTarget.texture;\n\n\t\tconst glFormat = utils.convert( texture.format );\n\t\tconst glType = utils.convert( texture.type );\n\t\tconst glInternalFormat = getInternalFormat( texture.internalFormat, glFormat, glType );\n\n\t\tif ( textureTarget === _gl.TEXTURE_3D || textureTarget === _gl.TEXTURE_2D_ARRAY ) {\n\n\t\t\tstate.texImage3D( textureTarget, 0, glInternalFormat, renderTarget.width, renderTarget.height, renderTarget.depth, 0, glFormat, glType, null );\n\n\t\t} else {\n\n\t\t\tstate.texImage2D( textureTarget, 0, glInternalFormat, renderTarget.width, renderTarget.height, 0, glFormat, glType, null );\n\n\t\t}\n\n\t\t_gl.bindFramebuffer( _gl.FRAMEBUFFER, framebuffer );\n\t\t_gl.framebufferTexture2D( _gl.FRAMEBUFFER, attachment, textureTarget, properties.get( texture ).__webglTexture, 0 );\n\t\t_gl.bindFramebuffer( _gl.FRAMEBUFFER, null );\n\n\t}\n\n\t// Setup storage for internal depth/stencil buffers and bind to correct framebuffer\n\tfunction setupRenderBufferStorage( renderbuffer, renderTarget, isMultisample ) {\n\n\t\t_gl.bindRenderbuffer( _gl.RENDERBUFFER, renderbuffer );\n\n\t\tif ( renderTarget.depthBuffer && ! renderTarget.stencilBuffer ) {\n\n\t\t\tlet glInternalFormat = _gl.DEPTH_COMPONENT16;\n\n\t\t\tif ( isMultisample ) {\n\n\t\t\t\tconst depthTexture = renderTarget.depthTexture;\n\n\t\t\t\tif ( depthTexture && depthTexture.isDepthTexture ) {\n\n\t\t\t\t\tif ( depthTexture.type === FloatType ) {\n\n\t\t\t\t\t\tglInternalFormat = _gl.DEPTH_COMPONENT32F;\n\n\t\t\t\t\t} else if ( depthTexture.type === UnsignedIntType ) {\n\n\t\t\t\t\t\tglInternalFormat = _gl.DEPTH_COMPONENT24;\n\n\t\t\t\t\t}\n\n\t\t\t\t}\n\n\t\t\t\tconst samples = getRenderTargetSamples( renderTarget );\n\n\t\t\t\t_gl.renderbufferStorageMultisample( _gl.RENDERBUFFER, samples, glInternalFormat, renderTarget.width, renderTarget.height );\n\n\t\t\t} else {\n\n\t\t\t\t_gl.renderbufferStorage( _gl.RENDERBUFFER, glInternalFormat, renderTarget.width, renderTarget.height );\n\n\t\t\t}\n\n\t\t\t_gl.framebufferRenderbuffer( _gl.FRAMEBUFFER, _gl.DEPTH_ATTACHMENT, _gl.RENDERBUFFER, renderbuffer );\n\n\t\t} else if ( renderTarget.depthBuffer && renderTarget.stencilBuffer ) {\n\n\t\t\tif ( isMultisample ) {\n\n\t\t\t\tconst samples = getRenderTargetSamples( renderTarget );\n\n\t\t\t\t_gl.renderbufferStorageMultisample( _gl.RENDERBUFFER, samples, _gl.DEPTH24_STENCIL8, renderTarget.width, renderTarget.height );\n\n\t\t\t} else {\n\n\t\t\t\t_gl.renderbufferStorage( _gl.RENDERBUFFER, _gl.DEPTH_STENCIL, renderTarget.width, renderTarget.height );\n\n\t\t\t}\n\n\n\t\t\t_gl.framebufferRenderbuffer( _gl.FRAMEBUFFER, _gl.DEPTH_STENCIL_ATTACHMENT, _gl.RENDERBUFFER, renderbuffer );\n\n\t\t} else {\n\n\t\t\tconst texture = renderTarget.texture;\n\n\t\t\tconst glFormat = utils.convert( texture.format );\n\t\t\tconst glType = utils.convert( texture.type );\n\t\t\tconst glInternalFormat = getInternalFormat( texture.internalFormat, glFormat, glType );\n\n\t\t\tif ( isMultisample ) {\n\n\t\t\t\tconst samples = getRenderTargetSamples( renderTarget );\n\n\t\t\t\t_gl.renderbufferStorageMultisample( _gl.RENDERBUFFER, samples, glInternalFormat, renderTarget.width, renderTarget.height );\n\n\t\t\t} else {\n\n\t\t\t\t_gl.renderbufferStorage( _gl.RENDERBUFFER, glInternalFormat, renderTarget.width, renderTarget.height );\n\n\t\t\t}\n\n\t\t}\n\n\t\t_gl.bindRenderbuffer( _gl.RENDERBUFFER, null );\n\n\t}\n\n\t// Setup resources for a Depth Texture for a FBO (needs an extension)\n\tfunction setupDepthTexture( framebuffer, renderTarget ) {\n\n\t\tconst isCube = ( renderTarget && renderTarget.isWebGLCubeRenderTarget );\n\t\tif ( isCube ) throw new Error( 'Depth Texture with cube render targets is not supported' );\n\n\t\t_gl.bindFramebuffer( _gl.FRAMEBUFFER, framebuffer );\n\n\t\tif ( ! ( renderTarget.depthTexture && renderTarget.depthTexture.isDepthTexture ) ) {\n\n\t\t\tthrow new Error( 'renderTarget.depthTexture must be an instance of THREE.DepthTexture' );\n\n\t\t}\n\n\t\t// upload an empty depth texture with framebuffer size\n\t\tif ( ! properties.get( renderTarget.depthTexture ).__webglTexture ||\n\t\t\t\trenderTarget.depthTexture.image.width !== renderTarget.width ||\n\t\t\t\trenderTarget.depthTexture.image.height !== renderTarget.height ) {\n\n\t\t\trenderTarget.depthTexture.image.width = renderTarget.width;\n\t\t\trenderTarget.depthTexture.image.height = renderTarget.height;\n\t\t\trenderTarget.depthTexture.needsUpdate = true;\n\n\t\t}\n\n\t\tsetTexture2D( renderTarget.depthTexture, 0 );\n\n\t\tconst webglDepthTexture = properties.get( renderTarget.depthTexture ).__webglTexture;\n\n\t\tif ( renderTarget.depthTexture.format === DepthFormat ) {\n\n\t\t\t_gl.framebufferTexture2D( _gl.FRAMEBUFFER, _gl.DEPTH_ATTACHMENT, _gl.TEXTURE_2D, webglDepthTexture, 0 );\n\n\t\t} else if ( renderTarget.depthTexture.format === DepthStencilFormat ) {\n\n\t\t\t_gl.framebufferTexture2D( _gl.FRAMEBUFFER, _gl.DEPTH_STENCIL_ATTACHMENT, _gl.TEXTURE_2D, webglDepthTexture, 0 );\n\n\t\t} else {\n\n\t\t\tthrow new Error( 'Unknown depthTexture format' );\n\n\t\t}\n\n\t}\n\n\t// Setup GL resources for a non-texture depth buffer\n\tfunction setupDepthRenderbuffer( renderTarget ) {\n\n\t\tconst renderTargetProperties = properties.get( renderTarget );\n\n\t\tconst isCube = ( renderTarget.isWebGLCubeRenderTarget === true );\n\n\t\tif ( renderTarget.depthTexture ) {\n\n\t\t\tif ( isCube ) throw new Error( 'target.depthTexture not supported in Cube render targets' );\n\n\t\t\tsetupDepthTexture( renderTargetProperties.__webglFramebuffer, renderTarget );\n\n\t\t} else {\n\n\t\t\tif ( isCube ) {\n\n\t\t\t\trenderTargetProperties.__webglDepthbuffer = [];\n\n\t\t\t\tfor ( let i = 0; i < 6; i ++ ) {\n\n\t\t\t\t\t_gl.bindFramebuffer( _gl.FRAMEBUFFER, renderTargetProperties.__webglFramebuffer[ i ] );\n\t\t\t\t\trenderTargetProperties.__webglDepthbuffer[ i ] = _gl.createRenderbuffer();\n\t\t\t\t\tsetupRenderBufferStorage( renderTargetProperties.__webglDepthbuffer[ i ], renderTarget, false );\n\n\t\t\t\t}\n\n\t\t\t} else {\n\n\t\t\t\t_gl.bindFramebuffer( _gl.FRAMEBUFFER, renderTargetProperties.__webglFramebuffer );\n\t\t\t\trenderTargetProperties.__webglDepthbuffer = _gl.createRenderbuffer();\n\t\t\t\tsetupRenderBufferStorage( renderTargetProperties.__webglDepthbuffer, renderTarget, false );\n\n\t\t\t}\n\n\t\t}\n\n\t\t_gl.bindFramebuffer( _gl.FRAMEBUFFER, null );\n\n\t}\n\n\t// Set up GL resources for the render target\n\tfunction setupRenderTarget( renderTarget ) {\n\n\t\tconst texture = renderTarget.texture;\n\n\t\tconst renderTargetProperties = properties.get( renderTarget );\n\t\tconst textureProperties = properties.get( texture );\n\n\t\trenderTarget.addEventListener( 'dispose', onRenderTargetDispose );\n\n\t\ttextureProperties.__webglTexture = _gl.createTexture();\n\n\t\tinfo.memory.textures ++;\n\n\t\tconst isCube = ( renderTarget.isWebGLCubeRenderTarget === true );\n\t\tconst isMultisample = ( renderTarget.isWebGLMultisampleRenderTarget === true );\n\t\tconst isRenderTarget3D = texture.isDataTexture3D || texture.isDataTexture2DArray;\n\t\tconst supportsMips = isPowerOfTwo( renderTarget ) || isWebGL2;\n\n\t\t// Handles WebGL2 RGBFormat fallback - #18858\n\n\t\tif ( isWebGL2 && texture.format === RGBFormat && ( texture.type === FloatType || texture.type === HalfFloatType ) ) {\n\n\t\t\ttexture.format = RGBAFormat;\n\n\t\t\tconsole.warn( 'THREE.WebGLRenderer: Rendering to textures with RGB format is not supported. Using RGBA format instead.' );\n\n\t\t}\n\n\t\t// Setup framebuffer\n\n\t\tif ( isCube ) {\n\n\t\t\trenderTargetProperties.__webglFramebuffer = [];\n\n\t\t\tfor ( let i = 0; i < 6; i ++ ) {\n\n\t\t\t\trenderTargetProperties.__webglFramebuffer[ i ] = _gl.createFramebuffer();\n\n\t\t\t}\n\n\t\t} else {\n\n\t\t\trenderTargetProperties.__webglFramebuffer = _gl.createFramebuffer();\n\n\t\t\tif ( isMultisample ) {\n\n\t\t\t\tif ( isWebGL2 ) {\n\n\t\t\t\t\trenderTargetProperties.__webglMultisampledFramebuffer = _gl.createFramebuffer();\n\t\t\t\t\trenderTargetProperties.__webglColorRenderbuffer = _gl.createRenderbuffer();\n\n\t\t\t\t\t_gl.bindRenderbuffer( _gl.RENDERBUFFER, renderTargetProperties.__webglColorRenderbuffer );\n\n\t\t\t\t\tconst glFormat = utils.convert( texture.format );\n\t\t\t\t\tconst glType = utils.convert( texture.type );\n\t\t\t\t\tconst glInternalFormat = getInternalFormat( texture.internalFormat, glFormat, glType );\n\t\t\t\t\tconst samples = getRenderTargetSamples( renderTarget );\n\t\t\t\t\t_gl.renderbufferStorageMultisample( _gl.RENDERBUFFER, samples, glInternalFormat, renderTarget.width, renderTarget.height );\n\n\t\t\t\t\t_gl.bindFramebuffer( _gl.FRAMEBUFFER, renderTargetProperties.__webglMultisampledFramebuffer );\n\t\t\t\t\t_gl.framebufferRenderbuffer( _gl.FRAMEBUFFER, _gl.COLOR_ATTACHMENT0, _gl.RENDERBUFFER, renderTargetProperties.__webglColorRenderbuffer );\n\t\t\t\t\t_gl.bindRenderbuffer( _gl.RENDERBUFFER, null );\n\n\t\t\t\t\tif ( renderTarget.depthBuffer ) {\n\n\t\t\t\t\t\trenderTargetProperties.__webglDepthRenderbuffer = _gl.createRenderbuffer();\n\t\t\t\t\t\tsetupRenderBufferStorage( renderTargetProperties.__webglDepthRenderbuffer, renderTarget, true );\n\n\t\t\t\t\t}\n\n\t\t\t\t\t_gl.bindFramebuffer( _gl.FRAMEBUFFER, null );\n\n\n\t\t\t\t} else {\n\n\t\t\t\t\tconsole.warn( 'THREE.WebGLRenderer: WebGLMultisampleRenderTarget can only be used with WebGL2.' );\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t}\n\n\t\t// Setup color buffer\n\n\t\tif ( isCube ) {\n\n\t\t\tstate.bindTexture( _gl.TEXTURE_CUBE_MAP, textureProperties.__webglTexture );\n\t\t\tsetTextureParameters( _gl.TEXTURE_CUBE_MAP, texture, supportsMips );\n\n\t\t\tfor ( let i = 0; i < 6; i ++ ) {\n\n\t\t\t\tsetupFrameBufferTexture( renderTargetProperties.__webglFramebuffer[ i ], renderTarget, _gl.COLOR_ATTACHMENT0, _gl.TEXTURE_CUBE_MAP_POSITIVE_X + i );\n\n\t\t\t}\n\n\t\t\tif ( textureNeedsGenerateMipmaps( texture, supportsMips ) ) {\n\n\t\t\t\tgenerateMipmap( _gl.TEXTURE_CUBE_MAP, texture, renderTarget.width, renderTarget.height );\n\n\t\t\t}\n\n\t\t\tstate.bindTexture( _gl.TEXTURE_CUBE_MAP, null );\n\n\t\t} else {\n\n\t\t\tlet glTextureType = _gl.TEXTURE_2D;\n\n\t\t\tif ( isRenderTarget3D ) {\n\n\t\t\t\t// Render targets containing layers, i.e: Texture 3D and 2d arrays\n\n\t\t\t\tif ( isWebGL2 ) {\n\n\t\t\t\t\tconst isTexture3D = texture.isDataTexture3D;\n\t\t\t\t\tglTextureType = isTexture3D ? _gl.TEXTURE_3D : _gl.TEXTURE_2D_ARRAY;\n\n\t\t\t\t} else {\n\n\t\t\t\t\tconsole.warn( 'THREE.DataTexture3D and THREE.DataTexture2DArray only supported with WebGL2.' );\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t\tstate.bindTexture( glTextureType, textureProperties.__webglTexture );\n\t\t\tsetTextureParameters( glTextureType, texture, supportsMips );\n\t\t\tsetupFrameBufferTexture( renderTargetProperties.__webglFramebuffer, renderTarget, _gl.COLOR_ATTACHMENT0, glTextureType );\n\n\t\t\tif ( textureNeedsGenerateMipmaps( texture, supportsMips ) ) {\n\n\t\t\t\tgenerateMipmap( _gl.TEXTURE_2D, texture, renderTarget.width, renderTarget.height );\n\n\t\t\t}\n\n\t\t\tstate.bindTexture( _gl.TEXTURE_2D, null );\n\n\t\t}\n\n\t\t// Setup depth and stencil buffers\n\n\t\tif ( renderTarget.depthBuffer ) {\n\n\t\t\tsetupDepthRenderbuffer( renderTarget );\n\n\t\t}\n\n\t}\n\n\tfunction updateRenderTargetMipmap( renderTarget ) {\n\n\t\tconst texture = renderTarget.texture;\n\n\t\tconst supportsMips = isPowerOfTwo( renderTarget ) || isWebGL2;\n\n\t\tif ( textureNeedsGenerateMipmaps( texture, supportsMips ) ) {\n\n\t\t\tconst target = renderTarget.isWebGLCubeRenderTarget ? _gl.TEXTURE_CUBE_MAP : _gl.TEXTURE_2D;\n\t\t\tconst webglTexture = properties.get( texture ).__webglTexture;\n\n\t\t\tstate.bindTexture( target, webglTexture );\n\t\t\tgenerateMipmap( target, texture, renderTarget.width, renderTarget.height );\n\t\t\tstate.bindTexture( target, null );\n\n\t\t}\n\n\t}\n\n\tfunction updateMultisampleRenderTarget( renderTarget ) {\n\n\t\tif ( renderTarget.isWebGLMultisampleRenderTarget ) {\n\n\t\t\tif ( isWebGL2 ) {\n\n\t\t\t\tconst renderTargetProperties = properties.get( renderTarget );\n\n\t\t\t\t_gl.bindFramebuffer( _gl.READ_FRAMEBUFFER, renderTargetProperties.__webglMultisampledFramebuffer );\n\t\t\t\t_gl.bindFramebuffer( _gl.DRAW_FRAMEBUFFER, renderTargetProperties.__webglFramebuffer );\n\n\t\t\t\tconst width = renderTarget.width;\n\t\t\t\tconst height = renderTarget.height;\n\t\t\t\tlet mask = _gl.COLOR_BUFFER_BIT;\n\n\t\t\t\tif ( renderTarget.depthBuffer ) mask |= _gl.DEPTH_BUFFER_BIT;\n\t\t\t\tif ( renderTarget.stencilBuffer ) mask |= _gl.STENCIL_BUFFER_BIT;\n\n\t\t\t\t_gl.blitFramebuffer( 0, 0, width, height, 0, 0, width, height, mask, _gl.NEAREST );\n\n\t\t\t\t_gl.bindFramebuffer( _gl.FRAMEBUFFER, renderTargetProperties.__webglMultisampledFramebuffer ); // see #18905\n\n\t\t\t} else {\n\n\t\t\t\tconsole.warn( 'THREE.WebGLRenderer: WebGLMultisampleRenderTarget can only be used with WebGL2.' );\n\n\t\t\t}\n\n\t\t}\n\n\t}\n\n\tfunction getRenderTargetSamples( renderTarget ) {\n\n\t\treturn ( isWebGL2 && renderTarget.isWebGLMultisampleRenderTarget ) ?\n\t\t\tMath.min( maxSamples, renderTarget.samples ) : 0;\n\n\t}\n\n\tfunction updateVideoTexture( texture ) {\n\n\t\tconst frame = info.render.frame;\n\n\t\t// Check the last frame we updated the VideoTexture\n\n\t\tif ( _videoTextures.get( texture ) !== frame ) {\n\n\t\t\t_videoTextures.set( texture, frame );\n\t\t\ttexture.update();\n\n\t\t}\n\n\t}\n\n\t// backwards compatibility\n\n\tlet warnedTexture2D = false;\n\tlet warnedTextureCube = false;\n\n\tfunction safeSetTexture2D( texture, slot ) {\n\n\t\tif ( texture && texture.isWebGLRenderTarget ) {\n\n\t\t\tif ( warnedTexture2D === false ) {\n\n\t\t\t\tconsole.warn( 'THREE.WebGLTextures.safeSetTexture2D: don\\'t use render targets as textures. Use their .texture property instead.' );\n\t\t\t\twarnedTexture2D = true;\n\n\t\t\t}\n\n\t\t\ttexture = texture.texture;\n\n\t\t}\n\n\t\tsetTexture2D( texture, slot );\n\n\t}\n\n\tfunction safeSetTextureCube( texture, slot ) {\n\n\t\tif ( texture && texture.isWebGLCubeRenderTarget ) {\n\n\t\t\tif ( warnedTextureCube === false ) {\n\n\t\t\t\tconsole.warn( 'THREE.WebGLTextures.safeSetTextureCube: don\\'t use cube render targets as textures. Use their .texture property instead.' );\n\t\t\t\twarnedTextureCube = true;\n\n\t\t\t}\n\n\t\t\ttexture = texture.texture;\n\n\t\t}\n\n\n\t\tsetTextureCube( texture, slot );\n\n\t}\n\n\t//\n\n\tthis.allocateTextureUnit = allocateTextureUnit;\n\tthis.resetTextureUnits = resetTextureUnits;\n\n\tthis.setTexture2D = setTexture2D;\n\tthis.setTexture2DArray = setTexture2DArray;\n\tthis.setTexture3D = setTexture3D;\n\tthis.setTextureCube = setTextureCube;\n\tthis.setupRenderTarget = setupRenderTarget;\n\tthis.updateRenderTargetMipmap = updateRenderTargetMipmap;\n\tthis.updateMultisampleRenderTarget = updateMultisampleRenderTarget;\n\n\tthis.safeSetTexture2D = safeSetTexture2D;\n\tthis.safeSetTextureCube = safeSetTextureCube;\n\n}\n\nexport { WebGLTextures };\n","import { RGBA_ASTC_4x4_Format, RGBA_ASTC_5x4_Format, RGBA_ASTC_5x5_Format, RGBA_ASTC_6x5_Format, RGBA_ASTC_6x6_Format, RGBA_ASTC_8x5_Format, RGBA_ASTC_8x6_Format, RGBA_ASTC_8x8_Format, RGBA_ASTC_10x5_Format, RGBA_ASTC_10x6_Format, RGBA_ASTC_10x8_Format, RGBA_ASTC_10x10_Format, RGBA_ASTC_12x10_Format, RGBA_ASTC_12x12_Format, RGB_ETC1_Format, RGB_ETC2_Format, RGBA_ETC2_EAC_Format, RGBA_PVRTC_2BPPV1_Format, RGBA_PVRTC_4BPPV1_Format, RGB_PVRTC_2BPPV1_Format, RGB_PVRTC_4BPPV1_Format, RGBA_S3TC_DXT5_Format, RGBA_S3TC_DXT3_Format, RGBA_S3TC_DXT1_Format, RGB_S3TC_DXT1_Format, DepthFormat, DepthStencilFormat, LuminanceAlphaFormat, LuminanceFormat, RedFormat, RGBAFormat, RGBFormat, AlphaFormat, RedIntegerFormat, RGFormat, RGIntegerFormat, RGBIntegerFormat, RGBAIntegerFormat, HalfFloatType, FloatType, UnsignedIntType, IntType, UnsignedShortType, ShortType, ByteType, UnsignedInt248Type, UnsignedShort565Type, UnsignedShort5551Type, UnsignedShort4444Type, UnsignedByteType, SRGB8_ALPHA8_ASTC_4x4_Format, SRGB8_ALPHA8_ASTC_5x4_Format, SRGB8_ALPHA8_ASTC_5x5_Format, SRGB8_ALPHA8_ASTC_6x5_Format, SRGB8_ALPHA8_ASTC_6x6_Format, SRGB8_ALPHA8_ASTC_8x5_Format, SRGB8_ALPHA8_ASTC_8x6_Format, SRGB8_ALPHA8_ASTC_8x8_Format, SRGB8_ALPHA8_ASTC_10x5_Format, SRGB8_ALPHA8_ASTC_10x6_Format, SRGB8_ALPHA8_ASTC_10x8_Format, SRGB8_ALPHA8_ASTC_10x10_Format, SRGB8_ALPHA8_ASTC_12x10_Format, SRGB8_ALPHA8_ASTC_12x12_Format, RGBA_BPTC_Format } from '../../constants.js';\n\nfunction WebGLUtils( gl, extensions, capabilities ) {\n\n\tconst isWebGL2 = capabilities.isWebGL2;\n\n\tfunction convert( p ) {\n\n\t\tlet extension;\n\n\t\tif ( p === UnsignedByteType ) return gl.UNSIGNED_BYTE;\n\t\tif ( p === UnsignedShort4444Type ) return gl.UNSIGNED_SHORT_4_4_4_4;\n\t\tif ( p === UnsignedShort5551Type ) return gl.UNSIGNED_SHORT_5_5_5_1;\n\t\tif ( p === UnsignedShort565Type ) return gl.UNSIGNED_SHORT_5_6_5;\n\n\t\tif ( p === ByteType ) return gl.BYTE;\n\t\tif ( p === ShortType ) return gl.SHORT;\n\t\tif ( p === UnsignedShortType ) return gl.UNSIGNED_SHORT;\n\t\tif ( p === IntType ) return gl.INT;\n\t\tif ( p === UnsignedIntType ) return gl.UNSIGNED_INT;\n\t\tif ( p === FloatType ) return gl.FLOAT;\n\n\t\tif ( p === HalfFloatType ) {\n\n\t\t\tif ( isWebGL2 ) return gl.HALF_FLOAT;\n\n\t\t\textension = extensions.get( 'OES_texture_half_float' );\n\n\t\t\tif ( extension !== null ) {\n\n\t\t\t\treturn extension.HALF_FLOAT_OES;\n\n\t\t\t} else {\n\n\t\t\t\treturn null;\n\n\t\t\t}\n\n\t\t}\n\n\t\tif ( p === AlphaFormat ) return gl.ALPHA;\n\t\tif ( p === RGBFormat ) return gl.RGB;\n\t\tif ( p === RGBAFormat ) return gl.RGBA;\n\t\tif ( p === LuminanceFormat ) return gl.LUMINANCE;\n\t\tif ( p === LuminanceAlphaFormat ) return gl.LUMINANCE_ALPHA;\n\t\tif ( p === DepthFormat ) return gl.DEPTH_COMPONENT;\n\t\tif ( p === DepthStencilFormat ) return gl.DEPTH_STENCIL;\n\t\tif ( p === RedFormat ) return gl.RED;\n\n\t\t// WebGL2 formats.\n\n\t\tif ( p === RedIntegerFormat ) return gl.RED_INTEGER;\n\t\tif ( p === RGFormat ) return gl.RG;\n\t\tif ( p === RGIntegerFormat ) return gl.RG_INTEGER;\n\t\tif ( p === RGBIntegerFormat ) return gl.RGB_INTEGER;\n\t\tif ( p === RGBAIntegerFormat ) return gl.RGBA_INTEGER;\n\n\t\tif ( p === RGB_S3TC_DXT1_Format || p === RGBA_S3TC_DXT1_Format ||\n\t\t\tp === RGBA_S3TC_DXT3_Format || p === RGBA_S3TC_DXT5_Format ) {\n\n\t\t\textension = extensions.get( 'WEBGL_compressed_texture_s3tc' );\n\n\t\t\tif ( extension !== null ) {\n\n\t\t\t\tif ( p === RGB_S3TC_DXT1_Format ) return extension.COMPRESSED_RGB_S3TC_DXT1_EXT;\n\t\t\t\tif ( p === RGBA_S3TC_DXT1_Format ) return extension.COMPRESSED_RGBA_S3TC_DXT1_EXT;\n\t\t\t\tif ( p === RGBA_S3TC_DXT3_Format ) return extension.COMPRESSED_RGBA_S3TC_DXT3_EXT;\n\t\t\t\tif ( p === RGBA_S3TC_DXT5_Format ) return extension.COMPRESSED_RGBA_S3TC_DXT5_EXT;\n\n\t\t\t} else {\n\n\t\t\t\treturn null;\n\n\t\t\t}\n\n\t\t}\n\n\t\tif ( p === RGB_PVRTC_4BPPV1_Format || p === RGB_PVRTC_2BPPV1_Format ||\n\t\t\tp === RGBA_PVRTC_4BPPV1_Format || p === RGBA_PVRTC_2BPPV1_Format ) {\n\n\t\t\textension = extensions.get( 'WEBGL_compressed_texture_pvrtc' );\n\n\t\t\tif ( extension !== null ) {\n\n\t\t\t\tif ( p === RGB_PVRTC_4BPPV1_Format ) return extension.COMPRESSED_RGB_PVRTC_4BPPV1_IMG;\n\t\t\t\tif ( p === RGB_PVRTC_2BPPV1_Format ) return extension.COMPRESSED_RGB_PVRTC_2BPPV1_IMG;\n\t\t\t\tif ( p === RGBA_PVRTC_4BPPV1_Format ) return extension.COMPRESSED_RGBA_PVRTC_4BPPV1_IMG;\n\t\t\t\tif ( p === RGBA_PVRTC_2BPPV1_Format ) return extension.COMPRESSED_RGBA_PVRTC_2BPPV1_IMG;\n\n\t\t\t} else {\n\n\t\t\t\treturn null;\n\n\t\t\t}\n\n\t\t}\n\n\t\tif ( p === RGB_ETC1_Format ) {\n\n\t\t\textension = extensions.get( 'WEBGL_compressed_texture_etc1' );\n\n\t\t\tif ( extension !== null ) {\n\n\t\t\t\treturn extension.COMPRESSED_RGB_ETC1_WEBGL;\n\n\t\t\t} else {\n\n\t\t\t\treturn null;\n\n\t\t\t}\n\n\t\t}\n\n\t\tif ( p === RGB_ETC2_Format || p === RGBA_ETC2_EAC_Format ) {\n\n\t\t\textension = extensions.get( 'WEBGL_compressed_texture_etc' );\n\n\t\t\tif ( extension !== null ) {\n\n\t\t\t\tif ( p === RGB_ETC2_Format ) return extension.COMPRESSED_RGB8_ETC2;\n\t\t\t\tif ( p === RGBA_ETC2_EAC_Format ) return extension.COMPRESSED_RGBA8_ETC2_EAC;\n\n\t\t\t}\n\n\t\t}\n\n\t\tif ( p === RGBA_ASTC_4x4_Format || p === RGBA_ASTC_5x4_Format || p === RGBA_ASTC_5x5_Format ||\n\t\t\tp === RGBA_ASTC_6x5_Format || p === RGBA_ASTC_6x6_Format || p === RGBA_ASTC_8x5_Format ||\n\t\t\tp === RGBA_ASTC_8x6_Format || p === RGBA_ASTC_8x8_Format || p === RGBA_ASTC_10x5_Format ||\n\t\t\tp === RGBA_ASTC_10x6_Format || p === RGBA_ASTC_10x8_Format || p === RGBA_ASTC_10x10_Format ||\n\t\t\tp === RGBA_ASTC_12x10_Format || p === RGBA_ASTC_12x12_Format ||\n\t\t\tp === SRGB8_ALPHA8_ASTC_4x4_Format || p === SRGB8_ALPHA8_ASTC_5x4_Format || p === SRGB8_ALPHA8_ASTC_5x5_Format ||\n\t\t\tp === SRGB8_ALPHA8_ASTC_6x5_Format || p === SRGB8_ALPHA8_ASTC_6x6_Format || p === SRGB8_ALPHA8_ASTC_8x5_Format ||\n\t\t\tp === SRGB8_ALPHA8_ASTC_8x6_Format || p === SRGB8_ALPHA8_ASTC_8x8_Format || p === SRGB8_ALPHA8_ASTC_10x5_Format ||\n\t\t\tp === SRGB8_ALPHA8_ASTC_10x6_Format || p === SRGB8_ALPHA8_ASTC_10x8_Format || p === SRGB8_ALPHA8_ASTC_10x10_Format ||\n\t\t\tp === SRGB8_ALPHA8_ASTC_12x10_Format || p === SRGB8_ALPHA8_ASTC_12x12_Format ) {\n\n\t\t\textension = extensions.get( 'WEBGL_compressed_texture_astc' );\n\n\t\t\tif ( extension !== null ) {\n\n\t\t\t\t// TODO Complete?\n\n\t\t\t\treturn p;\n\n\t\t\t} else {\n\n\t\t\t\treturn null;\n\n\t\t\t}\n\n\t\t}\n\n\t\tif ( p === RGBA_BPTC_Format ) {\n\n\t\t\textension = extensions.get( 'EXT_texture_compression_bptc' );\n\n\t\t\tif ( extension !== null ) {\n\n\t\t\t\t// TODO Complete?\n\n\t\t\t\treturn p;\n\n\t\t\t} else {\n\n\t\t\t\treturn null;\n\n\t\t\t}\n\n\t\t}\n\n\t\tif ( p === UnsignedInt248Type ) {\n\n\t\t\tif ( isWebGL2 ) return gl.UNSIGNED_INT_24_8;\n\n\t\t\textension = extensions.get( 'WEBGL_depth_texture' );\n\n\t\t\tif ( extension !== null ) {\n\n\t\t\t\treturn extension.UNSIGNED_INT_24_8_WEBGL;\n\n\t\t\t} else {\n\n\t\t\t\treturn null;\n\n\t\t\t}\n\n\t\t}\n\n\t}\n\n\treturn { convert: convert };\n\n}\n\n\nexport { WebGLUtils };\n","import { PerspectiveCamera } from './PerspectiveCamera.js';\n\nfunction ArrayCamera( array = [] ) {\n\n\tPerspectiveCamera.call( this );\n\n\tthis.cameras = array;\n\n}\n\nArrayCamera.prototype = Object.assign( Object.create( PerspectiveCamera.prototype ), {\n\n\tconstructor: ArrayCamera,\n\n\tisArrayCamera: true\n\n} );\n\n\nexport { ArrayCamera };\n","import { Object3D } from '../core/Object3D.js';\n\nclass Group extends Object3D {\n\n\tconstructor() {\n\n\t\tsuper();\n\n\t\tthis.type = 'Group';\n\n\t}\n\n}\n\nGroup.prototype.isGroup = true;\n\nexport { Group };\n","import { Group } from '../../objects/Group.js';\n\nfunction WebXRController() {\n\n\tthis._targetRay = null;\n\tthis._grip = null;\n\tthis._hand = null;\n\n}\n\nObject.assign( WebXRController.prototype, {\n\n\tconstructor: WebXRController,\n\n\tgetHandSpace: function () {\n\n\t\tif ( this._hand === null ) {\n\n\t\t\tthis._hand = new Group();\n\t\t\tthis._hand.matrixAutoUpdate = false;\n\t\t\tthis._hand.visible = false;\n\n\t\t\tthis._hand.joints = {};\n\t\t\tthis._hand.inputState = { pinching: false };\n\n\t\t}\n\n\t\treturn this._hand;\n\n\t},\n\n\tgetTargetRaySpace: function () {\n\n\t\tif ( this._targetRay === null ) {\n\n\t\t\tthis._targetRay = new Group();\n\t\t\tthis._targetRay.matrixAutoUpdate = false;\n\t\t\tthis._targetRay.visible = false;\n\n\t\t}\n\n\t\treturn this._targetRay;\n\n\t},\n\n\tgetGripSpace: function () {\n\n\t\tif ( this._grip === null ) {\n\n\t\t\tthis._grip = new Group();\n\t\t\tthis._grip.matrixAutoUpdate = false;\n\t\t\tthis._grip.visible = false;\n\n\t\t}\n\n\t\treturn this._grip;\n\n\t},\n\n\tdispatchEvent: function ( event ) {\n\n\t\tif ( this._targetRay !== null ) {\n\n\t\t\tthis._targetRay.dispatchEvent( event );\n\n\t\t}\n\n\t\tif ( this._grip !== null ) {\n\n\t\t\tthis._grip.dispatchEvent( event );\n\n\t\t}\n\n\t\tif ( this._hand !== null ) {\n\n\t\t\tthis._hand.dispatchEvent( event );\n\n\t\t}\n\n\t\treturn this;\n\n\t},\n\n\tdisconnect: function ( inputSource ) {\n\n\t\tthis.dispatchEvent( { type: 'disconnected', data: inputSource } );\n\n\t\tif ( this._targetRay !== null ) {\n\n\t\t\tthis._targetRay.visible = false;\n\n\t\t}\n\n\t\tif ( this._grip !== null ) {\n\n\t\t\tthis._grip.visible = false;\n\n\t\t}\n\n\t\tif ( this._hand !== null ) {\n\n\t\t\tthis._hand.visible = false;\n\n\t\t}\n\n\t\treturn this;\n\n\t},\n\n\tupdate: function ( inputSource, frame, referenceSpace ) {\n\n\t\tlet inputPose = null;\n\t\tlet gripPose = null;\n\t\tlet handPose = null;\n\n\t\tconst targetRay = this._targetRay;\n\t\tconst grip = this._grip;\n\t\tconst hand = this._hand;\n\n\t\tif ( inputSource && frame.session.visibilityState !== 'visible-blurred' ) {\n\n\t\t\tif ( hand && inputSource.hand ) {\n\n\t\t\t\thandPose = true;\n\n\t\t\t\tfor ( const inputjoint of inputSource.hand.values() ) {\n\n\t\t\t\t\t// Update the joints groups with the XRJoint poses\n\t\t\t\t\tconst jointPose = frame.getJointPose( inputjoint, referenceSpace );\n\n\t\t\t\t\tif ( hand.joints[ inputjoint.jointName ] === undefined ) {\n\n\t\t\t\t\t\t// The transform of this joint will be updated with the joint pose on each frame\n\t\t\t\t\t\tconst joint = new Group();\n\t\t\t\t\t\tjoint.matrixAutoUpdate = false;\n\t\t\t\t\t\tjoint.visible = false;\n\t\t\t\t\t\thand.joints[ inputjoint.jointName ] = joint;\n\t\t\t\t\t\t// ??\n\t\t\t\t\t\thand.add( joint );\n\n\t\t\t\t\t}\n\n\t\t\t\t\tconst joint = hand.joints[ inputjoint.jointName ];\n\n\t\t\t\t\tif ( jointPose !== null ) {\n\n\t\t\t\t\t\tjoint.matrix.fromArray( jointPose.transform.matrix );\n\t\t\t\t\t\tjoint.matrix.decompose( joint.position, joint.rotation, joint.scale );\n\t\t\t\t\t\tjoint.jointRadius = jointPose.radius;\n\n\t\t\t\t\t}\n\n\t\t\t\t\tjoint.visible = jointPose !== null;\n\n\t\t\t\t}\n\n\t\t\t\t// Custom events\n\n\t\t\t\t// Check pinchz\n\t\t\t\tconst indexTip = hand.joints[ 'index-finger-tip' ];\n\t\t\t\tconst thumbTip = hand.joints[ 'thumb-tip' ];\n\t\t\t\tconst distance = indexTip.position.distanceTo( thumbTip.position );\n\n\t\t\t\tconst distanceToPinch = 0.02;\n\t\t\t\tconst threshold = 0.005;\n\n\t\t\t\tif ( hand.inputState.pinching && distance > distanceToPinch + threshold ) {\n\n\t\t\t\t\thand.inputState.pinching = false;\n\t\t\t\t\tthis.dispatchEvent( {\n\t\t\t\t\t\ttype: 'pinchend',\n\t\t\t\t\t\thandedness: inputSource.handedness,\n\t\t\t\t\t\ttarget: this\n\t\t\t\t\t} );\n\n\t\t\t\t} else if ( ! hand.inputState.pinching && distance <= distanceToPinch - threshold ) {\n\n\t\t\t\t\thand.inputState.pinching = true;\n\t\t\t\t\tthis.dispatchEvent( {\n\t\t\t\t\t\ttype: 'pinchstart',\n\t\t\t\t\t\thandedness: inputSource.handedness,\n\t\t\t\t\t\ttarget: this\n\t\t\t\t\t} );\n\n\t\t\t\t}\n\n\t\t\t} else {\n\n\t\t\t\tif ( targetRay !== null ) {\n\n\t\t\t\t\tinputPose = frame.getPose( inputSource.targetRaySpace, referenceSpace );\n\n\t\t\t\t\tif ( inputPose !== null ) {\n\n\t\t\t\t\t\ttargetRay.matrix.fromArray( inputPose.transform.matrix );\n\t\t\t\t\t\ttargetRay.matrix.decompose( targetRay.position, targetRay.rotation, targetRay.scale );\n\n\t\t\t\t\t}\n\n\t\t\t\t}\n\n\t\t\t\tif ( grip !== null && inputSource.gripSpace ) {\n\n\t\t\t\t\tgripPose = frame.getPose( inputSource.gripSpace, referenceSpace );\n\n\t\t\t\t\tif ( gripPose !== null ) {\n\n\t\t\t\t\t\tgrip.matrix.fromArray( gripPose.transform.matrix );\n\t\t\t\t\t\tgrip.matrix.decompose( grip.position, grip.rotation, grip.scale );\n\n\t\t\t\t\t}\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t}\n\n\t\tif ( targetRay !== null ) {\n\n\t\t\ttargetRay.visible = ( inputPose !== null );\n\n\t\t}\n\n\t\tif ( grip !== null ) {\n\n\t\t\tgrip.visible = ( gripPose !== null );\n\n\t\t}\n\n\t\tif ( hand !== null ) {\n\n\t\t\thand.visible = ( handPose !== null );\n\n\t\t}\n\n\t\treturn this;\n\n\t}\n\n} );\n\n\nexport { WebXRController };\n","import { ArrayCamera } from '../../cameras/ArrayCamera.js';\nimport { EventDispatcher } from '../../core/EventDispatcher.js';\nimport { PerspectiveCamera } from '../../cameras/PerspectiveCamera.js';\nimport { Vector3 } from '../../math/Vector3.js';\nimport { Vector4 } from '../../math/Vector4.js';\nimport { WebGLAnimation } from '../webgl/WebGLAnimation.js';\nimport { WebXRController } from './WebXRController.js';\n\nfunction WebXRManager( renderer, gl ) {\n\n\tconst scope = this;\n\n\tlet session = null;\n\n\tlet framebufferScaleFactor = 1.0;\n\n\tlet referenceSpace = null;\n\tlet referenceSpaceType = 'local-floor';\n\n\tlet pose = null;\n\n\tconst controllers = [];\n\tconst inputSourcesMap = new Map();\n\n\t//\n\n\tconst cameraL = new PerspectiveCamera();\n\tcameraL.layers.enable( 1 );\n\tcameraL.viewport = new Vector4();\n\n\tconst cameraR = new PerspectiveCamera();\n\tcameraR.layers.enable( 2 );\n\tcameraR.viewport = new Vector4();\n\n\tconst cameras = [ cameraL, cameraR ];\n\n\tconst cameraVR = new ArrayCamera();\n\tcameraVR.layers.enable( 1 );\n\tcameraVR.layers.enable( 2 );\n\n\tlet _currentDepthNear = null;\n\tlet _currentDepthFar = null;\n\n\t//\n\n\tthis.enabled = false;\n\n\tthis.isPresenting = false;\n\n\tthis.getController = function ( index ) {\n\n\t\tlet controller = controllers[ index ];\n\n\t\tif ( controller === undefined ) {\n\n\t\t\tcontroller = new WebXRController();\n\t\t\tcontrollers[ index ] = controller;\n\n\t\t}\n\n\t\treturn controller.getTargetRaySpace();\n\n\t};\n\n\tthis.getControllerGrip = function ( index ) {\n\n\t\tlet controller = controllers[ index ];\n\n\t\tif ( controller === undefined ) {\n\n\t\t\tcontroller = new WebXRController();\n\t\t\tcontrollers[ index ] = controller;\n\n\t\t}\n\n\t\treturn controller.getGripSpace();\n\n\t};\n\n\tthis.getHand = function ( index ) {\n\n\t\tlet controller = controllers[ index ];\n\n\t\tif ( controller === undefined ) {\n\n\t\t\tcontroller = new WebXRController();\n\t\t\tcontrollers[ index ] = controller;\n\n\t\t}\n\n\t\treturn controller.getHandSpace();\n\n\t};\n\n\t//\n\n\tfunction onSessionEvent( event ) {\n\n\t\tconst controller = inputSourcesMap.get( event.inputSource );\n\n\t\tif ( controller ) {\n\n\t\t\tcontroller.dispatchEvent( { type: event.type, data: event.inputSource } );\n\n\t\t}\n\n\t}\n\n\tfunction onSessionEnd() {\n\n\t\tinputSourcesMap.forEach( function ( controller, inputSource ) {\n\n\t\t\tcontroller.disconnect( inputSource );\n\n\t\t} );\n\n\t\tinputSourcesMap.clear();\n\n\t\t_currentDepthNear = null;\n\t\t_currentDepthFar = null;\n\n\t\t//\n\n\t\trenderer.setFramebuffer( null );\n\t\trenderer.setRenderTarget( renderer.getRenderTarget() ); // Hack #15830\n\t\tanimation.stop();\n\n\t\tscope.isPresenting = false;\n\n\t\tscope.dispatchEvent( { type: 'sessionend' } );\n\n\t}\n\n\tthis.setFramebufferScaleFactor = function ( value ) {\n\n\t\tframebufferScaleFactor = value;\n\n\t\tif ( scope.isPresenting === true ) {\n\n\t\t\tconsole.warn( 'THREE.WebXRManager: Cannot change framebuffer scale while presenting.' );\n\n\t\t}\n\n\t};\n\n\tthis.setReferenceSpaceType = function ( value ) {\n\n\t\treferenceSpaceType = value;\n\n\t\tif ( scope.isPresenting === true ) {\n\n\t\t\tconsole.warn( 'THREE.WebXRManager: Cannot change reference space type while presenting.' );\n\n\t\t}\n\n\t};\n\n\tthis.getReferenceSpace = function () {\n\n\t\treturn referenceSpace;\n\n\t};\n\n\tthis.getSession = function () {\n\n\t\treturn session;\n\n\t};\n\n\tthis.setSession = async function ( value ) {\n\n\t\tsession = value;\n\n\t\tif ( session !== null ) {\n\n\t\t\tsession.addEventListener( 'select', onSessionEvent );\n\t\t\tsession.addEventListener( 'selectstart', onSessionEvent );\n\t\t\tsession.addEventListener( 'selectend', onSessionEvent );\n\t\t\tsession.addEventListener( 'squeeze', onSessionEvent );\n\t\t\tsession.addEventListener( 'squeezestart', onSessionEvent );\n\t\t\tsession.addEventListener( 'squeezeend', onSessionEvent );\n\t\t\tsession.addEventListener( 'end', onSessionEnd );\n\t\t\tsession.addEventListener( 'inputsourceschange', onInputSourcesChange );\n\n\t\t\tconst attributes = gl.getContextAttributes();\n\n\t\t\tif ( attributes.xrCompatible !== true ) {\n\n\t\t\t\tawait gl.makeXRCompatible();\n\n\t\t\t}\n\n\t\t\tconst layerInit = {\n\t\t\t\tantialias: attributes.antialias,\n\t\t\t\talpha: attributes.alpha,\n\t\t\t\tdepth: attributes.depth,\n\t\t\t\tstencil: attributes.stencil,\n\t\t\t\tframebufferScaleFactor: framebufferScaleFactor\n\t\t\t};\n\n\t\t\t// eslint-disable-next-line no-undef\n\t\t\tconst baseLayer = new XRWebGLLayer( session, gl, layerInit );\n\n\t\t\tsession.updateRenderState( { baseLayer: baseLayer } );\n\n\t\t\treferenceSpace = await session.requestReferenceSpace( referenceSpaceType );\n\n\t\t\tanimation.setContext( session );\n\t\t\tanimation.start();\n\n\t\t\tscope.isPresenting = true;\n\n\t\t\tscope.dispatchEvent( { type: 'sessionstart' } );\n\n\t\t}\n\n\t};\n\n\tfunction onInputSourcesChange( event ) {\n\n\t\tconst inputSources = session.inputSources;\n\n\t\t// Assign inputSources to available controllers\n\n\t\tfor ( let i = 0; i < controllers.length; i ++ ) {\n\n\t\t\tinputSourcesMap.set( inputSources[ i ], controllers[ i ] );\n\n\t\t}\n\n\t\t// Notify disconnected\n\n\t\tfor ( let i = 0; i < event.removed.length; i ++ ) {\n\n\t\t\tconst inputSource = event.removed[ i ];\n\t\t\tconst controller = inputSourcesMap.get( inputSource );\n\n\t\t\tif ( controller ) {\n\n\t\t\t\tcontroller.dispatchEvent( { type: 'disconnected', data: inputSource } );\n\t\t\t\tinputSourcesMap.delete( inputSource );\n\n\t\t\t}\n\n\t\t}\n\n\t\t// Notify connected\n\n\t\tfor ( let i = 0; i < event.added.length; i ++ ) {\n\n\t\t\tconst inputSource = event.added[ i ];\n\t\t\tconst controller = inputSourcesMap.get( inputSource );\n\n\t\t\tif ( controller ) {\n\n\t\t\t\tcontroller.dispatchEvent( { type: 'connected', data: inputSource } );\n\n\t\t\t}\n\n\t\t}\n\n\t}\n\n\t//\n\n\tconst cameraLPos = new Vector3();\n\tconst cameraRPos = new Vector3();\n\n\t/**\n\t * Assumes 2 cameras that are parallel and share an X-axis, and that\n\t * the cameras' projection and world matrices have already been set.\n\t * And that near and far planes are identical for both cameras.\n\t * Visualization of this technique: https://computergraphics.stackexchange.com/a/4765\n\t */\n\tfunction setProjectionFromUnion( camera, cameraL, cameraR ) {\n\n\t\tcameraLPos.setFromMatrixPosition( cameraL.matrixWorld );\n\t\tcameraRPos.setFromMatrixPosition( cameraR.matrixWorld );\n\n\t\tconst ipd = cameraLPos.distanceTo( cameraRPos );\n\n\t\tconst projL = cameraL.projectionMatrix.elements;\n\t\tconst projR = cameraR.projectionMatrix.elements;\n\n\t\t// VR systems will have identical far and near planes, and\n\t\t// most likely identical top and bottom frustum extents.\n\t\t// Use the left camera for these values.\n\t\tconst near = projL[ 14 ] / ( projL[ 10 ] - 1 );\n\t\tconst far = projL[ 14 ] / ( projL[ 10 ] + 1 );\n\t\tconst topFov = ( projL[ 9 ] + 1 ) / projL[ 5 ];\n\t\tconst bottomFov = ( projL[ 9 ] - 1 ) / projL[ 5 ];\n\n\t\tconst leftFov = ( projL[ 8 ] - 1 ) / projL[ 0 ];\n\t\tconst rightFov = ( projR[ 8 ] + 1 ) / projR[ 0 ];\n\t\tconst left = near * leftFov;\n\t\tconst right = near * rightFov;\n\n\t\t// Calculate the new camera's position offset from the\n\t\t// left camera. xOffset should be roughly half `ipd`.\n\t\tconst zOffset = ipd / ( - leftFov + rightFov );\n\t\tconst xOffset = zOffset * - leftFov;\n\n\t\t// TODO: Better way to apply this offset?\n\t\tcameraL.matrixWorld.decompose( camera.position, camera.quaternion, camera.scale );\n\t\tcamera.translateX( xOffset );\n\t\tcamera.translateZ( zOffset );\n\t\tcamera.matrixWorld.compose( camera.position, camera.quaternion, camera.scale );\n\t\tcamera.matrixWorldInverse.copy( camera.matrixWorld ).invert();\n\n\t\t// Find the union of the frustum values of the cameras and scale\n\t\t// the values so that the near plane's position does not change in world space,\n\t\t// although must now be relative to the new union camera.\n\t\tconst near2 = near + zOffset;\n\t\tconst far2 = far + zOffset;\n\t\tconst left2 = left - xOffset;\n\t\tconst right2 = right + ( ipd - xOffset );\n\t\tconst top2 = topFov * far / far2 * near2;\n\t\tconst bottom2 = bottomFov * far / far2 * near2;\n\n\t\tcamera.projectionMatrix.makePerspective( left2, right2, top2, bottom2, near2, far2 );\n\n\t}\n\n\tfunction updateCamera( camera, parent ) {\n\n\t\tif ( parent === null ) {\n\n\t\t\tcamera.matrixWorld.copy( camera.matrix );\n\n\t\t} else {\n\n\t\t\tcamera.matrixWorld.multiplyMatrices( parent.matrixWorld, camera.matrix );\n\n\t\t}\n\n\t\tcamera.matrixWorldInverse.copy( camera.matrixWorld ).invert();\n\n\t}\n\n\tthis.getCamera = function ( camera ) {\n\n\t\tcameraVR.near = cameraR.near = cameraL.near = camera.near;\n\t\tcameraVR.far = cameraR.far = cameraL.far = camera.far;\n\n\t\tif ( _currentDepthNear !== cameraVR.near || _currentDepthFar !== cameraVR.far ) {\n\n\t\t\t// Note that the new renderState won't apply until the next frame. See #18320\n\n\t\t\tsession.updateRenderState( {\n\t\t\t\tdepthNear: cameraVR.near,\n\t\t\t\tdepthFar: cameraVR.far\n\t\t\t} );\n\n\t\t\t_currentDepthNear = cameraVR.near;\n\t\t\t_currentDepthFar = cameraVR.far;\n\n\t\t}\n\n\t\tconst parent = camera.parent;\n\t\tconst cameras = cameraVR.cameras;\n\n\t\tupdateCamera( cameraVR, parent );\n\n\t\tfor ( let i = 0; i < cameras.length; i ++ ) {\n\n\t\t\tupdateCamera( cameras[ i ], parent );\n\n\t\t}\n\n\t\t// update camera and its children\n\n\t\tcamera.matrixWorld.copy( cameraVR.matrixWorld );\n\t\tcamera.matrix.copy( cameraVR.matrix );\n\t\tcamera.matrix.decompose( camera.position, camera.quaternion, camera.scale );\n\n\t\tconst children = camera.children;\n\n\t\tfor ( let i = 0, l = children.length; i < l; i ++ ) {\n\n\t\t\tchildren[ i ].updateMatrixWorld( true );\n\n\t\t}\n\n\t\t// update projection matrix for proper view frustum culling\n\n\t\tif ( cameras.length === 2 ) {\n\n\t\t\tsetProjectionFromUnion( cameraVR, cameraL, cameraR );\n\n\t\t} else {\n\n\t\t\t// assume single camera setup (AR)\n\n\t\t\tcameraVR.projectionMatrix.copy( cameraL.projectionMatrix );\n\n\t\t}\n\n\t\treturn cameraVR;\n\n\t};\n\n\t// Animation Loop\n\n\tlet onAnimationFrameCallback = null;\n\n\tfunction onAnimationFrame( time, frame ) {\n\n\t\tpose = frame.getViewerPose( referenceSpace );\n\n\t\tif ( pose !== null ) {\n\n\t\t\tconst views = pose.views;\n\t\t\tconst baseLayer = session.renderState.baseLayer;\n\n\t\t\trenderer.setFramebuffer( baseLayer.framebuffer );\n\n\t\t\tlet cameraVRNeedsUpdate = false;\n\n\t\t\t// check if it's necessary to rebuild cameraVR's camera list\n\n\t\t\tif ( views.length !== cameraVR.cameras.length ) {\n\n\t\t\t\tcameraVR.cameras.length = 0;\n\t\t\t\tcameraVRNeedsUpdate = true;\n\n\t\t\t}\n\n\t\t\tfor ( let i = 0; i < views.length; i ++ ) {\n\n\t\t\t\tconst view = views[ i ];\n\t\t\t\tconst viewport = baseLayer.getViewport( view );\n\n\t\t\t\tconst camera = cameras[ i ];\n\t\t\t\tcamera.matrix.fromArray( view.transform.matrix );\n\t\t\t\tcamera.projectionMatrix.fromArray( view.projectionMatrix );\n\t\t\t\tcamera.viewport.set( viewport.x, viewport.y, viewport.width, viewport.height );\n\n\t\t\t\tif ( i === 0 ) {\n\n\t\t\t\t\tcameraVR.matrix.copy( camera.matrix );\n\n\t\t\t\t}\n\n\t\t\t\tif ( cameraVRNeedsUpdate === true ) {\n\n\t\t\t\t\tcameraVR.cameras.push( camera );\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t}\n\n\t\t//\n\n\t\tconst inputSources = session.inputSources;\n\n\t\tfor ( let i = 0; i < controllers.length; i ++ ) {\n\n\t\t\tconst controller = controllers[ i ];\n\t\t\tconst inputSource = inputSources[ i ];\n\n\t\t\tcontroller.update( inputSource, frame, referenceSpace );\n\n\t\t}\n\n\t\tif ( onAnimationFrameCallback ) onAnimationFrameCallback( time, frame );\n\n\t}\n\n\tconst animation = new WebGLAnimation();\n\tanimation.setAnimationLoop( onAnimationFrame );\n\n\tthis.setAnimationLoop = function ( callback ) {\n\n\t\tonAnimationFrameCallback = callback;\n\n\t};\n\n\tthis.dispose = function () {};\n\n}\n\nObject.assign( WebXRManager.prototype, EventDispatcher.prototype );\n\nexport { WebXRManager };\n","import { BackSide } from '../../constants.js';\n\nfunction WebGLMaterials( properties ) {\n\n\tfunction refreshFogUniforms( uniforms, fog ) {\n\n\t\tuniforms.fogColor.value.copy( fog.color );\n\n\t\tif ( fog.isFog ) {\n\n\t\t\tuniforms.fogNear.value = fog.near;\n\t\t\tuniforms.fogFar.value = fog.far;\n\n\t\t} else if ( fog.isFogExp2 ) {\n\n\t\t\tuniforms.fogDensity.value = fog.density;\n\n\t\t}\n\n\t}\n\n\tfunction refreshMaterialUniforms( uniforms, material, pixelRatio, height ) {\n\n\t\tif ( material.isMeshBasicMaterial ) {\n\n\t\t\trefreshUniformsCommon( uniforms, material );\n\n\t\t} else if ( material.isMeshLambertMaterial ) {\n\n\t\t\trefreshUniformsCommon( uniforms, material );\n\t\t\trefreshUniformsLambert( uniforms, material );\n\n\t\t} else if ( material.isMeshToonMaterial ) {\n\n\t\t\trefreshUniformsCommon( uniforms, material );\n\t\t\trefreshUniformsToon( uniforms, material );\n\n\t\t} else if ( material.isMeshPhongMaterial ) {\n\n\t\t\trefreshUniformsCommon( uniforms, material );\n\t\t\trefreshUniformsPhong( uniforms, material );\n\n\t\t} else if ( material.isMeshStandardMaterial ) {\n\n\t\t\trefreshUniformsCommon( uniforms, material );\n\n\t\t\tif ( material.isMeshPhysicalMaterial ) {\n\n\t\t\t\trefreshUniformsPhysical( uniforms, material );\n\n\t\t\t} else {\n\n\t\t\t\trefreshUniformsStandard( uniforms, material );\n\n\t\t\t}\n\n\t\t} else if ( material.isMeshMatcapMaterial ) {\n\n\t\t\trefreshUniformsCommon( uniforms, material );\n\t\t\trefreshUniformsMatcap( uniforms, material );\n\n\t\t} else if ( material.isMeshDepthMaterial ) {\n\n\t\t\trefreshUniformsCommon( uniforms, material );\n\t\t\trefreshUniformsDepth( uniforms, material );\n\n\t\t} else if ( material.isMeshDistanceMaterial ) {\n\n\t\t\trefreshUniformsCommon( uniforms, material );\n\t\t\trefreshUniformsDistance( uniforms, material );\n\n\t\t} else if ( material.isMeshNormalMaterial ) {\n\n\t\t\trefreshUniformsCommon( uniforms, material );\n\t\t\trefreshUniformsNormal( uniforms, material );\n\n\t\t} else if ( material.isLineBasicMaterial ) {\n\n\t\t\trefreshUniformsLine( uniforms, material );\n\n\t\t\tif ( material.isLineDashedMaterial ) {\n\n\t\t\t\trefreshUniformsDash( uniforms, material );\n\n\t\t\t}\n\n\t\t} else if ( material.isPointsMaterial ) {\n\n\t\t\trefreshUniformsPoints( uniforms, material, pixelRatio, height );\n\n\t\t} else if ( material.isSpriteMaterial ) {\n\n\t\t\trefreshUniformsSprites( uniforms, material );\n\n\t\t} else if ( material.isShadowMaterial ) {\n\n\t\t\tuniforms.color.value.copy( material.color );\n\t\t\tuniforms.opacity.value = material.opacity;\n\n\t\t} else if ( material.isShaderMaterial ) {\n\n\t\t\tmaterial.uniformsNeedUpdate = false; // #15581\n\n\t\t}\n\n\t}\n\n\tfunction refreshUniformsCommon( uniforms, material ) {\n\n\t\tuniforms.opacity.value = material.opacity;\n\n\t\tif ( material.color ) {\n\n\t\t\tuniforms.diffuse.value.copy( material.color );\n\n\t\t}\n\n\t\tif ( material.emissive ) {\n\n\t\t\tuniforms.emissive.value.copy( material.emissive ).multiplyScalar( material.emissiveIntensity );\n\n\t\t}\n\n\t\tif ( material.map ) {\n\n\t\t\tuniforms.map.value = material.map;\n\n\t\t}\n\n\t\tif ( material.alphaMap ) {\n\n\t\t\tuniforms.alphaMap.value = material.alphaMap;\n\n\t\t}\n\n\t\tif ( material.specularMap ) {\n\n\t\t\tuniforms.specularMap.value = material.specularMap;\n\n\t\t}\n\n\t\tconst envMap = properties.get( material ).envMap;\n\n\t\tif ( envMap ) {\n\n\t\t\tuniforms.envMap.value = envMap;\n\n\t\t\tuniforms.flipEnvMap.value = ( envMap.isCubeTexture && envMap._needsFlipEnvMap ) ? - 1 : 1;\n\n\t\t\tuniforms.reflectivity.value = material.reflectivity;\n\t\t\tuniforms.refractionRatio.value = material.refractionRatio;\n\n\t\t\tconst maxMipLevel = properties.get( envMap ).__maxMipLevel;\n\n\t\t\tif ( maxMipLevel !== undefined ) {\n\n\t\t\t\tuniforms.maxMipLevel.value = maxMipLevel;\n\n\t\t\t}\n\n\t\t}\n\n\t\tif ( material.lightMap ) {\n\n\t\t\tuniforms.lightMap.value = material.lightMap;\n\t\t\tuniforms.lightMapIntensity.value = material.lightMapIntensity;\n\n\t\t}\n\n\t\tif ( material.aoMap ) {\n\n\t\t\tuniforms.aoMap.value = material.aoMap;\n\t\t\tuniforms.aoMapIntensity.value = material.aoMapIntensity;\n\n\t\t}\n\n\t\t// uv repeat and offset setting priorities\n\t\t// 1. color map\n\t\t// 2. specular map\n\t\t// 3. displacementMap map\n\t\t// 4. normal map\n\t\t// 5. bump map\n\t\t// 6. roughnessMap map\n\t\t// 7. metalnessMap map\n\t\t// 8. alphaMap map\n\t\t// 9. emissiveMap map\n\t\t// 10. clearcoat map\n\t\t// 11. clearcoat normal map\n\t\t// 12. clearcoat roughnessMap map\n\n\t\tlet uvScaleMap;\n\n\t\tif ( material.map ) {\n\n\t\t\tuvScaleMap = material.map;\n\n\t\t} else if ( material.specularMap ) {\n\n\t\t\tuvScaleMap = material.specularMap;\n\n\t\t} else if ( material.displacementMap ) {\n\n\t\t\tuvScaleMap = material.displacementMap;\n\n\t\t} else if ( material.normalMap ) {\n\n\t\t\tuvScaleMap = material.normalMap;\n\n\t\t} else if ( material.bumpMap ) {\n\n\t\t\tuvScaleMap = material.bumpMap;\n\n\t\t} else if ( material.roughnessMap ) {\n\n\t\t\tuvScaleMap = material.roughnessMap;\n\n\t\t} else if ( material.metalnessMap ) {\n\n\t\t\tuvScaleMap = material.metalnessMap;\n\n\t\t} else if ( material.alphaMap ) {\n\n\t\t\tuvScaleMap = material.alphaMap;\n\n\t\t} else if ( material.emissiveMap ) {\n\n\t\t\tuvScaleMap = material.emissiveMap;\n\n\t\t} else if ( material.clearcoatMap ) {\n\n\t\t\tuvScaleMap = material.clearcoatMap;\n\n\t\t} else if ( material.clearcoatNormalMap ) {\n\n\t\t\tuvScaleMap = material.clearcoatNormalMap;\n\n\t\t} else if ( material.clearcoatRoughnessMap ) {\n\n\t\t\tuvScaleMap = material.clearcoatRoughnessMap;\n\n\t\t}\n\n\t\tif ( uvScaleMap !== undefined ) {\n\n\t\t\t// backwards compatibility\n\t\t\tif ( uvScaleMap.isWebGLRenderTarget ) {\n\n\t\t\t\tuvScaleMap = uvScaleMap.texture;\n\n\t\t\t}\n\n\t\t\tif ( uvScaleMap.matrixAutoUpdate === true ) {\n\n\t\t\t\tuvScaleMap.updateMatrix();\n\n\t\t\t}\n\n\t\t\tuniforms.uvTransform.value.copy( uvScaleMap.matrix );\n\n\t\t}\n\n\t\t// uv repeat and offset setting priorities for uv2\n\t\t// 1. ao map\n\t\t// 2. light map\n\n\t\tlet uv2ScaleMap;\n\n\t\tif ( material.aoMap ) {\n\n\t\t\tuv2ScaleMap = material.aoMap;\n\n\t\t} else if ( material.lightMap ) {\n\n\t\t\tuv2ScaleMap = material.lightMap;\n\n\t\t}\n\n\t\tif ( uv2ScaleMap !== undefined ) {\n\n\t\t\t// backwards compatibility\n\t\t\tif ( uv2ScaleMap.isWebGLRenderTarget ) {\n\n\t\t\t\tuv2ScaleMap = uv2ScaleMap.texture;\n\n\t\t\t}\n\n\t\t\tif ( uv2ScaleMap.matrixAutoUpdate === true ) {\n\n\t\t\t\tuv2ScaleMap.updateMatrix();\n\n\t\t\t}\n\n\t\t\tuniforms.uv2Transform.value.copy( uv2ScaleMap.matrix );\n\n\t\t}\n\n\t}\n\n\tfunction refreshUniformsLine( uniforms, material ) {\n\n\t\tuniforms.diffuse.value.copy( material.color );\n\t\tuniforms.opacity.value = material.opacity;\n\n\t}\n\n\tfunction refreshUniformsDash( uniforms, material ) {\n\n\t\tuniforms.dashSize.value = material.dashSize;\n\t\tuniforms.totalSize.value = material.dashSize + material.gapSize;\n\t\tuniforms.scale.value = material.scale;\n\n\t}\n\n\tfunction refreshUniformsPoints( uniforms, material, pixelRatio, height ) {\n\n\t\tuniforms.diffuse.value.copy( material.color );\n\t\tuniforms.opacity.value = material.opacity;\n\t\tuniforms.size.value = material.size * pixelRatio;\n\t\tuniforms.scale.value = height * 0.5;\n\n\t\tif ( material.map ) {\n\n\t\t\tuniforms.map.value = material.map;\n\n\t\t}\n\n\t\tif ( material.alphaMap ) {\n\n\t\t\tuniforms.alphaMap.value = material.alphaMap;\n\n\t\t}\n\n\t\t// uv repeat and offset setting priorities\n\t\t// 1. color map\n\t\t// 2. alpha map\n\n\t\tlet uvScaleMap;\n\n\t\tif ( material.map ) {\n\n\t\t\tuvScaleMap = material.map;\n\n\t\t} else if ( material.alphaMap ) {\n\n\t\t\tuvScaleMap = material.alphaMap;\n\n\t\t}\n\n\t\tif ( uvScaleMap !== undefined ) {\n\n\t\t\tif ( uvScaleMap.matrixAutoUpdate === true ) {\n\n\t\t\t\tuvScaleMap.updateMatrix();\n\n\t\t\t}\n\n\t\t\tuniforms.uvTransform.value.copy( uvScaleMap.matrix );\n\n\t\t}\n\n\t}\n\n\tfunction refreshUniformsSprites( uniforms, material ) {\n\n\t\tuniforms.diffuse.value.copy( material.color );\n\t\tuniforms.opacity.value = material.opacity;\n\t\tuniforms.rotation.value = material.rotation;\n\n\t\tif ( material.map ) {\n\n\t\t\tuniforms.map.value = material.map;\n\n\t\t}\n\n\t\tif ( material.alphaMap ) {\n\n\t\t\tuniforms.alphaMap.value = material.alphaMap;\n\n\t\t}\n\n\t\t// uv repeat and offset setting priorities\n\t\t// 1. color map\n\t\t// 2. alpha map\n\n\t\tlet uvScaleMap;\n\n\t\tif ( material.map ) {\n\n\t\t\tuvScaleMap = material.map;\n\n\t\t} else if ( material.alphaMap ) {\n\n\t\t\tuvScaleMap = material.alphaMap;\n\n\t\t}\n\n\t\tif ( uvScaleMap !== undefined ) {\n\n\t\t\tif ( uvScaleMap.matrixAutoUpdate === true ) {\n\n\t\t\t\tuvScaleMap.updateMatrix();\n\n\t\t\t}\n\n\t\t\tuniforms.uvTransform.value.copy( uvScaleMap.matrix );\n\n\t\t}\n\n\t}\n\n\tfunction refreshUniformsLambert( uniforms, material ) {\n\n\t\tif ( material.emissiveMap ) {\n\n\t\t\tuniforms.emissiveMap.value = material.emissiveMap;\n\n\t\t}\n\n\t}\n\n\tfunction refreshUniformsPhong( uniforms, material ) {\n\n\t\tuniforms.specular.value.copy( material.specular );\n\t\tuniforms.shininess.value = Math.max( material.shininess, 1e-4 ); // to prevent pow( 0.0, 0.0 )\n\n\t\tif ( material.emissiveMap ) {\n\n\t\t\tuniforms.emissiveMap.value = material.emissiveMap;\n\n\t\t}\n\n\t\tif ( material.bumpMap ) {\n\n\t\t\tuniforms.bumpMap.value = material.bumpMap;\n\t\t\tuniforms.bumpScale.value = material.bumpScale;\n\t\t\tif ( material.side === BackSide ) uniforms.bumpScale.value *= - 1;\n\n\t\t}\n\n\t\tif ( material.normalMap ) {\n\n\t\t\tuniforms.normalMap.value = material.normalMap;\n\t\t\tuniforms.normalScale.value.copy( material.normalScale );\n\t\t\tif ( material.side === BackSide ) uniforms.normalScale.value.negate();\n\n\t\t}\n\n\t\tif ( material.displacementMap ) {\n\n\t\t\tuniforms.displacementMap.value = material.displacementMap;\n\t\t\tuniforms.displacementScale.value = material.displacementScale;\n\t\t\tuniforms.displacementBias.value = material.displacementBias;\n\n\t\t}\n\n\t}\n\n\tfunction refreshUniformsToon( uniforms, material ) {\n\n\t\tif ( material.gradientMap ) {\n\n\t\t\tuniforms.gradientMap.value = material.gradientMap;\n\n\t\t}\n\n\t\tif ( material.emissiveMap ) {\n\n\t\t\tuniforms.emissiveMap.value = material.emissiveMap;\n\n\t\t}\n\n\t\tif ( material.bumpMap ) {\n\n\t\t\tuniforms.bumpMap.value = material.bumpMap;\n\t\t\tuniforms.bumpScale.value = material.bumpScale;\n\t\t\tif ( material.side === BackSide ) uniforms.bumpScale.value *= - 1;\n\n\t\t}\n\n\t\tif ( material.normalMap ) {\n\n\t\t\tuniforms.normalMap.value = material.normalMap;\n\t\t\tuniforms.normalScale.value.copy( material.normalScale );\n\t\t\tif ( material.side === BackSide ) uniforms.normalScale.value.negate();\n\n\t\t}\n\n\t\tif ( material.displacementMap ) {\n\n\t\t\tuniforms.displacementMap.value = material.displacementMap;\n\t\t\tuniforms.displacementScale.value = material.displacementScale;\n\t\t\tuniforms.displacementBias.value = material.displacementBias;\n\n\t\t}\n\n\t}\n\n\tfunction refreshUniformsStandard( uniforms, material ) {\n\n\t\tuniforms.roughness.value = material.roughness;\n\t\tuniforms.metalness.value = material.metalness;\n\n\t\tif ( material.roughnessMap ) {\n\n\t\t\tuniforms.roughnessMap.value = material.roughnessMap;\n\n\t\t}\n\n\t\tif ( material.metalnessMap ) {\n\n\t\t\tuniforms.metalnessMap.value = material.metalnessMap;\n\n\t\t}\n\n\t\tif ( material.emissiveMap ) {\n\n\t\t\tuniforms.emissiveMap.value = material.emissiveMap;\n\n\t\t}\n\n\t\tif ( material.bumpMap ) {\n\n\t\t\tuniforms.bumpMap.value = material.bumpMap;\n\t\t\tuniforms.bumpScale.value = material.bumpScale;\n\t\t\tif ( material.side === BackSide ) uniforms.bumpScale.value *= - 1;\n\n\t\t}\n\n\t\tif ( material.normalMap ) {\n\n\t\t\tuniforms.normalMap.value = material.normalMap;\n\t\t\tuniforms.normalScale.value.copy( material.normalScale );\n\t\t\tif ( material.side === BackSide ) uniforms.normalScale.value.negate();\n\n\t\t}\n\n\t\tif ( material.displacementMap ) {\n\n\t\t\tuniforms.displacementMap.value = material.displacementMap;\n\t\t\tuniforms.displacementScale.value = material.displacementScale;\n\t\t\tuniforms.displacementBias.value = material.displacementBias;\n\n\t\t}\n\n\t\tconst envMap = properties.get( material ).envMap;\n\n\t\tif ( envMap ) {\n\n\t\t\t//uniforms.envMap.value = material.envMap; // part of uniforms common\n\t\t\tuniforms.envMapIntensity.value = material.envMapIntensity;\n\n\t\t}\n\n\t}\n\n\tfunction refreshUniformsPhysical( uniforms, material ) {\n\n\t\trefreshUniformsStandard( uniforms, material );\n\n\t\tuniforms.reflectivity.value = material.reflectivity; // also part of uniforms common\n\n\t\tuniforms.clearcoat.value = material.clearcoat;\n\t\tuniforms.clearcoatRoughness.value = material.clearcoatRoughness;\n\t\tif ( material.sheen ) uniforms.sheen.value.copy( material.sheen );\n\n\t\tif ( material.clearcoatMap ) {\n\n\t\t\tuniforms.clearcoatMap.value = material.clearcoatMap;\n\n\t\t}\n\n\t\tif ( material.clearcoatRoughnessMap ) {\n\n\t\t\tuniforms.clearcoatRoughnessMap.value = material.clearcoatRoughnessMap;\n\n\t\t}\n\n\t\tif ( material.clearcoatNormalMap ) {\n\n\t\t\tuniforms.clearcoatNormalScale.value.copy( material.clearcoatNormalScale );\n\t\t\tuniforms.clearcoatNormalMap.value = material.clearcoatNormalMap;\n\n\t\t\tif ( material.side === BackSide ) {\n\n\t\t\t\tuniforms.clearcoatNormalScale.value.negate();\n\n\t\t\t}\n\n\t\t}\n\n\t\tuniforms.transmission.value = material.transmission;\n\n\t\tif ( material.transmissionMap ) {\n\n\t\t\tuniforms.transmissionMap.value = material.transmissionMap;\n\n\t\t}\n\n\t}\n\n\tfunction refreshUniformsMatcap( uniforms, material ) {\n\n\t\tif ( material.matcap ) {\n\n\t\t\tuniforms.matcap.value = material.matcap;\n\n\t\t}\n\n\t\tif ( material.bumpMap ) {\n\n\t\t\tuniforms.bumpMap.value = material.bumpMap;\n\t\t\tuniforms.bumpScale.value = material.bumpScale;\n\t\t\tif ( material.side === BackSide ) uniforms.bumpScale.value *= - 1;\n\n\t\t}\n\n\t\tif ( material.normalMap ) {\n\n\t\t\tuniforms.normalMap.value = material.normalMap;\n\t\t\tuniforms.normalScale.value.copy( material.normalScale );\n\t\t\tif ( material.side === BackSide ) uniforms.normalScale.value.negate();\n\n\t\t}\n\n\t\tif ( material.displacementMap ) {\n\n\t\t\tuniforms.displacementMap.value = material.displacementMap;\n\t\t\tuniforms.displacementScale.value = material.displacementScale;\n\t\t\tuniforms.displacementBias.value = material.displacementBias;\n\n\t\t}\n\n\t}\n\n\tfunction refreshUniformsDepth( uniforms, material ) {\n\n\t\tif ( material.displacementMap ) {\n\n\t\t\tuniforms.displacementMap.value = material.displacementMap;\n\t\t\tuniforms.displacementScale.value = material.displacementScale;\n\t\t\tuniforms.displacementBias.value = material.displacementBias;\n\n\t\t}\n\n\t}\n\n\tfunction refreshUniformsDistance( uniforms, material ) {\n\n\t\tif ( material.displacementMap ) {\n\n\t\t\tuniforms.displacementMap.value = material.displacementMap;\n\t\t\tuniforms.displacementScale.value = material.displacementScale;\n\t\t\tuniforms.displacementBias.value = material.displacementBias;\n\n\t\t}\n\n\t\tuniforms.referencePosition.value.copy( material.referencePosition );\n\t\tuniforms.nearDistance.value = material.nearDistance;\n\t\tuniforms.farDistance.value = material.farDistance;\n\n\t}\n\n\tfunction refreshUniformsNormal( uniforms, material ) {\n\n\t\tif ( material.bumpMap ) {\n\n\t\t\tuniforms.bumpMap.value = material.bumpMap;\n\t\t\tuniforms.bumpScale.value = material.bumpScale;\n\t\t\tif ( material.side === BackSide ) uniforms.bumpScale.value *= - 1;\n\n\t\t}\n\n\t\tif ( material.normalMap ) {\n\n\t\t\tuniforms.normalMap.value = material.normalMap;\n\t\t\tuniforms.normalScale.value.copy( material.normalScale );\n\t\t\tif ( material.side === BackSide ) uniforms.normalScale.value.negate();\n\n\t\t}\n\n\t\tif ( material.displacementMap ) {\n\n\t\t\tuniforms.displacementMap.value = material.displacementMap;\n\t\t\tuniforms.displacementScale.value = material.displacementScale;\n\t\t\tuniforms.displacementBias.value = material.displacementBias;\n\n\t\t}\n\n\t}\n\n\treturn {\n\t\trefreshFogUniforms: refreshFogUniforms,\n\t\trefreshMaterialUniforms: refreshMaterialUniforms\n\t};\n\n}\n\nexport { WebGLMaterials };\n","/**\n * Ref: https://en.wikipedia.org/wiki/Spherical_coordinate_system\n *\n * The polar angle (phi) is measured from the positive y-axis. The positive y-axis is up.\n * The azimuthal angle (theta) is measured from the positive z-axis.\n */\n\nimport { MathUtils } from './MathUtils.js';\n\nclass Spherical {\n\n\tconstructor( radius = 1, phi = 0, theta = 0 ) {\n\n\t\tthis.radius = radius;\n\t\tthis.phi = phi; // polar angle\n\t\tthis.theta = theta; // azimuthal angle\n\n\t\treturn this;\n\n\t}\n\n\tset( radius, phi, theta ) {\n\n\t\tthis.radius = radius;\n\t\tthis.phi = phi;\n\t\tthis.theta = theta;\n\n\t\treturn this;\n\n\t}\n\n\tcopy( other ) {\n\n\t\tthis.radius = other.radius;\n\t\tthis.phi = other.phi;\n\t\tthis.theta = other.theta;\n\n\t\treturn this;\n\n\t}\n\n\t// restrict phi to be betwee EPS and PI-EPS\n\tmakeSafe() {\n\n\t\tconst EPS = 0.000001;\n\t\tthis.phi = Math.max( EPS, Math.min( Math.PI - EPS, this.phi ) );\n\n\t\treturn this;\n\n\t}\n\n\tsetFromVector3( v ) {\n\n\t\treturn this.setFromCartesianCoords( v.x, v.y, v.z );\n\n\t}\n\n\tsetFromCartesianCoords( x, y, z ) {\n\n\t\tthis.radius = Math.sqrt( x * x + y * y + z * z );\n\n\t\tif ( this.radius === 0 ) {\n\n\t\t\tthis.theta = 0;\n\t\t\tthis.phi = 0;\n\n\t\t} else {\n\n\t\t\tthis.theta = Math.atan2( x, z );\n\t\t\tthis.phi = Math.acos( MathUtils.clamp( y / this.radius, - 1, 1 ) );\n\n\t\t}\n\n\t\treturn this;\n\n\t}\n\n\tclone() {\n\n\t\treturn new this.constructor().copy( this );\n\n\t}\n\n}\n\nexport { Spherical };\n","import {\n\tEventDispatcher,\n\tMOUSE,\n\tQuaternion,\n\tSpherical,\n\tTOUCH,\n\tVector2,\n\tVector3\n} from '../../../build/three.module.js';\n\n// This set of controls performs orbiting, dollying (zooming), and panning.\n// Unlike TrackballControls, it maintains the \"up\" direction object.up (+Y by default).\n//\n//    Orbit - left mouse / touch: one-finger move\n//    Zoom - middle mouse, or mousewheel / touch: two-finger spread or squish\n//    Pan - right mouse, or left mouse + ctrl/meta/shiftKey, or arrow keys / touch: two-finger move\n\nvar OrbitControls = function ( object, domElement ) {\n\n\tif ( domElement === undefined ) console.warn( 'THREE.OrbitControls: The second parameter \"domElement\" is now mandatory.' );\n\tif ( domElement === document ) console.error( 'THREE.OrbitControls: \"document\" should not be used as the target \"domElement\". Please use \"renderer.domElement\" instead.' );\n\n\tthis.object = object;\n\tthis.domElement = domElement;\n\n\t// Set to false to disable this control\n\tthis.enabled = true;\n\n\t// \"target\" sets the location of focus, where the object orbits around\n\tthis.target = new Vector3();\n\n\t// How far you can dolly in and out ( PerspectiveCamera only )\n\tthis.minDistance = 0;\n\tthis.maxDistance = Infinity;\n\n\t// How far you can zoom in and out ( OrthographicCamera only )\n\tthis.minZoom = 0;\n\tthis.maxZoom = Infinity;\n\n\t// How far you can orbit vertically, upper and lower limits.\n\t// Range is 0 to Math.PI radians.\n\tthis.minPolarAngle = 0; // radians\n\tthis.maxPolarAngle = Math.PI; // radians\n\n\t// How far you can orbit horizontally, upper and lower limits.\n\t// If set, the interval [ min, max ] must be a sub-interval of [ - 2 PI, 2 PI ], with ( max - min < 2 PI )\n\tthis.minAzimuthAngle = - Infinity; // radians\n\tthis.maxAzimuthAngle = Infinity; // radians\n\n\t// Set to true to enable damping (inertia)\n\t// If damping is enabled, you must call controls.update() in your animation loop\n\tthis.enableDamping = false;\n\tthis.dampingFactor = 0.05;\n\n\t// This option actually enables dollying in and out; left as \"zoom\" for backwards compatibility.\n\t// Set to false to disable zooming\n\tthis.enableZoom = true;\n\tthis.zoomSpeed = 1.0;\n\n\t// Set to false to disable rotating\n\tthis.enableRotate = true;\n\tthis.rotateSpeed = 1.0;\n\n\t// Set to false to disable panning\n\tthis.enablePan = true;\n\tthis.panSpeed = 1.0;\n\tthis.screenSpacePanning = true; // if false, pan orthogonal to world-space direction camera.up\n\tthis.keyPanSpeed = 7.0;\t// pixels moved per arrow key push\n\n\t// Set to true to automatically rotate around the target\n\t// If auto-rotate is enabled, you must call controls.update() in your animation loop\n\tthis.autoRotate = false;\n\tthis.autoRotateSpeed = 2.0; // 30 seconds per orbit when fps is 60\n\n\t// The four arrow keys\n\tthis.keys = { LEFT: 37, UP: 38, RIGHT: 39, BOTTOM: 40 };\n\n\t// Mouse buttons\n\tthis.mouseButtons = { LEFT: MOUSE.ROTATE, MIDDLE: MOUSE.DOLLY, RIGHT: MOUSE.PAN };\n\n\t// Touch fingers\n\tthis.touches = { ONE: TOUCH.ROTATE, TWO: TOUCH.DOLLY_PAN };\n\n\t// for reset\n\tthis.target0 = this.target.clone();\n\tthis.position0 = this.object.position.clone();\n\tthis.zoom0 = this.object.zoom;\n\n\t// the target DOM element for key events\n\tthis._domElementKeyEvents = null;\n\n\t//\n\t// public methods\n\t//\n\n\tthis.getPolarAngle = function () {\n\n\t\treturn spherical.phi;\n\n\t};\n\n\tthis.getAzimuthalAngle = function () {\n\n\t\treturn spherical.theta;\n\n\t};\n\n\tthis.listenToKeyEvents = function ( domElement ) {\n\n\t\tdomElement.addEventListener( 'keydown', onKeyDown );\n\t\tthis._domElementKeyEvents = domElement;\n\n\t};\n\n\tthis.saveState = function () {\n\n\t\tscope.target0.copy( scope.target );\n\t\tscope.position0.copy( scope.object.position );\n\t\tscope.zoom0 = scope.object.zoom;\n\n\t};\n\n\tthis.reset = function () {\n\n\t\tscope.target.copy( scope.target0 );\n\t\tscope.object.position.copy( scope.position0 );\n\t\tscope.object.zoom = scope.zoom0;\n\n\t\tscope.object.updateProjectionMatrix();\n\t\tscope.dispatchEvent( changeEvent );\n\n\t\tscope.update();\n\n\t\tstate = STATE.NONE;\n\n\t};\n\n\t// this method is exposed, but perhaps it would be better if we can make it private...\n\tthis.update = function () {\n\n\t\tvar offset = new Vector3();\n\n\t\t// so camera.up is the orbit axis\n\t\tvar quat = new Quaternion().setFromUnitVectors( object.up, new Vector3( 0, 1, 0 ) );\n\t\tvar quatInverse = quat.clone().invert();\n\n\t\tvar lastPosition = new Vector3();\n\t\tvar lastQuaternion = new Quaternion();\n\n\t\tvar twoPI = 2 * Math.PI;\n\n\t\treturn function update() {\n\n\t\t\tvar position = scope.object.position;\n\n\t\t\toffset.copy( position ).sub( scope.target );\n\n\t\t\t// rotate offset to \"y-axis-is-up\" space\n\t\t\toffset.applyQuaternion( quat );\n\n\t\t\t// angle from z-axis around y-axis\n\t\t\tspherical.setFromVector3( offset );\n\n\t\t\tif ( scope.autoRotate && state === STATE.NONE ) {\n\n\t\t\t\trotateLeft( getAutoRotationAngle() );\n\n\t\t\t}\n\n\t\t\tif ( scope.enableDamping ) {\n\n\t\t\t\tspherical.theta += sphericalDelta.theta * scope.dampingFactor;\n\t\t\t\tspherical.phi += sphericalDelta.phi * scope.dampingFactor;\n\n\t\t\t} else {\n\n\t\t\t\tspherical.theta += sphericalDelta.theta;\n\t\t\t\tspherical.phi += sphericalDelta.phi;\n\n\t\t\t}\n\n\t\t\t// restrict theta to be between desired limits\n\n\t\t\tvar min = scope.minAzimuthAngle;\n\t\t\tvar max = scope.maxAzimuthAngle;\n\n\t\t\tif ( isFinite( min ) && isFinite( max ) ) {\n\n\t\t\t\tif ( min < - Math.PI ) min += twoPI; else if ( min > Math.PI ) min -= twoPI;\n\n\t\t\t\tif ( max < - Math.PI ) max += twoPI; else if ( max > Math.PI ) max -= twoPI;\n\n\t\t\t\tif ( min <= max ) {\n\n\t\t\t\t\tspherical.theta = Math.max( min, Math.min( max, spherical.theta ) );\n\n\t\t\t\t} else {\n\n\t\t\t\t\tspherical.theta = ( spherical.theta > ( min + max ) / 2 ) ?\n\t\t\t\t\t\tMath.max( min, spherical.theta ) :\n\t\t\t\t\t\tMath.min( max, spherical.theta );\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t\t// restrict phi to be between desired limits\n\t\t\tspherical.phi = Math.max( scope.minPolarAngle, Math.min( scope.maxPolarAngle, spherical.phi ) );\n\n\t\t\tspherical.makeSafe();\n\n\n\t\t\tspherical.radius *= scale;\n\n\t\t\t// restrict radius to be between desired limits\n\t\t\tspherical.radius = Math.max( scope.minDistance, Math.min( scope.maxDistance, spherical.radius ) );\n\n\t\t\t// move target to panned location\n\n\t\t\tif ( scope.enableDamping === true ) {\n\n\t\t\t\tscope.target.addScaledVector( panOffset, scope.dampingFactor );\n\n\t\t\t} else {\n\n\t\t\t\tscope.target.add( panOffset );\n\n\t\t\t}\n\n\t\t\toffset.setFromSpherical( spherical );\n\n\t\t\t// rotate offset back to \"camera-up-vector-is-up\" space\n\t\t\toffset.applyQuaternion( quatInverse );\n\n\t\t\tposition.copy( scope.target ).add( offset );\n\n\t\t\tscope.object.lookAt( scope.target );\n\n\t\t\tif ( scope.enableDamping === true ) {\n\n\t\t\t\tsphericalDelta.theta *= ( 1 - scope.dampingFactor );\n\t\t\t\tsphericalDelta.phi *= ( 1 - scope.dampingFactor );\n\n\t\t\t\tpanOffset.multiplyScalar( 1 - scope.dampingFactor );\n\n\t\t\t} else {\n\n\t\t\t\tsphericalDelta.set( 0, 0, 0 );\n\n\t\t\t\tpanOffset.set( 0, 0, 0 );\n\n\t\t\t}\n\n\t\t\tscale = 1;\n\n\t\t\t// update condition is:\n\t\t\t// min(camera displacement, camera rotation in radians)^2 > EPS\n\t\t\t// using small-angle approximation cos(x/2) = 1 - x^2 / 8\n\n\t\t\tif ( zoomChanged ||\n\t\t\t\tlastPosition.distanceToSquared( scope.object.position ) > EPS ||\n\t\t\t\t8 * ( 1 - lastQuaternion.dot( scope.object.quaternion ) ) > EPS ) {\n\n\t\t\t\tscope.dispatchEvent( changeEvent );\n\n\t\t\t\tlastPosition.copy( scope.object.position );\n\t\t\t\tlastQuaternion.copy( scope.object.quaternion );\n\t\t\t\tzoomChanged = false;\n\n\t\t\t\treturn true;\n\n\t\t\t}\n\n\t\t\treturn false;\n\n\t\t};\n\n\t}();\n\n\tthis.dispose = function () {\n\n\t\tscope.domElement.removeEventListener( 'contextmenu', onContextMenu );\n\n\t\tscope.domElement.removeEventListener( 'pointerdown', onPointerDown );\n\t\tscope.domElement.removeEventListener( 'wheel', onMouseWheel );\n\n\t\tscope.domElement.removeEventListener( 'touchstart', onTouchStart );\n\t\tscope.domElement.removeEventListener( 'touchend', onTouchEnd );\n\t\tscope.domElement.removeEventListener( 'touchmove', onTouchMove );\n\n\t\tscope.domElement.ownerDocument.removeEventListener( 'pointermove', onPointerMove );\n\t\tscope.domElement.ownerDocument.removeEventListener( 'pointerup', onPointerUp );\n\n\n\t\tif ( scope._domElementKeyEvents !== null ) {\n\n\t\t\tscope._domElementKeyEvents.removeEventListener( 'keydown', onKeyDown );\n\n\t\t}\n\n\t\t//scope.dispatchEvent( { type: 'dispose' } ); // should this be added here?\n\n\t};\n\n\t//\n\t// internals\n\t//\n\n\tvar scope = this;\n\n\tvar changeEvent = { type: 'change' };\n\tvar startEvent = { type: 'start' };\n\tvar endEvent = { type: 'end' };\n\n\tvar STATE = {\n\t\tNONE: - 1,\n\t\tROTATE: 0,\n\t\tDOLLY: 1,\n\t\tPAN: 2,\n\t\tTOUCH_ROTATE: 3,\n\t\tTOUCH_PAN: 4,\n\t\tTOUCH_DOLLY_PAN: 5,\n\t\tTOUCH_DOLLY_ROTATE: 6\n\t};\n\n\tvar state = STATE.NONE;\n\n\tvar EPS = 0.000001;\n\n\t// current position in spherical coordinates\n\tvar spherical = new Spherical();\n\tvar sphericalDelta = new Spherical();\n\n\tvar scale = 1;\n\tvar panOffset = new Vector3();\n\tvar zoomChanged = false;\n\n\tvar rotateStart = new Vector2();\n\tvar rotateEnd = new Vector2();\n\tvar rotateDelta = new Vector2();\n\n\tvar panStart = new Vector2();\n\tvar panEnd = new Vector2();\n\tvar panDelta = new Vector2();\n\n\tvar dollyStart = new Vector2();\n\tvar dollyEnd = new Vector2();\n\tvar dollyDelta = new Vector2();\n\n\tfunction getAutoRotationAngle() {\n\n\t\treturn 2 * Math.PI / 60 / 60 * scope.autoRotateSpeed;\n\n\t}\n\n\tfunction getZoomScale() {\n\n\t\treturn Math.pow( 0.95, scope.zoomSpeed );\n\n\t}\n\n\tfunction rotateLeft( angle ) {\n\n\t\tsphericalDelta.theta -= angle;\n\n\t}\n\n\tfunction rotateUp( angle ) {\n\n\t\tsphericalDelta.phi -= angle;\n\n\t}\n\n\tvar panLeft = function () {\n\n\t\tvar v = new Vector3();\n\n\t\treturn function panLeft( distance, objectMatrix ) {\n\n\t\t\tv.setFromMatrixColumn( objectMatrix, 0 ); // get X column of objectMatrix\n\t\t\tv.multiplyScalar( - distance );\n\n\t\t\tpanOffset.add( v );\n\n\t\t};\n\n\t}();\n\n\tvar panUp = function () {\n\n\t\tvar v = new Vector3();\n\n\t\treturn function panUp( distance, objectMatrix ) {\n\n\t\t\tif ( scope.screenSpacePanning === true ) {\n\n\t\t\t\tv.setFromMatrixColumn( objectMatrix, 1 );\n\n\t\t\t} else {\n\n\t\t\t\tv.setFromMatrixColumn( objectMatrix, 0 );\n\t\t\t\tv.crossVectors( scope.object.up, v );\n\n\t\t\t}\n\n\t\t\tv.multiplyScalar( distance );\n\n\t\t\tpanOffset.add( v );\n\n\t\t};\n\n\t}();\n\n\t// deltaX and deltaY are in pixels; right and down are positive\n\tvar pan = function () {\n\n\t\tvar offset = new Vector3();\n\n\t\treturn function pan( deltaX, deltaY ) {\n\n\t\t\tvar element = scope.domElement;\n\n\t\t\tif ( scope.object.isPerspectiveCamera ) {\n\n\t\t\t\t// perspective\n\t\t\t\tvar position = scope.object.position;\n\t\t\t\toffset.copy( position ).sub( scope.target );\n\t\t\t\tvar targetDistance = offset.length();\n\n\t\t\t\t// half of the fov is center to top of screen\n\t\t\t\ttargetDistance *= Math.tan( ( scope.object.fov / 2 ) * Math.PI / 180.0 );\n\n\t\t\t\t// we use only clientHeight here so aspect ratio does not distort speed\n\t\t\t\tpanLeft( 2 * deltaX * targetDistance / element.clientHeight, scope.object.matrix );\n\t\t\t\tpanUp( 2 * deltaY * targetDistance / element.clientHeight, scope.object.matrix );\n\n\t\t\t} else if ( scope.object.isOrthographicCamera ) {\n\n\t\t\t\t// orthographic\n\t\t\t\tpanLeft( deltaX * ( scope.object.right - scope.object.left ) / scope.object.zoom / element.clientWidth, scope.object.matrix );\n\t\t\t\tpanUp( deltaY * ( scope.object.top - scope.object.bottom ) / scope.object.zoom / element.clientHeight, scope.object.matrix );\n\n\t\t\t} else {\n\n\t\t\t\t// camera neither orthographic nor perspective\n\t\t\t\tconsole.warn( 'WARNING: OrbitControls.js encountered an unknown camera type - pan disabled.' );\n\t\t\t\tscope.enablePan = false;\n\n\t\t\t}\n\n\t\t};\n\n\t}();\n\n\tfunction dollyOut( dollyScale ) {\n\n\t\tif ( scope.object.isPerspectiveCamera ) {\n\n\t\t\tscale /= dollyScale;\n\n\t\t} else if ( scope.object.isOrthographicCamera ) {\n\n\t\t\tscope.object.zoom = Math.max( scope.minZoom, Math.min( scope.maxZoom, scope.object.zoom * dollyScale ) );\n\t\t\tscope.object.updateProjectionMatrix();\n\t\t\tzoomChanged = true;\n\n\t\t} else {\n\n\t\t\tconsole.warn( 'WARNING: OrbitControls.js encountered an unknown camera type - dolly/zoom disabled.' );\n\t\t\tscope.enableZoom = false;\n\n\t\t}\n\n\t}\n\n\tfunction dollyIn( dollyScale ) {\n\n\t\tif ( scope.object.isPerspectiveCamera ) {\n\n\t\t\tscale *= dollyScale;\n\n\t\t} else if ( scope.object.isOrthographicCamera ) {\n\n\t\t\tscope.object.zoom = Math.max( scope.minZoom, Math.min( scope.maxZoom, scope.object.zoom / dollyScale ) );\n\t\t\tscope.object.updateProjectionMatrix();\n\t\t\tzoomChanged = true;\n\n\t\t} else {\n\n\t\t\tconsole.warn( 'WARNING: OrbitControls.js encountered an unknown camera type - dolly/zoom disabled.' );\n\t\t\tscope.enableZoom = false;\n\n\t\t}\n\n\t}\n\n\t//\n\t// event callbacks - update the object state\n\t//\n\n\tfunction handleMouseDownRotate( event ) {\n\n\t\trotateStart.set( event.clientX, event.clientY );\n\n\t}\n\n\tfunction handleMouseDownDolly( event ) {\n\n\t\tdollyStart.set( event.clientX, event.clientY );\n\n\t}\n\n\tfunction handleMouseDownPan( event ) {\n\n\t\tpanStart.set( event.clientX, event.clientY );\n\n\t}\n\n\tfunction handleMouseMoveRotate( event ) {\n\n\t\trotateEnd.set( event.clientX, event.clientY );\n\n\t\trotateDelta.subVectors( rotateEnd, rotateStart ).multiplyScalar( scope.rotateSpeed );\n\n\t\tvar element = scope.domElement;\n\n\t\trotateLeft( 2 * Math.PI * rotateDelta.x / element.clientHeight ); // yes, height\n\n\t\trotateUp( 2 * Math.PI * rotateDelta.y / element.clientHeight );\n\n\t\trotateStart.copy( rotateEnd );\n\n\t\tscope.update();\n\n\t}\n\n\tfunction handleMouseMoveDolly( event ) {\n\n\t\tdollyEnd.set( event.clientX, event.clientY );\n\n\t\tdollyDelta.subVectors( dollyEnd, dollyStart );\n\n\t\tif ( dollyDelta.y > 0 ) {\n\n\t\t\tdollyOut( getZoomScale() );\n\n\t\t} else if ( dollyDelta.y < 0 ) {\n\n\t\t\tdollyIn( getZoomScale() );\n\n\t\t}\n\n\t\tdollyStart.copy( dollyEnd );\n\n\t\tscope.update();\n\n\t}\n\n\tfunction handleMouseMovePan( event ) {\n\n\t\tpanEnd.set( event.clientX, event.clientY );\n\n\t\tpanDelta.subVectors( panEnd, panStart ).multiplyScalar( scope.panSpeed );\n\n\t\tpan( panDelta.x, panDelta.y );\n\n\t\tpanStart.copy( panEnd );\n\n\t\tscope.update();\n\n\t}\n\n\tfunction handleMouseUp( /*event*/ ) {\n\n\t\t// no-op\n\n\t}\n\n\tfunction handleMouseWheel( event ) {\n\n\t\tif ( event.deltaY < 0 ) {\n\n\t\t\tdollyIn( getZoomScale() );\n\n\t\t} else if ( event.deltaY > 0 ) {\n\n\t\t\tdollyOut( getZoomScale() );\n\n\t\t}\n\n\t\tscope.update();\n\n\t}\n\n\tfunction handleKeyDown( event ) {\n\n\t\tvar needsUpdate = false;\n\n\t\tswitch ( event.keyCode ) {\n\n\t\t\tcase scope.keys.UP:\n\t\t\t\tpan( 0, scope.keyPanSpeed );\n\t\t\t\tneedsUpdate = true;\n\t\t\t\tbreak;\n\n\t\t\tcase scope.keys.BOTTOM:\n\t\t\t\tpan( 0, - scope.keyPanSpeed );\n\t\t\t\tneedsUpdate = true;\n\t\t\t\tbreak;\n\n\t\t\tcase scope.keys.LEFT:\n\t\t\t\tpan( scope.keyPanSpeed, 0 );\n\t\t\t\tneedsUpdate = true;\n\t\t\t\tbreak;\n\n\t\t\tcase scope.keys.RIGHT:\n\t\t\t\tpan( - scope.keyPanSpeed, 0 );\n\t\t\t\tneedsUpdate = true;\n\t\t\t\tbreak;\n\n\t\t}\n\n\t\tif ( needsUpdate ) {\n\n\t\t\t// prevent the browser from scrolling on cursor keys\n\t\t\tevent.preventDefault();\n\n\t\t\tscope.update();\n\n\t\t}\n\n\n\t}\n\n\tfunction handleTouchStartRotate( event ) {\n\n\t\tif ( event.touches.length == 1 ) {\n\n\t\t\trotateStart.set( event.touches[ 0 ].pageX, event.touches[ 0 ].pageY );\n\n\t\t} else {\n\n\t\t\tvar x = 0.5 * ( event.touches[ 0 ].pageX + event.touches[ 1 ].pageX );\n\t\t\tvar y = 0.5 * ( event.touches[ 0 ].pageY + event.touches[ 1 ].pageY );\n\n\t\t\trotateStart.set( x, y );\n\n\t\t}\n\n\t}\n\n\tfunction handleTouchStartPan( event ) {\n\n\t\tif ( event.touches.length == 1 ) {\n\n\t\t\tpanStart.set( event.touches[ 0 ].pageX, event.touches[ 0 ].pageY );\n\n\t\t} else {\n\n\t\t\tvar x = 0.5 * ( event.touches[ 0 ].pageX + event.touches[ 1 ].pageX );\n\t\t\tvar y = 0.5 * ( event.touches[ 0 ].pageY + event.touches[ 1 ].pageY );\n\n\t\t\tpanStart.set( x, y );\n\n\t\t}\n\n\t}\n\n\tfunction handleTouchStartDolly( event ) {\n\n\t\tvar dx = event.touches[ 0 ].pageX - event.touches[ 1 ].pageX;\n\t\tvar dy = event.touches[ 0 ].pageY - event.touches[ 1 ].pageY;\n\n\t\tvar distance = Math.sqrt( dx * dx + dy * dy );\n\n\t\tdollyStart.set( 0, distance );\n\n\t}\n\n\tfunction handleTouchStartDollyPan( event ) {\n\n\t\tif ( scope.enableZoom ) handleTouchStartDolly( event );\n\n\t\tif ( scope.enablePan ) handleTouchStartPan( event );\n\n\t}\n\n\tfunction handleTouchStartDollyRotate( event ) {\n\n\t\tif ( scope.enableZoom ) handleTouchStartDolly( event );\n\n\t\tif ( scope.enableRotate ) handleTouchStartRotate( event );\n\n\t}\n\n\tfunction handleTouchMoveRotate( event ) {\n\n\t\tif ( event.touches.length == 1 ) {\n\n\t\t\trotateEnd.set( event.touches[ 0 ].pageX, event.touches[ 0 ].pageY );\n\n\t\t} else {\n\n\t\t\tvar x = 0.5 * ( event.touches[ 0 ].pageX + event.touches[ 1 ].pageX );\n\t\t\tvar y = 0.5 * ( event.touches[ 0 ].pageY + event.touches[ 1 ].pageY );\n\n\t\t\trotateEnd.set( x, y );\n\n\t\t}\n\n\t\trotateDelta.subVectors( rotateEnd, rotateStart ).multiplyScalar( scope.rotateSpeed );\n\n\t\tvar element = scope.domElement;\n\n\t\trotateLeft( 2 * Math.PI * rotateDelta.x / element.clientHeight ); // yes, height\n\n\t\trotateUp( 2 * Math.PI * rotateDelta.y / element.clientHeight );\n\n\t\trotateStart.copy( rotateEnd );\n\n\t}\n\n\tfunction handleTouchMovePan( event ) {\n\n\t\tif ( event.touches.length == 1 ) {\n\n\t\t\tpanEnd.set( event.touches[ 0 ].pageX, event.touches[ 0 ].pageY );\n\n\t\t} else {\n\n\t\t\tvar x = 0.5 * ( event.touches[ 0 ].pageX + event.touches[ 1 ].pageX );\n\t\t\tvar y = 0.5 * ( event.touches[ 0 ].pageY + event.touches[ 1 ].pageY );\n\n\t\t\tpanEnd.set( x, y );\n\n\t\t}\n\n\t\tpanDelta.subVectors( panEnd, panStart ).multiplyScalar( scope.panSpeed );\n\n\t\tpan( panDelta.x, panDelta.y );\n\n\t\tpanStart.copy( panEnd );\n\n\t}\n\n\tfunction handleTouchMoveDolly( event ) {\n\n\t\tvar dx = event.touches[ 0 ].pageX - event.touches[ 1 ].pageX;\n\t\tvar dy = event.touches[ 0 ].pageY - event.touches[ 1 ].pageY;\n\n\t\tvar distance = Math.sqrt( dx * dx + dy * dy );\n\n\t\tdollyEnd.set( 0, distance );\n\n\t\tdollyDelta.set( 0, Math.pow( dollyEnd.y / dollyStart.y, scope.zoomSpeed ) );\n\n\t\tdollyOut( dollyDelta.y );\n\n\t\tdollyStart.copy( dollyEnd );\n\n\t}\n\n\tfunction handleTouchMoveDollyPan( event ) {\n\n\t\tif ( scope.enableZoom ) handleTouchMoveDolly( event );\n\n\t\tif ( scope.enablePan ) handleTouchMovePan( event );\n\n\t}\n\n\tfunction handleTouchMoveDollyRotate( event ) {\n\n\t\tif ( scope.enableZoom ) handleTouchMoveDolly( event );\n\n\t\tif ( scope.enableRotate ) handleTouchMoveRotate( event );\n\n\t}\n\n\tfunction handleTouchEnd( /*event*/ ) {\n\n\t\t// no-op\n\n\t}\n\n\t//\n\t// event handlers - FSM: listen for events and reset state\n\t//\n\n\tfunction onPointerDown( event ) {\n\n\t\tif ( scope.enabled === false ) return;\n\n\t\tswitch ( event.pointerType ) {\n\n\t\t\tcase 'mouse':\n\t\t\tcase 'pen':\n\t\t\t\tonMouseDown( event );\n\t\t\t\tbreak;\n\n\t\t\t// TODO touch\n\n\t\t}\n\n\t}\n\n\tfunction onPointerMove( event ) {\n\n\t\tif ( scope.enabled === false ) return;\n\n\t\tswitch ( event.pointerType ) {\n\n\t\t\tcase 'mouse':\n\t\t\tcase 'pen':\n\t\t\t\tonMouseMove( event );\n\t\t\t\tbreak;\n\n\t\t\t// TODO touch\n\n\t\t}\n\n\t}\n\n\tfunction onPointerUp( event ) {\n\n\t\tswitch ( event.pointerType ) {\n\n\t\t\tcase 'mouse':\n\t\t\tcase 'pen':\n\t\t\t\tonMouseUp( event );\n\t\t\t\tbreak;\n\n\t\t\t// TODO touch\n\n\t\t}\n\n\t}\n\n\tfunction onMouseDown( event ) {\n\n\t\t// Prevent the browser from scrolling.\n\t\tevent.preventDefault();\n\n\t\t// Manually set the focus since calling preventDefault above\n\t\t// prevents the browser from setting it automatically.\n\n\t\tscope.domElement.focus ? scope.domElement.focus() : window.focus();\n\n\t\tvar mouseAction;\n\n\t\tswitch ( event.button ) {\n\n\t\t\tcase 0:\n\n\t\t\t\tmouseAction = scope.mouseButtons.LEFT;\n\t\t\t\tbreak;\n\n\t\t\tcase 1:\n\n\t\t\t\tmouseAction = scope.mouseButtons.MIDDLE;\n\t\t\t\tbreak;\n\n\t\t\tcase 2:\n\n\t\t\t\tmouseAction = scope.mouseButtons.RIGHT;\n\t\t\t\tbreak;\n\n\t\t\tdefault:\n\n\t\t\t\tmouseAction = - 1;\n\n\t\t}\n\n\t\tswitch ( mouseAction ) {\n\n\t\t\tcase MOUSE.DOLLY:\n\n\t\t\t\tif ( scope.enableZoom === false ) return;\n\n\t\t\t\thandleMouseDownDolly( event );\n\n\t\t\t\tstate = STATE.DOLLY;\n\n\t\t\t\tbreak;\n\n\t\t\tcase MOUSE.ROTATE:\n\n\t\t\t\tif ( event.ctrlKey || event.metaKey || event.shiftKey ) {\n\n\t\t\t\t\tif ( scope.enablePan === false ) return;\n\n\t\t\t\t\thandleMouseDownPan( event );\n\n\t\t\t\t\tstate = STATE.PAN;\n\n\t\t\t\t} else {\n\n\t\t\t\t\tif ( scope.enableRotate === false ) return;\n\n\t\t\t\t\thandleMouseDownRotate( event );\n\n\t\t\t\t\tstate = STATE.ROTATE;\n\n\t\t\t\t}\n\n\t\t\t\tbreak;\n\n\t\t\tcase MOUSE.PAN:\n\n\t\t\t\tif ( event.ctrlKey || event.metaKey || event.shiftKey ) {\n\n\t\t\t\t\tif ( scope.enableRotate === false ) return;\n\n\t\t\t\t\thandleMouseDownRotate( event );\n\n\t\t\t\t\tstate = STATE.ROTATE;\n\n\t\t\t\t} else {\n\n\t\t\t\t\tif ( scope.enablePan === false ) return;\n\n\t\t\t\t\thandleMouseDownPan( event );\n\n\t\t\t\t\tstate = STATE.PAN;\n\n\t\t\t\t}\n\n\t\t\t\tbreak;\n\n\t\t\tdefault:\n\n\t\t\t\tstate = STATE.NONE;\n\n\t\t}\n\n\t\tif ( state !== STATE.NONE ) {\n\n\t\t\tscope.domElement.ownerDocument.addEventListener( 'pointermove', onPointerMove );\n\t\t\tscope.domElement.ownerDocument.addEventListener( 'pointerup', onPointerUp );\n\n\t\t\tscope.dispatchEvent( startEvent );\n\n\t\t}\n\n\t}\n\n\tfunction onMouseMove( event ) {\n\n\t\tif ( scope.enabled === false ) return;\n\n\t\tevent.preventDefault();\n\n\t\tswitch ( state ) {\n\n\t\t\tcase STATE.ROTATE:\n\n\t\t\t\tif ( scope.enableRotate === false ) return;\n\n\t\t\t\thandleMouseMoveRotate( event );\n\n\t\t\t\tbreak;\n\n\t\t\tcase STATE.DOLLY:\n\n\t\t\t\tif ( scope.enableZoom === false ) return;\n\n\t\t\t\thandleMouseMoveDolly( event );\n\n\t\t\t\tbreak;\n\n\t\t\tcase STATE.PAN:\n\n\t\t\t\tif ( scope.enablePan === false ) return;\n\n\t\t\t\thandleMouseMovePan( event );\n\n\t\t\t\tbreak;\n\n\t\t}\n\n\t}\n\n\tfunction onMouseUp( event ) {\n\n\t\tscope.domElement.ownerDocument.removeEventListener( 'pointermove', onPointerMove );\n\t\tscope.domElement.ownerDocument.removeEventListener( 'pointerup', onPointerUp );\n\n\t\tif ( scope.enabled === false ) return;\n\n\t\thandleMouseUp( event );\n\n\t\tscope.dispatchEvent( endEvent );\n\n\t\tstate = STATE.NONE;\n\n\t}\n\n\tfunction onMouseWheel( event ) {\n\n\t\tif ( scope.enabled === false || scope.enableZoom === false || ( state !== STATE.NONE && state !== STATE.ROTATE ) ) return;\n\n\t\tevent.preventDefault();\n\t\tevent.stopPropagation();\n\n\t\tscope.dispatchEvent( startEvent );\n\n\t\thandleMouseWheel( event );\n\n\t\tscope.dispatchEvent( endEvent );\n\n\t}\n\n\tfunction onKeyDown( event ) {\n\n\t\tif ( scope.enabled === false || scope.enablePan === false ) return;\n\n\t\thandleKeyDown( event );\n\n\t}\n\n\tfunction onTouchStart( event ) {\n\n\t\tif ( scope.enabled === false ) return;\n\n\t\tevent.preventDefault(); // prevent scrolling\n\n\t\tswitch ( event.touches.length ) {\n\n\t\t\tcase 1:\n\n\t\t\t\tswitch ( scope.touches.ONE ) {\n\n\t\t\t\t\tcase TOUCH.ROTATE:\n\n\t\t\t\t\t\tif ( scope.enableRotate === false ) return;\n\n\t\t\t\t\t\thandleTouchStartRotate( event );\n\n\t\t\t\t\t\tstate = STATE.TOUCH_ROTATE;\n\n\t\t\t\t\t\tbreak;\n\n\t\t\t\t\tcase TOUCH.PAN:\n\n\t\t\t\t\t\tif ( scope.enablePan === false ) return;\n\n\t\t\t\t\t\thandleTouchStartPan( event );\n\n\t\t\t\t\t\tstate = STATE.TOUCH_PAN;\n\n\t\t\t\t\t\tbreak;\n\n\t\t\t\t\tdefault:\n\n\t\t\t\t\t\tstate = STATE.NONE;\n\n\t\t\t\t}\n\n\t\t\t\tbreak;\n\n\t\t\tcase 2:\n\n\t\t\t\tswitch ( scope.touches.TWO ) {\n\n\t\t\t\t\tcase TOUCH.DOLLY_PAN:\n\n\t\t\t\t\t\tif ( scope.enableZoom === false && scope.enablePan === false ) return;\n\n\t\t\t\t\t\thandleTouchStartDollyPan( event );\n\n\t\t\t\t\t\tstate = STATE.TOUCH_DOLLY_PAN;\n\n\t\t\t\t\t\tbreak;\n\n\t\t\t\t\tcase TOUCH.DOLLY_ROTATE:\n\n\t\t\t\t\t\tif ( scope.enableZoom === false && scope.enableRotate === false ) return;\n\n\t\t\t\t\t\thandleTouchStartDollyRotate( event );\n\n\t\t\t\t\t\tstate = STATE.TOUCH_DOLLY_ROTATE;\n\n\t\t\t\t\t\tbreak;\n\n\t\t\t\t\tdefault:\n\n\t\t\t\t\t\tstate = STATE.NONE;\n\n\t\t\t\t}\n\n\t\t\t\tbreak;\n\n\t\t\tdefault:\n\n\t\t\t\tstate = STATE.NONE;\n\n\t\t}\n\n\t\tif ( state !== STATE.NONE ) {\n\n\t\t\tscope.dispatchEvent( startEvent );\n\n\t\t}\n\n\t}\n\n\tfunction onTouchMove( event ) {\n\n\t\tif ( scope.enabled === false ) return;\n\n\t\tevent.preventDefault(); // prevent scrolling\n\t\tevent.stopPropagation();\n\n\t\tswitch ( state ) {\n\n\t\t\tcase STATE.TOUCH_ROTATE:\n\n\t\t\t\tif ( scope.enableRotate === false ) return;\n\n\t\t\t\thandleTouchMoveRotate( event );\n\n\t\t\t\tscope.update();\n\n\t\t\t\tbreak;\n\n\t\t\tcase STATE.TOUCH_PAN:\n\n\t\t\t\tif ( scope.enablePan === false ) return;\n\n\t\t\t\thandleTouchMovePan( event );\n\n\t\t\t\tscope.update();\n\n\t\t\t\tbreak;\n\n\t\t\tcase STATE.TOUCH_DOLLY_PAN:\n\n\t\t\t\tif ( scope.enableZoom === false && scope.enablePan === false ) return;\n\n\t\t\t\thandleTouchMoveDollyPan( event );\n\n\t\t\t\tscope.update();\n\n\t\t\t\tbreak;\n\n\t\t\tcase STATE.TOUCH_DOLLY_ROTATE:\n\n\t\t\t\tif ( scope.enableZoom === false && scope.enableRotate === false ) return;\n\n\t\t\t\thandleTouchMoveDollyRotate( event );\n\n\t\t\t\tscope.update();\n\n\t\t\t\tbreak;\n\n\t\t\tdefault:\n\n\t\t\t\tstate = STATE.NONE;\n\n\t\t}\n\n\t}\n\n\tfunction onTouchEnd( event ) {\n\n\t\tif ( scope.enabled === false ) return;\n\n\t\thandleTouchEnd( event );\n\n\t\tscope.dispatchEvent( endEvent );\n\n\t\tstate = STATE.NONE;\n\n\t}\n\n\tfunction onContextMenu( event ) {\n\n\t\tif ( scope.enabled === false ) return;\n\n\t\tevent.preventDefault();\n\n\t}\n\n\t//\n\n\tscope.domElement.addEventListener( 'contextmenu', onContextMenu );\n\n\tscope.domElement.addEventListener( 'pointerdown', onPointerDown );\n\tscope.domElement.addEventListener( 'wheel', onMouseWheel );\n\n\tscope.domElement.addEventListener( 'touchstart', onTouchStart );\n\tscope.domElement.addEventListener( 'touchend', onTouchEnd );\n\tscope.domElement.addEventListener( 'touchmove', onTouchMove );\n\n\t// force an update at start\n\n\tthis.update();\n\n};\n\nOrbitControls.prototype = Object.create( EventDispatcher.prototype );\nOrbitControls.prototype.constructor = OrbitControls;\n\n\n// This set of controls performs orbiting, dollying (zooming), and panning.\n// Unlike TrackballControls, it maintains the \"up\" direction object.up (+Y by default).\n// This is very similar to OrbitControls, another set of touch behavior\n//\n//    Orbit - right mouse, or left mouse + ctrl/meta/shiftKey / touch: two-finger rotate\n//    Zoom - middle mouse, or mousewheel / touch: two-finger spread or squish\n//    Pan - left mouse, or arrow keys / touch: one-finger move\n\nvar MapControls = function ( object, domElement ) {\n\n\tOrbitControls.call( this, object, domElement );\n\n\tthis.screenSpacePanning = false; // pan orthogonal to world-space direction camera.up\n\n\tthis.mouseButtons.LEFT = MOUSE.PAN;\n\tthis.mouseButtons.RIGHT = MOUSE.ROTATE;\n\n\tthis.touches.ONE = TOUCH.PAN;\n\tthis.touches.TWO = TOUCH.DOLLY_ROTATE;\n\n};\n\nMapControls.prototype = Object.create( EventDispatcher.prototype );\nMapControls.prototype.constructor = MapControls;\n\nexport { OrbitControls, MapControls };\n","/**\n * dat-gui JavaScript Controller Library\n * http://code.google.com/p/dat-gui\n *\n * Copyright 2011 Data Arts Team, Google Creative Lab\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n * http://www.apache.org/licenses/LICENSE-2.0\n */\n\nfunction ___$insertStyle(css) {\n  if (!css) {\n    return;\n  }\n  if (typeof window === 'undefined') {\n    return;\n  }\n\n  var style = document.createElement('style');\n\n  style.setAttribute('type', 'text/css');\n  style.innerHTML = css;\n  document.head.appendChild(style);\n\n  return css;\n}\n\nfunction colorToString (color, forceCSSHex) {\n  var colorFormat = color.__state.conversionName.toString();\n  var r = Math.round(color.r);\n  var g = Math.round(color.g);\n  var b = Math.round(color.b);\n  var a = color.a;\n  var h = Math.round(color.h);\n  var s = color.s.toFixed(1);\n  var v = color.v.toFixed(1);\n  if (forceCSSHex || colorFormat === 'THREE_CHAR_HEX' || colorFormat === 'SIX_CHAR_HEX') {\n    var str = color.hex.toString(16);\n    while (str.length < 6) {\n      str = '0' + str;\n    }\n    return '#' + str;\n  } else if (colorFormat === 'CSS_RGB') {\n    return 'rgb(' + r + ',' + g + ',' + b + ')';\n  } else if (colorFormat === 'CSS_RGBA') {\n    return 'rgba(' + r + ',' + g + ',' + b + ',' + a + ')';\n  } else if (colorFormat === 'HEX') {\n    return '0x' + color.hex.toString(16);\n  } else if (colorFormat === 'RGB_ARRAY') {\n    return '[' + r + ',' + g + ',' + b + ']';\n  } else if (colorFormat === 'RGBA_ARRAY') {\n    return '[' + r + ',' + g + ',' + b + ',' + a + ']';\n  } else if (colorFormat === 'RGB_OBJ') {\n    return '{r:' + r + ',g:' + g + ',b:' + b + '}';\n  } else if (colorFormat === 'RGBA_OBJ') {\n    return '{r:' + r + ',g:' + g + ',b:' + b + ',a:' + a + '}';\n  } else if (colorFormat === 'HSV_OBJ') {\n    return '{h:' + h + ',s:' + s + ',v:' + v + '}';\n  } else if (colorFormat === 'HSVA_OBJ') {\n    return '{h:' + h + ',s:' + s + ',v:' + v + ',a:' + a + '}';\n  }\n  return 'unknown format';\n}\n\nvar ARR_EACH = Array.prototype.forEach;\nvar ARR_SLICE = Array.prototype.slice;\nvar Common = {\n  BREAK: {},\n  extend: function extend(target) {\n    this.each(ARR_SLICE.call(arguments, 1), function (obj) {\n      var keys = this.isObject(obj) ? Object.keys(obj) : [];\n      keys.forEach(function (key) {\n        if (!this.isUndefined(obj[key])) {\n          target[key] = obj[key];\n        }\n      }.bind(this));\n    }, this);\n    return target;\n  },\n  defaults: function defaults(target) {\n    this.each(ARR_SLICE.call(arguments, 1), function (obj) {\n      var keys = this.isObject(obj) ? Object.keys(obj) : [];\n      keys.forEach(function (key) {\n        if (this.isUndefined(target[key])) {\n          target[key] = obj[key];\n        }\n      }.bind(this));\n    }, this);\n    return target;\n  },\n  compose: function compose() {\n    var toCall = ARR_SLICE.call(arguments);\n    return function () {\n      var args = ARR_SLICE.call(arguments);\n      for (var i = toCall.length - 1; i >= 0; i--) {\n        args = [toCall[i].apply(this, args)];\n      }\n      return args[0];\n    };\n  },\n  each: function each(obj, itr, scope) {\n    if (!obj) {\n      return;\n    }\n    if (ARR_EACH && obj.forEach && obj.forEach === ARR_EACH) {\n      obj.forEach(itr, scope);\n    } else if (obj.length === obj.length + 0) {\n      var key = void 0;\n      var l = void 0;\n      for (key = 0, l = obj.length; key < l; key++) {\n        if (key in obj && itr.call(scope, obj[key], key) === this.BREAK) {\n          return;\n        }\n      }\n    } else {\n      for (var _key in obj) {\n        if (itr.call(scope, obj[_key], _key) === this.BREAK) {\n          return;\n        }\n      }\n    }\n  },\n  defer: function defer(fnc) {\n    setTimeout(fnc, 0);\n  },\n  debounce: function debounce(func, threshold, callImmediately) {\n    var timeout = void 0;\n    return function () {\n      var obj = this;\n      var args = arguments;\n      function delayed() {\n        timeout = null;\n        if (!callImmediately) func.apply(obj, args);\n      }\n      var callNow = callImmediately || !timeout;\n      clearTimeout(timeout);\n      timeout = setTimeout(delayed, threshold);\n      if (callNow) {\n        func.apply(obj, args);\n      }\n    };\n  },\n  toArray: function toArray(obj) {\n    if (obj.toArray) return obj.toArray();\n    return ARR_SLICE.call(obj);\n  },\n  isUndefined: function isUndefined(obj) {\n    return obj === undefined;\n  },\n  isNull: function isNull(obj) {\n    return obj === null;\n  },\n  isNaN: function (_isNaN) {\n    function isNaN(_x) {\n      return _isNaN.apply(this, arguments);\n    }\n    isNaN.toString = function () {\n      return _isNaN.toString();\n    };\n    return isNaN;\n  }(function (obj) {\n    return isNaN(obj);\n  }),\n  isArray: Array.isArray || function (obj) {\n    return obj.constructor === Array;\n  },\n  isObject: function isObject(obj) {\n    return obj === Object(obj);\n  },\n  isNumber: function isNumber(obj) {\n    return obj === obj + 0;\n  },\n  isString: function isString(obj) {\n    return obj === obj + '';\n  },\n  isBoolean: function isBoolean(obj) {\n    return obj === false || obj === true;\n  },\n  isFunction: function isFunction(obj) {\n    return obj instanceof Function;\n  }\n};\n\nvar INTERPRETATIONS = [\n{\n  litmus: Common.isString,\n  conversions: {\n    THREE_CHAR_HEX: {\n      read: function read(original) {\n        var test = original.match(/^#([A-F0-9])([A-F0-9])([A-F0-9])$/i);\n        if (test === null) {\n          return false;\n        }\n        return {\n          space: 'HEX',\n          hex: parseInt('0x' + test[1].toString() + test[1].toString() + test[2].toString() + test[2].toString() + test[3].toString() + test[3].toString(), 0)\n        };\n      },\n      write: colorToString\n    },\n    SIX_CHAR_HEX: {\n      read: function read(original) {\n        var test = original.match(/^#([A-F0-9]{6})$/i);\n        if (test === null) {\n          return false;\n        }\n        return {\n          space: 'HEX',\n          hex: parseInt('0x' + test[1].toString(), 0)\n        };\n      },\n      write: colorToString\n    },\n    CSS_RGB: {\n      read: function read(original) {\n        var test = original.match(/^rgb\\(\\s*(.+)\\s*,\\s*(.+)\\s*,\\s*(.+)\\s*\\)/);\n        if (test === null) {\n          return false;\n        }\n        return {\n          space: 'RGB',\n          r: parseFloat(test[1]),\n          g: parseFloat(test[2]),\n          b: parseFloat(test[3])\n        };\n      },\n      write: colorToString\n    },\n    CSS_RGBA: {\n      read: function read(original) {\n        var test = original.match(/^rgba\\(\\s*(.+)\\s*,\\s*(.+)\\s*,\\s*(.+)\\s*,\\s*(.+)\\s*\\)/);\n        if (test === null) {\n          return false;\n        }\n        return {\n          space: 'RGB',\n          r: parseFloat(test[1]),\n          g: parseFloat(test[2]),\n          b: parseFloat(test[3]),\n          a: parseFloat(test[4])\n        };\n      },\n      write: colorToString\n    }\n  }\n},\n{\n  litmus: Common.isNumber,\n  conversions: {\n    HEX: {\n      read: function read(original) {\n        return {\n          space: 'HEX',\n          hex: original,\n          conversionName: 'HEX'\n        };\n      },\n      write: function write(color) {\n        return color.hex;\n      }\n    }\n  }\n},\n{\n  litmus: Common.isArray,\n  conversions: {\n    RGB_ARRAY: {\n      read: function read(original) {\n        if (original.length !== 3) {\n          return false;\n        }\n        return {\n          space: 'RGB',\n          r: original[0],\n          g: original[1],\n          b: original[2]\n        };\n      },\n      write: function write(color) {\n        return [color.r, color.g, color.b];\n      }\n    },\n    RGBA_ARRAY: {\n      read: function read(original) {\n        if (original.length !== 4) return false;\n        return {\n          space: 'RGB',\n          r: original[0],\n          g: original[1],\n          b: original[2],\n          a: original[3]\n        };\n      },\n      write: function write(color) {\n        return [color.r, color.g, color.b, color.a];\n      }\n    }\n  }\n},\n{\n  litmus: Common.isObject,\n  conversions: {\n    RGBA_OBJ: {\n      read: function read(original) {\n        if (Common.isNumber(original.r) && Common.isNumber(original.g) && Common.isNumber(original.b) && Common.isNumber(original.a)) {\n          return {\n            space: 'RGB',\n            r: original.r,\n            g: original.g,\n            b: original.b,\n            a: original.a\n          };\n        }\n        return false;\n      },\n      write: function write(color) {\n        return {\n          r: color.r,\n          g: color.g,\n          b: color.b,\n          a: color.a\n        };\n      }\n    },\n    RGB_OBJ: {\n      read: function read(original) {\n        if (Common.isNumber(original.r) && Common.isNumber(original.g) && Common.isNumber(original.b)) {\n          return {\n            space: 'RGB',\n            r: original.r,\n            g: original.g,\n            b: original.b\n          };\n        }\n        return false;\n      },\n      write: function write(color) {\n        return {\n          r: color.r,\n          g: color.g,\n          b: color.b\n        };\n      }\n    },\n    HSVA_OBJ: {\n      read: function read(original) {\n        if (Common.isNumber(original.h) && Common.isNumber(original.s) && Common.isNumber(original.v) && Common.isNumber(original.a)) {\n          return {\n            space: 'HSV',\n            h: original.h,\n            s: original.s,\n            v: original.v,\n            a: original.a\n          };\n        }\n        return false;\n      },\n      write: function write(color) {\n        return {\n          h: color.h,\n          s: color.s,\n          v: color.v,\n          a: color.a\n        };\n      }\n    },\n    HSV_OBJ: {\n      read: function read(original) {\n        if (Common.isNumber(original.h) && Common.isNumber(original.s) && Common.isNumber(original.v)) {\n          return {\n            space: 'HSV',\n            h: original.h,\n            s: original.s,\n            v: original.v\n          };\n        }\n        return false;\n      },\n      write: function write(color) {\n        return {\n          h: color.h,\n          s: color.s,\n          v: color.v\n        };\n      }\n    }\n  }\n}];\nvar result = void 0;\nvar toReturn = void 0;\nvar interpret = function interpret() {\n  toReturn = false;\n  var original = arguments.length > 1 ? Common.toArray(arguments) : arguments[0];\n  Common.each(INTERPRETATIONS, function (family) {\n    if (family.litmus(original)) {\n      Common.each(family.conversions, function (conversion, conversionName) {\n        result = conversion.read(original);\n        if (toReturn === false && result !== false) {\n          toReturn = result;\n          result.conversionName = conversionName;\n          result.conversion = conversion;\n          return Common.BREAK;\n        }\n      });\n      return Common.BREAK;\n    }\n  });\n  return toReturn;\n};\n\nvar tmpComponent = void 0;\nvar ColorMath = {\n  hsv_to_rgb: function hsv_to_rgb(h, s, v) {\n    var hi = Math.floor(h / 60) % 6;\n    var f = h / 60 - Math.floor(h / 60);\n    var p = v * (1.0 - s);\n    var q = v * (1.0 - f * s);\n    var t = v * (1.0 - (1.0 - f) * s);\n    var c = [[v, t, p], [q, v, p], [p, v, t], [p, q, v], [t, p, v], [v, p, q]][hi];\n    return {\n      r: c[0] * 255,\n      g: c[1] * 255,\n      b: c[2] * 255\n    };\n  },\n  rgb_to_hsv: function rgb_to_hsv(r, g, b) {\n    var min = Math.min(r, g, b);\n    var max = Math.max(r, g, b);\n    var delta = max - min;\n    var h = void 0;\n    var s = void 0;\n    if (max !== 0) {\n      s = delta / max;\n    } else {\n      return {\n        h: NaN,\n        s: 0,\n        v: 0\n      };\n    }\n    if (r === max) {\n      h = (g - b) / delta;\n    } else if (g === max) {\n      h = 2 + (b - r) / delta;\n    } else {\n      h = 4 + (r - g) / delta;\n    }\n    h /= 6;\n    if (h < 0) {\n      h += 1;\n    }\n    return {\n      h: h * 360,\n      s: s,\n      v: max / 255\n    };\n  },\n  rgb_to_hex: function rgb_to_hex(r, g, b) {\n    var hex = this.hex_with_component(0, 2, r);\n    hex = this.hex_with_component(hex, 1, g);\n    hex = this.hex_with_component(hex, 0, b);\n    return hex;\n  },\n  component_from_hex: function component_from_hex(hex, componentIndex) {\n    return hex >> componentIndex * 8 & 0xFF;\n  },\n  hex_with_component: function hex_with_component(hex, componentIndex, value) {\n    return value << (tmpComponent = componentIndex * 8) | hex & ~(0xFF << tmpComponent);\n  }\n};\n\nvar _typeof = typeof Symbol === \"function\" && typeof Symbol.iterator === \"symbol\" ? function (obj) {\n  return typeof obj;\n} : function (obj) {\n  return obj && typeof Symbol === \"function\" && obj.constructor === Symbol && obj !== Symbol.prototype ? \"symbol\" : typeof obj;\n};\n\n\n\n\n\n\n\n\n\n\n\nvar classCallCheck = function (instance, Constructor) {\n  if (!(instance instanceof Constructor)) {\n    throw new TypeError(\"Cannot call a class as a function\");\n  }\n};\n\nvar createClass = function () {\n  function defineProperties(target, props) {\n    for (var i = 0; i < props.length; i++) {\n      var descriptor = props[i];\n      descriptor.enumerable = descriptor.enumerable || false;\n      descriptor.configurable = true;\n      if (\"value\" in descriptor) descriptor.writable = true;\n      Object.defineProperty(target, descriptor.key, descriptor);\n    }\n  }\n\n  return function (Constructor, protoProps, staticProps) {\n    if (protoProps) defineProperties(Constructor.prototype, protoProps);\n    if (staticProps) defineProperties(Constructor, staticProps);\n    return Constructor;\n  };\n}();\n\n\n\n\n\n\n\nvar get = function get(object, property, receiver) {\n  if (object === null) object = Function.prototype;\n  var desc = Object.getOwnPropertyDescriptor(object, property);\n\n  if (desc === undefined) {\n    var parent = Object.getPrototypeOf(object);\n\n    if (parent === null) {\n      return undefined;\n    } else {\n      return get(parent, property, receiver);\n    }\n  } else if (\"value\" in desc) {\n    return desc.value;\n  } else {\n    var getter = desc.get;\n\n    if (getter === undefined) {\n      return undefined;\n    }\n\n    return getter.call(receiver);\n  }\n};\n\nvar inherits = function (subClass, superClass) {\n  if (typeof superClass !== \"function\" && superClass !== null) {\n    throw new TypeError(\"Super expression must either be null or a function, not \" + typeof superClass);\n  }\n\n  subClass.prototype = Object.create(superClass && superClass.prototype, {\n    constructor: {\n      value: subClass,\n      enumerable: false,\n      writable: true,\n      configurable: true\n    }\n  });\n  if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass;\n};\n\n\n\n\n\n\n\n\n\n\n\nvar possibleConstructorReturn = function (self, call) {\n  if (!self) {\n    throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\");\n  }\n\n  return call && (typeof call === \"object\" || typeof call === \"function\") ? call : self;\n};\n\nvar Color = function () {\n  function Color() {\n    classCallCheck(this, Color);\n    this.__state = interpret.apply(this, arguments);\n    if (this.__state === false) {\n      throw new Error('Failed to interpret color arguments');\n    }\n    this.__state.a = this.__state.a || 1;\n  }\n  createClass(Color, [{\n    key: 'toString',\n    value: function toString() {\n      return colorToString(this);\n    }\n  }, {\n    key: 'toHexString',\n    value: function toHexString() {\n      return colorToString(this, true);\n    }\n  }, {\n    key: 'toOriginal',\n    value: function toOriginal() {\n      return this.__state.conversion.write(this);\n    }\n  }]);\n  return Color;\n}();\nfunction defineRGBComponent(target, component, componentHexIndex) {\n  Object.defineProperty(target, component, {\n    get: function get$$1() {\n      if (this.__state.space === 'RGB') {\n        return this.__state[component];\n      }\n      Color.recalculateRGB(this, component, componentHexIndex);\n      return this.__state[component];\n    },\n    set: function set$$1(v) {\n      if (this.__state.space !== 'RGB') {\n        Color.recalculateRGB(this, component, componentHexIndex);\n        this.__state.space = 'RGB';\n      }\n      this.__state[component] = v;\n    }\n  });\n}\nfunction defineHSVComponent(target, component) {\n  Object.defineProperty(target, component, {\n    get: function get$$1() {\n      if (this.__state.space === 'HSV') {\n        return this.__state[component];\n      }\n      Color.recalculateHSV(this);\n      return this.__state[component];\n    },\n    set: function set$$1(v) {\n      if (this.__state.space !== 'HSV') {\n        Color.recalculateHSV(this);\n        this.__state.space = 'HSV';\n      }\n      this.__state[component] = v;\n    }\n  });\n}\nColor.recalculateRGB = function (color, component, componentHexIndex) {\n  if (color.__state.space === 'HEX') {\n    color.__state[component] = ColorMath.component_from_hex(color.__state.hex, componentHexIndex);\n  } else if (color.__state.space === 'HSV') {\n    Common.extend(color.__state, ColorMath.hsv_to_rgb(color.__state.h, color.__state.s, color.__state.v));\n  } else {\n    throw new Error('Corrupted color state');\n  }\n};\nColor.recalculateHSV = function (color) {\n  var result = ColorMath.rgb_to_hsv(color.r, color.g, color.b);\n  Common.extend(color.__state, {\n    s: result.s,\n    v: result.v\n  });\n  if (!Common.isNaN(result.h)) {\n    color.__state.h = result.h;\n  } else if (Common.isUndefined(color.__state.h)) {\n    color.__state.h = 0;\n  }\n};\nColor.COMPONENTS = ['r', 'g', 'b', 'h', 's', 'v', 'hex', 'a'];\ndefineRGBComponent(Color.prototype, 'r', 2);\ndefineRGBComponent(Color.prototype, 'g', 1);\ndefineRGBComponent(Color.prototype, 'b', 0);\ndefineHSVComponent(Color.prototype, 'h');\ndefineHSVComponent(Color.prototype, 's');\ndefineHSVComponent(Color.prototype, 'v');\nObject.defineProperty(Color.prototype, 'a', {\n  get: function get$$1() {\n    return this.__state.a;\n  },\n  set: function set$$1(v) {\n    this.__state.a = v;\n  }\n});\nObject.defineProperty(Color.prototype, 'hex', {\n  get: function get$$1() {\n    if (this.__state.space !== 'HEX') {\n      this.__state.hex = ColorMath.rgb_to_hex(this.r, this.g, this.b);\n      this.__state.space = 'HEX';\n    }\n    return this.__state.hex;\n  },\n  set: function set$$1(v) {\n    this.__state.space = 'HEX';\n    this.__state.hex = v;\n  }\n});\n\nvar Controller = function () {\n  function Controller(object, property) {\n    classCallCheck(this, Controller);\n    this.initialValue = object[property];\n    this.domElement = document.createElement('div');\n    this.object = object;\n    this.property = property;\n    this.__onChange = undefined;\n    this.__onFinishChange = undefined;\n  }\n  createClass(Controller, [{\n    key: 'onChange',\n    value: function onChange(fnc) {\n      this.__onChange = fnc;\n      return this;\n    }\n  }, {\n    key: 'onFinishChange',\n    value: function onFinishChange(fnc) {\n      this.__onFinishChange = fnc;\n      return this;\n    }\n  }, {\n    key: 'setValue',\n    value: function setValue(newValue) {\n      this.object[this.property] = newValue;\n      if (this.__onChange) {\n        this.__onChange.call(this, newValue);\n      }\n      this.updateDisplay();\n      return this;\n    }\n  }, {\n    key: 'getValue',\n    value: function getValue() {\n      return this.object[this.property];\n    }\n  }, {\n    key: 'updateDisplay',\n    value: function updateDisplay() {\n      return this;\n    }\n  }, {\n    key: 'isModified',\n    value: function isModified() {\n      return this.initialValue !== this.getValue();\n    }\n  }]);\n  return Controller;\n}();\n\nvar EVENT_MAP = {\n  HTMLEvents: ['change'],\n  MouseEvents: ['click', 'mousemove', 'mousedown', 'mouseup', 'mouseover'],\n  KeyboardEvents: ['keydown']\n};\nvar EVENT_MAP_INV = {};\nCommon.each(EVENT_MAP, function (v, k) {\n  Common.each(v, function (e) {\n    EVENT_MAP_INV[e] = k;\n  });\n});\nvar CSS_VALUE_PIXELS = /(\\d+(\\.\\d+)?)px/;\nfunction cssValueToPixels(val) {\n  if (val === '0' || Common.isUndefined(val)) {\n    return 0;\n  }\n  var match = val.match(CSS_VALUE_PIXELS);\n  if (!Common.isNull(match)) {\n    return parseFloat(match[1]);\n  }\n  return 0;\n}\nvar dom = {\n  makeSelectable: function makeSelectable(elem, selectable) {\n    if (elem === undefined || elem.style === undefined) return;\n    elem.onselectstart = selectable ? function () {\n      return false;\n    } : function () {};\n    elem.style.MozUserSelect = selectable ? 'auto' : 'none';\n    elem.style.KhtmlUserSelect = selectable ? 'auto' : 'none';\n    elem.unselectable = selectable ? 'on' : 'off';\n  },\n  makeFullscreen: function makeFullscreen(elem, hor, vert) {\n    var vertical = vert;\n    var horizontal = hor;\n    if (Common.isUndefined(horizontal)) {\n      horizontal = true;\n    }\n    if (Common.isUndefined(vertical)) {\n      vertical = true;\n    }\n    elem.style.position = 'absolute';\n    if (horizontal) {\n      elem.style.left = 0;\n      elem.style.right = 0;\n    }\n    if (vertical) {\n      elem.style.top = 0;\n      elem.style.bottom = 0;\n    }\n  },\n  fakeEvent: function fakeEvent(elem, eventType, pars, aux) {\n    var params = pars || {};\n    var className = EVENT_MAP_INV[eventType];\n    if (!className) {\n      throw new Error('Event type ' + eventType + ' not supported.');\n    }\n    var evt = document.createEvent(className);\n    switch (className) {\n      case 'MouseEvents':\n        {\n          var clientX = params.x || params.clientX || 0;\n          var clientY = params.y || params.clientY || 0;\n          evt.initMouseEvent(eventType, params.bubbles || false, params.cancelable || true, window, params.clickCount || 1, 0,\n          0,\n          clientX,\n          clientY,\n          false, false, false, false, 0, null);\n          break;\n        }\n      case 'KeyboardEvents':\n        {\n          var init = evt.initKeyboardEvent || evt.initKeyEvent;\n          Common.defaults(params, {\n            cancelable: true,\n            ctrlKey: false,\n            altKey: false,\n            shiftKey: false,\n            metaKey: false,\n            keyCode: undefined,\n            charCode: undefined\n          });\n          init(eventType, params.bubbles || false, params.cancelable, window, params.ctrlKey, params.altKey, params.shiftKey, params.metaKey, params.keyCode, params.charCode);\n          break;\n        }\n      default:\n        {\n          evt.initEvent(eventType, params.bubbles || false, params.cancelable || true);\n          break;\n        }\n    }\n    Common.defaults(evt, aux);\n    elem.dispatchEvent(evt);\n  },\n  bind: function bind(elem, event, func, newBool) {\n    var bool = newBool || false;\n    if (elem.addEventListener) {\n      elem.addEventListener(event, func, bool);\n    } else if (elem.attachEvent) {\n      elem.attachEvent('on' + event, func);\n    }\n    return dom;\n  },\n  unbind: function unbind(elem, event, func, newBool) {\n    var bool = newBool || false;\n    if (elem.removeEventListener) {\n      elem.removeEventListener(event, func, bool);\n    } else if (elem.detachEvent) {\n      elem.detachEvent('on' + event, func);\n    }\n    return dom;\n  },\n  addClass: function addClass(elem, className) {\n    if (elem.className === undefined) {\n      elem.className = className;\n    } else if (elem.className !== className) {\n      var classes = elem.className.split(/ +/);\n      if (classes.indexOf(className) === -1) {\n        classes.push(className);\n        elem.className = classes.join(' ').replace(/^\\s+/, '').replace(/\\s+$/, '');\n      }\n    }\n    return dom;\n  },\n  removeClass: function removeClass(elem, className) {\n    if (className) {\n      if (elem.className === className) {\n        elem.removeAttribute('class');\n      } else {\n        var classes = elem.className.split(/ +/);\n        var index = classes.indexOf(className);\n        if (index !== -1) {\n          classes.splice(index, 1);\n          elem.className = classes.join(' ');\n        }\n      }\n    } else {\n      elem.className = undefined;\n    }\n    return dom;\n  },\n  hasClass: function hasClass(elem, className) {\n    return new RegExp('(?:^|\\\\s+)' + className + '(?:\\\\s+|$)').test(elem.className) || false;\n  },\n  getWidth: function getWidth(elem) {\n    var style = getComputedStyle(elem);\n    return cssValueToPixels(style['border-left-width']) + cssValueToPixels(style['border-right-width']) + cssValueToPixels(style['padding-left']) + cssValueToPixels(style['padding-right']) + cssValueToPixels(style.width);\n  },\n  getHeight: function getHeight(elem) {\n    var style = getComputedStyle(elem);\n    return cssValueToPixels(style['border-top-width']) + cssValueToPixels(style['border-bottom-width']) + cssValueToPixels(style['padding-top']) + cssValueToPixels(style['padding-bottom']) + cssValueToPixels(style.height);\n  },\n  getOffset: function getOffset(el) {\n    var elem = el;\n    var offset = { left: 0, top: 0 };\n    if (elem.offsetParent) {\n      do {\n        offset.left += elem.offsetLeft;\n        offset.top += elem.offsetTop;\n        elem = elem.offsetParent;\n      } while (elem);\n    }\n    return offset;\n  },\n  isActive: function isActive(elem) {\n    return elem === document.activeElement && (elem.type || elem.href);\n  }\n};\n\nvar BooleanController = function (_Controller) {\n  inherits(BooleanController, _Controller);\n  function BooleanController(object, property) {\n    classCallCheck(this, BooleanController);\n    var _this2 = possibleConstructorReturn(this, (BooleanController.__proto__ || Object.getPrototypeOf(BooleanController)).call(this, object, property));\n    var _this = _this2;\n    _this2.__prev = _this2.getValue();\n    _this2.__checkbox = document.createElement('input');\n    _this2.__checkbox.setAttribute('type', 'checkbox');\n    function onChange() {\n      _this.setValue(!_this.__prev);\n    }\n    dom.bind(_this2.__checkbox, 'change', onChange, false);\n    _this2.domElement.appendChild(_this2.__checkbox);\n    _this2.updateDisplay();\n    return _this2;\n  }\n  createClass(BooleanController, [{\n    key: 'setValue',\n    value: function setValue(v) {\n      var toReturn = get(BooleanController.prototype.__proto__ || Object.getPrototypeOf(BooleanController.prototype), 'setValue', this).call(this, v);\n      if (this.__onFinishChange) {\n        this.__onFinishChange.call(this, this.getValue());\n      }\n      this.__prev = this.getValue();\n      return toReturn;\n    }\n  }, {\n    key: 'updateDisplay',\n    value: function updateDisplay() {\n      if (this.getValue() === true) {\n        this.__checkbox.setAttribute('checked', 'checked');\n        this.__checkbox.checked = true;\n        this.__prev = true;\n      } else {\n        this.__checkbox.checked = false;\n        this.__prev = false;\n      }\n      return get(BooleanController.prototype.__proto__ || Object.getPrototypeOf(BooleanController.prototype), 'updateDisplay', this).call(this);\n    }\n  }]);\n  return BooleanController;\n}(Controller);\n\nvar OptionController = function (_Controller) {\n  inherits(OptionController, _Controller);\n  function OptionController(object, property, opts) {\n    classCallCheck(this, OptionController);\n    var _this2 = possibleConstructorReturn(this, (OptionController.__proto__ || Object.getPrototypeOf(OptionController)).call(this, object, property));\n    var options = opts;\n    var _this = _this2;\n    _this2.__select = document.createElement('select');\n    if (Common.isArray(options)) {\n      var map = {};\n      Common.each(options, function (element) {\n        map[element] = element;\n      });\n      options = map;\n    }\n    Common.each(options, function (value, key) {\n      var opt = document.createElement('option');\n      opt.innerHTML = key;\n      opt.setAttribute('value', value);\n      _this.__select.appendChild(opt);\n    });\n    _this2.updateDisplay();\n    dom.bind(_this2.__select, 'change', function () {\n      var desiredValue = this.options[this.selectedIndex].value;\n      _this.setValue(desiredValue);\n    });\n    _this2.domElement.appendChild(_this2.__select);\n    return _this2;\n  }\n  createClass(OptionController, [{\n    key: 'setValue',\n    value: function setValue(v) {\n      var toReturn = get(OptionController.prototype.__proto__ || Object.getPrototypeOf(OptionController.prototype), 'setValue', this).call(this, v);\n      if (this.__onFinishChange) {\n        this.__onFinishChange.call(this, this.getValue());\n      }\n      return toReturn;\n    }\n  }, {\n    key: 'updateDisplay',\n    value: function updateDisplay() {\n      if (dom.isActive(this.__select)) return this;\n      this.__select.value = this.getValue();\n      return get(OptionController.prototype.__proto__ || Object.getPrototypeOf(OptionController.prototype), 'updateDisplay', this).call(this);\n    }\n  }]);\n  return OptionController;\n}(Controller);\n\nvar StringController = function (_Controller) {\n  inherits(StringController, _Controller);\n  function StringController(object, property) {\n    classCallCheck(this, StringController);\n    var _this2 = possibleConstructorReturn(this, (StringController.__proto__ || Object.getPrototypeOf(StringController)).call(this, object, property));\n    var _this = _this2;\n    function onChange() {\n      _this.setValue(_this.__input.value);\n    }\n    function onBlur() {\n      if (_this.__onFinishChange) {\n        _this.__onFinishChange.call(_this, _this.getValue());\n      }\n    }\n    _this2.__input = document.createElement('input');\n    _this2.__input.setAttribute('type', 'text');\n    dom.bind(_this2.__input, 'keyup', onChange);\n    dom.bind(_this2.__input, 'change', onChange);\n    dom.bind(_this2.__input, 'blur', onBlur);\n    dom.bind(_this2.__input, 'keydown', function (e) {\n      if (e.keyCode === 13) {\n        this.blur();\n      }\n    });\n    _this2.updateDisplay();\n    _this2.domElement.appendChild(_this2.__input);\n    return _this2;\n  }\n  createClass(StringController, [{\n    key: 'updateDisplay',\n    value: function updateDisplay() {\n      if (!dom.isActive(this.__input)) {\n        this.__input.value = this.getValue();\n      }\n      return get(StringController.prototype.__proto__ || Object.getPrototypeOf(StringController.prototype), 'updateDisplay', this).call(this);\n    }\n  }]);\n  return StringController;\n}(Controller);\n\nfunction numDecimals(x) {\n  var _x = x.toString();\n  if (_x.indexOf('.') > -1) {\n    return _x.length - _x.indexOf('.') - 1;\n  }\n  return 0;\n}\nvar NumberController = function (_Controller) {\n  inherits(NumberController, _Controller);\n  function NumberController(object, property, params) {\n    classCallCheck(this, NumberController);\n    var _this = possibleConstructorReturn(this, (NumberController.__proto__ || Object.getPrototypeOf(NumberController)).call(this, object, property));\n    var _params = params || {};\n    _this.__min = _params.min;\n    _this.__max = _params.max;\n    _this.__step = _params.step;\n    if (Common.isUndefined(_this.__step)) {\n      if (_this.initialValue === 0) {\n        _this.__impliedStep = 1;\n      } else {\n        _this.__impliedStep = Math.pow(10, Math.floor(Math.log(Math.abs(_this.initialValue)) / Math.LN10)) / 10;\n      }\n    } else {\n      _this.__impliedStep = _this.__step;\n    }\n    _this.__precision = numDecimals(_this.__impliedStep);\n    return _this;\n  }\n  createClass(NumberController, [{\n    key: 'setValue',\n    value: function setValue(v) {\n      var _v = v;\n      if (this.__min !== undefined && _v < this.__min) {\n        _v = this.__min;\n      } else if (this.__max !== undefined && _v > this.__max) {\n        _v = this.__max;\n      }\n      if (this.__step !== undefined && _v % this.__step !== 0) {\n        _v = Math.round(_v / this.__step) * this.__step;\n      }\n      return get(NumberController.prototype.__proto__ || Object.getPrototypeOf(NumberController.prototype), 'setValue', this).call(this, _v);\n    }\n  }, {\n    key: 'min',\n    value: function min(minValue) {\n      this.__min = minValue;\n      return this;\n    }\n  }, {\n    key: 'max',\n    value: function max(maxValue) {\n      this.__max = maxValue;\n      return this;\n    }\n  }, {\n    key: 'step',\n    value: function step(stepValue) {\n      this.__step = stepValue;\n      this.__impliedStep = stepValue;\n      this.__precision = numDecimals(stepValue);\n      return this;\n    }\n  }]);\n  return NumberController;\n}(Controller);\n\nfunction roundToDecimal(value, decimals) {\n  var tenTo = Math.pow(10, decimals);\n  return Math.round(value * tenTo) / tenTo;\n}\nvar NumberControllerBox = function (_NumberController) {\n  inherits(NumberControllerBox, _NumberController);\n  function NumberControllerBox(object, property, params) {\n    classCallCheck(this, NumberControllerBox);\n    var _this2 = possibleConstructorReturn(this, (NumberControllerBox.__proto__ || Object.getPrototypeOf(NumberControllerBox)).call(this, object, property, params));\n    _this2.__truncationSuspended = false;\n    var _this = _this2;\n    var prevY = void 0;\n    function onChange() {\n      var attempted = parseFloat(_this.__input.value);\n      if (!Common.isNaN(attempted)) {\n        _this.setValue(attempted);\n      }\n    }\n    function onFinish() {\n      if (_this.__onFinishChange) {\n        _this.__onFinishChange.call(_this, _this.getValue());\n      }\n    }\n    function onBlur() {\n      onFinish();\n    }\n    function onMouseDrag(e) {\n      var diff = prevY - e.clientY;\n      _this.setValue(_this.getValue() + diff * _this.__impliedStep);\n      prevY = e.clientY;\n    }\n    function onMouseUp() {\n      dom.unbind(window, 'mousemove', onMouseDrag);\n      dom.unbind(window, 'mouseup', onMouseUp);\n      onFinish();\n    }\n    function onMouseDown(e) {\n      dom.bind(window, 'mousemove', onMouseDrag);\n      dom.bind(window, 'mouseup', onMouseUp);\n      prevY = e.clientY;\n    }\n    _this2.__input = document.createElement('input');\n    _this2.__input.setAttribute('type', 'text');\n    dom.bind(_this2.__input, 'change', onChange);\n    dom.bind(_this2.__input, 'blur', onBlur);\n    dom.bind(_this2.__input, 'mousedown', onMouseDown);\n    dom.bind(_this2.__input, 'keydown', function (e) {\n      if (e.keyCode === 13) {\n        _this.__truncationSuspended = true;\n        this.blur();\n        _this.__truncationSuspended = false;\n        onFinish();\n      }\n    });\n    _this2.updateDisplay();\n    _this2.domElement.appendChild(_this2.__input);\n    return _this2;\n  }\n  createClass(NumberControllerBox, [{\n    key: 'updateDisplay',\n    value: function updateDisplay() {\n      this.__input.value = this.__truncationSuspended ? this.getValue() : roundToDecimal(this.getValue(), this.__precision);\n      return get(NumberControllerBox.prototype.__proto__ || Object.getPrototypeOf(NumberControllerBox.prototype), 'updateDisplay', this).call(this);\n    }\n  }]);\n  return NumberControllerBox;\n}(NumberController);\n\nfunction map(v, i1, i2, o1, o2) {\n  return o1 + (o2 - o1) * ((v - i1) / (i2 - i1));\n}\nvar NumberControllerSlider = function (_NumberController) {\n  inherits(NumberControllerSlider, _NumberController);\n  function NumberControllerSlider(object, property, min, max, step) {\n    classCallCheck(this, NumberControllerSlider);\n    var _this2 = possibleConstructorReturn(this, (NumberControllerSlider.__proto__ || Object.getPrototypeOf(NumberControllerSlider)).call(this, object, property, { min: min, max: max, step: step }));\n    var _this = _this2;\n    _this2.__background = document.createElement('div');\n    _this2.__foreground = document.createElement('div');\n    dom.bind(_this2.__background, 'mousedown', onMouseDown);\n    dom.bind(_this2.__background, 'touchstart', onTouchStart);\n    dom.addClass(_this2.__background, 'slider');\n    dom.addClass(_this2.__foreground, 'slider-fg');\n    function onMouseDown(e) {\n      document.activeElement.blur();\n      dom.bind(window, 'mousemove', onMouseDrag);\n      dom.bind(window, 'mouseup', onMouseUp);\n      onMouseDrag(e);\n    }\n    function onMouseDrag(e) {\n      e.preventDefault();\n      var bgRect = _this.__background.getBoundingClientRect();\n      _this.setValue(map(e.clientX, bgRect.left, bgRect.right, _this.__min, _this.__max));\n      return false;\n    }\n    function onMouseUp() {\n      dom.unbind(window, 'mousemove', onMouseDrag);\n      dom.unbind(window, 'mouseup', onMouseUp);\n      if (_this.__onFinishChange) {\n        _this.__onFinishChange.call(_this, _this.getValue());\n      }\n    }\n    function onTouchStart(e) {\n      if (e.touches.length !== 1) {\n        return;\n      }\n      dom.bind(window, 'touchmove', onTouchMove);\n      dom.bind(window, 'touchend', onTouchEnd);\n      onTouchMove(e);\n    }\n    function onTouchMove(e) {\n      var clientX = e.touches[0].clientX;\n      var bgRect = _this.__background.getBoundingClientRect();\n      _this.setValue(map(clientX, bgRect.left, bgRect.right, _this.__min, _this.__max));\n    }\n    function onTouchEnd() {\n      dom.unbind(window, 'touchmove', onTouchMove);\n      dom.unbind(window, 'touchend', onTouchEnd);\n      if (_this.__onFinishChange) {\n        _this.__onFinishChange.call(_this, _this.getValue());\n      }\n    }\n    _this2.updateDisplay();\n    _this2.__background.appendChild(_this2.__foreground);\n    _this2.domElement.appendChild(_this2.__background);\n    return _this2;\n  }\n  createClass(NumberControllerSlider, [{\n    key: 'updateDisplay',\n    value: function updateDisplay() {\n      var pct = (this.getValue() - this.__min) / (this.__max - this.__min);\n      this.__foreground.style.width = pct * 100 + '%';\n      return get(NumberControllerSlider.prototype.__proto__ || Object.getPrototypeOf(NumberControllerSlider.prototype), 'updateDisplay', this).call(this);\n    }\n  }]);\n  return NumberControllerSlider;\n}(NumberController);\n\nvar FunctionController = function (_Controller) {\n  inherits(FunctionController, _Controller);\n  function FunctionController(object, property, text) {\n    classCallCheck(this, FunctionController);\n    var _this2 = possibleConstructorReturn(this, (FunctionController.__proto__ || Object.getPrototypeOf(FunctionController)).call(this, object, property));\n    var _this = _this2;\n    _this2.__button = document.createElement('div');\n    _this2.__button.innerHTML = text === undefined ? 'Fire' : text;\n    dom.bind(_this2.__button, 'click', function (e) {\n      e.preventDefault();\n      _this.fire();\n      return false;\n    });\n    dom.addClass(_this2.__button, 'button');\n    _this2.domElement.appendChild(_this2.__button);\n    return _this2;\n  }\n  createClass(FunctionController, [{\n    key: 'fire',\n    value: function fire() {\n      if (this.__onChange) {\n        this.__onChange.call(this);\n      }\n      this.getValue().call(this.object);\n      if (this.__onFinishChange) {\n        this.__onFinishChange.call(this, this.getValue());\n      }\n    }\n  }]);\n  return FunctionController;\n}(Controller);\n\nvar ColorController = function (_Controller) {\n  inherits(ColorController, _Controller);\n  function ColorController(object, property) {\n    classCallCheck(this, ColorController);\n    var _this2 = possibleConstructorReturn(this, (ColorController.__proto__ || Object.getPrototypeOf(ColorController)).call(this, object, property));\n    _this2.__color = new Color(_this2.getValue());\n    _this2.__temp = new Color(0);\n    var _this = _this2;\n    _this2.domElement = document.createElement('div');\n    dom.makeSelectable(_this2.domElement, false);\n    _this2.__selector = document.createElement('div');\n    _this2.__selector.className = 'selector';\n    _this2.__saturation_field = document.createElement('div');\n    _this2.__saturation_field.className = 'saturation-field';\n    _this2.__field_knob = document.createElement('div');\n    _this2.__field_knob.className = 'field-knob';\n    _this2.__field_knob_border = '2px solid ';\n    _this2.__hue_knob = document.createElement('div');\n    _this2.__hue_knob.className = 'hue-knob';\n    _this2.__hue_field = document.createElement('div');\n    _this2.__hue_field.className = 'hue-field';\n    _this2.__input = document.createElement('input');\n    _this2.__input.type = 'text';\n    _this2.__input_textShadow = '0 1px 1px ';\n    dom.bind(_this2.__input, 'keydown', function (e) {\n      if (e.keyCode === 13) {\n        onBlur.call(this);\n      }\n    });\n    dom.bind(_this2.__input, 'blur', onBlur);\n    dom.bind(_this2.__selector, 'mousedown', function ()        {\n      dom.addClass(this, 'drag').bind(window, 'mouseup', function ()        {\n        dom.removeClass(_this.__selector, 'drag');\n      });\n    });\n    dom.bind(_this2.__selector, 'touchstart', function ()        {\n      dom.addClass(this, 'drag').bind(window, 'touchend', function ()        {\n        dom.removeClass(_this.__selector, 'drag');\n      });\n    });\n    var valueField = document.createElement('div');\n    Common.extend(_this2.__selector.style, {\n      width: '122px',\n      height: '102px',\n      padding: '3px',\n      backgroundColor: '#222',\n      boxShadow: '0px 1px 3px rgba(0,0,0,0.3)'\n    });\n    Common.extend(_this2.__field_knob.style, {\n      position: 'absolute',\n      width: '12px',\n      height: '12px',\n      border: _this2.__field_knob_border + (_this2.__color.v < 0.5 ? '#fff' : '#000'),\n      boxShadow: '0px 1px 3px rgba(0,0,0,0.5)',\n      borderRadius: '12px',\n      zIndex: 1\n    });\n    Common.extend(_this2.__hue_knob.style, {\n      position: 'absolute',\n      width: '15px',\n      height: '2px',\n      borderRight: '4px solid #fff',\n      zIndex: 1\n    });\n    Common.extend(_this2.__saturation_field.style, {\n      width: '100px',\n      height: '100px',\n      border: '1px solid #555',\n      marginRight: '3px',\n      display: 'inline-block',\n      cursor: 'pointer'\n    });\n    Common.extend(valueField.style, {\n      width: '100%',\n      height: '100%',\n      background: 'none'\n    });\n    linearGradient(valueField, 'top', 'rgba(0,0,0,0)', '#000');\n    Common.extend(_this2.__hue_field.style, {\n      width: '15px',\n      height: '100px',\n      border: '1px solid #555',\n      cursor: 'ns-resize',\n      position: 'absolute',\n      top: '3px',\n      right: '3px'\n    });\n    hueGradient(_this2.__hue_field);\n    Common.extend(_this2.__input.style, {\n      outline: 'none',\n      textAlign: 'center',\n      color: '#fff',\n      border: 0,\n      fontWeight: 'bold',\n      textShadow: _this2.__input_textShadow + 'rgba(0,0,0,0.7)'\n    });\n    dom.bind(_this2.__saturation_field, 'mousedown', fieldDown);\n    dom.bind(_this2.__saturation_field, 'touchstart', fieldDown);\n    dom.bind(_this2.__field_knob, 'mousedown', fieldDown);\n    dom.bind(_this2.__field_knob, 'touchstart', fieldDown);\n    dom.bind(_this2.__hue_field, 'mousedown', fieldDownH);\n    dom.bind(_this2.__hue_field, 'touchstart', fieldDownH);\n    function fieldDown(e) {\n      setSV(e);\n      dom.bind(window, 'mousemove', setSV);\n      dom.bind(window, 'touchmove', setSV);\n      dom.bind(window, 'mouseup', fieldUpSV);\n      dom.bind(window, 'touchend', fieldUpSV);\n    }\n    function fieldDownH(e) {\n      setH(e);\n      dom.bind(window, 'mousemove', setH);\n      dom.bind(window, 'touchmove', setH);\n      dom.bind(window, 'mouseup', fieldUpH);\n      dom.bind(window, 'touchend', fieldUpH);\n    }\n    function fieldUpSV() {\n      dom.unbind(window, 'mousemove', setSV);\n      dom.unbind(window, 'touchmove', setSV);\n      dom.unbind(window, 'mouseup', fieldUpSV);\n      dom.unbind(window, 'touchend', fieldUpSV);\n      onFinish();\n    }\n    function fieldUpH() {\n      dom.unbind(window, 'mousemove', setH);\n      dom.unbind(window, 'touchmove', setH);\n      dom.unbind(window, 'mouseup', fieldUpH);\n      dom.unbind(window, 'touchend', fieldUpH);\n      onFinish();\n    }\n    function onBlur() {\n      var i = interpret(this.value);\n      if (i !== false) {\n        _this.__color.__state = i;\n        _this.setValue(_this.__color.toOriginal());\n      } else {\n        this.value = _this.__color.toString();\n      }\n    }\n    function onFinish() {\n      if (_this.__onFinishChange) {\n        _this.__onFinishChange.call(_this, _this.__color.toOriginal());\n      }\n    }\n    _this2.__saturation_field.appendChild(valueField);\n    _this2.__selector.appendChild(_this2.__field_knob);\n    _this2.__selector.appendChild(_this2.__saturation_field);\n    _this2.__selector.appendChild(_this2.__hue_field);\n    _this2.__hue_field.appendChild(_this2.__hue_knob);\n    _this2.domElement.appendChild(_this2.__input);\n    _this2.domElement.appendChild(_this2.__selector);\n    _this2.updateDisplay();\n    function setSV(e) {\n      if (e.type.indexOf('touch') === -1) {\n        e.preventDefault();\n      }\n      var fieldRect = _this.__saturation_field.getBoundingClientRect();\n      var _ref = e.touches && e.touches[0] || e,\n          clientX = _ref.clientX,\n          clientY = _ref.clientY;\n      var s = (clientX - fieldRect.left) / (fieldRect.right - fieldRect.left);\n      var v = 1 - (clientY - fieldRect.top) / (fieldRect.bottom - fieldRect.top);\n      if (v > 1) {\n        v = 1;\n      } else if (v < 0) {\n        v = 0;\n      }\n      if (s > 1) {\n        s = 1;\n      } else if (s < 0) {\n        s = 0;\n      }\n      _this.__color.v = v;\n      _this.__color.s = s;\n      _this.setValue(_this.__color.toOriginal());\n      return false;\n    }\n    function setH(e) {\n      if (e.type.indexOf('touch') === -1) {\n        e.preventDefault();\n      }\n      var fieldRect = _this.__hue_field.getBoundingClientRect();\n      var _ref2 = e.touches && e.touches[0] || e,\n          clientY = _ref2.clientY;\n      var h = 1 - (clientY - fieldRect.top) / (fieldRect.bottom - fieldRect.top);\n      if (h > 1) {\n        h = 1;\n      } else if (h < 0) {\n        h = 0;\n      }\n      _this.__color.h = h * 360;\n      _this.setValue(_this.__color.toOriginal());\n      return false;\n    }\n    return _this2;\n  }\n  createClass(ColorController, [{\n    key: 'updateDisplay',\n    value: function updateDisplay() {\n      var i = interpret(this.getValue());\n      if (i !== false) {\n        var mismatch = false;\n        Common.each(Color.COMPONENTS, function (component) {\n          if (!Common.isUndefined(i[component]) && !Common.isUndefined(this.__color.__state[component]) && i[component] !== this.__color.__state[component]) {\n            mismatch = true;\n            return {};\n          }\n        }, this);\n        if (mismatch) {\n          Common.extend(this.__color.__state, i);\n        }\n      }\n      Common.extend(this.__temp.__state, this.__color.__state);\n      this.__temp.a = 1;\n      var flip = this.__color.v < 0.5 || this.__color.s > 0.5 ? 255 : 0;\n      var _flip = 255 - flip;\n      Common.extend(this.__field_knob.style, {\n        marginLeft: 100 * this.__color.s - 7 + 'px',\n        marginTop: 100 * (1 - this.__color.v) - 7 + 'px',\n        backgroundColor: this.__temp.toHexString(),\n        border: this.__field_knob_border + 'rgb(' + flip + ',' + flip + ',' + flip + ')'\n      });\n      this.__hue_knob.style.marginTop = (1 - this.__color.h / 360) * 100 + 'px';\n      this.__temp.s = 1;\n      this.__temp.v = 1;\n      linearGradient(this.__saturation_field, 'left', '#fff', this.__temp.toHexString());\n      this.__input.value = this.__color.toString();\n      Common.extend(this.__input.style, {\n        backgroundColor: this.__color.toHexString(),\n        color: 'rgb(' + flip + ',' + flip + ',' + flip + ')',\n        textShadow: this.__input_textShadow + 'rgba(' + _flip + ',' + _flip + ',' + _flip + ',.7)'\n      });\n    }\n  }]);\n  return ColorController;\n}(Controller);\nvar vendors = ['-moz-', '-o-', '-webkit-', '-ms-', ''];\nfunction linearGradient(elem, x, a, b) {\n  elem.style.background = '';\n  Common.each(vendors, function (vendor) {\n    elem.style.cssText += 'background: ' + vendor + 'linear-gradient(' + x + ', ' + a + ' 0%, ' + b + ' 100%); ';\n  });\n}\nfunction hueGradient(elem) {\n  elem.style.background = '';\n  elem.style.cssText += 'background: -moz-linear-gradient(top,  #ff0000 0%, #ff00ff 17%, #0000ff 34%, #00ffff 50%, #00ff00 67%, #ffff00 84%, #ff0000 100%);';\n  elem.style.cssText += 'background: -webkit-linear-gradient(top,  #ff0000 0%,#ff00ff 17%,#0000ff 34%,#00ffff 50%,#00ff00 67%,#ffff00 84%,#ff0000 100%);';\n  elem.style.cssText += 'background: -o-linear-gradient(top,  #ff0000 0%,#ff00ff 17%,#0000ff 34%,#00ffff 50%,#00ff00 67%,#ffff00 84%,#ff0000 100%);';\n  elem.style.cssText += 'background: -ms-linear-gradient(top,  #ff0000 0%,#ff00ff 17%,#0000ff 34%,#00ffff 50%,#00ff00 67%,#ffff00 84%,#ff0000 100%);';\n  elem.style.cssText += 'background: linear-gradient(top,  #ff0000 0%,#ff00ff 17%,#0000ff 34%,#00ffff 50%,#00ff00 67%,#ffff00 84%,#ff0000 100%);';\n}\n\nvar css = {\n  load: function load(url, indoc) {\n    var doc = indoc || document;\n    var link = doc.createElement('link');\n    link.type = 'text/css';\n    link.rel = 'stylesheet';\n    link.href = url;\n    doc.getElementsByTagName('head')[0].appendChild(link);\n  },\n  inject: function inject(cssContent, indoc) {\n    var doc = indoc || document;\n    var injected = document.createElement('style');\n    injected.type = 'text/css';\n    injected.innerHTML = cssContent;\n    var head = doc.getElementsByTagName('head')[0];\n    try {\n      head.appendChild(injected);\n    } catch (e) {\n    }\n  }\n};\n\nvar saveDialogContents = \"<div id=\\\"dg-save\\\" class=\\\"dg dialogue\\\">\\n\\n  Here's the new load parameter for your <code>GUI</code>'s constructor:\\n\\n  <textarea id=\\\"dg-new-constructor\\\"></textarea>\\n\\n  <div id=\\\"dg-save-locally\\\">\\n\\n    <input id=\\\"dg-local-storage\\\" type=\\\"checkbox\\\"/> Automatically save\\n    values to <code>localStorage</code> on exit.\\n\\n    <div id=\\\"dg-local-explain\\\">The values saved to <code>localStorage</code> will\\n      override those passed to <code>dat.GUI</code>'s constructor. This makes it\\n      easier to work incrementally, but <code>localStorage</code> is fragile,\\n      and your friends may not see the same values you do.\\n\\n    </div>\\n\\n  </div>\\n\\n</div>\";\n\nvar ControllerFactory = function ControllerFactory(object, property) {\n  var initialValue = object[property];\n  if (Common.isArray(arguments[2]) || Common.isObject(arguments[2])) {\n    return new OptionController(object, property, arguments[2]);\n  }\n  if (Common.isNumber(initialValue)) {\n    if (Common.isNumber(arguments[2]) && Common.isNumber(arguments[3])) {\n      if (Common.isNumber(arguments[4])) {\n        return new NumberControllerSlider(object, property, arguments[2], arguments[3], arguments[4]);\n      }\n      return new NumberControllerSlider(object, property, arguments[2], arguments[3]);\n    }\n    if (Common.isNumber(arguments[4])) {\n      return new NumberControllerBox(object, property, { min: arguments[2], max: arguments[3], step: arguments[4] });\n    }\n    return new NumberControllerBox(object, property, { min: arguments[2], max: arguments[3] });\n  }\n  if (Common.isString(initialValue)) {\n    return new StringController(object, property);\n  }\n  if (Common.isFunction(initialValue)) {\n    return new FunctionController(object, property, '');\n  }\n  if (Common.isBoolean(initialValue)) {\n    return new BooleanController(object, property);\n  }\n  return null;\n};\n\nfunction requestAnimationFrame(callback) {\n  setTimeout(callback, 1000 / 60);\n}\nvar requestAnimationFrame$1 = window.requestAnimationFrame || window.webkitRequestAnimationFrame || window.mozRequestAnimationFrame || window.oRequestAnimationFrame || window.msRequestAnimationFrame || requestAnimationFrame;\n\nvar CenteredDiv = function () {\n  function CenteredDiv() {\n    classCallCheck(this, CenteredDiv);\n    this.backgroundElement = document.createElement('div');\n    Common.extend(this.backgroundElement.style, {\n      backgroundColor: 'rgba(0,0,0,0.8)',\n      top: 0,\n      left: 0,\n      display: 'none',\n      zIndex: '1000',\n      opacity: 0,\n      WebkitTransition: 'opacity 0.2s linear',\n      transition: 'opacity 0.2s linear'\n    });\n    dom.makeFullscreen(this.backgroundElement);\n    this.backgroundElement.style.position = 'fixed';\n    this.domElement = document.createElement('div');\n    Common.extend(this.domElement.style, {\n      position: 'fixed',\n      display: 'none',\n      zIndex: '1001',\n      opacity: 0,\n      WebkitTransition: '-webkit-transform 0.2s ease-out, opacity 0.2s linear',\n      transition: 'transform 0.2s ease-out, opacity 0.2s linear'\n    });\n    document.body.appendChild(this.backgroundElement);\n    document.body.appendChild(this.domElement);\n    var _this = this;\n    dom.bind(this.backgroundElement, 'click', function () {\n      _this.hide();\n    });\n  }\n  createClass(CenteredDiv, [{\n    key: 'show',\n    value: function show() {\n      var _this = this;\n      this.backgroundElement.style.display = 'block';\n      this.domElement.style.display = 'block';\n      this.domElement.style.opacity = 0;\n      this.domElement.style.webkitTransform = 'scale(1.1)';\n      this.layout();\n      Common.defer(function () {\n        _this.backgroundElement.style.opacity = 1;\n        _this.domElement.style.opacity = 1;\n        _this.domElement.style.webkitTransform = 'scale(1)';\n      });\n    }\n  }, {\n    key: 'hide',\n    value: function hide() {\n      var _this = this;\n      var hide = function hide() {\n        _this.domElement.style.display = 'none';\n        _this.backgroundElement.style.display = 'none';\n        dom.unbind(_this.domElement, 'webkitTransitionEnd', hide);\n        dom.unbind(_this.domElement, 'transitionend', hide);\n        dom.unbind(_this.domElement, 'oTransitionEnd', hide);\n      };\n      dom.bind(this.domElement, 'webkitTransitionEnd', hide);\n      dom.bind(this.domElement, 'transitionend', hide);\n      dom.bind(this.domElement, 'oTransitionEnd', hide);\n      this.backgroundElement.style.opacity = 0;\n      this.domElement.style.opacity = 0;\n      this.domElement.style.webkitTransform = 'scale(1.1)';\n    }\n  }, {\n    key: 'layout',\n    value: function layout() {\n      this.domElement.style.left = window.innerWidth / 2 - dom.getWidth(this.domElement) / 2 + 'px';\n      this.domElement.style.top = window.innerHeight / 2 - dom.getHeight(this.domElement) / 2 + 'px';\n    }\n  }]);\n  return CenteredDiv;\n}();\n\nvar styleSheet = ___$insertStyle(\".dg ul{list-style:none;margin:0;padding:0;width:100%;clear:both}.dg.ac{position:fixed;top:0;left:0;right:0;height:0;z-index:0}.dg:not(.ac) .main{overflow:hidden}.dg.main{-webkit-transition:opacity .1s linear;-o-transition:opacity .1s linear;-moz-transition:opacity .1s linear;transition:opacity .1s linear}.dg.main.taller-than-window{overflow-y:auto}.dg.main.taller-than-window .close-button{opacity:1;margin-top:-1px;border-top:1px solid #2c2c2c}.dg.main ul.closed .close-button{opacity:1 !important}.dg.main:hover .close-button,.dg.main .close-button.drag{opacity:1}.dg.main .close-button{-webkit-transition:opacity .1s linear;-o-transition:opacity .1s linear;-moz-transition:opacity .1s linear;transition:opacity .1s linear;border:0;line-height:19px;height:20px;cursor:pointer;text-align:center;background-color:#000}.dg.main .close-button.close-top{position:relative}.dg.main .close-button.close-bottom{position:absolute}.dg.main .close-button:hover{background-color:#111}.dg.a{float:right;margin-right:15px;overflow-y:visible}.dg.a.has-save>ul.close-top{margin-top:0}.dg.a.has-save>ul.close-bottom{margin-top:27px}.dg.a.has-save>ul.closed{margin-top:0}.dg.a .save-row{top:0;z-index:1002}.dg.a .save-row.close-top{position:relative}.dg.a .save-row.close-bottom{position:fixed}.dg li{-webkit-transition:height .1s ease-out;-o-transition:height .1s ease-out;-moz-transition:height .1s ease-out;transition:height .1s ease-out;-webkit-transition:overflow .1s linear;-o-transition:overflow .1s linear;-moz-transition:overflow .1s linear;transition:overflow .1s linear}.dg li:not(.folder){cursor:auto;height:27px;line-height:27px;padding:0 4px 0 5px}.dg li.folder{padding:0;border-left:4px solid rgba(0,0,0,0)}.dg li.title{cursor:pointer;margin-left:-4px}.dg .closed li:not(.title),.dg .closed ul li,.dg .closed ul li>*{height:0;overflow:hidden;border:0}.dg .cr{clear:both;padding-left:3px;height:27px;overflow:hidden}.dg .property-name{cursor:default;float:left;clear:left;width:40%;overflow:hidden;text-overflow:ellipsis}.dg .c{float:left;width:60%;position:relative}.dg .c input[type=text]{border:0;margin-top:4px;padding:3px;width:100%;float:right}.dg .has-slider input[type=text]{width:30%;margin-left:0}.dg .slider{float:left;width:66%;margin-left:-5px;margin-right:0;height:19px;margin-top:4px}.dg .slider-fg{height:100%}.dg .c input[type=checkbox]{margin-top:7px}.dg .c select{margin-top:5px}.dg .cr.function,.dg .cr.function .property-name,.dg .cr.function *,.dg .cr.boolean,.dg .cr.boolean *{cursor:pointer}.dg .cr.color{overflow:visible}.dg .selector{display:none;position:absolute;margin-left:-9px;margin-top:23px;z-index:10}.dg .c:hover .selector,.dg .selector.drag{display:block}.dg li.save-row{padding:0}.dg li.save-row .button{display:inline-block;padding:0px 6px}.dg.dialogue{background-color:#222;width:460px;padding:15px;font-size:13px;line-height:15px}#dg-new-constructor{padding:10px;color:#222;font-family:Monaco, monospace;font-size:10px;border:0;resize:none;box-shadow:inset 1px 1px 1px #888;word-wrap:break-word;margin:12px 0;display:block;width:440px;overflow-y:scroll;height:100px;position:relative}#dg-local-explain{display:none;font-size:11px;line-height:17px;border-radius:3px;background-color:#333;padding:8px;margin-top:10px}#dg-local-explain code{font-size:10px}#dat-gui-save-locally{display:none}.dg{color:#eee;font:11px 'Lucida Grande', sans-serif;text-shadow:0 -1px 0 #111}.dg.main::-webkit-scrollbar{width:5px;background:#1a1a1a}.dg.main::-webkit-scrollbar-corner{height:0;display:none}.dg.main::-webkit-scrollbar-thumb{border-radius:5px;background:#676767}.dg li:not(.folder){background:#1a1a1a;border-bottom:1px solid #2c2c2c}.dg li.save-row{line-height:25px;background:#dad5cb;border:0}.dg li.save-row select{margin-left:5px;width:108px}.dg li.save-row .button{margin-left:5px;margin-top:1px;border-radius:2px;font-size:9px;line-height:7px;padding:4px 4px 5px 4px;background:#c5bdad;color:#fff;text-shadow:0 1px 0 #b0a58f;box-shadow:0 -1px 0 #b0a58f;cursor:pointer}.dg li.save-row .button.gears{background:#c5bdad url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAsAAAANCAYAAAB/9ZQ7AAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAAQJJREFUeNpiYKAU/P//PwGIC/ApCABiBSAW+I8AClAcgKxQ4T9hoMAEUrxx2QSGN6+egDX+/vWT4e7N82AMYoPAx/evwWoYoSYbACX2s7KxCxzcsezDh3evFoDEBYTEEqycggWAzA9AuUSQQgeYPa9fPv6/YWm/Acx5IPb7ty/fw+QZblw67vDs8R0YHyQhgObx+yAJkBqmG5dPPDh1aPOGR/eugW0G4vlIoTIfyFcA+QekhhHJhPdQxbiAIguMBTQZrPD7108M6roWYDFQiIAAv6Aow/1bFwXgis+f2LUAynwoIaNcz8XNx3Dl7MEJUDGQpx9gtQ8YCueB+D26OECAAQDadt7e46D42QAAAABJRU5ErkJggg==) 2px 1px no-repeat;height:7px;width:8px}.dg li.save-row .button:hover{background-color:#bab19e;box-shadow:0 -1px 0 #b0a58f}.dg li.folder{border-bottom:0}.dg li.title{padding-left:16px;background:#000 url(data:image/gif;base64,R0lGODlhBQAFAJEAAP////Pz8////////yH5BAEAAAIALAAAAAAFAAUAAAIIlI+hKgFxoCgAOw==) 6px 10px no-repeat;cursor:pointer;border-bottom:1px solid rgba(255,255,255,0.2)}.dg .closed li.title{background-image:url(data:image/gif;base64,R0lGODlhBQAFAJEAAP////Pz8////////yH5BAEAAAIALAAAAAAFAAUAAAIIlGIWqMCbWAEAOw==)}.dg .cr.boolean{border-left:3px solid #806787}.dg .cr.color{border-left:3px solid}.dg .cr.function{border-left:3px solid #e61d5f}.dg .cr.number{border-left:3px solid #2FA1D6}.dg .cr.number input[type=text]{color:#2FA1D6}.dg .cr.string{border-left:3px solid #1ed36f}.dg .cr.string input[type=text]{color:#1ed36f}.dg .cr.function:hover,.dg .cr.boolean:hover{background:#111}.dg .c input[type=text]{background:#303030;outline:none}.dg .c input[type=text]:hover{background:#3c3c3c}.dg .c input[type=text]:focus{background:#494949;color:#fff}.dg .c .slider{background:#303030;cursor:ew-resize}.dg .c .slider-fg{background:#2FA1D6;max-width:100%}.dg .c .slider:hover{background:#3c3c3c}.dg .c .slider:hover .slider-fg{background:#44abda}\\n\");\n\ncss.inject(styleSheet);\nvar CSS_NAMESPACE = 'dg';\nvar HIDE_KEY_CODE = 72;\nvar CLOSE_BUTTON_HEIGHT = 20;\nvar DEFAULT_DEFAULT_PRESET_NAME = 'Default';\nvar SUPPORTS_LOCAL_STORAGE = function () {\n  try {\n    return !!window.localStorage;\n  } catch (e) {\n    return false;\n  }\n}();\nvar SAVE_DIALOGUE = void 0;\nvar autoPlaceVirgin = true;\nvar autoPlaceContainer = void 0;\nvar hide = false;\nvar hideableGuis = [];\nvar GUI = function GUI(pars) {\n  var _this = this;\n  var params = pars || {};\n  this.domElement = document.createElement('div');\n  this.__ul = document.createElement('ul');\n  this.domElement.appendChild(this.__ul);\n  dom.addClass(this.domElement, CSS_NAMESPACE);\n  this.__folders = {};\n  this.__controllers = [];\n  this.__rememberedObjects = [];\n  this.__rememberedObjectIndecesToControllers = [];\n  this.__listening = [];\n  params = Common.defaults(params, {\n    closeOnTop: false,\n    autoPlace: true,\n    width: GUI.DEFAULT_WIDTH\n  });\n  params = Common.defaults(params, {\n    resizable: params.autoPlace,\n    hideable: params.autoPlace\n  });\n  if (!Common.isUndefined(params.load)) {\n    if (params.preset) {\n      params.load.preset = params.preset;\n    }\n  } else {\n    params.load = { preset: DEFAULT_DEFAULT_PRESET_NAME };\n  }\n  if (Common.isUndefined(params.parent) && params.hideable) {\n    hideableGuis.push(this);\n  }\n  params.resizable = Common.isUndefined(params.parent) && params.resizable;\n  if (params.autoPlace && Common.isUndefined(params.scrollable)) {\n    params.scrollable = true;\n  }\n  var useLocalStorage = SUPPORTS_LOCAL_STORAGE && localStorage.getItem(getLocalStorageHash(this, 'isLocal')) === 'true';\n  var saveToLocalStorage = void 0;\n  var titleRow = void 0;\n  Object.defineProperties(this,\n  {\n    parent: {\n      get: function get$$1() {\n        return params.parent;\n      }\n    },\n    scrollable: {\n      get: function get$$1() {\n        return params.scrollable;\n      }\n    },\n    autoPlace: {\n      get: function get$$1() {\n        return params.autoPlace;\n      }\n    },\n    closeOnTop: {\n      get: function get$$1() {\n        return params.closeOnTop;\n      }\n    },\n    preset: {\n      get: function get$$1() {\n        if (_this.parent) {\n          return _this.getRoot().preset;\n        }\n        return params.load.preset;\n      },\n      set: function set$$1(v) {\n        if (_this.parent) {\n          _this.getRoot().preset = v;\n        } else {\n          params.load.preset = v;\n        }\n        setPresetSelectIndex(this);\n        _this.revert();\n      }\n    },\n    width: {\n      get: function get$$1() {\n        return params.width;\n      },\n      set: function set$$1(v) {\n        params.width = v;\n        setWidth(_this, v);\n      }\n    },\n    name: {\n      get: function get$$1() {\n        return params.name;\n      },\n      set: function set$$1(v) {\n        params.name = v;\n        if (titleRow) {\n          titleRow.innerHTML = params.name;\n        }\n      }\n    },\n    closed: {\n      get: function get$$1() {\n        return params.closed;\n      },\n      set: function set$$1(v) {\n        params.closed = v;\n        if (params.closed) {\n          dom.addClass(_this.__ul, GUI.CLASS_CLOSED);\n        } else {\n          dom.removeClass(_this.__ul, GUI.CLASS_CLOSED);\n        }\n        this.onResize();\n        if (_this.__closeButton) {\n          _this.__closeButton.innerHTML = v ? GUI.TEXT_OPEN : GUI.TEXT_CLOSED;\n        }\n      }\n    },\n    load: {\n      get: function get$$1() {\n        return params.load;\n      }\n    },\n    useLocalStorage: {\n      get: function get$$1() {\n        return useLocalStorage;\n      },\n      set: function set$$1(bool) {\n        if (SUPPORTS_LOCAL_STORAGE) {\n          useLocalStorage = bool;\n          if (bool) {\n            dom.bind(window, 'unload', saveToLocalStorage);\n          } else {\n            dom.unbind(window, 'unload', saveToLocalStorage);\n          }\n          localStorage.setItem(getLocalStorageHash(_this, 'isLocal'), bool);\n        }\n      }\n    }\n  });\n  if (Common.isUndefined(params.parent)) {\n    this.closed = params.closed || false;\n    dom.addClass(this.domElement, GUI.CLASS_MAIN);\n    dom.makeSelectable(this.domElement, false);\n    if (SUPPORTS_LOCAL_STORAGE) {\n      if (useLocalStorage) {\n        _this.useLocalStorage = true;\n        var savedGui = localStorage.getItem(getLocalStorageHash(this, 'gui'));\n        if (savedGui) {\n          params.load = JSON.parse(savedGui);\n        }\n      }\n    }\n    this.__closeButton = document.createElement('div');\n    this.__closeButton.innerHTML = GUI.TEXT_CLOSED;\n    dom.addClass(this.__closeButton, GUI.CLASS_CLOSE_BUTTON);\n    if (params.closeOnTop) {\n      dom.addClass(this.__closeButton, GUI.CLASS_CLOSE_TOP);\n      this.domElement.insertBefore(this.__closeButton, this.domElement.childNodes[0]);\n    } else {\n      dom.addClass(this.__closeButton, GUI.CLASS_CLOSE_BOTTOM);\n      this.domElement.appendChild(this.__closeButton);\n    }\n    dom.bind(this.__closeButton, 'click', function () {\n      _this.closed = !_this.closed;\n    });\n  } else {\n    if (params.closed === undefined) {\n      params.closed = true;\n    }\n    var titleRowName = document.createTextNode(params.name);\n    dom.addClass(titleRowName, 'controller-name');\n    titleRow = addRow(_this, titleRowName);\n    var onClickTitle = function onClickTitle(e) {\n      e.preventDefault();\n      _this.closed = !_this.closed;\n      return false;\n    };\n    dom.addClass(this.__ul, GUI.CLASS_CLOSED);\n    dom.addClass(titleRow, 'title');\n    dom.bind(titleRow, 'click', onClickTitle);\n    if (!params.closed) {\n      this.closed = false;\n    }\n  }\n  if (params.autoPlace) {\n    if (Common.isUndefined(params.parent)) {\n      if (autoPlaceVirgin) {\n        autoPlaceContainer = document.createElement('div');\n        dom.addClass(autoPlaceContainer, CSS_NAMESPACE);\n        dom.addClass(autoPlaceContainer, GUI.CLASS_AUTO_PLACE_CONTAINER);\n        document.body.appendChild(autoPlaceContainer);\n        autoPlaceVirgin = false;\n      }\n      autoPlaceContainer.appendChild(this.domElement);\n      dom.addClass(this.domElement, GUI.CLASS_AUTO_PLACE);\n    }\n    if (!this.parent) {\n      setWidth(_this, params.width);\n    }\n  }\n  this.__resizeHandler = function () {\n    _this.onResizeDebounced();\n  };\n  dom.bind(window, 'resize', this.__resizeHandler);\n  dom.bind(this.__ul, 'webkitTransitionEnd', this.__resizeHandler);\n  dom.bind(this.__ul, 'transitionend', this.__resizeHandler);\n  dom.bind(this.__ul, 'oTransitionEnd', this.__resizeHandler);\n  this.onResize();\n  if (params.resizable) {\n    addResizeHandle(this);\n  }\n  saveToLocalStorage = function saveToLocalStorage() {\n    if (SUPPORTS_LOCAL_STORAGE && localStorage.getItem(getLocalStorageHash(_this, 'isLocal')) === 'true') {\n      localStorage.setItem(getLocalStorageHash(_this, 'gui'), JSON.stringify(_this.getSaveObject()));\n    }\n  };\n  this.saveToLocalStorageIfPossible = saveToLocalStorage;\n  function resetWidth() {\n    var root = _this.getRoot();\n    root.width += 1;\n    Common.defer(function () {\n      root.width -= 1;\n    });\n  }\n  if (!params.parent) {\n    resetWidth();\n  }\n};\nGUI.toggleHide = function () {\n  hide = !hide;\n  Common.each(hideableGuis, function (gui) {\n    gui.domElement.style.display = hide ? 'none' : '';\n  });\n};\nGUI.CLASS_AUTO_PLACE = 'a';\nGUI.CLASS_AUTO_PLACE_CONTAINER = 'ac';\nGUI.CLASS_MAIN = 'main';\nGUI.CLASS_CONTROLLER_ROW = 'cr';\nGUI.CLASS_TOO_TALL = 'taller-than-window';\nGUI.CLASS_CLOSED = 'closed';\nGUI.CLASS_CLOSE_BUTTON = 'close-button';\nGUI.CLASS_CLOSE_TOP = 'close-top';\nGUI.CLASS_CLOSE_BOTTOM = 'close-bottom';\nGUI.CLASS_DRAG = 'drag';\nGUI.DEFAULT_WIDTH = 245;\nGUI.TEXT_CLOSED = 'Close Controls';\nGUI.TEXT_OPEN = 'Open Controls';\nGUI._keydownHandler = function (e) {\n  if (document.activeElement.type !== 'text' && (e.which === HIDE_KEY_CODE || e.keyCode === HIDE_KEY_CODE)) {\n    GUI.toggleHide();\n  }\n};\ndom.bind(window, 'keydown', GUI._keydownHandler, false);\nCommon.extend(GUI.prototype,\n{\n  add: function add(object, property) {\n    return _add(this, object, property, {\n      factoryArgs: Array.prototype.slice.call(arguments, 2)\n    });\n  },\n  addColor: function addColor(object, property) {\n    return _add(this, object, property, {\n      color: true\n    });\n  },\n  remove: function remove(controller) {\n    this.__ul.removeChild(controller.__li);\n    this.__controllers.splice(this.__controllers.indexOf(controller), 1);\n    var _this = this;\n    Common.defer(function () {\n      _this.onResize();\n    });\n  },\n  destroy: function destroy() {\n    if (this.parent) {\n      throw new Error('Only the root GUI should be removed with .destroy(). ' + 'For subfolders, use gui.removeFolder(folder) instead.');\n    }\n    if (this.autoPlace) {\n      autoPlaceContainer.removeChild(this.domElement);\n    }\n    var _this = this;\n    Common.each(this.__folders, function (subfolder) {\n      _this.removeFolder(subfolder);\n    });\n    dom.unbind(window, 'keydown', GUI._keydownHandler, false);\n    removeListeners(this);\n  },\n  addFolder: function addFolder(name) {\n    if (this.__folders[name] !== undefined) {\n      throw new Error('You already have a folder in this GUI by the' + ' name \"' + name + '\"');\n    }\n    var newGuiParams = { name: name, parent: this };\n    newGuiParams.autoPlace = this.autoPlace;\n    if (this.load &&\n    this.load.folders &&\n    this.load.folders[name]) {\n      newGuiParams.closed = this.load.folders[name].closed;\n      newGuiParams.load = this.load.folders[name];\n    }\n    var gui = new GUI(newGuiParams);\n    this.__folders[name] = gui;\n    var li = addRow(this, gui.domElement);\n    dom.addClass(li, 'folder');\n    return gui;\n  },\n  removeFolder: function removeFolder(folder) {\n    this.__ul.removeChild(folder.domElement.parentElement);\n    delete this.__folders[folder.name];\n    if (this.load &&\n    this.load.folders &&\n    this.load.folders[folder.name]) {\n      delete this.load.folders[folder.name];\n    }\n    removeListeners(folder);\n    var _this = this;\n    Common.each(folder.__folders, function (subfolder) {\n      folder.removeFolder(subfolder);\n    });\n    Common.defer(function () {\n      _this.onResize();\n    });\n  },\n  open: function open() {\n    this.closed = false;\n  },\n  close: function close() {\n    this.closed = true;\n  },\n  hide: function hide() {\n    this.domElement.style.display = 'none';\n  },\n  show: function show() {\n    this.domElement.style.display = '';\n  },\n  onResize: function onResize() {\n    var root = this.getRoot();\n    if (root.scrollable) {\n      var top = dom.getOffset(root.__ul).top;\n      var h = 0;\n      Common.each(root.__ul.childNodes, function (node) {\n        if (!(root.autoPlace && node === root.__save_row)) {\n          h += dom.getHeight(node);\n        }\n      });\n      if (window.innerHeight - top - CLOSE_BUTTON_HEIGHT < h) {\n        dom.addClass(root.domElement, GUI.CLASS_TOO_TALL);\n        root.__ul.style.height = window.innerHeight - top - CLOSE_BUTTON_HEIGHT + 'px';\n      } else {\n        dom.removeClass(root.domElement, GUI.CLASS_TOO_TALL);\n        root.__ul.style.height = 'auto';\n      }\n    }\n    if (root.__resize_handle) {\n      Common.defer(function () {\n        root.__resize_handle.style.height = root.__ul.offsetHeight + 'px';\n      });\n    }\n    if (root.__closeButton) {\n      root.__closeButton.style.width = root.width + 'px';\n    }\n  },\n  onResizeDebounced: Common.debounce(function () {\n    this.onResize();\n  }, 50),\n  remember: function remember() {\n    if (Common.isUndefined(SAVE_DIALOGUE)) {\n      SAVE_DIALOGUE = new CenteredDiv();\n      SAVE_DIALOGUE.domElement.innerHTML = saveDialogContents;\n    }\n    if (this.parent) {\n      throw new Error('You can only call remember on a top level GUI.');\n    }\n    var _this = this;\n    Common.each(Array.prototype.slice.call(arguments), function (object) {\n      if (_this.__rememberedObjects.length === 0) {\n        addSaveMenu(_this);\n      }\n      if (_this.__rememberedObjects.indexOf(object) === -1) {\n        _this.__rememberedObjects.push(object);\n      }\n    });\n    if (this.autoPlace) {\n      setWidth(this, this.width);\n    }\n  },\n  getRoot: function getRoot() {\n    var gui = this;\n    while (gui.parent) {\n      gui = gui.parent;\n    }\n    return gui;\n  },\n  getSaveObject: function getSaveObject() {\n    var toReturn = this.load;\n    toReturn.closed = this.closed;\n    if (this.__rememberedObjects.length > 0) {\n      toReturn.preset = this.preset;\n      if (!toReturn.remembered) {\n        toReturn.remembered = {};\n      }\n      toReturn.remembered[this.preset] = getCurrentPreset(this);\n    }\n    toReturn.folders = {};\n    Common.each(this.__folders, function (element, key) {\n      toReturn.folders[key] = element.getSaveObject();\n    });\n    return toReturn;\n  },\n  save: function save() {\n    if (!this.load.remembered) {\n      this.load.remembered = {};\n    }\n    this.load.remembered[this.preset] = getCurrentPreset(this);\n    markPresetModified(this, false);\n    this.saveToLocalStorageIfPossible();\n  },\n  saveAs: function saveAs(presetName) {\n    if (!this.load.remembered) {\n      this.load.remembered = {};\n      this.load.remembered[DEFAULT_DEFAULT_PRESET_NAME] = getCurrentPreset(this, true);\n    }\n    this.load.remembered[presetName] = getCurrentPreset(this);\n    this.preset = presetName;\n    addPresetOption(this, presetName, true);\n    this.saveToLocalStorageIfPossible();\n  },\n  revert: function revert(gui) {\n    Common.each(this.__controllers, function (controller) {\n      if (!this.getRoot().load.remembered) {\n        controller.setValue(controller.initialValue);\n      } else {\n        recallSavedValue(gui || this.getRoot(), controller);\n      }\n      if (controller.__onFinishChange) {\n        controller.__onFinishChange.call(controller, controller.getValue());\n      }\n    }, this);\n    Common.each(this.__folders, function (folder) {\n      folder.revert(folder);\n    });\n    if (!gui) {\n      markPresetModified(this.getRoot(), false);\n    }\n  },\n  listen: function listen(controller) {\n    var init = this.__listening.length === 0;\n    this.__listening.push(controller);\n    if (init) {\n      updateDisplays(this.__listening);\n    }\n  },\n  updateDisplay: function updateDisplay() {\n    Common.each(this.__controllers, function (controller) {\n      controller.updateDisplay();\n    });\n    Common.each(this.__folders, function (folder) {\n      folder.updateDisplay();\n    });\n  }\n});\nfunction addRow(gui, newDom, liBefore) {\n  var li = document.createElement('li');\n  if (newDom) {\n    li.appendChild(newDom);\n  }\n  if (liBefore) {\n    gui.__ul.insertBefore(li, liBefore);\n  } else {\n    gui.__ul.appendChild(li);\n  }\n  gui.onResize();\n  return li;\n}\nfunction removeListeners(gui) {\n  dom.unbind(window, 'resize', gui.__resizeHandler);\n  if (gui.saveToLocalStorageIfPossible) {\n    dom.unbind(window, 'unload', gui.saveToLocalStorageIfPossible);\n  }\n}\nfunction markPresetModified(gui, modified) {\n  var opt = gui.__preset_select[gui.__preset_select.selectedIndex];\n  if (modified) {\n    opt.innerHTML = opt.value + '*';\n  } else {\n    opt.innerHTML = opt.value;\n  }\n}\nfunction augmentController(gui, li, controller) {\n  controller.__li = li;\n  controller.__gui = gui;\n  Common.extend(controller,                                   {\n    options: function options(_options) {\n      if (arguments.length > 1) {\n        var nextSibling = controller.__li.nextElementSibling;\n        controller.remove();\n        return _add(gui, controller.object, controller.property, {\n          before: nextSibling,\n          factoryArgs: [Common.toArray(arguments)]\n        });\n      }\n      if (Common.isArray(_options) || Common.isObject(_options)) {\n        var _nextSibling = controller.__li.nextElementSibling;\n        controller.remove();\n        return _add(gui, controller.object, controller.property, {\n          before: _nextSibling,\n          factoryArgs: [_options]\n        });\n      }\n    },\n    name: function name(_name) {\n      controller.__li.firstElementChild.firstElementChild.innerHTML = _name;\n      return controller;\n    },\n    listen: function listen() {\n      controller.__gui.listen(controller);\n      return controller;\n    },\n    remove: function remove() {\n      controller.__gui.remove(controller);\n      return controller;\n    }\n  });\n  if (controller instanceof NumberControllerSlider) {\n    var box = new NumberControllerBox(controller.object, controller.property, { min: controller.__min, max: controller.__max, step: controller.__step });\n    Common.each(['updateDisplay', 'onChange', 'onFinishChange', 'step', 'min', 'max'], function (method) {\n      var pc = controller[method];\n      var pb = box[method];\n      controller[method] = box[method] = function () {\n        var args = Array.prototype.slice.call(arguments);\n        pb.apply(box, args);\n        return pc.apply(controller, args);\n      };\n    });\n    dom.addClass(li, 'has-slider');\n    controller.domElement.insertBefore(box.domElement, controller.domElement.firstElementChild);\n  } else if (controller instanceof NumberControllerBox) {\n    var r = function r(returned) {\n      if (Common.isNumber(controller.__min) && Common.isNumber(controller.__max)) {\n        var oldName = controller.__li.firstElementChild.firstElementChild.innerHTML;\n        var wasListening = controller.__gui.__listening.indexOf(controller) > -1;\n        controller.remove();\n        var newController = _add(gui, controller.object, controller.property, {\n          before: controller.__li.nextElementSibling,\n          factoryArgs: [controller.__min, controller.__max, controller.__step]\n        });\n        newController.name(oldName);\n        if (wasListening) newController.listen();\n        return newController;\n      }\n      return returned;\n    };\n    controller.min = Common.compose(r, controller.min);\n    controller.max = Common.compose(r, controller.max);\n  } else if (controller instanceof BooleanController) {\n    dom.bind(li, 'click', function () {\n      dom.fakeEvent(controller.__checkbox, 'click');\n    });\n    dom.bind(controller.__checkbox, 'click', function (e) {\n      e.stopPropagation();\n    });\n  } else if (controller instanceof FunctionController) {\n    dom.bind(li, 'click', function () {\n      dom.fakeEvent(controller.__button, 'click');\n    });\n    dom.bind(li, 'mouseover', function () {\n      dom.addClass(controller.__button, 'hover');\n    });\n    dom.bind(li, 'mouseout', function () {\n      dom.removeClass(controller.__button, 'hover');\n    });\n  } else if (controller instanceof ColorController) {\n    dom.addClass(li, 'color');\n    controller.updateDisplay = Common.compose(function (val) {\n      li.style.borderLeftColor = controller.__color.toString();\n      return val;\n    }, controller.updateDisplay);\n    controller.updateDisplay();\n  }\n  controller.setValue = Common.compose(function (val) {\n    if (gui.getRoot().__preset_select && controller.isModified()) {\n      markPresetModified(gui.getRoot(), true);\n    }\n    return val;\n  }, controller.setValue);\n}\nfunction recallSavedValue(gui, controller) {\n  var root = gui.getRoot();\n  var matchedIndex = root.__rememberedObjects.indexOf(controller.object);\n  if (matchedIndex !== -1) {\n    var controllerMap = root.__rememberedObjectIndecesToControllers[matchedIndex];\n    if (controllerMap === undefined) {\n      controllerMap = {};\n      root.__rememberedObjectIndecesToControllers[matchedIndex] = controllerMap;\n    }\n    controllerMap[controller.property] = controller;\n    if (root.load && root.load.remembered) {\n      var presetMap = root.load.remembered;\n      var preset = void 0;\n      if (presetMap[gui.preset]) {\n        preset = presetMap[gui.preset];\n      } else if (presetMap[DEFAULT_DEFAULT_PRESET_NAME]) {\n        preset = presetMap[DEFAULT_DEFAULT_PRESET_NAME];\n      } else {\n        return;\n      }\n      if (preset[matchedIndex] && preset[matchedIndex][controller.property] !== undefined) {\n        var value = preset[matchedIndex][controller.property];\n        controller.initialValue = value;\n        controller.setValue(value);\n      }\n    }\n  }\n}\nfunction _add(gui, object, property, params) {\n  if (object[property] === undefined) {\n    throw new Error('Object \"' + object + '\" has no property \"' + property + '\"');\n  }\n  var controller = void 0;\n  if (params.color) {\n    controller = new ColorController(object, property);\n  } else {\n    var factoryArgs = [object, property].concat(params.factoryArgs);\n    controller = ControllerFactory.apply(gui, factoryArgs);\n  }\n  if (params.before instanceof Controller) {\n    params.before = params.before.__li;\n  }\n  recallSavedValue(gui, controller);\n  dom.addClass(controller.domElement, 'c');\n  var name = document.createElement('span');\n  dom.addClass(name, 'property-name');\n  name.innerHTML = controller.property;\n  var container = document.createElement('div');\n  container.appendChild(name);\n  container.appendChild(controller.domElement);\n  var li = addRow(gui, container, params.before);\n  dom.addClass(li, GUI.CLASS_CONTROLLER_ROW);\n  if (controller instanceof ColorController) {\n    dom.addClass(li, 'color');\n  } else {\n    dom.addClass(li, _typeof(controller.getValue()));\n  }\n  augmentController(gui, li, controller);\n  gui.__controllers.push(controller);\n  return controller;\n}\nfunction getLocalStorageHash(gui, key) {\n  return document.location.href + '.' + key;\n}\nfunction addPresetOption(gui, name, setSelected) {\n  var opt = document.createElement('option');\n  opt.innerHTML = name;\n  opt.value = name;\n  gui.__preset_select.appendChild(opt);\n  if (setSelected) {\n    gui.__preset_select.selectedIndex = gui.__preset_select.length - 1;\n  }\n}\nfunction showHideExplain(gui, explain) {\n  explain.style.display = gui.useLocalStorage ? 'block' : 'none';\n}\nfunction addSaveMenu(gui) {\n  var div = gui.__save_row = document.createElement('li');\n  dom.addClass(gui.domElement, 'has-save');\n  gui.__ul.insertBefore(div, gui.__ul.firstChild);\n  dom.addClass(div, 'save-row');\n  var gears = document.createElement('span');\n  gears.innerHTML = '&nbsp;';\n  dom.addClass(gears, 'button gears');\n  var button = document.createElement('span');\n  button.innerHTML = 'Save';\n  dom.addClass(button, 'button');\n  dom.addClass(button, 'save');\n  var button2 = document.createElement('span');\n  button2.innerHTML = 'New';\n  dom.addClass(button2, 'button');\n  dom.addClass(button2, 'save-as');\n  var button3 = document.createElement('span');\n  button3.innerHTML = 'Revert';\n  dom.addClass(button3, 'button');\n  dom.addClass(button3, 'revert');\n  var select = gui.__preset_select = document.createElement('select');\n  if (gui.load && gui.load.remembered) {\n    Common.each(gui.load.remembered, function (value, key) {\n      addPresetOption(gui, key, key === gui.preset);\n    });\n  } else {\n    addPresetOption(gui, DEFAULT_DEFAULT_PRESET_NAME, false);\n  }\n  dom.bind(select, 'change', function () {\n    for (var index = 0; index < gui.__preset_select.length; index++) {\n      gui.__preset_select[index].innerHTML = gui.__preset_select[index].value;\n    }\n    gui.preset = this.value;\n  });\n  div.appendChild(select);\n  div.appendChild(gears);\n  div.appendChild(button);\n  div.appendChild(button2);\n  div.appendChild(button3);\n  if (SUPPORTS_LOCAL_STORAGE) {\n    var explain = document.getElementById('dg-local-explain');\n    var localStorageCheckBox = document.getElementById('dg-local-storage');\n    var saveLocally = document.getElementById('dg-save-locally');\n    saveLocally.style.display = 'block';\n    if (localStorage.getItem(getLocalStorageHash(gui, 'isLocal')) === 'true') {\n      localStorageCheckBox.setAttribute('checked', 'checked');\n    }\n    showHideExplain(gui, explain);\n    dom.bind(localStorageCheckBox, 'change', function () {\n      gui.useLocalStorage = !gui.useLocalStorage;\n      showHideExplain(gui, explain);\n    });\n  }\n  var newConstructorTextArea = document.getElementById('dg-new-constructor');\n  dom.bind(newConstructorTextArea, 'keydown', function (e) {\n    if (e.metaKey && (e.which === 67 || e.keyCode === 67)) {\n      SAVE_DIALOGUE.hide();\n    }\n  });\n  dom.bind(gears, 'click', function () {\n    newConstructorTextArea.innerHTML = JSON.stringify(gui.getSaveObject(), undefined, 2);\n    SAVE_DIALOGUE.show();\n    newConstructorTextArea.focus();\n    newConstructorTextArea.select();\n  });\n  dom.bind(button, 'click', function () {\n    gui.save();\n  });\n  dom.bind(button2, 'click', function () {\n    var presetName = prompt('Enter a new preset name.');\n    if (presetName) {\n      gui.saveAs(presetName);\n    }\n  });\n  dom.bind(button3, 'click', function () {\n    gui.revert();\n  });\n}\nfunction addResizeHandle(gui) {\n  var pmouseX = void 0;\n  gui.__resize_handle = document.createElement('div');\n  Common.extend(gui.__resize_handle.style, {\n    width: '6px',\n    marginLeft: '-3px',\n    height: '200px',\n    cursor: 'ew-resize',\n    position: 'absolute'\n  });\n  function drag(e) {\n    e.preventDefault();\n    gui.width += pmouseX - e.clientX;\n    gui.onResize();\n    pmouseX = e.clientX;\n    return false;\n  }\n  function dragStop() {\n    dom.removeClass(gui.__closeButton, GUI.CLASS_DRAG);\n    dom.unbind(window, 'mousemove', drag);\n    dom.unbind(window, 'mouseup', dragStop);\n  }\n  function dragStart(e) {\n    e.preventDefault();\n    pmouseX = e.clientX;\n    dom.addClass(gui.__closeButton, GUI.CLASS_DRAG);\n    dom.bind(window, 'mousemove', drag);\n    dom.bind(window, 'mouseup', dragStop);\n    return false;\n  }\n  dom.bind(gui.__resize_handle, 'mousedown', dragStart);\n  dom.bind(gui.__closeButton, 'mousedown', dragStart);\n  gui.domElement.insertBefore(gui.__resize_handle, gui.domElement.firstElementChild);\n}\nfunction setWidth(gui, w) {\n  gui.domElement.style.width = w + 'px';\n  if (gui.__save_row && gui.autoPlace) {\n    gui.__save_row.style.width = w + 'px';\n  }\n  if (gui.__closeButton) {\n    gui.__closeButton.style.width = w + 'px';\n  }\n}\nfunction getCurrentPreset(gui, useInitialValues) {\n  var toReturn = {};\n  Common.each(gui.__rememberedObjects, function (val, index) {\n    var savedValues = {};\n    var controllerMap = gui.__rememberedObjectIndecesToControllers[index];\n    Common.each(controllerMap, function (controller, property) {\n      savedValues[property] = useInitialValues ? controller.initialValue : controller.getValue();\n    });\n    toReturn[index] = savedValues;\n  });\n  return toReturn;\n}\nfunction setPresetSelectIndex(gui) {\n  for (var index = 0; index < gui.__preset_select.length; index++) {\n    if (gui.__preset_select[index].value === gui.preset) {\n      gui.__preset_select.selectedIndex = index;\n    }\n  }\n}\nfunction updateDisplays(controllerArray) {\n  if (controllerArray.length !== 0) {\n    requestAnimationFrame$1.call(window, function () {\n      updateDisplays(controllerArray);\n    });\n  }\n  Common.each(controllerArray, function (c) {\n    c.updateDisplay();\n  });\n}\n\nvar color = {\n  Color: Color,\n  math: ColorMath,\n  interpret: interpret\n};\nvar controllers = {\n  Controller: Controller,\n  BooleanController: BooleanController,\n  OptionController: OptionController,\n  StringController: StringController,\n  NumberController: NumberController,\n  NumberControllerBox: NumberControllerBox,\n  NumberControllerSlider: NumberControllerSlider,\n  FunctionController: FunctionController,\n  ColorController: ColorController\n};\nvar dom$1 = { dom: dom };\nvar gui = { GUI: GUI };\nvar GUI$1 = GUI;\nvar index = {\n  color: color,\n  controllers: controllers,\n  dom: dom$1,\n  gui: gui,\n  GUI: GUI$1\n};\n\nexport { color, controllers, dom$1 as dom, gui, GUI$1 as GUI };\nexport default index;\n//# sourceMappingURL=dat.gui.module.js.map\n","class Clock {\n\n\tconstructor( autoStart ) {\n\n\t\tthis.autoStart = ( autoStart !== undefined ) ? autoStart : true;\n\n\t\tthis.startTime = 0;\n\t\tthis.oldTime = 0;\n\t\tthis.elapsedTime = 0;\n\n\t\tthis.running = false;\n\n\t}\n\n\tstart() {\n\n\t\tthis.startTime = now();\n\n\t\tthis.oldTime = this.startTime;\n\t\tthis.elapsedTime = 0;\n\t\tthis.running = true;\n\n\t}\n\n\tstop() {\n\n\t\tthis.getElapsedTime();\n\t\tthis.running = false;\n\t\tthis.autoStart = false;\n\n\t}\n\n\tgetElapsedTime() {\n\n\t\tthis.getDelta();\n\t\treturn this.elapsedTime;\n\n\t}\n\n\tgetDelta() {\n\n\t\tlet diff = 0;\n\n\t\tif ( this.autoStart && ! this.running ) {\n\n\t\t\tthis.start();\n\t\t\treturn 0;\n\n\t\t}\n\n\t\tif ( this.running ) {\n\n\t\t\tconst newTime = now();\n\n\t\t\tdiff = ( newTime - this.oldTime ) / 1000;\n\t\t\tthis.oldTime = newTime;\n\n\t\t\tthis.elapsedTime += diff;\n\n\t\t}\n\n\t\treturn diff;\n\n\t}\n\n}\n\nfunction now() {\n\n\treturn ( typeof performance === 'undefined' ? Date : performance ).now(); // see #10732\n\n}\n\nexport { Clock };\n","import { Camera } from './Camera.js';\nimport { Object3D } from '../core/Object3D.js';\n\nclass OrthographicCamera extends Camera {\n\n\tconstructor( left = - 1, right = 1, top = 1, bottom = - 1, near = 0.1, far = 2000 ) {\n\n\t\tsuper();\n\n\t\tthis.type = 'OrthographicCamera';\n\n\t\tthis.zoom = 1;\n\t\tthis.view = null;\n\n\t\tthis.left = left;\n\t\tthis.right = right;\n\t\tthis.top = top;\n\t\tthis.bottom = bottom;\n\n\t\tthis.near = near;\n\t\tthis.far = far;\n\n\t\tthis.updateProjectionMatrix();\n\n\t}\n\n\tcopy( source, recursive ) {\n\n\t\tsuper.copy( source, recursive );\n\n\t\tthis.left = source.left;\n\t\tthis.right = source.right;\n\t\tthis.top = source.top;\n\t\tthis.bottom = source.bottom;\n\t\tthis.near = source.near;\n\t\tthis.far = source.far;\n\n\t\tthis.zoom = source.zoom;\n\t\tthis.view = source.view === null ? null : Object.assign( {}, source.view );\n\n\t\treturn this;\n\n\t}\n\n\tsetViewOffset( fullWidth, fullHeight, x, y, width, height ) {\n\n\t\tif ( this.view === null ) {\n\n\t\t\tthis.view = {\n\t\t\t\tenabled: true,\n\t\t\t\tfullWidth: 1,\n\t\t\t\tfullHeight: 1,\n\t\t\t\toffsetX: 0,\n\t\t\t\toffsetY: 0,\n\t\t\t\twidth: 1,\n\t\t\t\theight: 1\n\t\t\t};\n\n\t\t}\n\n\t\tthis.view.enabled = true;\n\t\tthis.view.fullWidth = fullWidth;\n\t\tthis.view.fullHeight = fullHeight;\n\t\tthis.view.offsetX = x;\n\t\tthis.view.offsetY = y;\n\t\tthis.view.width = width;\n\t\tthis.view.height = height;\n\n\t\tthis.updateProjectionMatrix();\n\n\t}\n\n\tclearViewOffset() {\n\n\t\tif ( this.view !== null ) {\n\n\t\t\tthis.view.enabled = false;\n\n\t\t}\n\n\t\tthis.updateProjectionMatrix();\n\n\t}\n\n\tupdateProjectionMatrix() {\n\n\t\tconst dx = ( this.right - this.left ) / ( 2 * this.zoom );\n\t\tconst dy = ( this.top - this.bottom ) / ( 2 * this.zoom );\n\t\tconst cx = ( this.right + this.left ) / 2;\n\t\tconst cy = ( this.top + this.bottom ) / 2;\n\n\t\tlet left = cx - dx;\n\t\tlet right = cx + dx;\n\t\tlet top = cy + dy;\n\t\tlet bottom = cy - dy;\n\n\t\tif ( this.view !== null && this.view.enabled ) {\n\n\t\t\tconst scaleW = ( this.right - this.left ) / this.view.fullWidth / this.zoom;\n\t\t\tconst scaleH = ( this.top - this.bottom ) / this.view.fullHeight / this.zoom;\n\n\t\t\tleft += scaleW * this.view.offsetX;\n\t\t\tright = left + scaleW * this.view.width;\n\t\t\ttop -= scaleH * this.view.offsetY;\n\t\t\tbottom = top - scaleH * this.view.height;\n\n\t\t}\n\n\t\tthis.projectionMatrix.makeOrthographic( left, right, top, bottom, this.near, this.far );\n\n\t\tthis.projectionMatrixInverse.copy( this.projectionMatrix ).invert();\n\n\t}\n\n\ttoJSON( meta ) {\n\n\t\tconst data = Object3D.prototype.toJSON.call( this, meta );\n\n\t\tdata.object.zoom = this.zoom;\n\t\tdata.object.left = this.left;\n\t\tdata.object.right = this.right;\n\t\tdata.object.top = this.top;\n\t\tdata.object.bottom = this.bottom;\n\t\tdata.object.near = this.near;\n\t\tdata.object.far = this.far;\n\n\t\tif ( this.view !== null ) data.object.view = Object.assign( {}, this.view );\n\n\t\treturn data;\n\n\t}\n\n}\n\nOrthographicCamera.prototype.isOrthographicCamera = true;\n\nexport { OrthographicCamera };\n","/**\n * Full-screen textured quad shader\n */\n\nvar CopyShader = {\n\n\tuniforms: {\n\n\t\t'tDiffuse': { value: null },\n\t\t'opacity': { value: 1.0 }\n\n\t},\n\n\tvertexShader: [\n\n\t\t'varying vec2 vUv;',\n\n\t\t'void main() {',\n\n\t\t'\tvUv = uv;',\n\t\t'\tgl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );',\n\n\t\t'}'\n\n\t].join( '\\n' ),\n\n\tfragmentShader: [\n\n\t\t'uniform float opacity;',\n\n\t\t'uniform sampler2D tDiffuse;',\n\n\t\t'varying vec2 vUv;',\n\n\t\t'void main() {',\n\n\t\t'\tvec4 texel = texture2D( tDiffuse, vUv );',\n\t\t'\tgl_FragColor = opacity * texel;',\n\n\t\t'}'\n\n\t].join( '\\n' )\n\n};\n\nexport { CopyShader };\n","import {\n\tOrthographicCamera,\n\tPlaneGeometry,\n\tMesh\n} from '../../../build/three.module.js';\n\nfunction Pass() {\n\n\t// if set to true, the pass is processed by the composer\n\tthis.enabled = true;\n\n\t// if set to true, the pass indicates to swap read and write buffer after rendering\n\tthis.needsSwap = true;\n\n\t// if set to true, the pass clears its buffer before rendering\n\tthis.clear = false;\n\n\t// if set to true, the result of the pass is rendered to screen. This is set automatically by EffectComposer.\n\tthis.renderToScreen = false;\n\n}\n\nObject.assign( Pass.prototype, {\n\n\tsetSize: function ( /* width, height */ ) {},\n\n\trender: function ( /* renderer, writeBuffer, readBuffer, deltaTime, maskActive */ ) {\n\n\t\tconsole.error( 'THREE.Pass: .render() must be implemented in derived pass.' );\n\n\t}\n\n} );\n\n// Helper for passes that need to fill the viewport with a single quad.\n\n// Important: It's actually a hack to put FullScreenQuad into the Pass namespace. This is only\n// done to make examples/js code work. Normally, FullScreenQuad should be exported\n// from this module like Pass.\n\nPass.FullScreenQuad = ( function () {\n\n\tvar camera = new OrthographicCamera( - 1, 1, 1, - 1, 0, 1 );\n\tvar geometry = new PlaneGeometry( 2, 2 );\n\n\tvar FullScreenQuad = function ( material ) {\n\n\t\tthis._mesh = new Mesh( geometry, material );\n\n\t};\n\n\tObject.defineProperty( FullScreenQuad.prototype, 'material', {\n\n\t\tget: function () {\n\n\t\t\treturn this._mesh.material;\n\n\t\t},\n\n\t\tset: function ( value ) {\n\n\t\t\tthis._mesh.material = value;\n\n\t\t}\n\n\t} );\n\n\tObject.assign( FullScreenQuad.prototype, {\n\n\t\tdispose: function () {\n\n\t\t\tthis._mesh.geometry.dispose();\n\n\t\t},\n\n\t\trender: function ( renderer ) {\n\n\t\t\trenderer.render( this._mesh, camera );\n\n\t\t}\n\n\t} );\n\n\treturn FullScreenQuad;\n\n} )();\n\nexport { Pass };\n","import {\n\tShaderMaterial,\n\tUniformsUtils\n} from '../../../build/three.module.js';\nimport { Pass } from '../postprocessing/Pass.js';\n\nvar ShaderPass = function ( shader, textureID ) {\n\n\tPass.call( this );\n\n\tthis.textureID = ( textureID !== undefined ) ? textureID : 'tDiffuse';\n\n\tif ( shader instanceof ShaderMaterial ) {\n\n\t\tthis.uniforms = shader.uniforms;\n\n\t\tthis.material = shader;\n\n\t} else if ( shader ) {\n\n\t\tthis.uniforms = UniformsUtils.clone( shader.uniforms );\n\n\t\tthis.material = new ShaderMaterial( {\n\n\t\t\tdefines: Object.assign( {}, shader.defines ),\n\t\t\tuniforms: this.uniforms,\n\t\t\tvertexShader: shader.vertexShader,\n\t\t\tfragmentShader: shader.fragmentShader\n\n\t\t} );\n\n\t}\n\n\tthis.fsQuad = new Pass.FullScreenQuad( this.material );\n\n};\n\nShaderPass.prototype = Object.assign( Object.create( Pass.prototype ), {\n\n\tconstructor: ShaderPass,\n\n\trender: function ( renderer, writeBuffer, readBuffer /*, deltaTime, maskActive */ ) {\n\n\t\tif ( this.uniforms[ this.textureID ] ) {\n\n\t\t\tthis.uniforms[ this.textureID ].value = readBuffer.texture;\n\n\t\t}\n\n\t\tthis.fsQuad.material = this.material;\n\n\t\tif ( this.renderToScreen ) {\n\n\t\t\trenderer.setRenderTarget( null );\n\t\t\tthis.fsQuad.render( renderer );\n\n\t\t} else {\n\n\t\t\trenderer.setRenderTarget( writeBuffer );\n\t\t\t// TODO: Avoid using autoClear properties, see https://github.com/mrdoob/three.js/pull/15571#issuecomment-465669600\n\t\t\tif ( this.clear ) renderer.clear( renderer.autoClearColor, renderer.autoClearDepth, renderer.autoClearStencil );\n\t\t\tthis.fsQuad.render( renderer );\n\n\t\t}\n\n\t}\n\n} );\n\nexport { ShaderPass };\n","import { Pass } from '../postprocessing/Pass.js';\n\nvar MaskPass = function ( scene, camera ) {\n\n\tPass.call( this );\n\n\tthis.scene = scene;\n\tthis.camera = camera;\n\n\tthis.clear = true;\n\tthis.needsSwap = false;\n\n\tthis.inverse = false;\n\n};\n\nMaskPass.prototype = Object.assign( Object.create( Pass.prototype ), {\n\n\tconstructor: MaskPass,\n\n\trender: function ( renderer, writeBuffer, readBuffer /*, deltaTime, maskActive */ ) {\n\n\t\tvar context = renderer.getContext();\n\t\tvar state = renderer.state;\n\n\t\t// don't update color or depth\n\n\t\tstate.buffers.color.setMask( false );\n\t\tstate.buffers.depth.setMask( false );\n\n\t\t// lock buffers\n\n\t\tstate.buffers.color.setLocked( true );\n\t\tstate.buffers.depth.setLocked( true );\n\n\t\t// set up stencil\n\n\t\tvar writeValue, clearValue;\n\n\t\tif ( this.inverse ) {\n\n\t\t\twriteValue = 0;\n\t\t\tclearValue = 1;\n\n\t\t} else {\n\n\t\t\twriteValue = 1;\n\t\t\tclearValue = 0;\n\n\t\t}\n\n\t\tstate.buffers.stencil.setTest( true );\n\t\tstate.buffers.stencil.setOp( context.REPLACE, context.REPLACE, context.REPLACE );\n\t\tstate.buffers.stencil.setFunc( context.ALWAYS, writeValue, 0xffffffff );\n\t\tstate.buffers.stencil.setClear( clearValue );\n\t\tstate.buffers.stencil.setLocked( true );\n\n\t\t// draw into the stencil buffer\n\n\t\trenderer.setRenderTarget( readBuffer );\n\t\tif ( this.clear ) renderer.clear();\n\t\trenderer.render( this.scene, this.camera );\n\n\t\trenderer.setRenderTarget( writeBuffer );\n\t\tif ( this.clear ) renderer.clear();\n\t\trenderer.render( this.scene, this.camera );\n\n\t\t// unlock color and depth buffer for subsequent rendering\n\n\t\tstate.buffers.color.setLocked( false );\n\t\tstate.buffers.depth.setLocked( false );\n\n\t\t// only render where stencil is set to 1\n\n\t\tstate.buffers.stencil.setLocked( false );\n\t\tstate.buffers.stencil.setFunc( context.EQUAL, 1, 0xffffffff ); // draw if == 1\n\t\tstate.buffers.stencil.setOp( context.KEEP, context.KEEP, context.KEEP );\n\t\tstate.buffers.stencil.setLocked( true );\n\n\t}\n\n} );\n\n\nvar ClearMaskPass = function () {\n\n\tPass.call( this );\n\n\tthis.needsSwap = false;\n\n};\n\nClearMaskPass.prototype = Object.create( Pass.prototype );\n\nObject.assign( ClearMaskPass.prototype, {\n\n\trender: function ( renderer /*, writeBuffer, readBuffer, deltaTime, maskActive */ ) {\n\n\t\trenderer.state.buffers.stencil.setLocked( false );\n\t\trenderer.state.buffers.stencil.setTest( false );\n\n\t}\n\n} );\n\nexport { MaskPass, ClearMaskPass };\n","import {\n\tClock,\n\tLinearFilter,\n\tMesh,\n\tOrthographicCamera,\n\tPlaneGeometry,\n\tRGBAFormat,\n\tVector2,\n\tWebGLRenderTarget\n} from '../../../build/three.module.js';\nimport { CopyShader } from '../shaders/CopyShader.js';\nimport { ShaderPass } from '../postprocessing/ShaderPass.js';\nimport { MaskPass } from '../postprocessing/MaskPass.js';\nimport { ClearMaskPass } from '../postprocessing/MaskPass.js';\n\nvar EffectComposer = function ( renderer, renderTarget ) {\n\n\tthis.renderer = renderer;\n\n\tif ( renderTarget === undefined ) {\n\n\t\tvar parameters = {\n\t\t\tminFilter: LinearFilter,\n\t\t\tmagFilter: LinearFilter,\n\t\t\tformat: RGBAFormat\n\t\t};\n\n\t\tvar size = renderer.getSize( new Vector2() );\n\t\tthis._pixelRatio = renderer.getPixelRatio();\n\t\tthis._width = size.width;\n\t\tthis._height = size.height;\n\n\t\trenderTarget = new WebGLRenderTarget( this._width * this._pixelRatio, this._height * this._pixelRatio, parameters );\n\t\trenderTarget.texture.name = 'EffectComposer.rt1';\n\n\t} else {\n\n\t\tthis._pixelRatio = 1;\n\t\tthis._width = renderTarget.width;\n\t\tthis._height = renderTarget.height;\n\n\t}\n\n\tthis.renderTarget1 = renderTarget;\n\tthis.renderTarget2 = renderTarget.clone();\n\tthis.renderTarget2.texture.name = 'EffectComposer.rt2';\n\n\tthis.writeBuffer = this.renderTarget1;\n\tthis.readBuffer = this.renderTarget2;\n\n\tthis.renderToScreen = true;\n\n\tthis.passes = [];\n\n\t// dependencies\n\n\tif ( CopyShader === undefined ) {\n\n\t\tconsole.error( 'THREE.EffectComposer relies on CopyShader' );\n\n\t}\n\n\tif ( ShaderPass === undefined ) {\n\n\t\tconsole.error( 'THREE.EffectComposer relies on ShaderPass' );\n\n\t}\n\n\tthis.copyPass = new ShaderPass( CopyShader );\n\n\tthis.clock = new Clock();\n\n};\n\nObject.assign( EffectComposer.prototype, {\n\n\tswapBuffers: function () {\n\n\t\tvar tmp = this.readBuffer;\n\t\tthis.readBuffer = this.writeBuffer;\n\t\tthis.writeBuffer = tmp;\n\n\t},\n\n\taddPass: function ( pass ) {\n\n\t\tthis.passes.push( pass );\n\t\tpass.setSize( this._width * this._pixelRatio, this._height * this._pixelRatio );\n\n\t},\n\n\tinsertPass: function ( pass, index ) {\n\n\t\tthis.passes.splice( index, 0, pass );\n\t\tpass.setSize( this._width * this._pixelRatio, this._height * this._pixelRatio );\n\n\t},\n\n\tremovePass: function ( pass ) {\n\n\t\tconst index = this.passes.indexOf( pass );\n\n\t\tif ( index !== - 1 ) {\n\n\t\t\tthis.passes.splice( index, 1 );\n\n\t\t}\n\n\t},\n\n\tisLastEnabledPass: function ( passIndex ) {\n\n\t\tfor ( var i = passIndex + 1; i < this.passes.length; i ++ ) {\n\n\t\t\tif ( this.passes[ i ].enabled ) {\n\n\t\t\t\treturn false;\n\n\t\t\t}\n\n\t\t}\n\n\t\treturn true;\n\n\t},\n\n\trender: function ( deltaTime ) {\n\n\t\t// deltaTime value is in seconds\n\n\t\tif ( deltaTime === undefined ) {\n\n\t\t\tdeltaTime = this.clock.getDelta();\n\n\t\t}\n\n\t\tvar currentRenderTarget = this.renderer.getRenderTarget();\n\n\t\tvar maskActive = false;\n\n\t\tvar pass, i, il = this.passes.length;\n\n\t\tfor ( i = 0; i < il; i ++ ) {\n\n\t\t\tpass = this.passes[ i ];\n\n\t\t\tif ( pass.enabled === false ) continue;\n\n\t\t\tpass.renderToScreen = ( this.renderToScreen && this.isLastEnabledPass( i ) );\n\t\t\tpass.render( this.renderer, this.writeBuffer, this.readBuffer, deltaTime, maskActive );\n\n\t\t\tif ( pass.needsSwap ) {\n\n\t\t\t\tif ( maskActive ) {\n\n\t\t\t\t\tvar context = this.renderer.getContext();\n\t\t\t\t\tvar stencil = this.renderer.state.buffers.stencil;\n\n\t\t\t\t\t//context.stencilFunc( context.NOTEQUAL, 1, 0xffffffff );\n\t\t\t\t\tstencil.setFunc( context.NOTEQUAL, 1, 0xffffffff );\n\n\t\t\t\t\tthis.copyPass.render( this.renderer, this.writeBuffer, this.readBuffer, deltaTime );\n\n\t\t\t\t\t//context.stencilFunc( context.EQUAL, 1, 0xffffffff );\n\t\t\t\t\tstencil.setFunc( context.EQUAL, 1, 0xffffffff );\n\n\t\t\t\t}\n\n\t\t\t\tthis.swapBuffers();\n\n\t\t\t}\n\n\t\t\tif ( MaskPass !== undefined ) {\n\n\t\t\t\tif ( pass instanceof MaskPass ) {\n\n\t\t\t\t\tmaskActive = true;\n\n\t\t\t\t} else if ( pass instanceof ClearMaskPass ) {\n\n\t\t\t\t\tmaskActive = false;\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t}\n\n\t\tthis.renderer.setRenderTarget( currentRenderTarget );\n\n\t},\n\n\treset: function ( renderTarget ) {\n\n\t\tif ( renderTarget === undefined ) {\n\n\t\t\tvar size = this.renderer.getSize( new Vector2() );\n\t\t\tthis._pixelRatio = this.renderer.getPixelRatio();\n\t\t\tthis._width = size.width;\n\t\t\tthis._height = size.height;\n\n\t\t\trenderTarget = this.renderTarget1.clone();\n\t\t\trenderTarget.setSize( this._width * this._pixelRatio, this._height * this._pixelRatio );\n\n\t\t}\n\n\t\tthis.renderTarget1.dispose();\n\t\tthis.renderTarget2.dispose();\n\t\tthis.renderTarget1 = renderTarget;\n\t\tthis.renderTarget2 = renderTarget.clone();\n\n\t\tthis.writeBuffer = this.renderTarget1;\n\t\tthis.readBuffer = this.renderTarget2;\n\n\t},\n\n\tsetSize: function ( width, height ) {\n\n\t\tthis._width = width;\n\t\tthis._height = height;\n\n\t\tvar effectiveWidth = this._width * this._pixelRatio;\n\t\tvar effectiveHeight = this._height * this._pixelRatio;\n\n\t\tthis.renderTarget1.setSize( effectiveWidth, effectiveHeight );\n\t\tthis.renderTarget2.setSize( effectiveWidth, effectiveHeight );\n\n\t\tfor ( var i = 0; i < this.passes.length; i ++ ) {\n\n\t\t\tthis.passes[ i ].setSize( effectiveWidth, effectiveHeight );\n\n\t\t}\n\n\t},\n\n\tsetPixelRatio: function ( pixelRatio ) {\n\n\t\tthis._pixelRatio = pixelRatio;\n\n\t\tthis.setSize( this._width, this._height );\n\n\t}\n\n} );\n\n\nvar Pass = function () {\n\n\t// if set to true, the pass is processed by the composer\n\tthis.enabled = true;\n\n\t// if set to true, the pass indicates to swap read and write buffer after rendering\n\tthis.needsSwap = true;\n\n\t// if set to true, the pass clears its buffer before rendering\n\tthis.clear = false;\n\n\t// if set to true, the result of the pass is rendered to screen. This is set automatically by EffectComposer.\n\tthis.renderToScreen = false;\n\n};\n\nObject.assign( Pass.prototype, {\n\n\tsetSize: function ( /* width, height */ ) {},\n\n\trender: function ( /* renderer, writeBuffer, readBuffer, deltaTime, maskActive */ ) {\n\n\t\tconsole.error( 'THREE.Pass: .render() must be implemented in derived pass.' );\n\n\t}\n\n} );\n\n// Helper for passes that need to fill the viewport with a single quad.\nPass.FullScreenQuad = ( function () {\n\n\tvar camera = new OrthographicCamera( - 1, 1, 1, - 1, 0, 1 );\n\tvar geometry = new PlaneGeometry( 2, 2 );\n\n\tvar FullScreenQuad = function ( material ) {\n\n\t\tthis._mesh = new Mesh( geometry, material );\n\n\t};\n\n\tObject.defineProperty( FullScreenQuad.prototype, 'material', {\n\n\t\tget: function () {\n\n\t\t\treturn this._mesh.material;\n\n\t\t},\n\n\t\tset: function ( value ) {\n\n\t\t\tthis._mesh.material = value;\n\n\t\t}\n\n\t} );\n\n\tObject.assign( FullScreenQuad.prototype, {\n\n\t\tdispose: function () {\n\n\t\t\tthis._mesh.geometry.dispose();\n\n\t\t},\n\n\t\trender: function ( renderer ) {\n\n\t\t\trenderer.render( this._mesh, camera );\n\n\t\t}\n\n\t} );\n\n\treturn FullScreenQuad;\n\n} )();\n\nexport { EffectComposer, Pass };\n","import {\n\tColor\n} from '../../../build/three.module.js';\nimport { Pass } from '../postprocessing/Pass.js';\n\nvar RenderPass = function ( scene, camera, overrideMaterial, clearColor, clearAlpha ) {\n\n\tPass.call( this );\n\n\tthis.scene = scene;\n\tthis.camera = camera;\n\n\tthis.overrideMaterial = overrideMaterial;\n\n\tthis.clearColor = clearColor;\n\tthis.clearAlpha = ( clearAlpha !== undefined ) ? clearAlpha : 0;\n\n\tthis.clear = true;\n\tthis.clearDepth = false;\n\tthis.needsSwap = false;\n\tthis._oldClearColor = new Color();\n\n};\n\nRenderPass.prototype = Object.assign( Object.create( Pass.prototype ), {\n\n\tconstructor: RenderPass,\n\n\trender: function ( renderer, writeBuffer, readBuffer /*, deltaTime, maskActive */ ) {\n\n\t\tvar oldAutoClear = renderer.autoClear;\n\t\trenderer.autoClear = false;\n\n\t\tvar oldClearAlpha, oldOverrideMaterial;\n\n\t\tif ( this.overrideMaterial !== undefined ) {\n\n\t\t\toldOverrideMaterial = this.scene.overrideMaterial;\n\n\t\t\tthis.scene.overrideMaterial = this.overrideMaterial;\n\n\t\t}\n\n\t\tif ( this.clearColor ) {\n\n\t\t\trenderer.getClearColor( this._oldClearColor );\n\t\t\toldClearAlpha = renderer.getClearAlpha();\n\n\t\t\trenderer.setClearColor( this.clearColor, this.clearAlpha );\n\n\t\t}\n\n\t\tif ( this.clearDepth ) {\n\n\t\t\trenderer.clearDepth();\n\n\t\t}\n\n\t\trenderer.setRenderTarget( this.renderToScreen ? null : readBuffer );\n\n\t\t// TODO: Avoid using autoClear properties, see https://github.com/mrdoob/three.js/pull/15571#issuecomment-465669600\n\t\tif ( this.clear ) renderer.clear( renderer.autoClearColor, renderer.autoClearDepth, renderer.autoClearStencil );\n\t\trenderer.render( this.scene, this.camera );\n\n\t\tif ( this.clearColor ) {\n\n\t\t\trenderer.setClearColor( this._oldClearColor, oldClearAlpha );\n\n\t\t}\n\n\t\tif ( this.overrideMaterial !== undefined ) {\n\n\t\t\tthis.scene.overrideMaterial = oldOverrideMaterial;\n\n\t\t}\n\n\t\trenderer.autoClear = oldAutoClear;\n\n\t}\n\n} );\n\nexport { RenderPass };\n","import {\n\tColor\n} from '../../../build/three.module.js';\n\n/**\n * Luminosity\n * http://en.wikipedia.org/wiki/Luminosity\n */\n\nvar LuminosityHighPassShader = {\n\n\tshaderID: 'luminosityHighPass',\n\n\tuniforms: {\n\n\t\t'tDiffuse': { value: null },\n\t\t'luminosityThreshold': { value: 1.0 },\n\t\t'smoothWidth': { value: 1.0 },\n\t\t'defaultColor': { value: new Color( 0x000000 ) },\n\t\t'defaultOpacity': { value: 0.0 }\n\n\t},\n\n\tvertexShader: [\n\n\t\t'varying vec2 vUv;',\n\n\t\t'void main() {',\n\n\t\t'\tvUv = uv;',\n\n\t\t'\tgl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );',\n\n\t\t'}'\n\n\t].join( '\\n' ),\n\n\tfragmentShader: [\n\n\t\t'uniform sampler2D tDiffuse;',\n\t\t'uniform vec3 defaultColor;',\n\t\t'uniform float defaultOpacity;',\n\t\t'uniform float luminosityThreshold;',\n\t\t'uniform float smoothWidth;',\n\n\t\t'varying vec2 vUv;',\n\n\t\t'void main() {',\n\n\t\t'\tvec4 texel = texture2D( tDiffuse, vUv );',\n\n\t\t'\tvec3 luma = vec3( 0.299, 0.587, 0.114 );',\n\n\t\t'\tfloat v = dot( texel.xyz, luma );',\n\n\t\t'\tvec4 outputColor = vec4( defaultColor.rgb, defaultOpacity );',\n\n\t\t'\tfloat alpha = smoothstep( luminosityThreshold, luminosityThreshold + smoothWidth, v );',\n\n\t\t'\tgl_FragColor = mix( outputColor, texel, alpha );',\n\n\t\t'}'\n\n\t].join( '\\n' )\n\n};\n\nexport { LuminosityHighPassShader };\n","import {\n\tAdditiveBlending,\n\tColor,\n\tLinearFilter,\n\tMeshBasicMaterial,\n\tRGBAFormat,\n\tShaderMaterial,\n\tUniformsUtils,\n\tVector2,\n\tVector3,\n\tWebGLRenderTarget\n} from '../../../build/three.module.js';\nimport { Pass } from '../postprocessing/Pass.js';\nimport { CopyShader } from '../shaders/CopyShader.js';\nimport { LuminosityHighPassShader } from '../shaders/LuminosityHighPassShader.js';\n\n/**\n * UnrealBloomPass is inspired by the bloom pass of Unreal Engine. It creates a\n * mip map chain of bloom textures and blurs them with different radii. Because\n * of the weighted combination of mips, and because larger blurs are done on\n * higher mips, this effect provides good quality and performance.\n *\n * Reference:\n * - https://docs.unrealengine.com/latest/INT/Engine/Rendering/PostProcessEffects/Bloom/\n */\nvar UnrealBloomPass = function ( resolution, strength, radius, threshold ) {\n\n\tPass.call( this );\n\n\tthis.strength = ( strength !== undefined ) ? strength : 1;\n\tthis.radius = radius;\n\tthis.threshold = threshold;\n\tthis.resolution = ( resolution !== undefined ) ? new Vector2( resolution.x, resolution.y ) : new Vector2( 256, 256 );\n\n\t// create color only once here, reuse it later inside the render function\n\tthis.clearColor = new Color( 0, 0, 0 );\n\n\t// render targets\n\tvar pars = { minFilter: LinearFilter, magFilter: LinearFilter, format: RGBAFormat };\n\tthis.renderTargetsHorizontal = [];\n\tthis.renderTargetsVertical = [];\n\tthis.nMips = 5;\n\tvar resx = Math.round( this.resolution.x / 2 );\n\tvar resy = Math.round( this.resolution.y / 2 );\n\n\tthis.renderTargetBright = new WebGLRenderTarget( resx, resy, pars );\n\tthis.renderTargetBright.texture.name = 'UnrealBloomPass.bright';\n\tthis.renderTargetBright.texture.generateMipmaps = false;\n\n\tfor ( var i = 0; i < this.nMips; i ++ ) {\n\n\t\tvar renderTargetHorizonal = new WebGLRenderTarget( resx, resy, pars );\n\n\t\trenderTargetHorizonal.texture.name = 'UnrealBloomPass.h' + i;\n\t\trenderTargetHorizonal.texture.generateMipmaps = false;\n\n\t\tthis.renderTargetsHorizontal.push( renderTargetHorizonal );\n\n\t\tvar renderTargetVertical = new WebGLRenderTarget( resx, resy, pars );\n\n\t\trenderTargetVertical.texture.name = 'UnrealBloomPass.v' + i;\n\t\trenderTargetVertical.texture.generateMipmaps = false;\n\n\t\tthis.renderTargetsVertical.push( renderTargetVertical );\n\n\t\tresx = Math.round( resx / 2 );\n\n\t\tresy = Math.round( resy / 2 );\n\n\t}\n\n\t// luminosity high pass material\n\n\tif ( LuminosityHighPassShader === undefined )\n\t\tconsole.error( 'THREE.UnrealBloomPass relies on LuminosityHighPassShader' );\n\n\tvar highPassShader = LuminosityHighPassShader;\n\tthis.highPassUniforms = UniformsUtils.clone( highPassShader.uniforms );\n\n\tthis.highPassUniforms[ 'luminosityThreshold' ].value = threshold;\n\tthis.highPassUniforms[ 'smoothWidth' ].value = 0.01;\n\n\tthis.materialHighPassFilter = new ShaderMaterial( {\n\t\tuniforms: this.highPassUniforms,\n\t\tvertexShader: highPassShader.vertexShader,\n\t\tfragmentShader: highPassShader.fragmentShader,\n\t\tdefines: {}\n\t} );\n\n\t// Gaussian Blur Materials\n\tthis.separableBlurMaterials = [];\n\tvar kernelSizeArray = [ 3, 5, 7, 9, 11 ];\n\tvar resx = Math.round( this.resolution.x / 2 );\n\tvar resy = Math.round( this.resolution.y / 2 );\n\n\tfor ( var i = 0; i < this.nMips; i ++ ) {\n\n\t\tthis.separableBlurMaterials.push( this.getSeperableBlurMaterial( kernelSizeArray[ i ] ) );\n\n\t\tthis.separableBlurMaterials[ i ].uniforms[ 'texSize' ].value = new Vector2( resx, resy );\n\n\t\tresx = Math.round( resx / 2 );\n\n\t\tresy = Math.round( resy / 2 );\n\n\t}\n\n\t// Composite material\n\tthis.compositeMaterial = this.getCompositeMaterial( this.nMips );\n\tthis.compositeMaterial.uniforms[ 'blurTexture1' ].value = this.renderTargetsVertical[ 0 ].texture;\n\tthis.compositeMaterial.uniforms[ 'blurTexture2' ].value = this.renderTargetsVertical[ 1 ].texture;\n\tthis.compositeMaterial.uniforms[ 'blurTexture3' ].value = this.renderTargetsVertical[ 2 ].texture;\n\tthis.compositeMaterial.uniforms[ 'blurTexture4' ].value = this.renderTargetsVertical[ 3 ].texture;\n\tthis.compositeMaterial.uniforms[ 'blurTexture5' ].value = this.renderTargetsVertical[ 4 ].texture;\n\tthis.compositeMaterial.uniforms[ 'bloomStrength' ].value = strength;\n\tthis.compositeMaterial.uniforms[ 'bloomRadius' ].value = 0.1;\n\tthis.compositeMaterial.needsUpdate = true;\n\n\tvar bloomFactors = [ 1.0, 0.8, 0.6, 0.4, 0.2 ];\n\tthis.compositeMaterial.uniforms[ 'bloomFactors' ].value = bloomFactors;\n\tthis.bloomTintColors = [ new Vector3( 1, 1, 1 ), new Vector3( 1, 1, 1 ), new Vector3( 1, 1, 1 ),\n\t\t\t\t\t\t\t new Vector3( 1, 1, 1 ), new Vector3( 1, 1, 1 ) ];\n\tthis.compositeMaterial.uniforms[ 'bloomTintColors' ].value = this.bloomTintColors;\n\n\t// copy material\n\tif ( CopyShader === undefined ) {\n\n\t\tconsole.error( 'THREE.UnrealBloomPass relies on CopyShader' );\n\n\t}\n\n\tvar copyShader = CopyShader;\n\n\tthis.copyUniforms = UniformsUtils.clone( copyShader.uniforms );\n\tthis.copyUniforms[ 'opacity' ].value = 1.0;\n\n\tthis.materialCopy = new ShaderMaterial( {\n\t\tuniforms: this.copyUniforms,\n\t\tvertexShader: copyShader.vertexShader,\n\t\tfragmentShader: copyShader.fragmentShader,\n\t\tblending: AdditiveBlending,\n\t\tdepthTest: false,\n\t\tdepthWrite: false,\n\t\ttransparent: true\n\t} );\n\n\tthis.enabled = true;\n\tthis.needsSwap = false;\n\n\tthis._oldClearColor = new Color();\n\tthis.oldClearAlpha = 1;\n\n\tthis.basic = new MeshBasicMaterial();\n\n\tthis.fsQuad = new Pass.FullScreenQuad( null );\n\n};\n\nUnrealBloomPass.prototype = Object.assign( Object.create( Pass.prototype ), {\n\n\tconstructor: UnrealBloomPass,\n\n\tdispose: function () {\n\n\t\tfor ( var i = 0; i < this.renderTargetsHorizontal.length; i ++ ) {\n\n\t\t\tthis.renderTargetsHorizontal[ i ].dispose();\n\n\t\t}\n\n\t\tfor ( var i = 0; i < this.renderTargetsVertical.length; i ++ ) {\n\n\t\t\tthis.renderTargetsVertical[ i ].dispose();\n\n\t\t}\n\n\t\tthis.renderTargetBright.dispose();\n\n\t},\n\n\tsetSize: function ( width, height ) {\n\n\t\tvar resx = Math.round( width / 2 );\n\t\tvar resy = Math.round( height / 2 );\n\n\t\tthis.renderTargetBright.setSize( resx, resy );\n\n\t\tfor ( var i = 0; i < this.nMips; i ++ ) {\n\n\t\t\tthis.renderTargetsHorizontal[ i ].setSize( resx, resy );\n\t\t\tthis.renderTargetsVertical[ i ].setSize( resx, resy );\n\n\t\t\tthis.separableBlurMaterials[ i ].uniforms[ 'texSize' ].value = new Vector2( resx, resy );\n\n\t\t\tresx = Math.round( resx / 2 );\n\t\t\tresy = Math.round( resy / 2 );\n\n\t\t}\n\n\t},\n\n\trender: function ( renderer, writeBuffer, readBuffer, deltaTime, maskActive ) {\n\n\t\trenderer.getClearColor( this._oldClearColor );\n\t\tthis.oldClearAlpha = renderer.getClearAlpha();\n\t\tvar oldAutoClear = renderer.autoClear;\n\t\trenderer.autoClear = false;\n\n\t\trenderer.setClearColor( this.clearColor, 0 );\n\n\t\tif ( maskActive ) renderer.state.buffers.stencil.setTest( false );\n\n\t\t// Render input to screen\n\n\t\tif ( this.renderToScreen ) {\n\n\t\t\tthis.fsQuad.material = this.basic;\n\t\t\tthis.basic.map = readBuffer.texture;\n\n\t\t\trenderer.setRenderTarget( null );\n\t\t\trenderer.clear();\n\t\t\tthis.fsQuad.render( renderer );\n\n\t\t}\n\n\t\t// 1. Extract Bright Areas\n\n\t\tthis.highPassUniforms[ 'tDiffuse' ].value = readBuffer.texture;\n\t\tthis.highPassUniforms[ 'luminosityThreshold' ].value = this.threshold;\n\t\tthis.fsQuad.material = this.materialHighPassFilter;\n\n\t\trenderer.setRenderTarget( this.renderTargetBright );\n\t\trenderer.clear();\n\t\tthis.fsQuad.render( renderer );\n\n\t\t// 2. Blur All the mips progressively\n\n\t\tvar inputRenderTarget = this.renderTargetBright;\n\n\t\tfor ( var i = 0; i < this.nMips; i ++ ) {\n\n\t\t\tthis.fsQuad.material = this.separableBlurMaterials[ i ];\n\n\t\t\tthis.separableBlurMaterials[ i ].uniforms[ 'colorTexture' ].value = inputRenderTarget.texture;\n\t\t\tthis.separableBlurMaterials[ i ].uniforms[ 'direction' ].value = UnrealBloomPass.BlurDirectionX;\n\t\t\trenderer.setRenderTarget( this.renderTargetsHorizontal[ i ] );\n\t\t\trenderer.clear();\n\t\t\tthis.fsQuad.render( renderer );\n\n\t\t\tthis.separableBlurMaterials[ i ].uniforms[ 'colorTexture' ].value = this.renderTargetsHorizontal[ i ].texture;\n\t\t\tthis.separableBlurMaterials[ i ].uniforms[ 'direction' ].value = UnrealBloomPass.BlurDirectionY;\n\t\t\trenderer.setRenderTarget( this.renderTargetsVertical[ i ] );\n\t\t\trenderer.clear();\n\t\t\tthis.fsQuad.render( renderer );\n\n\t\t\tinputRenderTarget = this.renderTargetsVertical[ i ];\n\n\t\t}\n\n\t\t// Composite All the mips\n\n\t\tthis.fsQuad.material = this.compositeMaterial;\n\t\tthis.compositeMaterial.uniforms[ 'bloomStrength' ].value = this.strength;\n\t\tthis.compositeMaterial.uniforms[ 'bloomRadius' ].value = this.radius;\n\t\tthis.compositeMaterial.uniforms[ 'bloomTintColors' ].value = this.bloomTintColors;\n\n\t\trenderer.setRenderTarget( this.renderTargetsHorizontal[ 0 ] );\n\t\trenderer.clear();\n\t\tthis.fsQuad.render( renderer );\n\n\t\t// Blend it additively over the input texture\n\n\t\tthis.fsQuad.material = this.materialCopy;\n\t\tthis.copyUniforms[ 'tDiffuse' ].value = this.renderTargetsHorizontal[ 0 ].texture;\n\n\t\tif ( maskActive ) renderer.state.buffers.stencil.setTest( true );\n\n\t\tif ( this.renderToScreen ) {\n\n\t\t\trenderer.setRenderTarget( null );\n\t\t\tthis.fsQuad.render( renderer );\n\n\t\t} else {\n\n\t\t\trenderer.setRenderTarget( readBuffer );\n\t\t\tthis.fsQuad.render( renderer );\n\n\t\t}\n\n\t\t// Restore renderer settings\n\n\t\trenderer.setClearColor( this._oldClearColor, this.oldClearAlpha );\n\t\trenderer.autoClear = oldAutoClear;\n\n\t},\n\n\tgetSeperableBlurMaterial: function ( kernelRadius ) {\n\n\t\treturn new ShaderMaterial( {\n\n\t\t\tdefines: {\n\t\t\t\t'KERNEL_RADIUS': kernelRadius,\n\t\t\t\t'SIGMA': kernelRadius\n\t\t\t},\n\n\t\t\tuniforms: {\n\t\t\t\t'colorTexture': { value: null },\n\t\t\t\t'texSize': { value: new Vector2( 0.5, 0.5 ) },\n\t\t\t\t'direction': { value: new Vector2( 0.5, 0.5 ) }\n\t\t\t},\n\n\t\t\tvertexShader:\n\t\t\t\t'varying vec2 vUv;\\n\\\n\t\t\t\tvoid main() {\\n\\\n\t\t\t\t\tvUv = uv;\\n\\\n\t\t\t\t\tgl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );\\n\\\n\t\t\t\t}',\n\n\t\t\tfragmentShader:\n\t\t\t\t'#include <common>\\\n\t\t\t\tvarying vec2 vUv;\\n\\\n\t\t\t\tuniform sampler2D colorTexture;\\n\\\n\t\t\t\tuniform vec2 texSize;\\\n\t\t\t\tuniform vec2 direction;\\\n\t\t\t\t\\\n\t\t\t\tfloat gaussianPdf(in float x, in float sigma) {\\\n\t\t\t\t\treturn 0.39894 * exp( -0.5 * x * x/( sigma * sigma))/sigma;\\\n\t\t\t\t}\\\n\t\t\t\tvoid main() {\\n\\\n\t\t\t\t\tvec2 invSize = 1.0 / texSize;\\\n\t\t\t\t\tfloat fSigma = float(SIGMA);\\\n\t\t\t\t\tfloat weightSum = gaussianPdf(0.0, fSigma);\\\n\t\t\t\t\tvec3 diffuseSum = texture2D( colorTexture, vUv).rgb * weightSum;\\\n\t\t\t\t\tfor( int i = 1; i < KERNEL_RADIUS; i ++ ) {\\\n\t\t\t\t\t\tfloat x = float(i);\\\n\t\t\t\t\t\tfloat w = gaussianPdf(x, fSigma);\\\n\t\t\t\t\t\tvec2 uvOffset = direction * invSize * x;\\\n\t\t\t\t\t\tvec3 sample1 = texture2D( colorTexture, vUv + uvOffset).rgb;\\\n\t\t\t\t\t\tvec3 sample2 = texture2D( colorTexture, vUv - uvOffset).rgb;\\\n\t\t\t\t\t\tdiffuseSum += (sample1 + sample2) * w;\\\n\t\t\t\t\t\tweightSum += 2.0 * w;\\\n\t\t\t\t\t}\\\n\t\t\t\t\tgl_FragColor = vec4(diffuseSum/weightSum, 1.0);\\n\\\n\t\t\t\t}'\n\t\t} );\n\n\t},\n\n\tgetCompositeMaterial: function ( nMips ) {\n\n\t\treturn new ShaderMaterial( {\n\n\t\t\tdefines: {\n\t\t\t\t'NUM_MIPS': nMips\n\t\t\t},\n\n\t\t\tuniforms: {\n\t\t\t\t'blurTexture1': { value: null },\n\t\t\t\t'blurTexture2': { value: null },\n\t\t\t\t'blurTexture3': { value: null },\n\t\t\t\t'blurTexture4': { value: null },\n\t\t\t\t'blurTexture5': { value: null },\n\t\t\t\t'dirtTexture': { value: null },\n\t\t\t\t'bloomStrength': { value: 1.0 },\n\t\t\t\t'bloomFactors': { value: null },\n\t\t\t\t'bloomTintColors': { value: null },\n\t\t\t\t'bloomRadius': { value: 0.0 }\n\t\t\t},\n\n\t\t\tvertexShader:\n\t\t\t\t'varying vec2 vUv;\\n\\\n\t\t\t\tvoid main() {\\n\\\n\t\t\t\t\tvUv = uv;\\n\\\n\t\t\t\t\tgl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );\\n\\\n\t\t\t\t}',\n\n\t\t\tfragmentShader:\n\t\t\t\t'varying vec2 vUv;\\\n\t\t\t\tuniform sampler2D blurTexture1;\\\n\t\t\t\tuniform sampler2D blurTexture2;\\\n\t\t\t\tuniform sampler2D blurTexture3;\\\n\t\t\t\tuniform sampler2D blurTexture4;\\\n\t\t\t\tuniform sampler2D blurTexture5;\\\n\t\t\t\tuniform sampler2D dirtTexture;\\\n\t\t\t\tuniform float bloomStrength;\\\n\t\t\t\tuniform float bloomRadius;\\\n\t\t\t\tuniform float bloomFactors[NUM_MIPS];\\\n\t\t\t\tuniform vec3 bloomTintColors[NUM_MIPS];\\\n\t\t\t\t\\\n\t\t\t\tfloat lerpBloomFactor(const in float factor) { \\\n\t\t\t\t\tfloat mirrorFactor = 1.2 - factor;\\\n\t\t\t\t\treturn mix(factor, mirrorFactor, bloomRadius);\\\n\t\t\t\t}\\\n\t\t\t\t\\\n\t\t\t\tvoid main() {\\\n\t\t\t\t\tgl_FragColor = bloomStrength * ( lerpBloomFactor(bloomFactors[0]) * vec4(bloomTintColors[0], 1.0) * texture2D(blurTexture1, vUv) + \\\n\t\t\t\t\t\t\t\t\t\t\t\t\t lerpBloomFactor(bloomFactors[1]) * vec4(bloomTintColors[1], 1.0) * texture2D(blurTexture2, vUv) + \\\n\t\t\t\t\t\t\t\t\t\t\t\t\t lerpBloomFactor(bloomFactors[2]) * vec4(bloomTintColors[2], 1.0) * texture2D(blurTexture3, vUv) + \\\n\t\t\t\t\t\t\t\t\t\t\t\t\t lerpBloomFactor(bloomFactors[3]) * vec4(bloomTintColors[3], 1.0) * texture2D(blurTexture4, vUv) + \\\n\t\t\t\t\t\t\t\t\t\t\t\t\t lerpBloomFactor(bloomFactors[4]) * vec4(bloomTintColors[4], 1.0) * texture2D(blurTexture5, vUv) );\\\n\t\t\t\t}'\n\t\t} );\n\n\t}\n\n} );\n\nUnrealBloomPass.BlurDirectionX = new Vector2( 1.0, 0.0 );\nUnrealBloomPass.BlurDirectionY = new Vector2( 0.0, 1.0 );\n\nexport { UnrealBloomPass };\n","/**\n * Afterimage shader\n * I created this effect inspired by a demo on codepen:\n * https://codepen.io/brunoimbrizi/pen/MoRJaN?page=1&\n */\n\nvar AfterimageShader = {\n\n\tuniforms: {\n\n\t\t'damp': { value: 0.96 },\n\t\t'tOld': { value: null },\n\t\t'tNew': { value: null }\n\n\t},\n\n\tvertexShader: [\n\n\t\t'varying vec2 vUv;',\n\n\t\t'void main() {',\n\n\t\t'\tvUv = uv;',\n\t\t'\tgl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );',\n\n\t\t'}'\n\n\t].join( '\\n' ),\n\n\tfragmentShader: [\n\n\t\t'uniform float damp;',\n\n\t\t'uniform sampler2D tOld;',\n\t\t'uniform sampler2D tNew;',\n\n\t\t'varying vec2 vUv;',\n\n\t\t'vec4 when_gt( vec4 x, float y ) {',\n\n\t\t'\treturn max( sign( x - y ), 0.0 );',\n\n\t\t'}',\n\n\t\t'void main() {',\n\n\t\t'\tvec4 texelOld = texture2D( tOld, vUv );',\n\t\t'\tvec4 texelNew = texture2D( tNew, vUv );',\n\n\t\t'\ttexelOld *= damp * when_gt( texelOld, 0.1 );',\n\n\t\t'\tgl_FragColor = max(texelNew, texelOld);',\n\n\t\t'}'\n\n\t].join( '\\n' )\n\n};\n\nexport { AfterimageShader };\n","import {\n\tLinearFilter,\n\tMeshBasicMaterial,\n\tNearestFilter,\n\tRGBAFormat,\n\tShaderMaterial,\n\tUniformsUtils,\n\tWebGLRenderTarget\n} from '../../../build/three.module.js';\nimport { Pass } from '../postprocessing/Pass.js';\nimport { AfterimageShader } from '../shaders/AfterimageShader.js';\n\nvar AfterimagePass = function ( damp ) {\n\n\tPass.call( this );\n\n\tif ( AfterimageShader === undefined )\n\t\tconsole.error( 'THREE.AfterimagePass relies on AfterimageShader' );\n\n\tthis.shader = AfterimageShader;\n\n\tthis.uniforms = UniformsUtils.clone( this.shader.uniforms );\n\n\tthis.uniforms[ 'damp' ].value = damp !== undefined ? damp : 0.96;\n\n\tthis.textureComp = new WebGLRenderTarget( window.innerWidth, window.innerHeight, {\n\n\t\tminFilter: LinearFilter,\n\t\tmagFilter: NearestFilter,\n\t\tformat: RGBAFormat\n\n\t} );\n\n\tthis.textureOld = new WebGLRenderTarget( window.innerWidth, window.innerHeight, {\n\n\t\tminFilter: LinearFilter,\n\t\tmagFilter: NearestFilter,\n\t\tformat: RGBAFormat\n\n\t} );\n\n\tthis.shaderMaterial = new ShaderMaterial( {\n\n\t\tuniforms: this.uniforms,\n\t\tvertexShader: this.shader.vertexShader,\n\t\tfragmentShader: this.shader.fragmentShader\n\n\t} );\n\n\tthis.compFsQuad = new Pass.FullScreenQuad( this.shaderMaterial );\n\n\tvar material = new MeshBasicMaterial();\n\tthis.copyFsQuad = new Pass.FullScreenQuad( material );\n\n};\n\nAfterimagePass.prototype = Object.assign( Object.create( Pass.prototype ), {\n\n\tconstructor: AfterimagePass,\n\n\trender: function ( renderer, writeBuffer, readBuffer ) {\n\n\t\tthis.uniforms[ 'tOld' ].value = this.textureOld.texture;\n\t\tthis.uniforms[ 'tNew' ].value = readBuffer.texture;\n\n\t\trenderer.setRenderTarget( this.textureComp );\n\t\tthis.compFsQuad.render( renderer );\n\n\t\tthis.copyFsQuad.material.map = this.textureComp.texture;\n\n\t\tif ( this.renderToScreen ) {\n\n\t\t\trenderer.setRenderTarget( null );\n\t\t\tthis.copyFsQuad.render( renderer );\n\n\t\t} else {\n\n\t\t\trenderer.setRenderTarget( writeBuffer );\n\n\t\t\tif ( this.clear ) renderer.clear();\n\n\t\t\tthis.copyFsQuad.render( renderer );\n\n\t\t}\n\n\t\t// Swap buffers.\n\t\tvar temp = this.textureOld;\n\t\tthis.textureOld = this.textureComp;\n\t\tthis.textureComp = temp;\n\t\t// Now textureOld contains the latest image, ready for the next frame.\n\n\t},\n\n\tsetSize: function ( width, height ) {\n\n\t\tthis.textureComp.setSize( width, height );\n\t\tthis.textureOld.setSize( width, height );\n\n\t}\n\n} );\n\nexport { AfterimagePass };\n","const Cache = {\n\n\tenabled: false,\n\n\tfiles: {},\n\n\tadd: function ( key, file ) {\n\n\t\tif ( this.enabled === false ) return;\n\n\t\t// console.log( 'THREE.Cache', 'Adding key:', key );\n\n\t\tthis.files[ key ] = file;\n\n\t},\n\n\tget: function ( key ) {\n\n\t\tif ( this.enabled === false ) return;\n\n\t\t// console.log( 'THREE.Cache', 'Checking key:', key );\n\n\t\treturn this.files[ key ];\n\n\t},\n\n\tremove: function ( key ) {\n\n\t\tdelete this.files[ key ];\n\n\t},\n\n\tclear: function () {\n\n\t\tthis.files = {};\n\n\t}\n\n};\n\n\nexport { Cache };\n","function LoadingManager( onLoad, onProgress, onError ) {\n\n\tconst scope = this;\n\n\tlet isLoading = false;\n\tlet itemsLoaded = 0;\n\tlet itemsTotal = 0;\n\tlet urlModifier = undefined;\n\tconst handlers = [];\n\n\t// Refer to #5689 for the reason why we don't set .onStart\n\t// in the constructor\n\n\tthis.onStart = undefined;\n\tthis.onLoad = onLoad;\n\tthis.onProgress = onProgress;\n\tthis.onError = onError;\n\n\tthis.itemStart = function ( url ) {\n\n\t\titemsTotal ++;\n\n\t\tif ( isLoading === false ) {\n\n\t\t\tif ( scope.onStart !== undefined ) {\n\n\t\t\t\tscope.onStart( url, itemsLoaded, itemsTotal );\n\n\t\t\t}\n\n\t\t}\n\n\t\tisLoading = true;\n\n\t};\n\n\tthis.itemEnd = function ( url ) {\n\n\t\titemsLoaded ++;\n\n\t\tif ( scope.onProgress !== undefined ) {\n\n\t\t\tscope.onProgress( url, itemsLoaded, itemsTotal );\n\n\t\t}\n\n\t\tif ( itemsLoaded === itemsTotal ) {\n\n\t\t\tisLoading = false;\n\n\t\t\tif ( scope.onLoad !== undefined ) {\n\n\t\t\t\tscope.onLoad();\n\n\t\t\t}\n\n\t\t}\n\n\t};\n\n\tthis.itemError = function ( url ) {\n\n\t\tif ( scope.onError !== undefined ) {\n\n\t\t\tscope.onError( url );\n\n\t\t}\n\n\t};\n\n\tthis.resolveURL = function ( url ) {\n\n\t\tif ( urlModifier ) {\n\n\t\t\treturn urlModifier( url );\n\n\t\t}\n\n\t\treturn url;\n\n\t};\n\n\tthis.setURLModifier = function ( transform ) {\n\n\t\turlModifier = transform;\n\n\t\treturn this;\n\n\t};\n\n\tthis.addHandler = function ( regex, loader ) {\n\n\t\thandlers.push( regex, loader );\n\n\t\treturn this;\n\n\t};\n\n\tthis.removeHandler = function ( regex ) {\n\n\t\tconst index = handlers.indexOf( regex );\n\n\t\tif ( index !== - 1 ) {\n\n\t\t\thandlers.splice( index, 2 );\n\n\t\t}\n\n\t\treturn this;\n\n\t};\n\n\tthis.getHandler = function ( file ) {\n\n\t\tfor ( let i = 0, l = handlers.length; i < l; i += 2 ) {\n\n\t\t\tconst regex = handlers[ i ];\n\t\t\tconst loader = handlers[ i + 1 ];\n\n\t\t\tif ( regex.global ) regex.lastIndex = 0; // see #17920\n\n\t\t\tif ( regex.test( file ) ) {\n\n\t\t\t\treturn loader;\n\n\t\t\t}\n\n\t\t}\n\n\t\treturn null;\n\n\t};\n\n}\n\nconst DefaultLoadingManager = new LoadingManager();\n\n\nexport { DefaultLoadingManager, LoadingManager };\n","import { DefaultLoadingManager } from './LoadingManager.js';\n\nfunction Loader( manager ) {\n\n\tthis.manager = ( manager !== undefined ) ? manager : DefaultLoadingManager;\n\n\tthis.crossOrigin = 'anonymous';\n\tthis.withCredentials = false;\n\tthis.path = '';\n\tthis.resourcePath = '';\n\tthis.requestHeader = {};\n\n}\n\nObject.assign( Loader.prototype, {\n\n\tload: function ( /* url, onLoad, onProgress, onError */ ) {},\n\n\tloadAsync: function ( url, onProgress ) {\n\n\t\tconst scope = this;\n\n\t\treturn new Promise( function ( resolve, reject ) {\n\n\t\t\tscope.load( url, resolve, onProgress, reject );\n\n\t\t} );\n\n\t},\n\n\tparse: function ( /* data */ ) {},\n\n\tsetCrossOrigin: function ( crossOrigin ) {\n\n\t\tthis.crossOrigin = crossOrigin;\n\t\treturn this;\n\n\t},\n\n\tsetWithCredentials: function ( value ) {\n\n\t\tthis.withCredentials = value;\n\t\treturn this;\n\n\t},\n\n\tsetPath: function ( path ) {\n\n\t\tthis.path = path;\n\t\treturn this;\n\n\t},\n\n\tsetResourcePath: function ( resourcePath ) {\n\n\t\tthis.resourcePath = resourcePath;\n\t\treturn this;\n\n\t},\n\n\tsetRequestHeader: function ( requestHeader ) {\n\n\t\tthis.requestHeader = requestHeader;\n\t\treturn this;\n\n\t}\n\n} );\n\nexport { Loader };\n","import { Cache } from './Cache.js';\nimport { Loader } from './Loader.js';\n\nclass ImageLoader extends Loader {\n\n\tconstructor( manager ) {\n\n\t\tsuper( manager );\n\n\t}\n\n\tload( url, onLoad, onProgress, onError ) {\n\n\t\tif ( this.path !== undefined ) url = this.path + url;\n\n\t\turl = this.manager.resolveURL( url );\n\n\t\tconst scope = this;\n\n\t\tconst cached = Cache.get( url );\n\n\t\tif ( cached !== undefined ) {\n\n\t\t\tscope.manager.itemStart( url );\n\n\t\t\tsetTimeout( function () {\n\n\t\t\t\tif ( onLoad ) onLoad( cached );\n\n\t\t\t\tscope.manager.itemEnd( url );\n\n\t\t\t}, 0 );\n\n\t\t\treturn cached;\n\n\t\t}\n\n\t\tconst image = document.createElementNS( 'http://www.w3.org/1999/xhtml', 'img' );\n\n\t\tfunction onImageLoad() {\n\n\t\t\timage.removeEventListener( 'load', onImageLoad, false );\n\t\t\timage.removeEventListener( 'error', onImageError, false );\n\n\t\t\tCache.add( url, this );\n\n\t\t\tif ( onLoad ) onLoad( this );\n\n\t\t\tscope.manager.itemEnd( url );\n\n\t\t}\n\n\t\tfunction onImageError( event ) {\n\n\t\t\timage.removeEventListener( 'load', onImageLoad, false );\n\t\t\timage.removeEventListener( 'error', onImageError, false );\n\n\t\t\tif ( onError ) onError( event );\n\n\t\t\tscope.manager.itemError( url );\n\t\t\tscope.manager.itemEnd( url );\n\n\t\t}\n\n\t\timage.addEventListener( 'load', onImageLoad, false );\n\t\timage.addEventListener( 'error', onImageError, false );\n\n\t\tif ( url.substr( 0, 5 ) !== 'data:' ) {\n\n\t\t\tif ( this.crossOrigin !== undefined ) image.crossOrigin = this.crossOrigin;\n\n\t\t}\n\n\t\tscope.manager.itemStart( url );\n\n\t\timage.src = url;\n\n\t\treturn image;\n\n\t}\n\n}\n\n\nexport { ImageLoader };\n","import { RGBAFormat, RGBFormat } from '../constants.js';\nimport { ImageLoader } from './ImageLoader.js';\nimport { Texture } from '../textures/Texture.js';\nimport { Loader } from './Loader.js';\n\nfunction TextureLoader( manager ) {\n\n\tLoader.call( this, manager );\n\n}\n\nTextureLoader.prototype = Object.assign( Object.create( Loader.prototype ), {\n\n\tconstructor: TextureLoader,\n\n\tload: function ( url, onLoad, onProgress, onError ) {\n\n\t\tconst texture = new Texture();\n\n\t\tconst loader = new ImageLoader( this.manager );\n\t\tloader.setCrossOrigin( this.crossOrigin );\n\t\tloader.setPath( this.path );\n\n\t\tloader.load( url, function ( image ) {\n\n\t\t\ttexture.image = image;\n\n\t\t\t// JPEGs can't have an alpha channel, so memory can be saved by storing them as RGB.\n\t\t\tconst isJPEG = url.search( /\\.jpe?g($|\\?)/i ) > 0 || url.search( /^data\\:image\\/jpeg/ ) === 0;\n\n\t\t\ttexture.format = isJPEG ? RGBFormat : RGBAFormat;\n\t\t\ttexture.needsUpdate = true;\n\n\t\t\tif ( onLoad !== undefined ) {\n\n\t\t\t\tonLoad( texture );\n\n\t\t\t}\n\n\t\t}, onProgress, onError );\n\n\t\treturn texture;\n\n\t}\n\n} );\n\n\nexport { TextureLoader };\n","import { Material } from './Material.js';\nimport { Color } from '../math/Color.js';\n\n/**\n * parameters = {\n *  color: <hex>,\n *  opacity: <float>,\n *  map: new THREE.Texture( <Image> ),\n *  alphaMap: new THREE.Texture( <Image> ),\n *\n *  size: <float>,\n *  sizeAttenuation: <bool>\n *\n *  morphTargets: <bool>\n * }\n */\n\nclass PointsMaterial extends Material {\n\n\tconstructor( parameters ) {\n\n\t\tsuper();\n\n\t\tthis.type = 'PointsMaterial';\n\n\t\tthis.color = new Color( 0xffffff );\n\n\t\tthis.map = null;\n\n\t\tthis.alphaMap = null;\n\n\t\tthis.size = 1;\n\t\tthis.sizeAttenuation = true;\n\n\t\tthis.morphTargets = false;\n\n\t\tthis.setValues( parameters );\n\n\t}\n\n\tcopy( source ) {\n\n\t\tsuper.copy( source );\n\n\t\tthis.color.copy( source.color );\n\n\t\tthis.map = source.map;\n\n\t\tthis.alphaMap = source.alphaMap;\n\n\t\tthis.size = source.size;\n\t\tthis.sizeAttenuation = source.sizeAttenuation;\n\n\t\tthis.morphTargets = source.morphTargets;\n\n\t\treturn this;\n\n\t}\n\n}\n\nPointsMaterial.prototype.isPointsMaterial = true;\n\nexport { PointsMaterial };\n","import { Sphere } from '../math/Sphere.js';\nimport { Ray } from '../math/Ray.js';\nimport { Matrix4 } from '../math/Matrix4.js';\nimport { Object3D } from '../core/Object3D.js';\nimport { Vector3 } from '../math/Vector3.js';\nimport { PointsMaterial } from '../materials/PointsMaterial.js';\nimport { BufferGeometry } from '../core/BufferGeometry.js';\n\nconst _inverseMatrix = new Matrix4();\nconst _ray = new Ray();\nconst _sphere = new Sphere();\nconst _position = new Vector3();\n\nfunction Points( geometry = new BufferGeometry(), material = new PointsMaterial() ) {\n\n\tObject3D.call( this );\n\n\tthis.type = 'Points';\n\n\tthis.geometry = geometry;\n\tthis.material = material;\n\n\tthis.updateMorphTargets();\n\n}\n\nPoints.prototype = Object.assign( Object.create( Object3D.prototype ), {\n\n\tconstructor: Points,\n\n\tisPoints: true,\n\n\tcopy: function ( source ) {\n\n\t\tObject3D.prototype.copy.call( this, source );\n\n\t\tthis.material = source.material;\n\t\tthis.geometry = source.geometry;\n\n\t\treturn this;\n\n\t},\n\n\traycast: function ( raycaster, intersects ) {\n\n\t\tconst geometry = this.geometry;\n\t\tconst matrixWorld = this.matrixWorld;\n\t\tconst threshold = raycaster.params.Points.threshold;\n\n\t\t// Checking boundingSphere distance to ray\n\n\t\tif ( geometry.boundingSphere === null ) geometry.computeBoundingSphere();\n\n\t\t_sphere.copy( geometry.boundingSphere );\n\t\t_sphere.applyMatrix4( matrixWorld );\n\t\t_sphere.radius += threshold;\n\n\t\tif ( raycaster.ray.intersectsSphere( _sphere ) === false ) return;\n\n\t\t//\n\n\t\t_inverseMatrix.copy( matrixWorld ).invert();\n\t\t_ray.copy( raycaster.ray ).applyMatrix4( _inverseMatrix );\n\n\t\tconst localThreshold = threshold / ( ( this.scale.x + this.scale.y + this.scale.z ) / 3 );\n\t\tconst localThresholdSq = localThreshold * localThreshold;\n\n\t\tif ( geometry.isBufferGeometry ) {\n\n\t\t\tconst index = geometry.index;\n\t\t\tconst attributes = geometry.attributes;\n\t\t\tconst positionAttribute = attributes.position;\n\n\t\t\tif ( index !== null ) {\n\n\t\t\t\tconst indices = index.array;\n\n\t\t\t\tfor ( let i = 0, il = indices.length; i < il; i ++ ) {\n\n\t\t\t\t\tconst a = indices[ i ];\n\n\t\t\t\t\t_position.fromBufferAttribute( positionAttribute, a );\n\n\t\t\t\t\ttestPoint( _position, a, localThresholdSq, matrixWorld, raycaster, intersects, this );\n\n\t\t\t\t}\n\n\t\t\t} else {\n\n\t\t\t\tfor ( let i = 0, l = positionAttribute.count; i < l; i ++ ) {\n\n\t\t\t\t\t_position.fromBufferAttribute( positionAttribute, i );\n\n\t\t\t\t\ttestPoint( _position, i, localThresholdSq, matrixWorld, raycaster, intersects, this );\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t} else {\n\n\t\t\tconsole.error( 'THREE.Points.raycast() no longer supports THREE.Geometry. Use THREE.BufferGeometry instead.' );\n\n\t\t}\n\n\t},\n\n\tupdateMorphTargets: function () {\n\n\t\tconst geometry = this.geometry;\n\n\t\tif ( geometry.isBufferGeometry ) {\n\n\t\t\tconst morphAttributes = geometry.morphAttributes;\n\t\t\tconst keys = Object.keys( morphAttributes );\n\n\t\t\tif ( keys.length > 0 ) {\n\n\t\t\t\tconst morphAttribute = morphAttributes[ keys[ 0 ] ];\n\n\t\t\t\tif ( morphAttribute !== undefined ) {\n\n\t\t\t\t\tthis.morphTargetInfluences = [];\n\t\t\t\t\tthis.morphTargetDictionary = {};\n\n\t\t\t\t\tfor ( let m = 0, ml = morphAttribute.length; m < ml; m ++ ) {\n\n\t\t\t\t\t\tconst name = morphAttribute[ m ].name || String( m );\n\n\t\t\t\t\t\tthis.morphTargetInfluences.push( 0 );\n\t\t\t\t\t\tthis.morphTargetDictionary[ name ] = m;\n\n\t\t\t\t\t}\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t} else {\n\n\t\t\tconst morphTargets = geometry.morphTargets;\n\n\t\t\tif ( morphTargets !== undefined && morphTargets.length > 0 ) {\n\n\t\t\t\tconsole.error( 'THREE.Points.updateMorphTargets() does not support THREE.Geometry. Use THREE.BufferGeometry instead.' );\n\n\t\t\t}\n\n\t\t}\n\n\t}\n\n} );\n\nfunction testPoint( point, index, localThresholdSq, matrixWorld, raycaster, intersects, object ) {\n\n\tconst rayPointDistanceSq = _ray.distanceSqToPoint( point );\n\n\tif ( rayPointDistanceSq < localThresholdSq ) {\n\n\t\tconst intersectPoint = new Vector3();\n\n\t\t_ray.closestPointToPoint( point, intersectPoint );\n\t\tintersectPoint.applyMatrix4( matrixWorld );\n\n\t\tconst distance = raycaster.ray.origin.distanceTo( intersectPoint );\n\n\t\tif ( distance < raycaster.near || distance > raycaster.far ) return;\n\n\t\tintersects.push( {\n\n\t\t\tdistance: distance,\n\t\t\tdistanceToRay: Math.sqrt( rayPointDistanceSq ),\n\t\t\tpoint: intersectPoint,\n\t\t\tindex: index,\n\t\t\tface: null,\n\t\t\tobject: object\n\n\t\t} );\n\n\t}\n\n}\n\nexport { Points };\n","// import * as THREE from 'three';\nimport {\n  Color,\n  BufferGeometry,\n  BufferAttribute,\n  // PointsMaterial,\n  ShaderMaterial,\n  TextureLoader,\n  Points,\n  NormalBlending,\n} from 'three';\n\nimport vertexShader from './parts.vert.glsl';\nimport fragmentShader from './parts.frag.glsl';\n\nconst MAX_COUNT = 2e6;\nconst COUNT = 1e6;\nconst SIZE = 15;\n\nconst SETS = {\n  speed: .77,\n  partSize: 10,\n  noiseFreq: 1.,\n  noiseAmp: 1.,\n  parts: .2,\n};\n\nexport default function volParts ({ gui, scene, camera, timer }) {\n\n  camera.position.z = 8;\n\n  scene.background = new Color('rgb(10, 30, 50)');\n\n  gui.add(SETS, 'speed', 0, 3, .01).onChange(v => { timer.speed = Math.pow(v, 5) });\n  gui.add(SETS, 'noiseFreq', 0, 3, .01).onChange(v => SETS.noiseFreq = Math.pow(v, 2));\n  gui.add(SETS, 'noiseAmp', 0, 3, .01).onChange(v => SETS.noiseAmp = Math.pow(v, 2));;\n  gui.add(SETS, 'parts', 0, MAX_COUNT / 1e6, .01).onChange(v => SETS.parts = Math.pow(v, 2));\n  gui.add(SETS, 'partSize', .9, 10, .01);\n\n  const geo = new BufferGeometry();\n  const points = new Float32Array(MAX_COUNT * 3);\n  const center = [-SIZE/2, SIZE/2];\n  // const center = [0, 1];\n  for (let i = 0; i < MAX_COUNT*3; i += 3) {\n    points[i] = rand(center[0], center[1]);\n    points[i+1] = rand(center[0], center[1]);\n    points[i+2] = rand(center[0], center[1]);\n  }\n\n  geo.setAttribute('position', new BufferAttribute(points, 3));\n  // const mat = new PointsMaterial({ color: 0xaa3388, size: .01 });\n  let shader\n   = new ShaderMaterial({\n    uniforms: {\n      time: { value: 0 },\n      realTime: { value: timer.realTime },\n      size: { value: SIZE },\n      partSize: { value: SETS.partSize },\n      freq: { value: SETS.noiseFreq },\n      amp: { value: SETS.noiseAmp },\n      tCircle: { value: new TextureLoader().load('circle.png') },\n    },\n    vertexShader,\n    fragmentShader,\n\n    transparent: true,\n    blending: NormalBlending,\n    // depthWrite: true,\n    depthTest: false,\n  });\n  const mesh = new Points(geo, shader);\n\n  scene.add(mesh);\n\n  let noiseFreq = smooth(SETS.noiseFreq, 5);\n  let noiseAmp = smooth(SETS.noiseAmp);\n  let lastParts;\n  return function onTick ({ timer }) {\n    if (lastParts !== SETS.parts) {\n      // geo.setAttribute('position', new BufferAttribute(points.slice(SETS.parts), 3));\n      geo.setDrawRange(0, SETS.parts * 1e6)\n      lastParts = SETS.parts;\n    }\n\n    shader.transparent = SETS.partSize <= 2;      \n\n    // mesh.rotation.y += .0005;\n    if (shader) {\n      shader.uniforms.time.value = timer.elapsed / 1000;\n      shader.uniforms.freq.value = noiseFreq(SETS.noiseFreq);\n      shader.uniforms.amp.value = noiseAmp(SETS.noiseAmp);\n      shader.uniforms.partSize.value = SETS.partSize;\n      shader.uniforms.realTime.value = timer.realTime;\n    }\n  }\n}\n\nfunction smooth (val, asp = 30) {\n  return function _smooth (v) {\n    return val -= (val - v) / asp;\n  }\n}\n\nfunction randCoord ([from, to]) {\n  return [\n    rand(from, to),\n    rand(from, to),\n    rand(from, to)\n  ];\n}\n\nfunction rand (from = 0, to = 1) {\n  return from + Math.random() * (to - from);\n}","import './style.css';\n// import * as THREE from 'three';\nimport {\n    Scene,\n    Color,\n    PointLight,\n    PerspectiveCamera,\n    WebGLRenderer,\n    Vector2,\n} from 'three';\nimport { OrbitControls } from 'three/examples/jsm/controls/OrbitControls.js';\nimport * as dat from 'dat.gui';\n\nimport { EffectComposer } from 'three/examples/jsm/postprocessing/EffectComposer.js';\nimport { RenderPass } from 'three/examples/jsm/postprocessing/RenderPass.js';\nimport { UnrealBloomPass } from 'three/examples/jsm/postprocessing/UnrealBloomPass.js';\nimport { AfterimagePass } from 'three/examples/jsm/postprocessing/AfterimagePass.js';\n// import { FilmPass } from 'three/examples/jsm/postprocessing/FilmPass.js';\n// import { ShaderPass } from 'three/examples/jsm/postprocessing/ShaderPass.js';\n// import { PixelShader } from 'three/examples/jsm/shaders/PixelShader.js';\n\n// import {\n//     RenderPass,\n//     UnrealBloomPass,\n//     FilmPass,\n// } from 'postprocessing';\n\n// import go from './test1/go.js';\nimport go from './volParts/index.js';\n\n// Debug\nconst gui = new dat.GUI()\ngui.closed = true;\n\n// Canvas\nconst canvas = document.querySelector('canvas.webgl')\n\n// Scene\nconst scene = new Scene();\nscene.background = new Color('rgb(40,70, 100)');\n\n// Lights\n\nconst pointLight = new PointLight(0xffffff, 1)\npointLight.position.x = 2\npointLight.position.y = 3\npointLight.position.z = 4\n// scene.add(pointLight)\n\n/**\n * Sizes\n */\nconst sizes = {\n    width: window.innerWidth,\n    height: window.innerHeight\n}\n\nwindow.addEventListener('resize', () =>\n{\n    // Update sizes\n    sizes.width = window.innerWidth\n    sizes.height = window.innerHeight\n\n    // Update camera\n    camera.aspect = sizes.width / sizes.height\n    camera.updateProjectionMatrix()\n\n    // Update renderer\n    renderer.setSize(sizes.width, sizes.height)\n    composer.setSize(sizes.width, sizes.height)\n    // renderer.setPixelRatio(Math.min(window.devicePixelRatio, 2))\n    renderer.setPixelRatio(2)\n})\n\n/**\n * Camera\n */\n// Base camera\nconst camera = new PerspectiveCamera(75, sizes.width / sizes.height, 0.00001, 1000);\ncamera.position.z = 2;\nscene.add(camera)\n\n/**\n * Renderer\n */\nconst renderer = new WebGLRenderer({\n    canvas: canvas,\n    antialias: true,\n})\n// console.log(renderer);\n// renderer.toneMapping = ReinhardToneMapping;\nrenderer.setSize(sizes.width, sizes.height)\nrenderer.setPixelRatio(2)\n\n// Controls\nconst controls = new OrbitControls(camera, canvas)\ncontrols.enableDamping = true\ncontrols.listenToKeyEvents(window)\n// console.log(controls)\n\n\nconst renderScene = new RenderPass( scene, camera );\n\nconst SETS = {\n    // exposure: 1,\n    bloomStrength: .77,\n    bloomThreshold: .1,\n    bloomRadius: 1.2,\n    trails: .4,\n    pixelRatio: 2,\n};\n\ngui.add(SETS, 'pixelRatio', .1, 2, .01).onChange(v => {\n    renderer.setPixelRatio(v);\n    // composer.setPixelRatio(v);\n});\nconst bloomPass = new UnrealBloomPass( new Vector2( window.innerWidth, window.innerHeight ), 1.5, 0.4, 0.85 );\nbloomPass.threshold = SETS.bloomThreshold;\nbloomPass.strength = SETS.bloomStrength;\nbloomPass.radius = SETS.bloomRadius;\n\ngui.add(SETS, 'bloomStrength', 0, 3, .01).onChange(v => bloomPass.strength = v);\n\nconst afterimagePass = new AfterimagePass();\nconst setAfterImageDamp = (v) => ( afterimagePass.uniforms[ \"damp\" ].value = Math.pow(v, 1/3) );\nsetAfterImageDamp(SETS.trails);\ngui.add(SETS, 'trails', 0, 1, .001).onChange(setAfterImageDamp);\n\nlet composer = new EffectComposer( renderer );\ncomposer.addPass( renderScene );\ncomposer.addPass( afterimagePass );\ncomposer.addPass( bloomPass );\n// composer.addPass( filmPass );\n\n// const pixelPass = new ShaderPass( PixelShader );\n// pixelPass.uniforms[ \"resolution\" ].value = new Vector2( window.innerWidth, window.innerHeight );\n// pixelPass.uniforms[ \"resolution\" ].value.multiplyScalar( .3 );\n// composer.addPass( pixelPass );\n\n/**\n * Animate\n */\n\nconst now = performance ? () => performance.now() / 1e3 : () => Date.now() / 1e3;\nconst timer = new class Timer {\n    constructor ({ speed = 1 } = {}) {\n        this.speed = speed;\n\n        this.restart();\n    }\n    \n    restart () {\n        const _now = now();\n        this.startTime = _now;\n        this.elapsed = 0;\n        this.delta = 0;\n        this.now = _now;\n        this.lastNow = _now;\n        this.update();\n    }\n\n    continue () {\n        this.now = now() - this.delta;\n    }\n\n    update () {\n        this.lastNow = this.now;\n        this.now = now();\n        this.realTime = this.now - this.startTime;\n        this.delta = (this.now - this.lastNow) * this.speed;\n        this.elapsed += this.delta;\n    }\n}\n\nconst onTick = go({ gui, scene, camera, timer });\n\nlet pause = false;\nconst toggleFullscreen = (function ToggleFullscreen ({ pointerLock } = {}) {\n    let fullscreen = false;\n    return function _toggleFullscreen (bool) {\n        if (fullscreen = arguments.length ? bool : !fullscreen) {\n            document.body.requestFullscreen();\n            if (pointerLock)\n                canvas.requestPointerLock();\n            }\n        else {\n            document.exitFullscreen();\n            if (pointerLock)\n                document.exitPointerLock();\n        }\n    }\n})({ pointerLock: false });\ndocument.addEventListener('dblclick', () => toggleFullscreen());\nwindow.addEventListener('keydown', e => {\n    if (e.code === 'Space') {\n        pause = !pause;\n        if (!pause) {\n            timer.continue();\n            tick();\n        }\n    }\n    else if (e.key === 'f')\n        toggleFullscreen();\n    else if (e.key === '/')\n        timer.restart();\n})\n\nconst fps = new class FPS {\n    constructor () {\n        this.$el = document.createElement('div');\n        this.$el.id = 'fps';\n        document.body.append(this.$el);\n        this.ticksCount = 0;\n        this.show = true;\n\n        setInterval(() => {\n            this.$el.style.display = this.show ? 'block' : 'none';\n            this.$el.textContent = this.ticksCount + ' fps';\n            this.ticksCount = 0;\n        }, 1e3);\n    }\n\n    update () {\n        this.ticksCount++;\n    }\n}\n\nconst tick = () => {\n    timer.update();\n    \n    fps.show = !gui.closed;\n    fps.update();\n\n    onTick({ timer });\n\n    controls.update()\n    if (SETS.bloomStrength === 0 && SETS.trails === 0)\n        renderer.render(scene, camera)\n    else\n        composer.render();\n\n    if (pause)\n        return;\n\n    window.requestAnimationFrame(tick)\n}\ntick()","import {\n\tRGBAFormat,\n\tHalfFloatType,\n\tFloatType,\n\tUnsignedByteType,\n\tLinearEncoding,\n\tNoToneMapping\n} from '../constants.js';\nimport { MathUtils } from '../math/MathUtils.js';\nimport { DataTexture } from '../textures/DataTexture.js';\nimport { Frustum } from '../math/Frustum.js';\nimport { Matrix4 } from '../math/Matrix4.js';\nimport { Vector2 } from '../math/Vector2.js';\nimport { Vector3 } from '../math/Vector3.js';\nimport { Vector4 } from '../math/Vector4.js';\nimport { Color } from '../math/Color.js';\nimport { WebGLAnimation } from './webgl/WebGLAnimation.js';\nimport { WebGLAttributes } from './webgl/WebGLAttributes.js';\nimport { WebGLBackground } from './webgl/WebGLBackground.js';\nimport { WebGLBindingStates } from './webgl/WebGLBindingStates.js';\nimport { WebGLBufferRenderer } from './webgl/WebGLBufferRenderer.js';\nimport { WebGLCapabilities } from './webgl/WebGLCapabilities.js';\nimport { WebGLClipping } from './webgl/WebGLClipping.js';\nimport { WebGLCubeMaps } from './webgl/WebGLCubeMaps.js';\nimport { WebGLExtensions } from './webgl/WebGLExtensions.js';\nimport { WebGLGeometries } from './webgl/WebGLGeometries.js';\nimport { WebGLIndexedBufferRenderer } from './webgl/WebGLIndexedBufferRenderer.js';\nimport { WebGLInfo } from './webgl/WebGLInfo.js';\nimport { WebGLMorphtargets } from './webgl/WebGLMorphtargets.js';\nimport { WebGLObjects } from './webgl/WebGLObjects.js';\nimport { WebGLPrograms } from './webgl/WebGLPrograms.js';\nimport { WebGLProperties } from './webgl/WebGLProperties.js';\nimport { WebGLRenderLists } from './webgl/WebGLRenderLists.js';\nimport { WebGLRenderStates } from './webgl/WebGLRenderStates.js';\nimport { WebGLShadowMap } from './webgl/WebGLShadowMap.js';\nimport { WebGLState } from './webgl/WebGLState.js';\nimport { WebGLTextures } from './webgl/WebGLTextures.js';\nimport { WebGLUniforms } from './webgl/WebGLUniforms.js';\nimport { WebGLUtils } from './webgl/WebGLUtils.js';\nimport { WebXRManager } from './webxr/WebXRManager.js';\nimport { WebGLMaterials } from './webgl/WebGLMaterials.js';\n\nfunction createCanvasElement() {\n\n\tconst canvas = document.createElementNS( 'http://www.w3.org/1999/xhtml', 'canvas' );\n\tcanvas.style.display = 'block';\n\treturn canvas;\n\n}\n\nfunction WebGLRenderer( parameters ) {\n\n\tparameters = parameters || {};\n\n\tconst _canvas = parameters.canvas !== undefined ? parameters.canvas : createCanvasElement(),\n\t\t_context = parameters.context !== undefined ? parameters.context : null,\n\n\t\t_alpha = parameters.alpha !== undefined ? parameters.alpha : false,\n\t\t_depth = parameters.depth !== undefined ? parameters.depth : true,\n\t\t_stencil = parameters.stencil !== undefined ? parameters.stencil : true,\n\t\t_antialias = parameters.antialias !== undefined ? parameters.antialias : false,\n\t\t_premultipliedAlpha = parameters.premultipliedAlpha !== undefined ? parameters.premultipliedAlpha : true,\n\t\t_preserveDrawingBuffer = parameters.preserveDrawingBuffer !== undefined ? parameters.preserveDrawingBuffer : false,\n\t\t_powerPreference = parameters.powerPreference !== undefined ? parameters.powerPreference : 'default',\n\t\t_failIfMajorPerformanceCaveat = parameters.failIfMajorPerformanceCaveat !== undefined ? parameters.failIfMajorPerformanceCaveat : false;\n\n\tlet currentRenderList = null;\n\tlet currentRenderState = null;\n\n\t// render() can be called from within a callback triggered by another render.\n\t// We track this so that the nested render call gets its list and state isolated from the parent render call.\n\n\tconst renderListStack = [];\n\tconst renderStateStack = [];\n\n\t// public properties\n\n\tthis.domElement = _canvas;\n\n\t// Debug configuration container\n\tthis.debug = {\n\n\t\t/**\n\t\t * Enables error checking and reporting when shader programs are being compiled\n\t\t * @type {boolean}\n\t\t */\n\t\tcheckShaderErrors: true\n\t};\n\n\t// clearing\n\n\tthis.autoClear = true;\n\tthis.autoClearColor = true;\n\tthis.autoClearDepth = true;\n\tthis.autoClearStencil = true;\n\n\t// scene graph\n\n\tthis.sortObjects = true;\n\n\t// user-defined clipping\n\n\tthis.clippingPlanes = [];\n\tthis.localClippingEnabled = false;\n\n\t// physically based shading\n\n\tthis.gammaFactor = 2.0;\t// for backwards compatibility\n\tthis.outputEncoding = LinearEncoding;\n\n\t// physical lights\n\n\tthis.physicallyCorrectLights = false;\n\n\t// tone mapping\n\n\tthis.toneMapping = NoToneMapping;\n\tthis.toneMappingExposure = 1.0;\n\n\t// morphs\n\n\tthis.maxMorphTargets = 8;\n\tthis.maxMorphNormals = 4;\n\n\t// internal properties\n\n\tconst _this = this;\n\n\tlet _isContextLost = false;\n\n\t// internal state cache\n\n\tlet _framebuffer = null;\n\n\tlet _currentActiveCubeFace = 0;\n\tlet _currentActiveMipmapLevel = 0;\n\tlet _currentRenderTarget = null;\n\tlet _currentFramebuffer = null;\n\tlet _currentMaterialId = - 1;\n\n\tlet _currentCamera = null;\n\n\tconst _currentViewport = new Vector4();\n\tconst _currentScissor = new Vector4();\n\tlet _currentScissorTest = null;\n\n\t//\n\n\tlet _width = _canvas.width;\n\tlet _height = _canvas.height;\n\n\tlet _pixelRatio = 1;\n\tlet _opaqueSort = null;\n\tlet _transparentSort = null;\n\n\tconst _viewport = new Vector4( 0, 0, _width, _height );\n\tconst _scissor = new Vector4( 0, 0, _width, _height );\n\tlet _scissorTest = false;\n\n\t// frustum\n\n\tconst _frustum = new Frustum();\n\n\t// clipping\n\n\tlet _clippingEnabled = false;\n\tlet _localClippingEnabled = false;\n\n\t// camera matrices cache\n\n\tconst _projScreenMatrix = new Matrix4();\n\n\tconst _vector3 = new Vector3();\n\n\tconst _emptyScene = { background: null, fog: null, environment: null, overrideMaterial: null, isScene: true };\n\n\tfunction getTargetPixelRatio() {\n\n\t\treturn _currentRenderTarget === null ? _pixelRatio : 1;\n\n\t}\n\n\t// initialize\n\n\tlet _gl = _context;\n\n\tfunction getContext( contextNames, contextAttributes ) {\n\n\t\tfor ( let i = 0; i < contextNames.length; i ++ ) {\n\n\t\t\tconst contextName = contextNames[ i ];\n\t\t\tconst context = _canvas.getContext( contextName, contextAttributes );\n\t\t\tif ( context !== null ) return context;\n\n\t\t}\n\n\t\treturn null;\n\n\t}\n\n\ttry {\n\n\t\tconst contextAttributes = {\n\t\t\talpha: _alpha,\n\t\t\tdepth: _depth,\n\t\t\tstencil: _stencil,\n\t\t\tantialias: _antialias,\n\t\t\tpremultipliedAlpha: _premultipliedAlpha,\n\t\t\tpreserveDrawingBuffer: _preserveDrawingBuffer,\n\t\t\tpowerPreference: _powerPreference,\n\t\t\tfailIfMajorPerformanceCaveat: _failIfMajorPerformanceCaveat\n\t\t};\n\n\t\t// event listeners must be registered before WebGL context is created, see #12753\n\n\t\t_canvas.addEventListener( 'webglcontextlost', onContextLost, false );\n\t\t_canvas.addEventListener( 'webglcontextrestored', onContextRestore, false );\n\n\t\tif ( _gl === null ) {\n\n\t\t\tconst contextNames = [ 'webgl2', 'webgl', 'experimental-webgl' ];\n\n\t\t\tif ( _this.isWebGL1Renderer === true ) {\n\n\t\t\t\tcontextNames.shift();\n\n\t\t\t}\n\n\t\t\t_gl = getContext( contextNames, contextAttributes );\n\n\t\t\tif ( _gl === null ) {\n\n\t\t\t\tif ( getContext( contextNames ) ) {\n\n\t\t\t\t\tthrow new Error( 'Error creating WebGL context with your selected attributes.' );\n\n\t\t\t\t} else {\n\n\t\t\t\t\tthrow new Error( 'Error creating WebGL context.' );\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t}\n\n\t\t// Some experimental-webgl implementations do not have getShaderPrecisionFormat\n\n\t\tif ( _gl.getShaderPrecisionFormat === undefined ) {\n\n\t\t\t_gl.getShaderPrecisionFormat = function () {\n\n\t\t\t\treturn { 'rangeMin': 1, 'rangeMax': 1, 'precision': 1 };\n\n\t\t\t};\n\n\t\t}\n\n\t} catch ( error ) {\n\n\t\tconsole.error( 'THREE.WebGLRenderer: ' + error.message );\n\t\tthrow error;\n\n\t}\n\n\tlet extensions, capabilities, state, info;\n\tlet properties, textures, cubemaps, attributes, geometries, objects;\n\tlet programCache, materials, renderLists, renderStates, clipping;\n\n\tlet background, morphtargets, bufferRenderer, indexedBufferRenderer;\n\n\tlet utils, bindingStates;\n\n\tfunction initGLContext() {\n\n\t\textensions = new WebGLExtensions( _gl );\n\n\t\tcapabilities = new WebGLCapabilities( _gl, extensions, parameters );\n\n\t\textensions.init( capabilities );\n\n\t\tutils = new WebGLUtils( _gl, extensions, capabilities );\n\n\t\tstate = new WebGLState( _gl, extensions, capabilities );\n\t\tstate.scissor( _currentScissor.copy( _scissor ).multiplyScalar( _pixelRatio ).floor() );\n\t\tstate.viewport( _currentViewport.copy( _viewport ).multiplyScalar( _pixelRatio ).floor() );\n\n\t\tinfo = new WebGLInfo( _gl );\n\t\tproperties = new WebGLProperties();\n\t\ttextures = new WebGLTextures( _gl, extensions, state, properties, capabilities, utils, info );\n\t\tcubemaps = new WebGLCubeMaps( _this );\n\t\tattributes = new WebGLAttributes( _gl, capabilities );\n\t\tbindingStates = new WebGLBindingStates( _gl, extensions, attributes, capabilities );\n\t\tgeometries = new WebGLGeometries( _gl, attributes, info, bindingStates );\n\t\tobjects = new WebGLObjects( _gl, geometries, attributes, info );\n\t\tmorphtargets = new WebGLMorphtargets( _gl );\n\t\tclipping = new WebGLClipping( properties );\n\t\tprogramCache = new WebGLPrograms( _this, cubemaps, extensions, capabilities, bindingStates, clipping );\n\t\tmaterials = new WebGLMaterials( properties );\n\t\trenderLists = new WebGLRenderLists( properties );\n\t\trenderStates = new WebGLRenderStates( extensions, capabilities );\n\t\tbackground = new WebGLBackground( _this, cubemaps, state, objects, _premultipliedAlpha );\n\n\t\tbufferRenderer = new WebGLBufferRenderer( _gl, extensions, info, capabilities );\n\t\tindexedBufferRenderer = new WebGLIndexedBufferRenderer( _gl, extensions, info, capabilities );\n\n\t\tinfo.programs = programCache.programs;\n\n\t\t_this.capabilities = capabilities;\n\t\t_this.extensions = extensions;\n\t\t_this.properties = properties;\n\t\t_this.renderLists = renderLists;\n\t\t_this.state = state;\n\t\t_this.info = info;\n\n\t}\n\n\tinitGLContext();\n\n\t// xr\n\n\tconst xr = new WebXRManager( _this, _gl );\n\n\tthis.xr = xr;\n\n\t// shadow map\n\n\tconst shadowMap = new WebGLShadowMap( _this, objects, capabilities.maxTextureSize );\n\n\tthis.shadowMap = shadowMap;\n\n\t// API\n\n\tthis.getContext = function () {\n\n\t\treturn _gl;\n\n\t};\n\n\tthis.getContextAttributes = function () {\n\n\t\treturn _gl.getContextAttributes();\n\n\t};\n\n\tthis.forceContextLoss = function () {\n\n\t\tconst extension = extensions.get( 'WEBGL_lose_context' );\n\t\tif ( extension ) extension.loseContext();\n\n\t};\n\n\tthis.forceContextRestore = function () {\n\n\t\tconst extension = extensions.get( 'WEBGL_lose_context' );\n\t\tif ( extension ) extension.restoreContext();\n\n\t};\n\n\tthis.getPixelRatio = function () {\n\n\t\treturn _pixelRatio;\n\n\t};\n\n\tthis.setPixelRatio = function ( value ) {\n\n\t\tif ( value === undefined ) return;\n\n\t\t_pixelRatio = value;\n\n\t\tthis.setSize( _width, _height, false );\n\n\t};\n\n\tthis.getSize = function ( target ) {\n\n\t\tif ( target === undefined ) {\n\n\t\t\tconsole.warn( 'WebGLRenderer: .getsize() now requires a Vector2 as an argument' );\n\n\t\t\ttarget = new Vector2();\n\n\t\t}\n\n\t\treturn target.set( _width, _height );\n\n\t};\n\n\tthis.setSize = function ( width, height, updateStyle ) {\n\n\t\tif ( xr.isPresenting ) {\n\n\t\t\tconsole.warn( 'THREE.WebGLRenderer: Can\\'t change size while VR device is presenting.' );\n\t\t\treturn;\n\n\t\t}\n\n\t\t_width = width;\n\t\t_height = height;\n\n\t\t_canvas.width = Math.floor( width * _pixelRatio );\n\t\t_canvas.height = Math.floor( height * _pixelRatio );\n\n\t\tif ( updateStyle !== false ) {\n\n\t\t\t_canvas.style.width = width + 'px';\n\t\t\t_canvas.style.height = height + 'px';\n\n\t\t}\n\n\t\tthis.setViewport( 0, 0, width, height );\n\n\t};\n\n\tthis.getDrawingBufferSize = function ( target ) {\n\n\t\tif ( target === undefined ) {\n\n\t\t\tconsole.warn( 'WebGLRenderer: .getdrawingBufferSize() now requires a Vector2 as an argument' );\n\n\t\t\ttarget = new Vector2();\n\n\t\t}\n\n\t\treturn target.set( _width * _pixelRatio, _height * _pixelRatio ).floor();\n\n\t};\n\n\tthis.setDrawingBufferSize = function ( width, height, pixelRatio ) {\n\n\t\t_width = width;\n\t\t_height = height;\n\n\t\t_pixelRatio = pixelRatio;\n\n\t\t_canvas.width = Math.floor( width * pixelRatio );\n\t\t_canvas.height = Math.floor( height * pixelRatio );\n\n\t\tthis.setViewport( 0, 0, width, height );\n\n\t};\n\n\tthis.getCurrentViewport = function ( target ) {\n\n\t\tif ( target === undefined ) {\n\n\t\t\tconsole.warn( 'WebGLRenderer: .getCurrentViewport() now requires a Vector4 as an argument' );\n\n\t\t\ttarget = new Vector4();\n\n\t\t}\n\n\t\treturn target.copy( _currentViewport );\n\n\t};\n\n\tthis.getViewport = function ( target ) {\n\n\t\treturn target.copy( _viewport );\n\n\t};\n\n\tthis.setViewport = function ( x, y, width, height ) {\n\n\t\tif ( x.isVector4 ) {\n\n\t\t\t_viewport.set( x.x, x.y, x.z, x.w );\n\n\t\t} else {\n\n\t\t\t_viewport.set( x, y, width, height );\n\n\t\t}\n\n\t\tstate.viewport( _currentViewport.copy( _viewport ).multiplyScalar( _pixelRatio ).floor() );\n\n\t};\n\n\tthis.getScissor = function ( target ) {\n\n\t\treturn target.copy( _scissor );\n\n\t};\n\n\tthis.setScissor = function ( x, y, width, height ) {\n\n\t\tif ( x.isVector4 ) {\n\n\t\t\t_scissor.set( x.x, x.y, x.z, x.w );\n\n\t\t} else {\n\n\t\t\t_scissor.set( x, y, width, height );\n\n\t\t}\n\n\t\tstate.scissor( _currentScissor.copy( _scissor ).multiplyScalar( _pixelRatio ).floor() );\n\n\t};\n\n\tthis.getScissorTest = function () {\n\n\t\treturn _scissorTest;\n\n\t};\n\n\tthis.setScissorTest = function ( boolean ) {\n\n\t\tstate.setScissorTest( _scissorTest = boolean );\n\n\t};\n\n\tthis.setOpaqueSort = function ( method ) {\n\n\t\t_opaqueSort = method;\n\n\t};\n\n\tthis.setTransparentSort = function ( method ) {\n\n\t\t_transparentSort = method;\n\n\t};\n\n\t// Clearing\n\n\tthis.getClearColor = function ( target ) {\n\n\t\tif ( target === undefined ) {\n\n\t\t\tconsole.warn( 'WebGLRenderer: .getClearColor() now requires a Color as an argument' );\n\n\t\t\ttarget = new Color();\n\n\t\t}\n\n\t\treturn target.copy( background.getClearColor() );\n\n\t};\n\n\tthis.setClearColor = function () {\n\n\t\tbackground.setClearColor.apply( background, arguments );\n\n\t};\n\n\tthis.getClearAlpha = function () {\n\n\t\treturn background.getClearAlpha();\n\n\t};\n\n\tthis.setClearAlpha = function () {\n\n\t\tbackground.setClearAlpha.apply( background, arguments );\n\n\t};\n\n\tthis.clear = function ( color, depth, stencil ) {\n\n\t\tlet bits = 0;\n\n\t\tif ( color === undefined || color ) bits |= _gl.COLOR_BUFFER_BIT;\n\t\tif ( depth === undefined || depth ) bits |= _gl.DEPTH_BUFFER_BIT;\n\t\tif ( stencil === undefined || stencil ) bits |= _gl.STENCIL_BUFFER_BIT;\n\n\t\t_gl.clear( bits );\n\n\t};\n\n\tthis.clearColor = function () {\n\n\t\tthis.clear( true, false, false );\n\n\t};\n\n\tthis.clearDepth = function () {\n\n\t\tthis.clear( false, true, false );\n\n\t};\n\n\tthis.clearStencil = function () {\n\n\t\tthis.clear( false, false, true );\n\n\t};\n\n\t//\n\n\tthis.dispose = function () {\n\n\t\t_canvas.removeEventListener( 'webglcontextlost', onContextLost, false );\n\t\t_canvas.removeEventListener( 'webglcontextrestored', onContextRestore, false );\n\n\t\trenderLists.dispose();\n\t\trenderStates.dispose();\n\t\tproperties.dispose();\n\t\tcubemaps.dispose();\n\t\tobjects.dispose();\n\t\tbindingStates.dispose();\n\n\t\txr.dispose();\n\n\t\tanimation.stop();\n\n\t};\n\n\t// Events\n\n\tfunction onContextLost( event ) {\n\n\t\tevent.preventDefault();\n\n\t\tconsole.log( 'THREE.WebGLRenderer: Context Lost.' );\n\n\t\t_isContextLost = true;\n\n\t}\n\n\tfunction onContextRestore( /* event */ ) {\n\n\t\tconsole.log( 'THREE.WebGLRenderer: Context Restored.' );\n\n\t\t_isContextLost = false;\n\n\t\tinitGLContext();\n\n\t}\n\n\tfunction onMaterialDispose( event ) {\n\n\t\tconst material = event.target;\n\n\t\tmaterial.removeEventListener( 'dispose', onMaterialDispose );\n\n\t\tdeallocateMaterial( material );\n\n\t}\n\n\t// Buffer deallocation\n\n\tfunction deallocateMaterial( material ) {\n\n\t\treleaseMaterialProgramReference( material );\n\n\t\tproperties.remove( material );\n\n\t}\n\n\n\tfunction releaseMaterialProgramReference( material ) {\n\n\t\tconst programInfo = properties.get( material ).program;\n\n\t\tif ( programInfo !== undefined ) {\n\n\t\t\tprogramCache.releaseProgram( programInfo );\n\n\t\t}\n\n\t}\n\n\t// Buffer rendering\n\n\tfunction renderObjectImmediate( object, program ) {\n\n\t\tobject.render( function ( object ) {\n\n\t\t\t_this.renderBufferImmediate( object, program );\n\n\t\t} );\n\n\t}\n\n\tthis.renderBufferImmediate = function ( object, program ) {\n\n\t\tbindingStates.initAttributes();\n\n\t\tconst buffers = properties.get( object );\n\n\t\tif ( object.hasPositions && ! buffers.position ) buffers.position = _gl.createBuffer();\n\t\tif ( object.hasNormals && ! buffers.normal ) buffers.normal = _gl.createBuffer();\n\t\tif ( object.hasUvs && ! buffers.uv ) buffers.uv = _gl.createBuffer();\n\t\tif ( object.hasColors && ! buffers.color ) buffers.color = _gl.createBuffer();\n\n\t\tconst programAttributes = program.getAttributes();\n\n\t\tif ( object.hasPositions ) {\n\n\t\t\t_gl.bindBuffer( _gl.ARRAY_BUFFER, buffers.position );\n\t\t\t_gl.bufferData( _gl.ARRAY_BUFFER, object.positionArray, _gl.DYNAMIC_DRAW );\n\n\t\t\tbindingStates.enableAttribute( programAttributes.position );\n\t\t\t_gl.vertexAttribPointer( programAttributes.position, 3, _gl.FLOAT, false, 0, 0 );\n\n\t\t}\n\n\t\tif ( object.hasNormals ) {\n\n\t\t\t_gl.bindBuffer( _gl.ARRAY_BUFFER, buffers.normal );\n\t\t\t_gl.bufferData( _gl.ARRAY_BUFFER, object.normalArray, _gl.DYNAMIC_DRAW );\n\n\t\t\tbindingStates.enableAttribute( programAttributes.normal );\n\t\t\t_gl.vertexAttribPointer( programAttributes.normal, 3, _gl.FLOAT, false, 0, 0 );\n\n\t\t}\n\n\t\tif ( object.hasUvs ) {\n\n\t\t\t_gl.bindBuffer( _gl.ARRAY_BUFFER, buffers.uv );\n\t\t\t_gl.bufferData( _gl.ARRAY_BUFFER, object.uvArray, _gl.DYNAMIC_DRAW );\n\n\t\t\tbindingStates.enableAttribute( programAttributes.uv );\n\t\t\t_gl.vertexAttribPointer( programAttributes.uv, 2, _gl.FLOAT, false, 0, 0 );\n\n\t\t}\n\n\t\tif ( object.hasColors ) {\n\n\t\t\t_gl.bindBuffer( _gl.ARRAY_BUFFER, buffers.color );\n\t\t\t_gl.bufferData( _gl.ARRAY_BUFFER, object.colorArray, _gl.DYNAMIC_DRAW );\n\n\t\t\tbindingStates.enableAttribute( programAttributes.color );\n\t\t\t_gl.vertexAttribPointer( programAttributes.color, 3, _gl.FLOAT, false, 0, 0 );\n\n\t\t}\n\n\t\tbindingStates.disableUnusedAttributes();\n\n\t\t_gl.drawArrays( _gl.TRIANGLES, 0, object.count );\n\n\t\tobject.count = 0;\n\n\t};\n\n\tthis.renderBufferDirect = function ( camera, scene, geometry, material, object, group ) {\n\n\t\tif ( scene === null ) scene = _emptyScene; // renderBufferDirect second parameter used to be fog (could be null)\n\n\t\tconst frontFaceCW = ( object.isMesh && object.matrixWorld.determinant() < 0 );\n\n\t\tconst program = setProgram( camera, scene, material, object );\n\n\t\tstate.setMaterial( material, frontFaceCW );\n\n\t\t//\n\n\t\tlet index = geometry.index;\n\t\tconst position = geometry.attributes.position;\n\n\t\t//\n\n\t\tif ( index === null ) {\n\n\t\t\tif ( position === undefined || position.count === 0 ) return;\n\n\t\t} else if ( index.count === 0 ) {\n\n\t\t\treturn;\n\n\t\t}\n\n\t\t//\n\n\t\tlet rangeFactor = 1;\n\n\t\tif ( material.wireframe === true ) {\n\n\t\t\tindex = geometries.getWireframeAttribute( geometry );\n\t\t\trangeFactor = 2;\n\n\t\t}\n\n\t\tif ( material.morphTargets || material.morphNormals ) {\n\n\t\t\tmorphtargets.update( object, geometry, material, program );\n\n\t\t}\n\n\t\tbindingStates.setup( object, material, program, geometry, index );\n\n\t\tlet attribute;\n\t\tlet renderer = bufferRenderer;\n\n\t\tif ( index !== null ) {\n\n\t\t\tattribute = attributes.get( index );\n\n\t\t\trenderer = indexedBufferRenderer;\n\t\t\trenderer.setIndex( attribute );\n\n\t\t}\n\n\t\t//\n\n\t\tconst dataCount = ( index !== null ) ? index.count : position.count;\n\n\t\tconst rangeStart = geometry.drawRange.start * rangeFactor;\n\t\tconst rangeCount = geometry.drawRange.count * rangeFactor;\n\n\t\tconst groupStart = group !== null ? group.start * rangeFactor : 0;\n\t\tconst groupCount = group !== null ? group.count * rangeFactor : Infinity;\n\n\t\tconst drawStart = Math.max( rangeStart, groupStart );\n\t\tconst drawEnd = Math.min( dataCount, rangeStart + rangeCount, groupStart + groupCount ) - 1;\n\n\t\tconst drawCount = Math.max( 0, drawEnd - drawStart + 1 );\n\n\t\tif ( drawCount === 0 ) return;\n\n\t\t//\n\n\t\tif ( object.isMesh ) {\n\n\t\t\tif ( material.wireframe === true ) {\n\n\t\t\t\tstate.setLineWidth( material.wireframeLinewidth * getTargetPixelRatio() );\n\t\t\t\trenderer.setMode( _gl.LINES );\n\n\t\t\t} else {\n\n\t\t\t\trenderer.setMode( _gl.TRIANGLES );\n\n\t\t\t}\n\n\t\t} else if ( object.isLine ) {\n\n\t\t\tlet lineWidth = material.linewidth;\n\n\t\t\tif ( lineWidth === undefined ) lineWidth = 1; // Not using Line*Material\n\n\t\t\tstate.setLineWidth( lineWidth * getTargetPixelRatio() );\n\n\t\t\tif ( object.isLineSegments ) {\n\n\t\t\t\trenderer.setMode( _gl.LINES );\n\n\t\t\t} else if ( object.isLineLoop ) {\n\n\t\t\t\trenderer.setMode( _gl.LINE_LOOP );\n\n\t\t\t} else {\n\n\t\t\t\trenderer.setMode( _gl.LINE_STRIP );\n\n\t\t\t}\n\n\t\t} else if ( object.isPoints ) {\n\n\t\t\trenderer.setMode( _gl.POINTS );\n\n\t\t} else if ( object.isSprite ) {\n\n\t\t\trenderer.setMode( _gl.TRIANGLES );\n\n\t\t}\n\n\t\tif ( object.isInstancedMesh ) {\n\n\t\t\trenderer.renderInstances( drawStart, drawCount, object.count );\n\n\t\t} else if ( geometry.isInstancedBufferGeometry ) {\n\n\t\t\tconst instanceCount = Math.min( geometry.instanceCount, geometry._maxInstanceCount );\n\n\t\t\trenderer.renderInstances( drawStart, drawCount, instanceCount );\n\n\t\t} else {\n\n\t\t\trenderer.render( drawStart, drawCount );\n\n\t\t}\n\n\t};\n\n\t// Compile\n\n\tthis.compile = function ( scene, camera ) {\n\n\t\tcurrentRenderState = renderStates.get( scene );\n\t\tcurrentRenderState.init();\n\n\t\tscene.traverseVisible( function ( object ) {\n\n\t\t\tif ( object.isLight && object.layers.test( camera.layers ) ) {\n\n\t\t\t\tcurrentRenderState.pushLight( object );\n\n\t\t\t\tif ( object.castShadow ) {\n\n\t\t\t\t\tcurrentRenderState.pushShadow( object );\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t} );\n\n\t\tcurrentRenderState.setupLights();\n\n\t\tconst compiled = new WeakMap();\n\n\t\tscene.traverse( function ( object ) {\n\n\t\t\tconst material = object.material;\n\n\t\t\tif ( material ) {\n\n\t\t\t\tif ( Array.isArray( material ) ) {\n\n\t\t\t\t\tfor ( let i = 0; i < material.length; i ++ ) {\n\n\t\t\t\t\t\tconst material2 = material[ i ];\n\n\t\t\t\t\t\tif ( compiled.has( material2 ) === false ) {\n\n\t\t\t\t\t\t\tinitMaterial( material2, scene, object );\n\t\t\t\t\t\t\tcompiled.set( material2 );\n\n\t\t\t\t\t\t}\n\n\t\t\t\t\t}\n\n\t\t\t\t} else if ( compiled.has( material ) === false ) {\n\n\t\t\t\t\tinitMaterial( material, scene, object );\n\t\t\t\t\tcompiled.set( material );\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t} );\n\n\t};\n\n\t// Animation Loop\n\n\tlet onAnimationFrameCallback = null;\n\n\tfunction onAnimationFrame( time ) {\n\n\t\tif ( xr.isPresenting ) return;\n\t\tif ( onAnimationFrameCallback ) onAnimationFrameCallback( time );\n\n\t}\n\n\tconst animation = new WebGLAnimation();\n\tanimation.setAnimationLoop( onAnimationFrame );\n\n\tif ( typeof window !== 'undefined' ) animation.setContext( window );\n\n\tthis.setAnimationLoop = function ( callback ) {\n\n\t\tonAnimationFrameCallback = callback;\n\t\txr.setAnimationLoop( callback );\n\n\t\t( callback === null ) ? animation.stop() : animation.start();\n\n\t};\n\n\t// Rendering\n\n\tthis.render = function ( scene, camera ) {\n\n\t\tlet renderTarget, forceClear;\n\n\t\tif ( arguments[ 2 ] !== undefined ) {\n\n\t\t\tconsole.warn( 'THREE.WebGLRenderer.render(): the renderTarget argument has been removed. Use .setRenderTarget() instead.' );\n\t\t\trenderTarget = arguments[ 2 ];\n\n\t\t}\n\n\t\tif ( arguments[ 3 ] !== undefined ) {\n\n\t\t\tconsole.warn( 'THREE.WebGLRenderer.render(): the forceClear argument has been removed. Use .clear() instead.' );\n\t\t\tforceClear = arguments[ 3 ];\n\n\t\t}\n\n\t\tif ( camera !== undefined && camera.isCamera !== true ) {\n\n\t\t\tconsole.error( 'THREE.WebGLRenderer.render: camera is not an instance of THREE.Camera.' );\n\t\t\treturn;\n\n\t\t}\n\n\t\tif ( _isContextLost === true ) return;\n\n\t\t// reset caching for this frame\n\n\t\tbindingStates.resetDefaultState();\n\t\t_currentMaterialId = - 1;\n\t\t_currentCamera = null;\n\n\t\t// update scene graph\n\n\t\tif ( scene.autoUpdate === true ) scene.updateMatrixWorld();\n\n\t\t// update camera matrices and frustum\n\n\t\tif ( camera.parent === null ) camera.updateMatrixWorld();\n\n\t\tif ( xr.enabled === true && xr.isPresenting === true ) {\n\n\t\t\tcamera = xr.getCamera( camera );\n\n\t\t}\n\n\t\t//\n\t\tif ( scene.isScene === true ) scene.onBeforeRender( _this, scene, camera, renderTarget || _currentRenderTarget );\n\n\t\tcurrentRenderState = renderStates.get( scene, renderStateStack.length );\n\t\tcurrentRenderState.init();\n\n\t\trenderStateStack.push( currentRenderState );\n\n\t\t_projScreenMatrix.multiplyMatrices( camera.projectionMatrix, camera.matrixWorldInverse );\n\t\t_frustum.setFromProjectionMatrix( _projScreenMatrix );\n\n\t\t_localClippingEnabled = this.localClippingEnabled;\n\t\t_clippingEnabled = clipping.init( this.clippingPlanes, _localClippingEnabled, camera );\n\n\t\tcurrentRenderList = renderLists.get( scene, renderListStack.length );\n\t\tcurrentRenderList.init();\n\n\t\trenderListStack.push( currentRenderList );\n\n\t\tprojectObject( scene, camera, 0, _this.sortObjects );\n\n\t\tcurrentRenderList.finish();\n\n\t\tif ( _this.sortObjects === true ) {\n\n\t\t\tcurrentRenderList.sort( _opaqueSort, _transparentSort );\n\n\t\t}\n\n\t\t//\n\n\t\tif ( _clippingEnabled === true ) clipping.beginShadows();\n\n\t\tconst shadowsArray = currentRenderState.state.shadowsArray;\n\n\t\tshadowMap.render( shadowsArray, scene, camera );\n\n\t\tcurrentRenderState.setupLights();\n\t\tcurrentRenderState.setupLightsView( camera );\n\n\t\tif ( _clippingEnabled === true ) clipping.endShadows();\n\n\t\t//\n\n\t\tif ( this.info.autoReset === true ) this.info.reset();\n\n\t\tif ( renderTarget !== undefined ) {\n\n\t\t\tthis.setRenderTarget( renderTarget );\n\n\t\t}\n\n\t\t//\n\n\t\tbackground.render( currentRenderList, scene, camera, forceClear );\n\n\t\t// render scene\n\n\t\tconst opaqueObjects = currentRenderList.opaque;\n\t\tconst transparentObjects = currentRenderList.transparent;\n\n\t\tif ( opaqueObjects.length > 0 ) renderObjects( opaqueObjects, scene, camera );\n\t\tif ( transparentObjects.length > 0 ) renderObjects( transparentObjects, scene, camera );\n\n\t\t//\n\n\t\tif ( scene.isScene === true ) scene.onAfterRender( _this, scene, camera );\n\n\t\t//\n\n\t\tif ( _currentRenderTarget !== null ) {\n\n\t\t\t// Generate mipmap if we're using any kind of mipmap filtering\n\n\t\t\ttextures.updateRenderTargetMipmap( _currentRenderTarget );\n\n\t\t\t// resolve multisample renderbuffers to a single-sample texture if necessary\n\n\t\t\ttextures.updateMultisampleRenderTarget( _currentRenderTarget );\n\n\t\t}\n\n\t\t// Ensure depth buffer writing is enabled so it can be cleared on next render\n\n\t\tstate.buffers.depth.setTest( true );\n\t\tstate.buffers.depth.setMask( true );\n\t\tstate.buffers.color.setMask( true );\n\n\t\tstate.setPolygonOffset( false );\n\n\t\t// _gl.finish();\n\n\t\trenderStateStack.pop();\n\n\t\tif ( renderStateStack.length > 0 ) {\n\n\t\t\tcurrentRenderState = renderStateStack[ renderStateStack.length - 1 ];\n\n\t\t} else {\n\n\t\t\tcurrentRenderState = null;\n\n\t\t}\n\n\t\trenderListStack.pop();\n\n\t\tif ( renderListStack.length > 0 ) {\n\n\t\t\tcurrentRenderList = renderListStack[ renderListStack.length - 1 ];\n\n\t\t} else {\n\n\t\t\tcurrentRenderList = null;\n\n\t\t}\n\n\t};\n\n\tfunction projectObject( object, camera, groupOrder, sortObjects ) {\n\n\t\tif ( object.visible === false ) return;\n\n\t\tconst visible = object.layers.test( camera.layers );\n\n\t\tif ( visible ) {\n\n\t\t\tif ( object.isGroup ) {\n\n\t\t\t\tgroupOrder = object.renderOrder;\n\n\t\t\t} else if ( object.isLOD ) {\n\n\t\t\t\tif ( object.autoUpdate === true ) object.update( camera );\n\n\t\t\t} else if ( object.isLight ) {\n\n\t\t\t\tcurrentRenderState.pushLight( object );\n\n\t\t\t\tif ( object.castShadow ) {\n\n\t\t\t\t\tcurrentRenderState.pushShadow( object );\n\n\t\t\t\t}\n\n\t\t\t} else if ( object.isSprite ) {\n\n\t\t\t\tif ( ! object.frustumCulled || _frustum.intersectsSprite( object ) ) {\n\n\t\t\t\t\tif ( sortObjects ) {\n\n\t\t\t\t\t\t_vector3.setFromMatrixPosition( object.matrixWorld )\n\t\t\t\t\t\t\t.applyMatrix4( _projScreenMatrix );\n\n\t\t\t\t\t}\n\n\t\t\t\t\tconst geometry = objects.update( object );\n\t\t\t\t\tconst material = object.material;\n\n\t\t\t\t\tif ( material.visible ) {\n\n\t\t\t\t\t\tcurrentRenderList.push( object, geometry, material, groupOrder, _vector3.z, null );\n\n\t\t\t\t\t}\n\n\t\t\t\t}\n\n\t\t\t} else if ( object.isImmediateRenderObject ) {\n\n\t\t\t\tif ( sortObjects ) {\n\n\t\t\t\t\t_vector3.setFromMatrixPosition( object.matrixWorld )\n\t\t\t\t\t\t.applyMatrix4( _projScreenMatrix );\n\n\t\t\t\t}\n\n\t\t\t\tcurrentRenderList.push( object, null, object.material, groupOrder, _vector3.z, null );\n\n\t\t\t} else if ( object.isMesh || object.isLine || object.isPoints ) {\n\n\t\t\t\tif ( object.isSkinnedMesh ) {\n\n\t\t\t\t\t// update skeleton only once in a frame\n\n\t\t\t\t\tif ( object.skeleton.frame !== info.render.frame ) {\n\n\t\t\t\t\t\tobject.skeleton.update();\n\t\t\t\t\t\tobject.skeleton.frame = info.render.frame;\n\n\t\t\t\t\t}\n\n\t\t\t\t}\n\n\t\t\t\tif ( ! object.frustumCulled || _frustum.intersectsObject( object ) ) {\n\n\t\t\t\t\tif ( sortObjects ) {\n\n\t\t\t\t\t\t_vector3.setFromMatrixPosition( object.matrixWorld )\n\t\t\t\t\t\t\t.applyMatrix4( _projScreenMatrix );\n\n\t\t\t\t\t}\n\n\t\t\t\t\tconst geometry = objects.update( object );\n\t\t\t\t\tconst material = object.material;\n\n\t\t\t\t\tif ( Array.isArray( material ) ) {\n\n\t\t\t\t\t\tconst groups = geometry.groups;\n\n\t\t\t\t\t\tfor ( let i = 0, l = groups.length; i < l; i ++ ) {\n\n\t\t\t\t\t\t\tconst group = groups[ i ];\n\t\t\t\t\t\t\tconst groupMaterial = material[ group.materialIndex ];\n\n\t\t\t\t\t\t\tif ( groupMaterial && groupMaterial.visible ) {\n\n\t\t\t\t\t\t\t\tcurrentRenderList.push( object, geometry, groupMaterial, groupOrder, _vector3.z, group );\n\n\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t}\n\n\t\t\t\t\t} else if ( material.visible ) {\n\n\t\t\t\t\t\tcurrentRenderList.push( object, geometry, material, groupOrder, _vector3.z, null );\n\n\t\t\t\t\t}\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t}\n\n\t\tconst children = object.children;\n\n\t\tfor ( let i = 0, l = children.length; i < l; i ++ ) {\n\n\t\t\tprojectObject( children[ i ], camera, groupOrder, sortObjects );\n\n\t\t}\n\n\t}\n\n\tfunction renderObjects( renderList, scene, camera ) {\n\n\t\tconst overrideMaterial = scene.isScene === true ? scene.overrideMaterial : null;\n\n\t\tfor ( let i = 0, l = renderList.length; i < l; i ++ ) {\n\n\t\t\tconst renderItem = renderList[ i ];\n\n\t\t\tconst object = renderItem.object;\n\t\t\tconst geometry = renderItem.geometry;\n\t\t\tconst material = overrideMaterial === null ? renderItem.material : overrideMaterial;\n\t\t\tconst group = renderItem.group;\n\n\t\t\tif ( camera.isArrayCamera ) {\n\n\t\t\t\tconst cameras = camera.cameras;\n\n\t\t\t\tfor ( let j = 0, jl = cameras.length; j < jl; j ++ ) {\n\n\t\t\t\t\tconst camera2 = cameras[ j ];\n\n\t\t\t\t\tif ( object.layers.test( camera2.layers ) ) {\n\n\t\t\t\t\t\tstate.viewport( _currentViewport.copy( camera2.viewport ) );\n\n\t\t\t\t\t\tcurrentRenderState.setupLightsView( camera2 );\n\n\t\t\t\t\t\trenderObject( object, scene, camera2, geometry, material, group );\n\n\t\t\t\t\t}\n\n\t\t\t\t}\n\n\t\t\t} else {\n\n\t\t\t\trenderObject( object, scene, camera, geometry, material, group );\n\n\t\t\t}\n\n\t\t}\n\n\t}\n\n\tfunction renderObject( object, scene, camera, geometry, material, group ) {\n\n\t\tobject.onBeforeRender( _this, scene, camera, geometry, material, group );\n\n\t\tobject.modelViewMatrix.multiplyMatrices( camera.matrixWorldInverse, object.matrixWorld );\n\t\tobject.normalMatrix.getNormalMatrix( object.modelViewMatrix );\n\n\t\tif ( object.isImmediateRenderObject ) {\n\n\t\t\tconst program = setProgram( camera, scene, material, object );\n\n\t\t\tstate.setMaterial( material );\n\n\t\t\tbindingStates.reset();\n\n\t\t\trenderObjectImmediate( object, program );\n\n\t\t} else {\n\n\t\t\t_this.renderBufferDirect( camera, scene, geometry, material, object, group );\n\n\t\t}\n\n\t\tobject.onAfterRender( _this, scene, camera, geometry, material, group );\n\n\t}\n\n\tfunction initMaterial( material, scene, object ) {\n\n\t\tif ( scene.isScene !== true ) scene = _emptyScene; // scene could be a Mesh, Line, Points, ...\n\n\t\tconst materialProperties = properties.get( material );\n\n\t\tconst lights = currentRenderState.state.lights;\n\t\tconst shadowsArray = currentRenderState.state.shadowsArray;\n\n\t\tconst lightsStateVersion = lights.state.version;\n\n\t\tconst parameters = programCache.getParameters( material, lights.state, shadowsArray, scene, object );\n\t\tconst programCacheKey = programCache.getProgramCacheKey( parameters );\n\n\t\tlet program = materialProperties.program;\n\t\tlet programChange = true;\n\n\t\t// always update environment and fog - changing these trigger an initMaterial call, but it's possible that the program doesn't change\n\n\t\tmaterialProperties.environment = material.isMeshStandardMaterial ? scene.environment : null;\n\t\tmaterialProperties.fog = scene.fog;\n\t\tmaterialProperties.envMap = cubemaps.get( material.envMap || materialProperties.environment );\n\n\t\tif ( program === undefined ) {\n\n\t\t\t// new material\n\t\t\tmaterial.addEventListener( 'dispose', onMaterialDispose );\n\n\t\t} else if ( program.cacheKey !== programCacheKey ) {\n\n\t\t\t// changed glsl or parameters\n\t\t\treleaseMaterialProgramReference( material );\n\n\t\t} else if ( materialProperties.lightsStateVersion !== lightsStateVersion ) {\n\n\t\t\tprogramChange = false;\n\n\t\t} else if ( parameters.shaderID !== undefined ) {\n\n\t\t\t// same glsl and uniform list\n\t\t\treturn;\n\n\t\t} else {\n\n\t\t\t// only rebuild uniform list\n\t\t\tprogramChange = false;\n\n\t\t}\n\n\t\tif ( programChange ) {\n\n\t\t\tparameters.uniforms = programCache.getUniforms( material );\n\n\t\t\tmaterial.onBeforeCompile( parameters, _this );\n\n\t\t\tprogram = programCache.acquireProgram( parameters, programCacheKey );\n\n\t\t\tmaterialProperties.program = program;\n\t\t\tmaterialProperties.uniforms = parameters.uniforms;\n\t\t\tmaterialProperties.outputEncoding = parameters.outputEncoding;\n\n\t\t}\n\n\t\tconst uniforms = materialProperties.uniforms;\n\n\t\tif ( ! material.isShaderMaterial &&\n\t\t\t! material.isRawShaderMaterial ||\n\t\t\tmaterial.clipping === true ) {\n\n\t\t\tmaterialProperties.numClippingPlanes = clipping.numPlanes;\n\t\t\tmaterialProperties.numIntersection = clipping.numIntersection;\n\t\t\tuniforms.clippingPlanes = clipping.uniform;\n\n\t\t}\n\n\t\t// store the light setup it was created for\n\n\t\tmaterialProperties.needsLights = materialNeedsLights( material );\n\t\tmaterialProperties.lightsStateVersion = lightsStateVersion;\n\n\t\tif ( materialProperties.needsLights ) {\n\n\t\t\t// wire up the material to this renderer's lighting state\n\n\t\t\tuniforms.ambientLightColor.value = lights.state.ambient;\n\t\t\tuniforms.lightProbe.value = lights.state.probe;\n\t\t\tuniforms.directionalLights.value = lights.state.directional;\n\t\t\tuniforms.directionalLightShadows.value = lights.state.directionalShadow;\n\t\t\tuniforms.spotLights.value = lights.state.spot;\n\t\t\tuniforms.spotLightShadows.value = lights.state.spotShadow;\n\t\t\tuniforms.rectAreaLights.value = lights.state.rectArea;\n\t\t\tuniforms.ltc_1.value = lights.state.rectAreaLTC1;\n\t\t\tuniforms.ltc_2.value = lights.state.rectAreaLTC2;\n\t\t\tuniforms.pointLights.value = lights.state.point;\n\t\t\tuniforms.pointLightShadows.value = lights.state.pointShadow;\n\t\t\tuniforms.hemisphereLights.value = lights.state.hemi;\n\n\t\t\tuniforms.directionalShadowMap.value = lights.state.directionalShadowMap;\n\t\t\tuniforms.directionalShadowMatrix.value = lights.state.directionalShadowMatrix;\n\t\t\tuniforms.spotShadowMap.value = lights.state.spotShadowMap;\n\t\t\tuniforms.spotShadowMatrix.value = lights.state.spotShadowMatrix;\n\t\t\tuniforms.pointShadowMap.value = lights.state.pointShadowMap;\n\t\t\tuniforms.pointShadowMatrix.value = lights.state.pointShadowMatrix;\n\t\t\t// TODO (abelnation): add area lights shadow info to uniforms\n\n\t\t}\n\n\t\tconst progUniforms = materialProperties.program.getUniforms();\n\t\tconst uniformsList = WebGLUniforms.seqWithValue( progUniforms.seq, uniforms );\n\n\t\tmaterialProperties.uniformsList = uniformsList;\n\n\t}\n\n\tfunction setProgram( camera, scene, material, object ) {\n\n\t\tif ( scene.isScene !== true ) scene = _emptyScene; // scene could be a Mesh, Line, Points, ...\n\n\t\ttextures.resetTextureUnits();\n\n\t\tconst fog = scene.fog;\n\t\tconst environment = material.isMeshStandardMaterial ? scene.environment : null;\n\t\tconst encoding = ( _currentRenderTarget === null ) ? _this.outputEncoding : _currentRenderTarget.texture.encoding;\n\t\tconst envMap = cubemaps.get( material.envMap || environment );\n\n\t\tconst materialProperties = properties.get( material );\n\t\tconst lights = currentRenderState.state.lights;\n\n\t\tif ( _clippingEnabled === true ) {\n\n\t\t\tif ( _localClippingEnabled === true || camera !== _currentCamera ) {\n\n\t\t\t\tconst useCache =\n\t\t\t\t\tcamera === _currentCamera &&\n\t\t\t\t\tmaterial.id === _currentMaterialId;\n\n\t\t\t\t// we might want to call this function with some ClippingGroup\n\t\t\t\t// object instead of the material, once it becomes feasible\n\t\t\t\t// (#8465, #8379)\n\t\t\t\tclipping.setState( material, camera, useCache );\n\n\t\t\t}\n\n\t\t}\n\n\t\tif ( material.version === materialProperties.__version ) {\n\n\t\t\tif ( material.fog && materialProperties.fog !== fog ) {\n\n\t\t\t\tinitMaterial( material, scene, object );\n\n\t\t\t} else if ( materialProperties.environment !== environment ) {\n\n\t\t\t\tinitMaterial( material, scene, object );\n\n\t\t\t} else if ( materialProperties.needsLights && ( materialProperties.lightsStateVersion !== lights.state.version ) ) {\n\n\t\t\t\tinitMaterial( material, scene, object );\n\n\t\t\t} else if ( materialProperties.numClippingPlanes !== undefined &&\n\t\t\t\t( materialProperties.numClippingPlanes !== clipping.numPlanes ||\n\t\t\t\tmaterialProperties.numIntersection !== clipping.numIntersection ) ) {\n\n\t\t\t\tinitMaterial( material, scene, object );\n\n\t\t\t} else if ( materialProperties.outputEncoding !== encoding ) {\n\n\t\t\t\tinitMaterial( material, scene, object );\n\n\t\t\t} else if ( materialProperties.envMap !== envMap ) {\n\n\t\t\t\tinitMaterial( material, scene, object );\n\n\t\t\t}\n\n\t\t} else {\n\n\t\t\tinitMaterial( material, scene, object );\n\t\t\tmaterialProperties.__version = material.version;\n\n\t\t}\n\n\t\tlet refreshProgram = false;\n\t\tlet refreshMaterial = false;\n\t\tlet refreshLights = false;\n\n\t\tconst program = materialProperties.program,\n\t\t\tp_uniforms = program.getUniforms(),\n\t\t\tm_uniforms = materialProperties.uniforms;\n\n\t\tif ( state.useProgram( program.program ) ) {\n\n\t\t\trefreshProgram = true;\n\t\t\trefreshMaterial = true;\n\t\t\trefreshLights = true;\n\n\t\t}\n\n\t\tif ( material.id !== _currentMaterialId ) {\n\n\t\t\t_currentMaterialId = material.id;\n\n\t\t\trefreshMaterial = true;\n\n\t\t}\n\n\t\tif ( refreshProgram || _currentCamera !== camera ) {\n\n\t\t\tp_uniforms.setValue( _gl, 'projectionMatrix', camera.projectionMatrix );\n\n\t\t\tif ( capabilities.logarithmicDepthBuffer ) {\n\n\t\t\t\tp_uniforms.setValue( _gl, 'logDepthBufFC',\n\t\t\t\t\t2.0 / ( Math.log( camera.far + 1.0 ) / Math.LN2 ) );\n\n\t\t\t}\n\n\t\t\tif ( _currentCamera !== camera ) {\n\n\t\t\t\t_currentCamera = camera;\n\n\t\t\t\t// lighting uniforms depend on the camera so enforce an update\n\t\t\t\t// now, in case this material supports lights - or later, when\n\t\t\t\t// the next material that does gets activated:\n\n\t\t\t\trefreshMaterial = true;\t\t// set to true on material change\n\t\t\t\trefreshLights = true;\t\t// remains set until update done\n\n\t\t\t}\n\n\t\t\t// load material specific uniforms\n\t\t\t// (shader material also gets them for the sake of genericity)\n\n\t\t\tif ( material.isShaderMaterial ||\n\t\t\t\tmaterial.isMeshPhongMaterial ||\n\t\t\t\tmaterial.isMeshToonMaterial ||\n\t\t\t\tmaterial.isMeshStandardMaterial ||\n\t\t\t\tmaterial.envMap ) {\n\n\t\t\t\tconst uCamPos = p_uniforms.map.cameraPosition;\n\n\t\t\t\tif ( uCamPos !== undefined ) {\n\n\t\t\t\t\tuCamPos.setValue( _gl,\n\t\t\t\t\t\t_vector3.setFromMatrixPosition( camera.matrixWorld ) );\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t\tif ( material.isMeshPhongMaterial ||\n\t\t\t\tmaterial.isMeshToonMaterial ||\n\t\t\t\tmaterial.isMeshLambertMaterial ||\n\t\t\t\tmaterial.isMeshBasicMaterial ||\n\t\t\t\tmaterial.isMeshStandardMaterial ||\n\t\t\t\tmaterial.isShaderMaterial ) {\n\n\t\t\t\tp_uniforms.setValue( _gl, 'isOrthographic', camera.isOrthographicCamera === true );\n\n\t\t\t}\n\n\t\t\tif ( material.isMeshPhongMaterial ||\n\t\t\t\tmaterial.isMeshToonMaterial ||\n\t\t\t\tmaterial.isMeshLambertMaterial ||\n\t\t\t\tmaterial.isMeshBasicMaterial ||\n\t\t\t\tmaterial.isMeshStandardMaterial ||\n\t\t\t\tmaterial.isShaderMaterial ||\n\t\t\t\tmaterial.isShadowMaterial ||\n\t\t\t\tmaterial.skinning ) {\n\n\t\t\t\tp_uniforms.setValue( _gl, 'viewMatrix', camera.matrixWorldInverse );\n\n\t\t\t}\n\n\t\t}\n\n\t\t// skinning uniforms must be set even if material didn't change\n\t\t// auto-setting of texture unit for bone texture must go before other textures\n\t\t// otherwise textures used for skinning can take over texture units reserved for other material textures\n\n\t\tif ( material.skinning ) {\n\n\t\t\tp_uniforms.setOptional( _gl, object, 'bindMatrix' );\n\t\t\tp_uniforms.setOptional( _gl, object, 'bindMatrixInverse' );\n\n\t\t\tconst skeleton = object.skeleton;\n\n\t\t\tif ( skeleton ) {\n\n\t\t\t\tconst bones = skeleton.bones;\n\n\t\t\t\tif ( capabilities.floatVertexTextures ) {\n\n\t\t\t\t\tif ( skeleton.boneTexture === null ) {\n\n\t\t\t\t\t\t// layout (1 matrix = 4 pixels)\n\t\t\t\t\t\t//      RGBA RGBA RGBA RGBA (=> column1, column2, column3, column4)\n\t\t\t\t\t\t//  with  8x8  pixel texture max   16 bones * 4 pixels =  (8 * 8)\n\t\t\t\t\t\t//       16x16 pixel texture max   64 bones * 4 pixels = (16 * 16)\n\t\t\t\t\t\t//       32x32 pixel texture max  256 bones * 4 pixels = (32 * 32)\n\t\t\t\t\t\t//       64x64 pixel texture max 1024 bones * 4 pixels = (64 * 64)\n\n\n\t\t\t\t\t\tlet size = Math.sqrt( bones.length * 4 ); // 4 pixels needed for 1 matrix\n\t\t\t\t\t\tsize = MathUtils.ceilPowerOfTwo( size );\n\t\t\t\t\t\tsize = Math.max( size, 4 );\n\n\t\t\t\t\t\tconst boneMatrices = new Float32Array( size * size * 4 ); // 4 floats per RGBA pixel\n\t\t\t\t\t\tboneMatrices.set( skeleton.boneMatrices ); // copy current values\n\n\t\t\t\t\t\tconst boneTexture = new DataTexture( boneMatrices, size, size, RGBAFormat, FloatType );\n\n\t\t\t\t\t\tskeleton.boneMatrices = boneMatrices;\n\t\t\t\t\t\tskeleton.boneTexture = boneTexture;\n\t\t\t\t\t\tskeleton.boneTextureSize = size;\n\n\t\t\t\t\t}\n\n\t\t\t\t\tp_uniforms.setValue( _gl, 'boneTexture', skeleton.boneTexture, textures );\n\t\t\t\t\tp_uniforms.setValue( _gl, 'boneTextureSize', skeleton.boneTextureSize );\n\n\t\t\t\t} else {\n\n\t\t\t\t\tp_uniforms.setOptional( _gl, skeleton, 'boneMatrices' );\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t}\n\n\t\tif ( refreshMaterial || materialProperties.receiveShadow !== object.receiveShadow ) {\n\n\t\t\tmaterialProperties.receiveShadow = object.receiveShadow;\n\t\t\tp_uniforms.setValue( _gl, 'receiveShadow', object.receiveShadow );\n\n\t\t}\n\n\t\tif ( refreshMaterial ) {\n\n\t\t\tp_uniforms.setValue( _gl, 'toneMappingExposure', _this.toneMappingExposure );\n\n\t\t\tif ( materialProperties.needsLights ) {\n\n\t\t\t\t// the current material requires lighting info\n\n\t\t\t\t// note: all lighting uniforms are always set correctly\n\t\t\t\t// they simply reference the renderer's state for their\n\t\t\t\t// values\n\t\t\t\t//\n\t\t\t\t// use the current material's .needsUpdate flags to set\n\t\t\t\t// the GL state when required\n\n\t\t\t\tmarkUniformsLightsNeedsUpdate( m_uniforms, refreshLights );\n\n\t\t\t}\n\n\t\t\t// refresh uniforms common to several materials\n\n\t\t\tif ( fog && material.fog ) {\n\n\t\t\t\tmaterials.refreshFogUniforms( m_uniforms, fog );\n\n\t\t\t}\n\n\t\t\tmaterials.refreshMaterialUniforms( m_uniforms, material, _pixelRatio, _height );\n\n\t\t\tWebGLUniforms.upload( _gl, materialProperties.uniformsList, m_uniforms, textures );\n\n\t\t}\n\n\t\tif ( material.isShaderMaterial && material.uniformsNeedUpdate === true ) {\n\n\t\t\tWebGLUniforms.upload( _gl, materialProperties.uniformsList, m_uniforms, textures );\n\t\t\tmaterial.uniformsNeedUpdate = false;\n\n\t\t}\n\n\t\tif ( material.isSpriteMaterial ) {\n\n\t\t\tp_uniforms.setValue( _gl, 'center', object.center );\n\n\t\t}\n\n\t\t// common matrices\n\n\t\tp_uniforms.setValue( _gl, 'modelViewMatrix', object.modelViewMatrix );\n\t\tp_uniforms.setValue( _gl, 'normalMatrix', object.normalMatrix );\n\t\tp_uniforms.setValue( _gl, 'modelMatrix', object.matrixWorld );\n\n\t\treturn program;\n\n\t}\n\n\t// If uniforms are marked as clean, they don't need to be loaded to the GPU.\n\n\tfunction markUniformsLightsNeedsUpdate( uniforms, value ) {\n\n\t\tuniforms.ambientLightColor.needsUpdate = value;\n\t\tuniforms.lightProbe.needsUpdate = value;\n\n\t\tuniforms.directionalLights.needsUpdate = value;\n\t\tuniforms.directionalLightShadows.needsUpdate = value;\n\t\tuniforms.pointLights.needsUpdate = value;\n\t\tuniforms.pointLightShadows.needsUpdate = value;\n\t\tuniforms.spotLights.needsUpdate = value;\n\t\tuniforms.spotLightShadows.needsUpdate = value;\n\t\tuniforms.rectAreaLights.needsUpdate = value;\n\t\tuniforms.hemisphereLights.needsUpdate = value;\n\n\t}\n\n\tfunction materialNeedsLights( material ) {\n\n\t\treturn material.isMeshLambertMaterial || material.isMeshToonMaterial || material.isMeshPhongMaterial ||\n\t\t\tmaterial.isMeshStandardMaterial || material.isShadowMaterial ||\n\t\t\t( material.isShaderMaterial && material.lights === true );\n\n\t}\n\n\t//\n\tthis.setFramebuffer = function ( value ) {\n\n\t\tif ( _framebuffer !== value && _currentRenderTarget === null ) _gl.bindFramebuffer( _gl.FRAMEBUFFER, value );\n\n\t\t_framebuffer = value;\n\n\t};\n\n\tthis.getActiveCubeFace = function () {\n\n\t\treturn _currentActiveCubeFace;\n\n\t};\n\n\tthis.getActiveMipmapLevel = function () {\n\n\t\treturn _currentActiveMipmapLevel;\n\n\t};\n\n\tthis.getRenderTarget = function () {\n\n\t\treturn _currentRenderTarget;\n\n\t};\n\n\tthis.setRenderTarget = function ( renderTarget, activeCubeFace = 0, activeMipmapLevel = 0 ) {\n\n\t\t_currentRenderTarget = renderTarget;\n\t\t_currentActiveCubeFace = activeCubeFace;\n\t\t_currentActiveMipmapLevel = activeMipmapLevel;\n\n\t\tif ( renderTarget && properties.get( renderTarget ).__webglFramebuffer === undefined ) {\n\n\t\t\ttextures.setupRenderTarget( renderTarget );\n\n\t\t}\n\n\t\tlet framebuffer = _framebuffer;\n\t\tlet isCube = false;\n\t\tlet isRenderTarget3D = false;\n\n\t\tif ( renderTarget ) {\n\n\t\t\tconst texture = renderTarget.texture;\n\n\t\t\tif ( texture.isDataTexture3D || texture.isDataTexture2DArray ) {\n\n\t\t\t\tisRenderTarget3D = true;\n\n\t\t\t}\n\n\t\t\tconst __webglFramebuffer = properties.get( renderTarget ).__webglFramebuffer;\n\n\t\t\tif ( renderTarget.isWebGLCubeRenderTarget ) {\n\n\t\t\t\tframebuffer = __webglFramebuffer[ activeCubeFace ];\n\t\t\t\tisCube = true;\n\n\t\t\t} else if ( renderTarget.isWebGLMultisampleRenderTarget ) {\n\n\t\t\t\tframebuffer = properties.get( renderTarget ).__webglMultisampledFramebuffer;\n\n\t\t\t} else {\n\n\t\t\t\tframebuffer = __webglFramebuffer;\n\n\t\t\t}\n\n\t\t\t_currentViewport.copy( renderTarget.viewport );\n\t\t\t_currentScissor.copy( renderTarget.scissor );\n\t\t\t_currentScissorTest = renderTarget.scissorTest;\n\n\t\t} else {\n\n\t\t\t_currentViewport.copy( _viewport ).multiplyScalar( _pixelRatio ).floor();\n\t\t\t_currentScissor.copy( _scissor ).multiplyScalar( _pixelRatio ).floor();\n\t\t\t_currentScissorTest = _scissorTest;\n\n\t\t}\n\n\t\tif ( _currentFramebuffer !== framebuffer ) {\n\n\t\t\t_gl.bindFramebuffer( _gl.FRAMEBUFFER, framebuffer );\n\t\t\t_currentFramebuffer = framebuffer;\n\n\t\t}\n\n\t\tstate.viewport( _currentViewport );\n\t\tstate.scissor( _currentScissor );\n\t\tstate.setScissorTest( _currentScissorTest );\n\n\t\tif ( isCube ) {\n\n\t\t\tconst textureProperties = properties.get( renderTarget.texture );\n\t\t\t_gl.framebufferTexture2D( _gl.FRAMEBUFFER, _gl.COLOR_ATTACHMENT0, _gl.TEXTURE_CUBE_MAP_POSITIVE_X + activeCubeFace, textureProperties.__webglTexture, activeMipmapLevel );\n\n\t\t} else if ( isRenderTarget3D ) {\n\n\t\t\tconst textureProperties = properties.get( renderTarget.texture );\n\t\t\tconst layer = activeCubeFace || 0;\n\t\t\t_gl.framebufferTextureLayer( _gl.FRAMEBUFFER, _gl.COLOR_ATTACHMENT0, textureProperties.__webglTexture, activeMipmapLevel || 0, layer );\n\n\t\t}\n\n\t};\n\n\tthis.readRenderTargetPixels = function ( renderTarget, x, y, width, height, buffer, activeCubeFaceIndex ) {\n\n\t\tif ( ! ( renderTarget && renderTarget.isWebGLRenderTarget ) ) {\n\n\t\t\tconsole.error( 'THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not THREE.WebGLRenderTarget.' );\n\t\t\treturn;\n\n\t\t}\n\n\t\tlet framebuffer = properties.get( renderTarget ).__webglFramebuffer;\n\n\t\tif ( renderTarget.isWebGLCubeRenderTarget && activeCubeFaceIndex !== undefined ) {\n\n\t\t\tframebuffer = framebuffer[ activeCubeFaceIndex ];\n\n\t\t}\n\n\t\tif ( framebuffer ) {\n\n\t\t\tlet restore = false;\n\n\t\t\tif ( framebuffer !== _currentFramebuffer ) {\n\n\t\t\t\t_gl.bindFramebuffer( _gl.FRAMEBUFFER, framebuffer );\n\n\t\t\t\trestore = true;\n\n\t\t\t}\n\n\t\t\ttry {\n\n\t\t\t\tconst texture = renderTarget.texture;\n\t\t\t\tconst textureFormat = texture.format;\n\t\t\t\tconst textureType = texture.type;\n\n\t\t\t\tif ( textureFormat !== RGBAFormat && utils.convert( textureFormat ) !== _gl.getParameter( _gl.IMPLEMENTATION_COLOR_READ_FORMAT ) ) {\n\n\t\t\t\t\tconsole.error( 'THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not in RGBA or implementation defined format.' );\n\t\t\t\t\treturn;\n\n\t\t\t\t}\n\n\t\t\t\tconst halfFloatSupportedByExt = ( textureType === HalfFloatType ) && ( extensions.has( 'EXT_color_buffer_half_float' ) || ( capabilities.isWebGL2 && extensions.has( 'EXT_color_buffer_float' ) ) );\n\n\t\t\t\tif ( textureType !== UnsignedByteType && utils.convert( textureType ) !== _gl.getParameter( _gl.IMPLEMENTATION_COLOR_READ_TYPE ) && // Edge and Chrome Mac < 52 (#9513)\n\t\t\t\t\t! ( textureType === FloatType && ( capabilities.isWebGL2 || extensions.has( 'OES_texture_float' ) || extensions.has( 'WEBGL_color_buffer_float' ) ) ) && // Chrome Mac >= 52 and Firefox\n\t\t\t\t\t! halfFloatSupportedByExt ) {\n\n\t\t\t\t\tconsole.error( 'THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not in UnsignedByteType or implementation defined type.' );\n\t\t\t\t\treturn;\n\n\t\t\t\t}\n\n\t\t\t\tif ( _gl.checkFramebufferStatus( _gl.FRAMEBUFFER ) === _gl.FRAMEBUFFER_COMPLETE ) {\n\n\t\t\t\t\t// the following if statement ensures valid read requests (no out-of-bounds pixels, see #8604)\n\n\t\t\t\t\tif ( ( x >= 0 && x <= ( renderTarget.width - width ) ) && ( y >= 0 && y <= ( renderTarget.height - height ) ) ) {\n\n\t\t\t\t\t\t_gl.readPixels( x, y, width, height, utils.convert( textureFormat ), utils.convert( textureType ), buffer );\n\n\t\t\t\t\t}\n\n\t\t\t\t} else {\n\n\t\t\t\t\tconsole.error( 'THREE.WebGLRenderer.readRenderTargetPixels: readPixels from renderTarget failed. Framebuffer not complete.' );\n\n\t\t\t\t}\n\n\t\t\t} finally {\n\n\t\t\t\tif ( restore ) {\n\n\t\t\t\t\t_gl.bindFramebuffer( _gl.FRAMEBUFFER, _currentFramebuffer );\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t}\n\n\t};\n\n\tthis.copyFramebufferToTexture = function ( position, texture, level = 0 ) {\n\n\t\tconst levelScale = Math.pow( 2, - level );\n\t\tconst width = Math.floor( texture.image.width * levelScale );\n\t\tconst height = Math.floor( texture.image.height * levelScale );\n\t\tconst glFormat = utils.convert( texture.format );\n\n\t\ttextures.setTexture2D( texture, 0 );\n\n\t\t_gl.copyTexImage2D( _gl.TEXTURE_2D, level, glFormat, position.x, position.y, width, height, 0 );\n\n\t\tstate.unbindTexture();\n\n\t};\n\n\tthis.copyTextureToTexture = function ( position, srcTexture, dstTexture, level = 0 ) {\n\n\t\tconst width = srcTexture.image.width;\n\t\tconst height = srcTexture.image.height;\n\t\tconst glFormat = utils.convert( dstTexture.format );\n\t\tconst glType = utils.convert( dstTexture.type );\n\n\t\ttextures.setTexture2D( dstTexture, 0 );\n\n\t\t// As another texture upload may have changed pixelStorei\n\t\t// parameters, make sure they are correct for the dstTexture\n\t\t_gl.pixelStorei( _gl.UNPACK_FLIP_Y_WEBGL, dstTexture.flipY );\n\t\t_gl.pixelStorei( _gl.UNPACK_PREMULTIPLY_ALPHA_WEBGL, dstTexture.premultiplyAlpha );\n\t\t_gl.pixelStorei( _gl.UNPACK_ALIGNMENT, dstTexture.unpackAlignment );\n\n\t\tif ( srcTexture.isDataTexture ) {\n\n\t\t\t_gl.texSubImage2D( _gl.TEXTURE_2D, level, position.x, position.y, width, height, glFormat, glType, srcTexture.image.data );\n\n\t\t} else {\n\n\t\t\tif ( srcTexture.isCompressedTexture ) {\n\n\t\t\t\t_gl.compressedTexSubImage2D( _gl.TEXTURE_2D, level, position.x, position.y, srcTexture.mipmaps[ 0 ].width, srcTexture.mipmaps[ 0 ].height, glFormat, srcTexture.mipmaps[ 0 ].data );\n\n\t\t\t} else {\n\n\t\t\t\t_gl.texSubImage2D( _gl.TEXTURE_2D, level, position.x, position.y, glFormat, glType, srcTexture.image );\n\n\t\t\t}\n\n\t\t}\n\n\t\t// Generate mipmaps only when copying level 0\n\t\tif ( level === 0 && dstTexture.generateMipmaps ) _gl.generateMipmap( _gl.TEXTURE_2D );\n\n\t\tstate.unbindTexture();\n\n\t};\n\n\tthis.copyTextureToTexture3D = function ( sourceBox, position, srcTexture, dstTexture, level = 0 ) {\n\n\t\tif ( _this.isWebGL1Renderer ) {\n\n\t\t\tconsole.warn( 'THREE.WebGLRenderer.copyTextureToTexture3D: can only be used with WebGL2.' );\n\t\t\treturn;\n\n\t\t}\n\n\t\tconst { width, height, data } = srcTexture.image;\n\t\tconst glFormat = utils.convert( dstTexture.format );\n\t\tconst glType = utils.convert( dstTexture.type );\n\t\tlet glTarget;\n\n\t\tif ( dstTexture.isDataTexture3D ) {\n\n\t\t\ttextures.setTexture3D( dstTexture, 0 );\n\t\t\tglTarget = _gl.TEXTURE_3D;\n\n\t\t} else if ( dstTexture.isDataTexture2DArray ) {\n\n\t\t\ttextures.setTexture2DArray( dstTexture, 0 );\n\t\t\tglTarget = _gl.TEXTURE_2D_ARRAY;\n\n\t\t} else {\n\n\t\t\tconsole.warn( 'THREE.WebGLRenderer.copyTextureToTexture3D: only supports THREE.DataTexture3D and THREE.DataTexture2DArray.' );\n\t\t\treturn;\n\n\t\t}\n\n\t\t_gl.pixelStorei( _gl.UNPACK_FLIP_Y_WEBGL, dstTexture.flipY );\n\t\t_gl.pixelStorei( _gl.UNPACK_PREMULTIPLY_ALPHA_WEBGL, dstTexture.premultiplyAlpha );\n\t\t_gl.pixelStorei( _gl.UNPACK_ALIGNMENT, dstTexture.unpackAlignment );\n\n\t\tconst unpackRowLen = _gl.getParameter( _gl.UNPACK_ROW_LENGTH );\n\t\tconst unpackImageHeight = _gl.getParameter( _gl.UNPACK_IMAGE_HEIGHT );\n\t\tconst unpackSkipPixels = _gl.getParameter( _gl.UNPACK_SKIP_PIXELS );\n\t\tconst unpackSkipRows = _gl.getParameter( _gl.UNPACK_SKIP_ROWS );\n\t\tconst unpackSkipImages = _gl.getParameter( _gl.UNPACK_SKIP_IMAGES );\n\n\t\t_gl.pixelStorei( _gl.UNPACK_ROW_LENGTH, width );\n\t\t_gl.pixelStorei( _gl.UNPACK_IMAGE_HEIGHT, height );\n\t\t_gl.pixelStorei( _gl.UNPACK_SKIP_PIXELS, sourceBox.min.x );\n\t\t_gl.pixelStorei( _gl.UNPACK_SKIP_ROWS, sourceBox.min.y );\n\t\t_gl.pixelStorei( _gl.UNPACK_SKIP_IMAGES, sourceBox.min.z );\n\n\t\t_gl.texSubImage3D(\n\t\t\tglTarget,\n\t\t\tlevel,\n\t\t\tposition.x,\n\t\t\tposition.y,\n\t\t\tposition.z,\n\t\t\tsourceBox.max.x - sourceBox.min.x + 1,\n\t\t\tsourceBox.max.y - sourceBox.min.y + 1,\n\t\t\tsourceBox.max.z - sourceBox.min.z + 1,\n\t\t\tglFormat,\n\t\t\tglType,\n\t\t\tdata\n\t\t);\n\n\t\t_gl.pixelStorei( _gl.UNPACK_ROW_LENGTH, unpackRowLen );\n\t\t_gl.pixelStorei( _gl.UNPACK_IMAGE_HEIGHT, unpackImageHeight );\n\t\t_gl.pixelStorei( _gl.UNPACK_SKIP_PIXELS, unpackSkipPixels );\n\t\t_gl.pixelStorei( _gl.UNPACK_SKIP_ROWS, unpackSkipRows );\n\t\t_gl.pixelStorei( _gl.UNPACK_SKIP_IMAGES, unpackSkipImages );\n\n\t\t// Generate mipmaps only when copying level 0\n\t\tif ( level === 0 && dstTexture.generateMipmaps ) _gl.generateMipmap( glTarget );\n\n\t\tstate.unbindTexture();\n\n\t};\n\n\tthis.initTexture = function ( texture ) {\n\n\t\ttextures.setTexture2D( texture, 0 );\n\n\t\tstate.unbindTexture();\n\n\t};\n\n\tthis.resetState = function () {\n\n\t\tstate.reset();\n\t\tbindingStates.reset();\n\n\t};\n\n\tif ( typeof __THREE_DEVTOOLS__ !== 'undefined' ) {\n\n\t\t__THREE_DEVTOOLS__.dispatchEvent( new CustomEvent( 'observe', { detail: this } ) ); // eslint-disable-line no-undef\n\n\t}\n\n}\n\nexport { WebGLRenderer };\n","export default \"#define GLSLIFY 1\\n// uniform mat4 modelMatrix;\\n// uniform mat4 modelViewMatrix;\\n// uniform mat4 projectionMatrix;\\n// uniform mat4 viewMatrix;\\n// uniform mat3 normalMatrix;\\n// uniform vec3 cameraPosition;\\n// attribute mat4 instanceMatrix;\\n// attribute vec3 position;\\n// attribute vec3 normal;\\n// attribute vec2 uv;\\n\\nvec3 mod289(vec3 x) {\\n  return x - floor(x * (1.0 / 289.0)) * 289.0;\\n}\\n\\nvec4 mod289(vec4 x) {\\n  return x - floor(x * (1.0 / 289.0)) * 289.0;\\n}\\n\\nvec4 permute(vec4 x) {\\n  return mod289(((x*34.0)+1.0)*x);\\n}\\n\\nvec4 taylorInvSqrt(vec4 r){\\n  return 1.79284291400159 - 0.85373472095314 * r;\\n}\\n\\nfloat snoise(vec3 v) {\\n\\n  const vec2  C = vec2(1.0/6.0, 1.0/3.0) ;\\n  const vec4  D = vec4(0.0, 0.5, 1.0, 2.0);\\n\\n  // First corner\\n  vec3 i  = floor(v + dot(v, C.yyy) );\\n  vec3 x0 =   v - i + dot(i, C.xxx) ;\\n\\n  // Other corners\\n  vec3 g = step(x0.yzx, x0.xyz);\\n  vec3 l = 1.0 - g;\\n  vec3 i1 = min( g.xyz, l.zxy );\\n  vec3 i2 = max( g.xyz, l.zxy );\\n\\n  //   x0 = x0 - 0.0 + 0.0 * C.xxx;\\n  //   x1 = x0 - i1  + 1.0 * C.xxx;\\n  //   x2 = x0 - i2  + 2.0 * C.xxx;\\n  //   x3 = x0 - 1.0 + 3.0 * C.xxx;\\n  vec3 x1 = x0 - i1 + C.xxx;\\n  vec3 x2 = x0 - i2 + C.yyy; // 2.0*C.x = 1/3 = C.y\\n  vec3 x3 = x0 - D.yyy;      // -1.0+3.0*C.x = -0.5 = -D.y\\n\\n  // Permutations\\n  i = mod289(i);\\n  vec4 p = permute( permute( permute(\\n      i.z + vec4(0.0, i1.z, i2.z, 1.0 ))\\n    + i.y + vec4(0.0, i1.y, i2.y, 1.0 ))\\n    + i.x + vec4(0.0, i1.x, i2.x, 1.0 ));\\n\\n  // Gradients: 7x7 points over a square, mapped onto an octahedron.\\n  // The ring size 17*17 = 289 is close to a multiple of 49 (49*6 = 294)\\n  float n_ = 0.142857142857; // 1.0/7.0\\n  vec3  ns = n_ * D.wyz - D.xzx;\\n\\n  vec4 j = p - 49.0 * floor(p * ns.z * ns.z);  //  mod(p,7*7)\\n\\n  vec4 x_ = floor(j * ns.z);\\n  vec4 y_ = floor(j - 7.0 * x_ );    // mod(j,N)\\n\\n  vec4 x = x_ *ns.x + ns.yyyy;\\n  vec4 y = y_ *ns.x + ns.yyyy;\\n  vec4 h = 1.0 - abs(x) - abs(y);\\n\\n  vec4 b0 = vec4( x.xy, y.xy );\\n  vec4 b1 = vec4( x.zw, y.zw );\\n\\n  //vec4 s0 = vec4(lessThan(b0,0.0))*2.0 - 1.0;\\n  //vec4 s1 = vec4(lessThan(b1,0.0))*2.0 - 1.0;\\n  vec4 s0 = floor(b0)*2.0 + 1.0;\\n  vec4 s1 = floor(b1)*2.0 + 1.0;\\n  vec4 sh = -step(h, vec4(0.0));\\n\\n  vec4 a0 = b0.xzyw + s0.xzyw*sh.xxyy ;\\n  vec4 a1 = b1.xzyw + s1.xzyw*sh.zzww ;\\n\\n  vec3 p0 = vec3(a0.xy,h.x);\\n  vec3 p1 = vec3(a0.zw,h.y);\\n  vec3 p2 = vec3(a1.xy,h.z);\\n  vec3 p3 = vec3(a1.zw,h.w);\\n\\n  //Normalise gradients\\n  vec4 norm = taylorInvSqrt(vec4(dot(p0,p0), dot(p1,p1), dot(p2, p2), dot(p3,p3)));\\n  p0 *= norm.x;\\n  p1 *= norm.y;\\n  p2 *= norm.z;\\n  p3 *= norm.w;\\n\\n  // Mix final noise value\\n  vec4 m = max(0.6 - vec4(dot(x0,x0), dot(x1,x1), dot(x2,x2), dot(x3,x3)), 0.0);\\n  m = m * m;\\n  return 42.0 * dot( m*m, vec4( dot(p0,x0), dot(p1,x1), dot(p2,x2), dot(p3,x3) ) );\\n\\n}\\n\\n// via: https://petewerner.blogspot.jp/2015/02/intro-to-curl-noise.html\\nvec3 curlNoise( vec3 p ){\\n\\n  const float e = 0.1;\\n\\n  float  n1 = snoise(vec3(p.x, p.y + e, p.z));\\n  float  n2 = snoise(vec3(p.x, p.y - e, p.z));\\n  float  n3 = snoise(vec3(p.x, p.y, p.z + e));\\n  float  n4 = snoise(vec3(p.x, p.y, p.z - e));\\n  float  n5 = snoise(vec3(p.x + e, p.y, p.z));\\n  float  n6 = snoise(vec3(p.x - e, p.y, p.z));\\n\\n  float x = n2 - n1 - n4 + n3;\\n  float y = n4 - n3 - n6 + n5;\\n  float z = n6 - n5 - n2 + n1;\\n\\n  const float divisor = 1.0 / ( 2.0 * e );\\n  return normalize( vec3( x , y , z ) * divisor );\\n}\\n\\nuniform float time;\\nuniform float size;\\nuniform float partSize;\\nvarying vec3 vPos;\\nvarying vec3 vPosMix;\\nvarying float vCamDist;\\n\\nuniform float freq;\\nuniform float amp;\\n\\nvoid main () {\\n  vec3 p = position;\\n  // float nextY = p.y + sin(time * 100.) / 100.;\\n  float nextY = p.y + time * 100.;\\n  p = vec3(\\n    p.x,\\n    fract((nextY + size/2.) / size) * size - size/2.,\\n    p.z\\n  );\\n\\n  p += (curlNoise(p / freq / 5. + vec3(0., -time * 10., 0.)) * amp\\n    + curlNoise(p / freq + vec3(time * 10., 0. , 0.)) * amp);\\n\\n  vPos = p;\\n  vPosMix = mix(position, p, .5);\\n  vCamDist = distance(cameraPosition, p);\\n\\n  // gl_PointSize = 3. * sqrt(size / 2. - length(p));\\n  if (partSize < 2.0000001)\\n    gl_PointSize = partSize;\\n  else\\n    gl_PointSize = 1. + partSize / (vCamDist / 1.5 - .1);\\n  gl_Position = projectionMatrix * modelViewMatrix * vec4(p, 1.);\\n}\";","export default \"#define GLSLIFY 1\\n// uniform mat4 viewMatrix;\\n// uniform vec3 cameraPosition;\\n\\nuniform float time;\\nuniform float realTime;\\nuniform float size;\\nuniform float partSize;\\nuniform sampler2D tCircle;\\n\\nvarying vec3 vPos;\\nvarying vec3 vPosMix;\\nvarying float vCamDist;\\n\\nconst float PI = 3.141592653589793;\\n\\nvoid main () {\\n  if (partSize > 2.) {\\n    vec2 uv = vec2( gl_PointCoord.x, 1.0 - gl_PointCoord.y );\\n    // if (distance(uv, vec2(.5)) > .5)\\n    //   discard;\\n    float d = length(2.0 * gl_PointCoord - 1.0);\\n    if (d > 1.0)\\n      discard;\\n\\n    gl_FragColor = texture2D(tCircle, uv);\\n  }\\n  else\\n    gl_FragColor = vec4(1.);\\n\\n  float aspR = 1.+(sin(realTime / 50.) + 1.) /2.*.5;\\n  float aspG = 1.+(sin(realTime / 50. + PI) + 1.) /2.*.5;\\n\\n  // float len = length(vPos);\\n  float len = length(vPosMix) / size * 4.;\\n  float darken = pow(vCamDist / sqrt(size), 2.);\\n  gl_FragColor = gl_FragColor * vec4(\\n    // min(.2, 1. - len / 2. + .7),\\n    // min(.3, 1. - len / .7 + .3),\\n    // min(.3, 1. - len / .5 + .0),\\n    (1. - len / aspR + .5),\\n    (1. - len / aspG + .5),\\n    (1. - len / 1. + .5),\\n    // smoothstep(1.,  .0, d) * .8\\n    1.\\n    // max(floor(1./partSize), darken + .2)\\n    // 1.\\n  );\\n\\n  if (partSize > 2.00001)\\n    gl_FragColor *= vec4(darken, darken, darken,  darken + .0); \\n    // gl_FragColor *= vec4(gl_FragColor.rgb, .1);\\n  else\\n    gl_FragColor *= vec4(1.5, 1.5, 1.5, 1.);\\n}\\n\";"],"names":["_lut","i","toString","_seed","MathUtils","DEG2RAD","Math","PI","RAD2DEG","generateUUID","d0","random","d1","d2","d3","toUpperCase","clamp","value","min","max","euclideanModulo","n","m","mapLinear","x","a1","a2","b1","b2","lerp","y","t","damp","lambda","dt","exp","pingpong","length","abs","smoothstep","smootherstep","randInt","low","high","floor","randFloat","randFloatSpread","range","seededRandom","s","undefined","degToRad","degrees","radToDeg","radians","isPowerOfTwo","ceilPowerOfTwo","pow","ceil","log","LN2","floorPowerOfTwo","setQuaternionFromProperEuler","q","a","b","c","order","cos","sin","c2","s2","c13","s13","c1_3","s1_3","c3_1","s3_1","set","console","warn","Quaternion","constructor","z","w","this","_x","_y","_z","_w","static","qa","qb","qm","copy","slerp","dst","dstOffset","src0","srcOffset0","src1","srcOffset1","x0","y0","z0","w0","x1","y1","z1","w1","dir","sqrSin","Number","EPSILON","sqrt","len","atan2","tDir","f","_onChangeCallback","clone","quaternion","setFromEuler","euler","update","isEuler","Error","_order","c1","c3","s1","s3","setFromAxisAngle","axis","angle","halfAngle","setFromRotationMatrix","te","elements","m11","m12","m13","m21","m22","m23","m31","m32","m33","trace","setFromUnitVectors","vFrom","vTo","r","dot","normalize","angleTo","acos","rotateTowards","step","identity","invert","conjugate","v","lengthSq","l","multiply","p","multiplyQuaternions","premultiply","qax","qay","qaz","qaw","qbx","qby","qbz","qbw","cosHalfTheta","sqrSinHalfTheta","sinHalfTheta","halfTheta","ratioA","ratioB","equals","fromArray","array","offset","toArray","fromBufferAttribute","attribute","index","getX","getY","getZ","getW","_onChange","callback","prototype","isQuaternion","Vector3","setScalar","scalar","setX","setY","setZ","setComponent","getComponent","add","addVectors","addScalar","addScaledVector","sub","subVectors","subScalar","multiplyVectors","multiplyScalar","applyEuler","error","applyQuaternion","_quaternion","applyAxisAngle","applyMatrix3","e","applyNormalMatrix","applyMatrix4","qx","qy","qz","qw","ix","iy","iz","iw","project","camera","matrixWorldInverse","projectionMatrix","unproject","projectionMatrixInverse","matrixWorld","transformDirection","divide","divideScalar","clampScalar","minVal","maxVal","clampLength","round","roundToZero","negate","manhattanLength","setLength","alpha","lerpVectors","v1","v2","cross","crossVectors","ax","ay","az","bx","by","bz","projectOnVector","denominator","projectOnPlane","planeNormal","_vector","reflect","normal","theta","distanceTo","distanceToSquared","dx","dy","dz","manhattanDistanceTo","setFromSpherical","setFromSphericalCoords","radius","phi","sinPhiRadius","setFromCylindrical","setFromCylindricalCoords","setFromMatrixPosition","setFromMatrixScale","sx","setFromMatrixColumn","sy","sz","setFromMatrix3Column","isVector3","Matrix4","arguments","n11","n12","n13","n14","n21","n22","n23","n24","n31","n32","n33","n34","n41","n42","n43","n44","me","copyPosition","setFromMatrix3","extractBasis","xAxis","yAxis","zAxis","makeBasis","extractRotation","scaleX","_v1","scaleY","scaleZ","makeRotationFromEuler","d","ae","af","be","bf","ce","cf","de","df","ac","ad","bc","bd","makeRotationFromQuaternion","compose","_zero","_one","lookAt","eye","target","up","multiplyMatrices","a11","a12","a13","a14","a21","a22","a23","a24","a31","a32","a33","a34","a41","a42","a43","a44","b11","b12","b13","b14","b21","b22","b23","b24","b31","b32","b33","b34","b41","b42","b43","b44","determinant","transpose","tmp","setPosition","t11","t12","t13","t14","det","detInv","scale","getMaxScaleOnAxis","scaleXSq","scaleYSq","scaleZSq","makeTranslation","makeRotationX","makeRotationY","makeRotationZ","makeRotationAxis","tx","ty","makeScale","makeShear","position","x2","y2","z2","xx","xy","xz","yy","yz","zz","wx","wy","wz","decompose","_m1","invSX","invSY","invSZ","makePerspective","left","right","top","bottom","near","far","makeOrthographic","h","matrix","isMatrix4","EventDispatcher","Object","assign","addEventListener","type","listener","_listeners","listeners","indexOf","push","hasEventListener","removeEventListener","listenerArray","splice","dispatchEvent","event","slice","call","_matrix","Euler","DefaultOrder","asin","setFromQuaternion","setFromVector3","reorder","newOrder","toVector3","optionalResult","RotationOrders","Layers","mask","channel","enable","enableAll","toggle","disable","disableAll","test","layers","Matrix3","setFromMatrix4","g","getNormalMatrix","matrix4","transposeIntoArray","setUvTransform","rotation","cx","cy","rotate","translate","isMatrix3","_object3DId","_q1","_target","_position","_scale","_xAxis","_yAxis","_zAxis","_addedEvent","_removedEvent","Object3D","defineProperty","uuid","name","parent","children","DefaultUp","defineProperties","configurable","enumerable","modelViewMatrix","normalMatrix","matrixAutoUpdate","DefaultMatrixAutoUpdate","matrixWorldNeedsUpdate","visible","castShadow","receiveShadow","frustumCulled","renderOrder","animations","userData","create","isObject3D","onBeforeRender","onAfterRender","updateMatrix","setRotationFromAxisAngle","setRotationFromEuler","setRotationFromMatrix","setRotationFromQuaternion","rotateOnAxis","rotateOnWorldAxis","rotateX","rotateY","rotateZ","translateOnAxis","distance","translateX","translateY","translateZ","localToWorld","vector","worldToLocal","updateWorldMatrix","isCamera","isLight","object","remove","clear","attach","getObjectById","id","getObjectByProperty","getObjectByName","getWorldPosition","getWorldQuaternion","getWorldScale","getWorldDirection","raycast","traverse","traverseVisible","traverseAncestors","updateMatrixWorld","force","updateParents","updateChildren","toJSON","meta","isRootObject","output","geometries","materials","textures","images","shapes","skeletons","metadata","version","generator","serialize","library","element","JSON","stringify","isInstancedMesh","count","instanceMatrix","isMesh","isLine","isPoints","geometry","parameters","Array","isArray","shape","isSkinnedMesh","bindMode","bindMatrix","skeleton","material","uuids","animation","extractFromCache","cache","values","key","data","recursive","source","parse","child","Scene","super","background","environment","fog","overrideMaterial","autoUpdate","__THREE_DEVTOOLS__","CustomEvent","detail","isScene","_colorKeywords","_hslA","_hslB","hue2rgb","SRGBToLinear","LinearToSRGB","Color","setRGB","isColor","setHex","setStyle","hex","setHSL","style","handleAlpha","string","parseFloat","exec","color","components","parseInt","size","charAt","setColorName","copyGammaToLinear","gammaFactor","copyLinearToGamma","safeInverse","convertGammaToLinear","convertLinearToGamma","copySRGBToLinear","copyLinearToSRGB","convertSRGBToLinear","convertLinearToSRGB","getHex","getHexString","getHSL","hue","saturation","lightness","delta","getStyle","offsetHSL","addColors","color1","color2","lerpColors","lerpHSL","normalized","NAMES","Light","intensity","groundColor","decay","penumbra","shadow","Vector2","width","height","rotateAround","center","isVector2","Vector4","setW","setAxisAngleFromQuaternion","setAxisAngleFromRotationMatrix","epsilon","epsilon2","isVector4","Box3","setFromArray","minX","minY","minZ","maxX","maxY","maxZ","setFromBufferAttribute","setFromPoints","points","makeEmpty","il","expandByPoint","setFromCenterAndSize","halfSize","setFromObject","expandByObject","box","isEmpty","getCenter","getSize","point","expandByVector","expandByScalar","boundingBox","computeBoundingBox","_box","union","containsPoint","containsBox","getParameter","intersectsBox","intersectsSphere","sphere","clampPoint","intersectsPlane","plane","constant","intersectsTriangle","triangle","_center","_extents","_v0","_v2","_f0","_f1","_f2","axes","satForAxes","_triangleNormal","distanceToPoint","getBoundingSphere","intersect","_points","isBox3","_testAxis","v0","extents","j","p0","p1","p2","Sphere","optionalCenter","maxRadiusSq","radiusSum","deltaLengthSq","getBoundingBox","_vector1","_vector2","_normalMatrix","Plane","setComponents","setFromNormalAndCoplanarPoint","setFromCoplanarPoints","inverseNormalLength","distanceToSphere","projectPoint","intersectLine","line","direction","start","intersectsLine","startSign","endSign","end","coplanarPoint","optionalNormalMatrix","referencePoint","isPlane","_sphere","Frustum","p3","p4","p5","planes","frustum","setFromProjectionMatrix","me0","me1","me2","me3","me4","me5","me6","me7","me8","me9","me10","me11","me12","me13","me14","me15","intersectsObject","boundingSphere","computeBoundingSphere","intersectsSprite","sprite","negRadius","_projScreenMatrix","_lightPositionWorld","_lookTarget","Camera","PerspectiveCamera","fov","aspect","zoom","focus","view","filmGauge","filmOffset","updateProjectionMatrix","isPerspectiveCamera","setFocalLength","focalLength","vExtentSlope","getFilmHeight","atan","getFocalLength","tan","getEffectiveFOV","getFilmWidth","setViewOffset","fullWidth","fullHeight","enabled","offsetX","offsetY","clearViewOffset","skew","PointLightShadow","bias","normalBias","mapSize","map","mapPass","needsUpdate","_frustum","_frameExtents","_viewportCount","_viewports","getViewportCount","getFrustum","updateMatrices","light","shadowCamera","shadowMatrix","getViewport","viewportIndex","getFrameExtents","_cubeDirections","_cubeUps","isPointLightShadow","PointLight","power","isPointLight","AddEquation","RepeatWrapping","ClampToEdgeWrapping","MirroredRepeatWrapping","NearestFilter","LinearFilter","UnsignedShortType","UnsignedIntType","FloatType","HalfFloatType","UnsignedInt248Type","RGBFormat","RGBAFormat","DepthFormat","DepthStencilFormat","LinearEncoding","KeepStencilOp","GLSL3","_canvas","textureId","Texture","image","DEFAULT_IMAGE","mapping","DEFAULT_MAPPING","wrapS","wrapT","magFilter","minFilter","LinearMipmapLinearFilter","format","UnsignedByteType","anisotropy","encoding","mipmaps","internalFormat","repeat","generateMipmaps","premultiplyAlpha","flipY","unpackAlignment","onUpdate","wrap","url","isDataTexture","serializeImage","dispose","transformUv","uv","HTMLImageElement","HTMLCanvasElement","ImageBitmap","src","canvas","document","createElementNS","context","getContext","ImageData","putImageData","drawImage","toDataURL","ImageUtils","isTexture","DataTexture","WebGLAnimation","isAnimating","animationLoop","requestId","onAnimationFrame","time","frame","requestAnimationFrame","stop","cancelAnimationFrame","setAnimationLoop","setContext","WebGLAttributes","gl","capabilities","isWebGL2","buffers","WeakMap","get","isInterleavedBufferAttribute","deleteBuffer","buffer","delete","bufferType","isGLBufferAttribute","cached","bytesPerElement","elementSize","usage","createBuffer","bindBuffer","bufferData","onUploadCallback","Float32Array","Float64Array","Uint16Array","isFloat16BufferAttribute","Int16Array","Uint32Array","Int32Array","Int8Array","Uint8Array","BYTES_PER_ELEMENT","updateRange","bufferSubData","subarray","updateBuffer","BufferAttribute","itemSize","TypeError","Int8BufferAttribute","Uint8BufferAttribute","Uint8ClampedBufferAttribute","Uint8ClampedArray","Int16BufferAttribute","Uint16BufferAttribute","Int32BufferAttribute","Uint32BufferAttribute","Float16BufferAttribute","Float32BufferAttribute","Float64BufferAttribute","arrayMax","isBufferAttribute","setUsage","copyAt","index1","index2","copyArray","copyColorsArray","colors","copyVector2sArray","vectors","copyVector3sArray","copyVector4sArray","setXY","setXYZ","setXYZW","onUpload","_id","_obj","_offset","_boxMorphTargets","BufferGeometry","attributes","morphAttributes","morphTargetsRelative","groups","drawRange","Infinity","isBufferGeometry","getIndex","setIndex","getAttribute","setAttribute","deleteAttribute","hasAttribute","addGroup","materialIndex","clearGroups","setDrawRange","tangent","morphAttributesPosition","morphAttribute","isNaN","jl","computeFaceNormals","computeTangents","indices","positions","normals","uvs","nVertices","tangents","tan1","tan2","vA","vB","vC","uvA","uvB","uvC","sdir","tdir","handleTriangle","isFinite","group","tmp2","n2","handleVertex","computeVertexNormals","positionAttribute","normalAttribute","pA","pB","pC","nA","nB","nC","cb","ab","normalizeNormals","merge","attributeArray1","attribute2","attributeArray2","attributeOffset","toNonIndexed","convertBufferAttribute","array2","geometry2","newAttribute","morphArray","keys","attributeData","hasMorphAttributes","attributeArray","BoxGeometry","depth","widthSegments","heightSegments","depthSegments","scope","vertices","numberOfVertices","groupStart","buildPlane","u","udir","vdir","gridX","gridY","segmentWidth","segmentHeight","widthHalf","heightHalf","depthHalf","gridX1","gridY1","vertexCounter","groupCount","PlaneGeometry","width_half","height_half","segment_width","segment_height","materialId","Material","blending","side","vertexColors","opacity","transparent","blendSrc","blendDst","blendEquation","blendSrcAlpha","blendDstAlpha","blendEquationAlpha","depthFunc","depthTest","depthWrite","stencilWriteMask","stencilFunc","stencilRef","stencilFuncMask","stencilFail","stencilZFail","stencilZPass","stencilWrite","clippingPlanes","clipIntersection","clipShadows","shadowSide","colorWrite","precision","polygonOffset","polygonOffsetFactor","polygonOffsetUnits","dithering","alphaTest","premultipliedAlpha","toneMapped","cloneUniforms","property","mergeUniforms","uniforms","merged","isMaterial","onBeforeCompile","customProgramCacheKey","setValues","newValue","flatShading","currentValue","isRoot","roughness","metalness","sheen","emissive","emissiveIntensity","specular","shininess","clearcoat","clearcoatRoughness","clearcoatMap","clearcoatRoughnessMap","clearcoatNormalMap","clearcoatNormalScale","matcap","alphaMap","lightMap","lightMapIntensity","aoMap","aoMapIntensity","bumpMap","bumpScale","normalMap","normalMapType","normalScale","displacementMap","displacementScale","displacementBias","roughnessMap","metalnessMap","emissiveMap","specularMap","envMap","reflectivity","refractionRatio","combine","envMapIntensity","gradientMap","sizeAttenuation","linewidth","dashSize","gapSize","wireframe","wireframeLinewidth","wireframeLinecap","wireframeLinejoin","morphTargets","morphNormals","skinning","srcPlanes","dstPlanes","UniformsUtils","ShaderMaterial","defines","vertexShader","fragmentShader","lights","clipping","extensions","derivatives","fragDepth","drawBuffers","shaderTextureLOD","defaultAttributeValues","index0AttributeName","uniformsNeedUpdate","glslVersion","isShaderMaterial","_segCenter","_segDir","_diff","_edge1","_edge2","_normal","Ray","origin","ray","at","recast","closestPointToPoint","directionDistance","distanceSqToPoint","distanceSqToSegment","optionalPointOnRay","optionalPointOnSegment","segExtent","a01","b0","s0","sqrDist","extDet","invDet","intersectSphere","tca","radius2","thc","t0","t1","distanceToPlane","intersectPlane","distToPoint","intersectBox","tmin","tmax","tymin","tymax","tzmin","tzmax","invdirx","invdiry","invdirz","intersectTriangle","backfaceCulling","sign","DdN","DdQxE2","DdE1xQ","QdN","_v3","_vab","_vac","_vbc","_vap","_vbp","_vcp","Triangle","targetLengthSq","dot00","dot01","dot02","dot11","dot12","denom","invDenom","getBarycoord","uv1","uv2","uv3","setFromPointsAndIndices","i0","i1","i2","getArea","getMidpoint","getNormal","getPlane","getUV","isFrontFacing","d4","vc","d5","d6","vb","va","MeshBasicMaterial","isMeshBasicMaterial","_inverseMatrix","_ray","_vA","_vB","_vC","_tempA","_tempB","_tempC","_morphA","_morphB","_morphC","_uvA","_uvB","_uvC","_intersectionPoint","_intersectionPointWorld","Mesh","updateMorphTargets","checkBufferGeometryIntersection","raycaster","morphPosition","morphInfluences","morphTargetInfluences","influence","boneTransform","intersection","checkIntersection","face","morphTargetDictionary","ml","String","intersects","groupMaterial","faceIndex","isGeometry","ShaderChunk","alphamap_fragment","alphamap_pars_fragment","alphatest_fragment","aomap_fragment","aomap_pars_fragment","begin_vertex","beginnormal_vertex","bsdfs","bumpmap_pars_fragment","clipping_planes_fragment","clipping_planes_pars_fragment","clipping_planes_pars_vertex","clipping_planes_vertex","color_fragment","color_pars_fragment","color_pars_vertex","color_vertex","common","cube_uv_reflection_fragment","defaultnormal_vertex","displacementmap_pars_vertex","displacementmap_vertex","emissivemap_fragment","emissivemap_pars_fragment","encodings_fragment","encodings_pars_fragment","envmap_fragment","envmap_common_pars_fragment","envmap_pars_fragment","envmap_pars_vertex","envmap_physical_pars_fragment","envmap_vertex","fog_vertex","fog_pars_vertex","fog_fragment","fog_pars_fragment","gradientmap_pars_fragment","lightmap_fragment","lightmap_pars_fragment","lights_lambert_vertex","lights_pars_begin","lights_toon_fragment","lights_toon_pars_fragment","lights_phong_fragment","lights_phong_pars_fragment","lights_physical_fragment","lights_physical_pars_fragment","lights_fragment_begin","lights_fragment_maps","lights_fragment_end","logdepthbuf_fragment","logdepthbuf_pars_fragment","logdepthbuf_pars_vertex","logdepthbuf_vertex","map_fragment","map_pars_fragment","map_particle_fragment","map_particle_pars_fragment","metalnessmap_fragment","metalnessmap_pars_fragment","morphnormal_vertex","morphtarget_pars_vertex","morphtarget_vertex","normal_fragment_begin","normal_fragment_maps","normalmap_pars_fragment","clearcoat_normal_fragment_begin","clearcoat_normal_fragment_maps","clearcoat_pars_fragment","packing","premultiplied_alpha_fragment","project_vertex","dithering_fragment","dithering_pars_fragment","roughnessmap_fragment","roughnessmap_pars_fragment","shadowmap_pars_fragment","shadowmap_pars_vertex","shadowmap_vertex","shadowmask_pars_fragment","skinbase_vertex","skinning_pars_vertex","skinning_vertex","skinnormal_vertex","specularmap_fragment","specularmap_pars_fragment","tonemapping_fragment","tonemapping_pars_fragment","transmissionmap_fragment","transmissionmap_pars_fragment","uv_pars_fragment","uv_pars_vertex","uv_vertex","uv2_pars_fragment","uv2_pars_vertex","uv2_vertex","worldpos_vertex","background_frag","background_vert","cube_frag","cube_vert","depth_frag","depth_vert","distanceRGBA_frag","distanceRGBA_vert","equirect_frag","equirect_vert","linedashed_frag","linedashed_vert","meshbasic_frag","meshbasic_vert","meshlambert_frag","meshlambert_vert","meshmatcap_frag","meshmatcap_vert","meshtoon_frag","meshtoon_vert","meshphong_frag","meshphong_vert","meshphysical_frag","meshphysical_vert","normal_frag","normal_vert","points_frag","points_vert","shadow_frag","shadow_vert","sprite_frag","sprite_vert","UniformsLib","diffuse","uvTransform","uv2Transform","specularmap","envmap","flipEnvMap","maxMipLevel","aomap","lightmap","emissivemap","bumpmap","normalmap","displacementmap","roughnessmap","metalnessmap","gradientmap","fogDensity","fogNear","fogFar","fogColor","ambientLightColor","lightProbe","directionalLights","properties","directionalLightShadows","shadowBias","shadowNormalBias","shadowRadius","shadowMapSize","directionalShadowMap","directionalShadowMatrix","spotLights","coneCos","penumbraCos","spotLightShadows","spotShadowMap","spotShadowMatrix","pointLights","pointLightShadows","shadowCameraNear","shadowCameraFar","pointShadowMap","pointShadowMatrix","hemisphereLights","skyColor","rectAreaLights","ltc_1","ltc_2","ShaderLib","basic","lambert","phong","standard","toon","dashed","totalSize","t2D","cube","equirect","tEquirect","distanceRGBA","referencePosition","nearDistance","farDistance","WebGLBackground","renderer","cubemaps","state","objects","clearColor","planeMesh","boxMesh","clearAlpha","currentBackground","currentBackgroundVersion","currentTonemapping","setClear","getClearColor","setClearColor","getClearAlpha","setClearAlpha","render","renderList","scene","forceClear","xr","session","getSession","environmentBlendMode","autoClear","autoClearColor","autoClearDepth","autoClearStencil","isCubeTexture","isWebGLCubeRenderTarget","texture","_needsFlipEnvMap","toneMapping","unshift","WebGLBindingStates","maxVertexAttributes","extension","vaoAvailable","bindingStates","defaultState","createBindingState","currentState","bindVertexArrayObject","vao","bindVertexArray","bindVertexArrayOES","deleteVertexArrayObject","deleteVertexArray","deleteVertexArrayOES","newAttributes","enabledAttributes","attributeDivisors","program","initAttributes","enableAttribute","enableAttributeAndDivisor","meshPerAttribute","enableVertexAttribArray","disableUnusedAttributes","disableVertexAttribArray","vertexAttribPointer","stride","vertexAttribIPointer","reset","resetDefaultState","setup","updateBuffers","programMap","stateMap","createVertexArray","createVertexArrayOES","getBindingState","cachedAttributes","geometryAttributes","attributesNum","cachedAttribute","geometryAttribute","saveCache","isInstancedBufferGeometry","programAttributes","getAttributes","materialDefaultAttributeValues","programAttribute","isInstancedInterleavedBuffer","_maxInstanceCount","isInstancedBufferAttribute","instanceColor","vertexAttrib2fv","vertexAttrib3fv","vertexAttrib4fv","vertexAttrib1fv","setupVertexAttributes","geometryId","programId","releaseStatesOfGeometry","releaseStatesOfProgram","WebGLBufferRenderer","info","mode","setMode","drawArrays","renderInstances","primcount","methodName","WebGLCapabilities","maxAnisotropy","getMaxPrecision","getShaderPrecisionFormat","WebGL2RenderingContext","WebGL2ComputeRenderingContext","maxPrecision","logarithmicDepthBuffer","maxTextures","maxVertexTextures","maxTextureSize","maxCubemapSize","maxAttributes","maxVertexUniforms","maxVaryings","maxFragmentUniforms","vertexTextures","floatFragmentTextures","has","getMaxAnisotropy","MAX_TEXTURE_MAX_ANISOTROPY_EXT","floatVertexTextures","maxSamples","WebGLClipping","globalState","numGlobalPlanes","localClippingEnabled","renderingShadows","viewNormalMatrix","uniform","resetGlobalState","numPlanes","numIntersection","projectPlanes","skipTransform","nPlanes","dstArray","flatSize","viewMatrix","i4","init","enableLocalClipping","beginShadows","endShadows","setState","useCache","materialProperties","nGlobal","lGlobal","clippingState","physical","transmission","transmissionMap","WebGLRenderTarget","options","scissor","scissorTest","viewport","depthBuffer","stencilBuffer","depthTexture","setTexture","setSize","isWebGLRenderTarget","CubeCamera","renderTarget","cameraPX","cameraNX","cameraPY","cameraNY","cameraPZ","cameraNZ","currentXrEnabled","currentRenderTarget","getRenderTarget","setRenderTarget","CubeTexture","WebGLCubeRenderTarget","dummy","isInteger","fromEquirectangularTexture","shader","mesh","currentMinFilter","stencil","WebGLCubeMaps","mapTextureMapping","onTextureDispose","cubemap","WebGLExtensions","getExtension","WebGLGeometries","wireframeAttributes","onGeometryDispose","memory","updateWireframeAttribute","geometryIndex","geometryPosition","previousAttribute","getWireframeAttribute","currentAttribute","WebGLIndexedBufferRenderer","drawElements","WebGLInfo","calls","triangles","lines","programs","autoReset","instanceCount","numericalSort","absNumericalSort","WebGLMorphtargets","influencesList","workInfluences","objectInfluences","influences","sort","MAX_SAFE_INTEGER","morphInfluencesSum","morphBaseInfluence","getUniforms","setValue","WebGLObjects","updateMap","onInstancedMeshDispose","instancedMesh","buffergeometry","DataTexture2DArray","wrapR","isDataTexture2DArray","DataTexture3D","isDataTexture3D","emptyTexture","emptyTexture2dArray","emptyTexture3d","emptyCubeTexture","arrayCacheF32","arrayCacheI32","mat4array","mat3array","mat2array","flatten","nBlocks","blockSize","firstElem","arraysEqual","allocTexUnits","allocateTextureUnit","setValueV1f","uniform1f","addr","setValueV2f","uniform2f","uniform2fv","setValueV3f","uniform3f","uniform3fv","setValueV4f","uniform4f","uniform4fv","setValueM2","uniformMatrix2fv","setValueM3","uniformMatrix3fv","setValueM4","uniformMatrix4fv","setValueT1","unit","uniform1i","safeSetTexture2D","setValueT2DArray1","setTexture2DArray","setValueT3D1","setTexture3D","setValueT6","safeSetTextureCube","setValueV1i","setValueV2i","uniform2iv","setValueV3i","uniform3iv","setValueV4i","uniform4iv","setValueV1ui","uniform1ui","setValueV1fArray","uniform1fv","setValueV1iArray","uniform1iv","setValueV2iArray","setValueV3iArray","setValueV4iArray","setValueV2fArray","setValueV3fArray","setValueV4fArray","setValueM2Array","setValueM3Array","setValueM4Array","setValueT1Array","units","setValueT6Array","SingleUniform","activeInfo","getSingularSetter","PureArrayUniform","getPureArraySetter","StructuredUniform","seq","updateCache","RePathPart","addUniform","container","uniformObject","parseUniform","path","pathLength","lastIndex","match","matchEnd","idIsIndex","subscript","next","WebGLUniforms","getProgramParameter","getActiveUniform","getUniformLocation","WebGLShader","createShader","shaderSource","compileShader","setOptional","upload","seqWithValue","programIdCount","getEncodingComponents","getShaderErrors","status","getShaderParameter","getShaderInfoLog","trim","split","join","addLineNumbers","getShaderSource","getTexelDecodingFunction","functionName","getTexelEncodingFunction","getToneMappingFunction","toneMappingName","filterEmptyLine","replaceLightNums","replace","numDirLights","numSpotLights","numRectAreaLights","numPointLights","numHemiLights","numDirLightShadows","numSpotLightShadows","numPointLightShadows","replaceClippingPlaneNums","numClippingPlanes","numClipIntersection","includePattern","resolveIncludes","includeReplacer","include","deprecatedUnrollLoopPattern","unrollLoopPattern","unrollLoops","loopReplacer","deprecatedLoopReplacer","snippet","generatePrecision","precisionstring","WebGLProgram","cacheKey","shadowMapTypeDefine","shadowMapType","generateShadowMapTypeDefine","envMapTypeDefine","envMapMode","generateEnvMapTypeDefine","envMapModeDefine","generateEnvMapModeDefine","envMapBlendingDefine","generateEnvMapBlendingDefine","gammaFactorDefine","customExtensions","extensionDerivatives","envMapCubeUV","tangentSpaceNormalMap","shaderID","extensionFragDepth","rendererExtensionFragDepth","extensionDrawBuffers","rendererExtensionDrawBuffers","extensionShaderTextureLOD","rendererExtensionShaderTextureLod","filter","generateExtensions","customDefines","chunks","generateDefines","createProgram","prefixVertex","prefixFragment","versionString","isRawShaderMaterial","shaderName","instancing","instancingColor","supportsVertexTextures","maxBones","useFog","fogExp2","objectSpaceNormalMap","vertexTangents","vertexUvs","uvsVertexOnly","useVertexTexture","doubleSided","flipSided","shadowMapEnabled","physicallyCorrectLights","mapEncoding","matcapEncoding","envMapEncoding","emissiveMapEncoding","lightMapEncoding","outputEncoding","depthPacking","fragmentGlsl","glVertexShader","glFragmentShader","attachShader","bindAttribLocation","linkProgram","debug","checkShaderErrors","programLog","getProgramInfoLog","vertexLog","fragmentLog","runnable","haveDiagnostics","vertexErrors","fragmentErrors","getError","diagnostics","prefix","cachedUniforms","deleteShader","getActiveAttrib","getAttribLocation","fetchAttributeLocations","destroy","deleteProgram","usedTimes","WebGLPrograms","shaderIDs","MeshDepthMaterial","MeshDistanceMaterial","MeshNormalMaterial","MeshLambertMaterial","MeshPhongMaterial","MeshToonMaterial","MeshStandardMaterial","MeshPhysicalMaterial","MeshMatcapMaterial","LineBasicMaterial","LineDashedMaterial","PointsMaterial","ShadowMaterial","SpriteMaterial","parameterNames","getTextureEncodingFromMap","getParameters","shadows","isMeshStandardMaterial","bones","nVertexUniforms","nVertexMatrices","getMaxBones","isFogExp2","maxMorphTargets","maxMorphNormals","directional","spot","rectArea","hemi","shadowMap","getProgramCacheKey","acquireProgram","pl","preexistingProgram","releaseProgram","pop","WebGLProperties","painterSortStable","groupOrder","reversePainterSortStable","WebGLRenderList","renderItems","renderItemsIndex","opaque","defaultProgram","getNextRenderItem","renderItem","finish","customOpaqueSort","customTransparentSort","WebGLRenderLists","lists","renderCallDepth","list","UniformsCache","halfWidth","halfHeight","nextVersion","shadowCastingLightsFirst","lightA","lightB","WebGLLights","shadowCache","ShadowUniformsCache","hash","directionalLength","pointLength","spotLength","rectAreaLength","hemiLength","numDirectionalShadows","numPointShadows","numSpotShadows","ambient","probe","directionalShadow","spotShadow","rectAreaLTC1","rectAreaLTC2","pointShadow","vector3","matrix42","isAmbientLight","isLightProbe","sh","coefficients","isDirectionalLight","shadowUniforms","isSpotLight","isRectAreaLight","isHemisphereLight","LTC_FLOAT_1","LTC_FLOAT_2","LTC_HALF_1","LTC_HALF_2","setupView","WebGLRenderState","lightsArray","shadowsArray","setupLights","setupLightsView","pushLight","pushShadow","shadowLight","WebGLRenderStates","renderStates","renderState","isMeshDepthMaterial","WebGLShadowMap","_renderer","_objects","_shadowMapSize","_viewportSize","_viewport","_depthMaterials","_distanceMaterials","_materialCache","shadowMaterialVertical","SAMPLE_RATE","HALF_SAMPLE_RATE","shadow_pass","resolution","shadowMaterialHorizontal","HORIZONTAL_PASS","fullScreenTri","fullScreenMesh","VSMPass","renderBufferDirect","getDepthMaterialVariant","useMorphing","useSkinning","useInstancing","getDistanceMaterialVariant","getDepthMaterial","result","getMaterialVariant","customMaterial","customDepthMaterial","customDistanceMaterial","keyA","keyB","materialsForVariant","cachedMaterial","isMeshDistanceMaterial","renderObject","k","kl","depthMaterial","activeCubeFace","getActiveCubeFace","activeMipmapLevel","getActiveMipmapLevel","_state","setBlending","setTest","setScissorTest","shadowFrameExtents","pars","viewportCount","vp","WebGLState","colorBuffer","locked","currentColorMask","currentColorClear","setMask","colorMask","setLocked","lock","currentDepthMask","currentDepthFunc","currentDepthClear","depthMask","setFunc","clearDepth","currentStencilMask","currentStencilFunc","currentStencilRef","currentStencilFuncMask","currentStencilFail","currentStencilZFail","currentStencilZPass","currentStencilClear","stencilTest","stencilMask","setOp","stencilOp","clearStencil","enabledCapabilities","currentProgram","currentBlendingEnabled","currentBlending","currentBlendEquation","currentBlendSrc","currentBlendDst","currentBlendEquationAlpha","currentBlendSrcAlpha","currentBlendDstAlpha","currentPremultipledAlpha","currentFlipSided","currentCullFace","currentLineWidth","currentPolygonOffsetFactor","currentPolygonOffsetUnits","lineWidthAvailable","glVersion","currentTextureSlot","currentBoundTextures","currentScissor","currentViewport","createTexture","bindTexture","texParameteri","texImage2D","emptyTextures","setFlipSided","setCullFace","equationToGL","MIN_EXT","MAX_EXT","factorToGL","blendEquationSeparate","blendFuncSeparate","blendFunc","frontFace","cullFace","setPolygonOffset","factor","activeTexture","webglSlot","useProgram","setMaterial","frontFaceCW","setLineWidth","lineWidth","webglType","webglTexture","boundTexture","unbindTexture","compressedTexImage2D","apply","texImage3D","WebGLTextures","_gl","utils","_videoTextures","useOffscreenCanvas","OffscreenCanvas","err","createCanvas","resizeImage","needsPowerOfTwo","needsNewCanvas","maxSize","textureNeedsGenerateMipmaps","supportsMips","generateMipmap","__maxMipLevel","log2","getInternalFormat","internalFormatName","glFormat","glType","filterFallback","textureProperties","__webglInit","deleteTexture","__webglTexture","deallocateTexture","isVideoTexture","onRenderTargetDispose","renderTargetProperties","deleteFramebuffer","__webglFramebuffer","__webglDepthbuffer","deleteRenderbuffer","__webglMultisampledFramebuffer","__webglColorRenderbuffer","__webglDepthRenderbuffer","deallocateRenderTarget","textureUnits","setTexture2D","slot","updateVideoTexture","__version","complete","uploadTexture","setTextureCube","initTexture","pixelStorei","isCompressed","isCompressedTexture","cubeImage","convert","glInternalFormat","setTextureParameters","mipmap","mipmapImage","uploadCubeTexture","wrappingToGL","filterToGL","textureType","__currentAnisotropy","texParameterf","TEXTURE_MAX_ANISOTROPY_EXT","textureNeedsPowerOfTwo","isDepthTexture","setupFrameBufferTexture","framebuffer","attachment","textureTarget","bindFramebuffer","framebufferTexture2D","setupRenderBufferStorage","renderbuffer","isMultisample","bindRenderbuffer","samples","getRenderTargetSamples","renderbufferStorageMultisample","renderbufferStorage","framebufferRenderbuffer","isWebGLMultisampleRenderTarget","warnedTexture2D","warnedTextureCube","textureUnit","resetTextureUnits","setupRenderTarget","isCube","isRenderTarget3D","createFramebuffer","createRenderbuffer","glTextureType","webglDepthTexture","setupDepthTexture","setupDepthRenderbuffer","updateRenderTargetMipmap","updateMultisampleRenderTarget","blitFramebuffer","WebGLUtils","HALF_FLOAT_OES","COMPRESSED_RGB_S3TC_DXT1_EXT","COMPRESSED_RGBA_S3TC_DXT1_EXT","COMPRESSED_RGBA_S3TC_DXT3_EXT","COMPRESSED_RGBA_S3TC_DXT5_EXT","COMPRESSED_RGB_PVRTC_4BPPV1_IMG","COMPRESSED_RGB_PVRTC_2BPPV1_IMG","COMPRESSED_RGBA_PVRTC_4BPPV1_IMG","COMPRESSED_RGBA_PVRTC_2BPPV1_IMG","COMPRESSED_RGB_ETC1_WEBGL","COMPRESSED_RGB8_ETC2","COMPRESSED_RGBA8_ETC2_EAC","UNSIGNED_INT_24_8_WEBGL","ArrayCamera","cameras","isArrayCamera","Group","WebXRController","_targetRay","_grip","_hand","WebXRManager","framebufferScaleFactor","referenceSpace","referenceSpaceType","pose","controllers","inputSourcesMap","Map","cameraL","cameraR","cameraVR","_currentDepthNear","_currentDepthFar","onSessionEvent","controller","inputSource","onSessionEnd","forEach","disconnect","setFramebuffer","isPresenting","onInputSourcesChange","inputSources","removed","added","getController","getTargetRaySpace","getControllerGrip","getGripSpace","getHand","getHandSpace","setFramebufferScaleFactor","setReferenceSpaceType","getReferenceSpace","setSession","async","getContextAttributes","xrCompatible","makeXRCompatible","layerInit","antialias","baseLayer","XRWebGLLayer","updateRenderState","requestReferenceSpace","cameraLPos","cameraRPos","updateCamera","getCamera","depthNear","depthFar","ipd","projL","projR","topFov","bottomFov","leftFov","rightFov","zOffset","xOffset","near2","far2","left2","right2","top2","bottom2","setProjectionFromUnion","onAnimationFrameCallback","getViewerPose","views","cameraVRNeedsUpdate","transform","WebGLMaterials","refreshUniformsCommon","uvScaleMap","uv2ScaleMap","refreshUniformsStandard","refreshFogUniforms","isFog","density","refreshMaterialUniforms","pixelRatio","isMeshLambertMaterial","refreshUniformsLambert","isMeshToonMaterial","refreshUniformsToon","isMeshPhongMaterial","refreshUniformsPhong","isMeshPhysicalMaterial","refreshUniformsPhysical","isMeshMatcapMaterial","refreshUniformsMatcap","refreshUniformsDepth","refreshUniformsDistance","isMeshNormalMaterial","refreshUniformsNormal","isLineBasicMaterial","refreshUniformsLine","isLineDashedMaterial","refreshUniformsDash","isPointsMaterial","refreshUniformsPoints","isSpriteMaterial","refreshUniformsSprites","isShadowMaterial","isGroup","joints","inputState","pinching","inputPose","gripPose","handPose","targetRay","grip","hand","visibilityState","inputjoint","jointPose","getJointPose","jointName","joint","jointRadius","indexTip","thumbTip","distanceToPinch","threshold","handedness","getPose","targetRaySpace","gripSpace","Spherical","other","makeSafe","EPS","setFromCartesianCoords","OrbitControls","domElement","quat","quatInverse","lastPosition","lastQuaternion","twoPI","minDistance","maxDistance","minZoom","maxZoom","minPolarAngle","maxPolarAngle","minAzimuthAngle","maxAzimuthAngle","enableDamping","dampingFactor","enableZoom","zoomSpeed","enableRotate","rotateSpeed","enablePan","panSpeed","screenSpacePanning","keyPanSpeed","autoRotate","autoRotateSpeed","LEFT","UP","RIGHT","BOTTOM","mouseButtons","MIDDLE","touches","ONE","TWO","target0","position0","zoom0","_domElementKeyEvents","getPolarAngle","spherical","getAzimuthalAngle","listenToKeyEvents","onKeyDown","saveState","changeEvent","STATE","NONE","rotateLeft","sphericalDelta","panOffset","zoomChanged","onContextMenu","onPointerDown","onMouseWheel","onTouchStart","onTouchEnd","onTouchMove","ownerDocument","onPointerMove","onPointerUp","startEvent","endEvent","ROTATE","DOLLY","PAN","TOUCH_ROTATE","TOUCH_PAN","TOUCH_DOLLY_PAN","TOUCH_DOLLY_ROTATE","rotateStart","rotateEnd","rotateDelta","panStart","panEnd","panDelta","dollyStart","dollyEnd","dollyDelta","getZoomScale","rotateUp","panLeft","objectMatrix","panUp","pan","deltaX","deltaY","targetDistance","clientHeight","isOrthographicCamera","clientWidth","dollyOut","dollyScale","dollyIn","handleMouseDownRotate","clientX","clientY","handleMouseDownPan","handleTouchStartRotate","pageX","pageY","handleTouchStartPan","handleTouchStartDolly","handleTouchMoveRotate","handleTouchMovePan","handleTouchMoveDolly","pointerType","mouseAction","preventDefault","window","button","handleMouseDownDolly","ctrlKey","metaKey","shiftKey","onMouseDown","handleMouseMoveRotate","handleMouseMoveDolly","handleMouseMovePan","onMouseMove","stopPropagation","handleMouseWheel","keyCode","handleKeyDown","handleTouchStartDollyPan","handleTouchStartDollyRotate","handleTouchMoveDollyPan","handleTouchMoveDollyRotate","MapControls","colorToString","forceCSSHex","colorFormat","__state","conversionName","toFixed","str","ARR_EACH","ARR_SLICE","Common","BREAK","extend","each","obj","isObject","isUndefined","bind","defaults","toCall","args","itr","_key","defer","fnc","setTimeout","debounce","func","callImmediately","timeout","delayed","callNow","clearTimeout","isNull","_isNaN","isNumber","isString","isBoolean","isFunction","Function","INTERPRETATIONS","litmus","conversions","THREE_CHAR_HEX","read","original","space","write","SIX_CHAR_HEX","CSS_RGB","CSS_RGBA","HEX","RGB_ARRAY","RGBA_ARRAY","RGBA_OBJ","RGB_OBJ","HSVA_OBJ","HSV_OBJ","toReturn","interpret","family","conversion","tmpComponent","ColorMath","hsv_to_rgb","hi","rgb_to_hsv","NaN","rgb_to_hex","hex_with_component","component_from_hex","componentIndex","_typeof","Symbol","iterator","classCallCheck","instance","Constructor","createClass","props","descriptor","writable","protoProps","staticProps","receiver","desc","getOwnPropertyDescriptor","getPrototypeOf","getter","inherits","subClass","superClass","setPrototypeOf","__proto__","possibleConstructorReturn","self","ReferenceError","defineRGBComponent","component","componentHexIndex","recalculateRGB","defineHSVComponent","recalculateHSV","COMPONENTS","Controller","initialValue","createElement","__onChange","__onFinishChange","updateDisplay","getValue","EVENT_MAP_INV","HTMLEvents","MouseEvents","KeyboardEvents","CSS_VALUE_PIXELS","cssValueToPixels","val","dom","makeSelectable","elem","selectable","onselectstart","MozUserSelect","KhtmlUserSelect","unselectable","makeFullscreen","hor","vert","vertical","horizontal","fakeEvent","eventType","aux","params","className","evt","createEvent","initMouseEvent","bubbles","cancelable","clickCount","initKeyboardEvent","initKeyEvent","altKey","charCode","initEvent","newBool","bool","attachEvent","unbind","detachEvent","addClass","classes","removeClass","removeAttribute","hasClass","RegExp","getWidth","getComputedStyle","getHeight","getOffset","el","offsetParent","offsetLeft","offsetTop","isActive","activeElement","href","BooleanController","_Controller","_this2","_this","__prev","__checkbox","appendChild","checked","OptionController","opts","__select","opt","innerHTML","desiredValue","selectedIndex","StringController","onChange","__input","blur","numDecimals","NumberController","_params","__min","__max","__step","__impliedStep","LN10","__precision","_v","minValue","maxValue","stepValue","NumberControllerBox","_NumberController","__truncationSuspended","prevY","onFinish","onMouseDrag","diff","onMouseUp","attempted","decimals","tenTo","o1","o2","NumberControllerSlider","bgRect","__background","getBoundingClientRect","__foreground","pct","FunctionController","text","__button","fire","ColorController","__color","__temp","__selector","__saturation_field","__field_knob","__field_knob_border","__hue_knob","__hue_field","__input_textShadow","onBlur","valueField","fieldDown","setSV","fieldUpSV","fieldDownH","setH","fieldUpH","toOriginal","fieldRect","_ref","padding","backgroundColor","boxShadow","border","borderRadius","zIndex","borderRight","marginRight","display","cursor","linearGradient","cssText","outline","textAlign","fontWeight","textShadow","mismatch","flip","_flip","marginLeft","marginTop","toHexString","vendors","vendor","saveDialogContents","ControllerFactory","requestAnimationFrame$1","webkitRequestAnimationFrame","mozRequestAnimationFrame","oRequestAnimationFrame","msRequestAnimationFrame","CenteredDiv","backgroundElement","WebkitTransition","transition","body","hide","webkitTransform","layout","innerWidth","innerHeight","cssContent","indoc","doc","injected","head","getElementsByTagName","css","___$insertStyle","DEFAULT_DEFAULT_PRESET_NAME","SUPPORTS_LOCAL_STORAGE","localStorage","SAVE_DIALOGUE","autoPlaceVirgin","autoPlaceContainer","hideableGuis","GUI","__ul","__folders","__controllers","__rememberedObjects","__rememberedObjectIndecesToControllers","__listening","closeOnTop","autoPlace","DEFAULT_WIDTH","resizable","hideable","load","preset","scrollable","root","useLocalStorage","getItem","getLocalStorageHash","saveToLocalStorage","titleRow","getRoot","gui","__preset_select","setPresetSelectIndex","revert","setWidth","closed","CLASS_CLOSED","onResize","__closeButton","TEXT_OPEN","TEXT_CLOSED","setItem","CLASS_MAIN","savedGui","CLASS_CLOSE_BUTTON","CLASS_CLOSE_TOP","insertBefore","childNodes","CLASS_CLOSE_BOTTOM","titleRowName","createTextNode","addRow","CLASS_AUTO_PLACE_CONTAINER","CLASS_AUTO_PLACE","__resizeHandler","onResizeDebounced","addResizeHandle","getSaveObject","saveToLocalStorageIfPossible","newDom","liBefore","li","removeListeners","markPresetModified","modified","recallSavedValue","matchedIndex","controllerMap","remembered","presetMap","_add","factoryArgs","concat","before","__li","CLASS_CONTROLLER_ROW","__gui","_options","nextSibling","nextElementSibling","_nextSibling","_name","firstElementChild","listen","method","pc","pb","returned","oldName","wasListening","newController","borderLeftColor","isModified","augmentController","location","addPresetOption","setSelected","showHideExplain","explain","addSaveMenu","div","__save_row","firstChild","gears","button2","button3","select","getElementById","localStorageCheckBox","newConstructorTextArea","which","show","save","presetName","prompt","saveAs","pmouseX","drag","dragStop","CLASS_DRAG","dragStart","__resize_handle","getCurrentPreset","useInitialValues","savedValues","updateDisplays","controllerArray","toggleHide","CLASS_TOO_TALL","_keydownHandler","addColor","removeChild","subfolder","removeFolder","addFolder","newGuiParams","folders","folder","parentElement","open","close","node","offsetHeight","remember","GUI$1","Clock","autoStart","startTime","oldTime","elapsedTime","running","now","getElapsedTime","getDelta","newTime","performance","Date","OrthographicCamera","scaleW","scaleH","CopyShader","Pass","needsSwap","renderToScreen","FullScreenQuad","_mesh","ShaderPass","textureID","fsQuad","writeBuffer","readBuffer","MaskPass","inverse","writeValue","clearValue","REPLACE","ALWAYS","EQUAL","KEEP","ClearMaskPass","EffectComposer","_pixelRatio","getPixelRatio","_width","_height","renderTarget1","renderTarget2","passes","copyPass","clock","swapBuffers","addPass","pass","insertPass","removePass","isLastEnabledPass","passIndex","deltaTime","maskActive","NOTEQUAL","effectiveWidth","effectiveHeight","setPixelRatio","RenderPass","_oldClearColor","oldClearAlpha","oldOverrideMaterial","oldAutoClear","LuminosityHighPassShader","UnrealBloomPass","strength","renderTargetsHorizontal","renderTargetsVertical","nMips","resx","resy","renderTargetBright","renderTargetHorizonal","renderTargetVertical","highPassShader","highPassUniforms","materialHighPassFilter","separableBlurMaterials","kernelSizeArray","getSeperableBlurMaterial","compositeMaterial","getCompositeMaterial","bloomTintColors","copyShader","copyUniforms","materialCopy","inputRenderTarget","BlurDirectionX","BlurDirectionY","kernelRadius","AfterimageShader","AfterimagePass","textureComp","textureOld","shaderMaterial","compFsQuad","copyFsQuad","temp","Cache","files","file","DefaultLoadingManager","onLoad","onProgress","onError","urlModifier","isLoading","itemsLoaded","itemsTotal","handlers","onStart","itemStart","itemEnd","itemError","resolveURL","setURLModifier","addHandler","regex","loader","removeHandler","getHandler","global","Loader","manager","crossOrigin","withCredentials","resourcePath","requestHeader","loadAsync","Promise","resolve","reject","setCrossOrigin","setWithCredentials","setPath","setResourcePath","setRequestHeader","ImageLoader","onImageLoad","onImageError","substr","TextureLoader","isJPEG","search","Points","testPoint","localThresholdSq","rayPointDistanceSq","intersectPoint","distanceToRay","localThreshold","SETS","speed","partSize","noiseFreq","noiseAmp","parts","smooth","asp","rand","from","to","dat","querySelector","pointLight","sizes","composer","createCanvasElement","_context","_alpha","_depth","_stencil","_antialias","_premultipliedAlpha","_preserveDrawingBuffer","preserveDrawingBuffer","_powerPreference","powerPreference","_failIfMajorPerformanceCaveat","failIfMajorPerformanceCaveat","currentRenderList","currentRenderState","renderListStack","renderStateStack","sortObjects","toneMappingExposure","_isContextLost","_framebuffer","_currentActiveCubeFace","_currentActiveMipmapLevel","_currentRenderTarget","_currentFramebuffer","_currentMaterialId","_currentCamera","_currentViewport","_currentScissor","_currentScissorTest","_opaqueSort","_transparentSort","_scissor","_scissorTest","_clippingEnabled","_localClippingEnabled","_vector3","_emptyScene","getTargetPixelRatio","programCache","renderLists","morphtargets","bufferRenderer","indexedBufferRenderer","contextNames","contextAttributes","contextName","onContextLost","onContextRestore","isWebGL1Renderer","shift","message","initGLContext","onMaterialDispose","releaseMaterialProgramReference","deallocateMaterial","programInfo","forceContextLoss","loseContext","forceContextRestore","restoreContext","updateStyle","setViewport","getDrawingBufferSize","setDrawingBufferSize","getCurrentViewport","getScissor","setScissor","getScissorTest","boolean","setOpaqueSort","setTransparentSort","bits","renderBufferImmediate","hasPositions","hasNormals","hasUvs","hasColors","positionArray","normalArray","uvArray","colorArray","setProgram","rangeFactor","dataCount","rangeStart","rangeCount","drawStart","drawEnd","drawCount","isLineSegments","isLineLoop","isSprite","compile","compiled","material2","initMaterial","projectObject","isLOD","isImmediateRenderObject","renderObjects","camera2","renderObjectImmediate","lightsStateVersion","programCacheKey","programChange","needsLights","materialNeedsLights","progUniforms","uniformsList","refreshProgram","refreshMaterial","refreshLights","p_uniforms","m_uniforms","uCamPos","cameraPosition","boneTexture","boneMatrices","boneTextureSize","opaqueObjects","transparentObjects","layer","framebufferTextureLayer","readRenderTargetPixels","activeCubeFaceIndex","restore","textureFormat","halfFloatSupportedByExt","checkFramebufferStatus","readPixels","copyFramebufferToTexture","level","levelScale","copyTexImage2D","copyTextureToTexture","srcTexture","dstTexture","texSubImage2D","compressedTexSubImage2D","copyTextureToTexture3D","sourceBox","glTarget","unpackRowLen","unpackImageHeight","unpackSkipPixels","unpackSkipRows","unpackSkipImages","texSubImage3D","resetState","controls","renderScene","bloomStrength","bloomThreshold","bloomRadius","trails","bloomPass","afterimagePass","setAfterImageDamp","timer","restart","_now","elapsed","lastNow","realTime","onTick","MAX_COUNT","geo","SIZE","freq","amp","tCircle","lastParts","go","pause","toggleFullscreen","pointerLock","fullscreen","requestFullscreen","requestPointerLock","exitFullscreen","exitPointerLock","code","tick","fps","$el","append","ticksCount","setInterval","textContent"],"sourceRoot":""}